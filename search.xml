<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ™®é²æ–¯ç‰¹é—®å·-2020]]></title>
    <url>%2F2021%2F01%2F23%2FProustQA_2020%2F</url>
    <content type="text"><![CDATA[ğŸ•¯ğŸ•¯ğŸ•¯å‘åœ¨è¿™åœºç–«æƒ…ä¸­å»ä¸–çš„å¥‰çŒ®è€…ä»¬è‡´æ•¬ï¼ ä½ è®¤ä¸ºæœ€å®Œç¾çš„å¿«ä¹æ˜¯æ€æ ·çš„ï¼Ÿå†…å¿ƒçš„å¹³é™ï¼Œï¼Œä¸Šå‘¨æ—¥ï¼Œåœ¨æ™®å®ç¾ä½³ä¹ä¸€å±‚çš„å¤§å…äº†ï¼Œç­‰å¤§è±¡-çš„æ—¶å€™ï¼Œç™¾æ— èŠèµ–åœ¨æŒ‰æ‘©æ¤…ä¸Šä¼‘æ¯äº†15åˆ†é’Ÿã€‚æ•´ä¸ªäººèººåœ¨ä¸Šé¢ï¼Œå¤–é¢ç†™ç†™æ”˜æ”˜(éŸ³ä¹ç¾é£ŸèŠ‚ï¼ŒåŒæ—¶æœ‰å››å®¶åœ¨å–è‡­è±†è…â€¦)ï¼Œæˆ‘çœ‹ç€å¤©èŠ±æ¿ï¼Œå®Œå…¨æ”¾ç©ºäº†ã€‚æƒ³èµ·äº†å»å¹´å¤å¤©å»å¤–ä¼¶ä»ƒå²›ï¼Œè¿”ç¨‹ç­‰èˆ¹çš„æ—¶å€™ï¼Œåœ¨æ ‘è«ä¸‹çš„ä¸€å—è£¸çŸ³ä¸Šè¾¹ï¼Œç›˜è…¿è¿›å…¥å†¥æƒ³çŠ¶æ€ã€‚å¤§æŠµå°±æ˜¯è¿™ç§ã€æ²¡æœ‰æ„ä¹‰ã€çš„ä¸€åˆ»é’Ÿå§ã€‚ ä½ æœ€å¸Œæœ›æ‹¥æœ‰å“ªç§æ‰åï¼Ÿè¿˜æ˜¯å°†é—®é¢˜æŠ½è±¡æˆä»£ç çš„èƒ½åŠ›ã€‚ä»Šå¹´çªç„¶å‘ç°äº†ã€ç¨šæ™–å›ã€ï¼Œå¥½ç”Ÿç¾¡æ…•ã€‚ ä½ æœ€ææƒ§çš„æ˜¯ä»€ä¹ˆï¼Ÿå˜è€.. ä½ ç›®å‰çš„å¿ƒå¢ƒæ€æ ·ï¼Ÿæœ‰ç‚¹ç„¦è™‘ï¼Œï¼Œå…³äºå¹´é¾„ï¼Œå…³äºæœªæ¥ã€‚åšæ€»ç»“çš„æ—¶å€™æ€»æ˜¯ç„¦è™‘çš„ï¼Œä¸€å¹´ä¸€å¹´ï¼Œï¼Œä¸Šå‘¨äº”çš„æ—¶å€™ï¼Œåœ¨å…¬å¸åŠ ç­å†™ä»£ç ï¼Œå‘¨å©¶å„¿å‘èµ·è§†é¢‘ï¼Œè¿˜æœ‰å¤§æ¾ï¼Œå…‰å“¥æ²¡æ¥ã€‚æ²¡è¯´å‡ å¥ï¼Œæ¾çªç„¶æåˆ°ã€è…¿å„¿ï¼Œä½ ä¸‰åå•¦ï¼Ÿï¼ã€ï¼Œå‘¨å©¶å„¿è¯´ã€æ²¡äº‹å„¿ï¼Œä¸‰åå²ä¸€äº‹æ— æˆå¾ˆæ­£å¸¸ï¼Œå«‘ä¼¤å¿ƒå“ˆã€ï¼Œæ¥ç€å°±æ˜¯ä¸€é˜µåç¬‘ï¼Œ[æ‰¶é¢]ã€‚ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é’¦ä½©çš„æ˜¯è°ï¼Ÿå·¥ä½œä¸Šè¿˜æ˜¯ç¡…è°·é’¢é“ä¾ ï¼Œç”Ÿæ´»ä¸Šæ˜¯å†¯å” ä½ è®¤ä¸ºè‡ªå·±æœ€ä¼Ÿå¤§çš„æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿ(ä¸€å£°å¹æ¯..) ä½ è‡ªå·±çš„å“ªä¸ªç‰¹ç‚¹è®©ä½ æœ€è§‰å¾—ç—›æ¨ï¼Ÿè¿˜æ˜¯ä¸å¤Ÿè‡ªå¾‹.. ä½ æœ€å–œæ¬¢çš„æ—…è¡Œæ˜¯å“ªä¸€æ¬¡ï¼Ÿ2018å¹´ç«¯åˆèŠ‚çš„è‹å·ä¹‹æ—…ï¼Œï¼Œå‡†ç¡®æ¥è¯´æ˜¯å–œæ¬¢è‹å·ã€‚å»å¹´çš„åŒæœˆæ¹¾å’Œå¤–ä¼¶ä»ƒå²›ä¹Ÿä¸é”™ï¼Œå¦‚ä»Šæƒ³èµ·çš„éƒ½æ˜¯ç¾å¥½~ ä½ æœ€ç—›æ¨åˆ«äººçš„ä»€ä¹ˆç‰¹ç‚¹ï¼ŸåŒæ ‡ï¼Œå¦¥å¦¥åŒæ ‡ï¼ ä½ æœ€çæƒœçš„è´¢äº§æ˜¯ä»€ä¹ˆï¼Ÿä¸ªäººä¿¡ç”¨ ä½ æœ€å¥¢ä¾ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿçˆ¸å¦ˆæ˜¯å¦‚æ­¤çˆ±æˆ‘ï¼ˆæˆ‘çˆ¸åˆšå˜Ÿå™œç©è¯´ç™½å…»æˆ‘äº†ï¼Œçœ‹å¾—è§æ‘¸ä¸ç€æŒ‡ä¸ä¸Š[ç¬‘å“­]ï¼‰ ä½ è®¤ä¸ºç¨‹åº¦æœ€æµ…çš„ç—›è‹¦æ˜¯ä»€ä¹ˆï¼Ÿæµ…çš„éƒ½ä¸ç—›è‹¦ï¼Œç—›è‹¦éƒ½ä¸æµ… ä½ è®¤ä¸ºå“ªç§ç¾å¾·æ˜¯è¢«è¿‡é«˜çš„è¯„ä¼°çš„ï¼Ÿè¿™ä¸ªè¯é¢˜ä¸€ä¸¤å¥è¯´ä¸æ¸…æ¥šï¼Œï¼Œå®¹æ˜“å¼•æˆ˜ ä½ æœ€å–œæ¬¢çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿä¾ç„¶ç¨‹åºå‘˜(ä¸Šè¾¹æåˆ°çš„ã€ç¨šæ™–å›ã€ï¼Œå¥ˆæ–¯ï¼) ä½ å¯¹è‡ªå·±çš„å¤–è¡¨å“ªä¸€ç‚¹ä¸æ»¡æ„ï¼Ÿå³ä¸Šçœ¼çš®å¯ä¸å¯ä»¥ä¸è¦å†…åŒ ä½ æœ€åæ‚”çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿå¤§å­¦æ··æ²Œä¸”ä¸è‡ªçŸ¥ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é„™è§†çš„æ˜¯è°ï¼Ÿæ¯ä¸ªäººåº”è¯¥éƒ½ä¸æƒ³è¢«åˆ«äººé„™è§†çš„.. ä½ æœ€å–œæ¬¢ç”·æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿèƒ½ä¸ºè‡ªå·±è¯´è¿‡çš„è¯ã€åšè¿‡çš„äº‹è´Ÿè´£ ä½ ä½¿ç”¨è¿‡çš„æœ€å¤šçš„å•è¯æˆ–è€…æ˜¯è¯è¯­æ˜¯ä»€ä¹ˆï¼Ÿæœ¬å¹´åº¦æ˜¯ï¼Œï¼Œeasy, man~ï¼ˆæƒ³è¡¨è¾¾çš„æ˜¯ï¼ŒEasy tiger.ï¼‰ ä½ æœ€å–œæ¬¢å¥³æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿä¼šç…§é¡¾è‡ªå·±ï¼Œä¹Ÿä¼šç…§é¡¾åˆ«äºº ä½ æœ€ä¼¤ç—›çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå½¢åŒé™Œè·¯ ä½ æœ€çœ‹é‡æœ‹å‹çš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿé è°±å„¿ ä½ è¿™ä¸€ç”Ÿä¸­æœ€çˆ±çš„äººæˆ–ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿç°åœ¨å›ç­”è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æœ‰äº›æ—©ï¼Œï¼Œç°åœ¨å¸Œæœ›å¤§è±¡-èƒ½å¤Ÿå†èƒ–ä¸€ç‚¹ã€‚ ä½ å¸Œæœ›ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ­»å»ï¼Ÿå®‰ä¹æ­»ï¼Œæˆ–è€…ä¸€åœºçŒä¸åŠé˜²çš„æ„å¤– ä½•æ—¶ä½•åœ°è®©ä½ æ„Ÿè§‰åˆ°æœ€å¿«ä¹ï¼ŸGive Me Fiveï¼ï¼ï¼ å¦‚æœä½ å¯ä»¥æ”¹å˜ä½ çš„å®¶åº­ä¸€ä»¶äº‹ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿæ—©ç‚¹è®©æˆ‘çŸ¥é“ç”µè„‘ä¸å…‰å¯ä»¥ç©æ¸¸æˆ..å¤§å®¶èº«ä½“å¥åº·å°±å¥½ï¼Œåˆ«çš„ä¸å¥¢æ±‚ å¦‚æœä½ èƒ½é€‰æ‹©çš„è¯ï¼Œä½ å¸Œæœ›è®©ä»€ä¹ˆé‡ç°ï¼Ÿå°æˆ‘ï¼šæ—©ä¸Šè¢«æˆ‘çˆ¸çš„å½•éŸ³æœº(è£…ç£å¸¦çš„é‚£ä¸ª)å«é†’ï¼Œæˆ‘è¯¥èµ·åºŠåƒé¥­ä¸Šå­¦äº†ã€‚å¤§æˆ‘ï¼šå¤ªé˜³ç³»é‡å›ä¸‰ç»´å®‡å®™ã€‚ ä½ çš„åº§å³é“­æ˜¯ä»€ä¹ˆï¼Ÿç»å†è¿‡å°±æ˜¯è´¢å¯Œ Extra..2020å¹´è¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿï¼Ÿ ä»Šå¹´å’Œå¤§è±¡-åˆä¸€èµ·æˆé•¿äº†å¾ˆå¤šï¼Œæ…¢æ…¢æœ‰äº†å¤„ç†é—®é¢˜çš„é»˜å¥‘ã€‚ è¿™ä¸€å¹´ä½ éƒ½åšäº†äº›å•¥ï¼Ÿï¼Ÿ ç¦»èŒ-è¢«åŠ¨ç¦»å¼€é•¿äº®(å¤ªå·®äº†) å…¥èŒ-è¢«åŠ¨è¿›å…¥åšå½¦(æ¯”é•¿äº®å¥½å¤šäº†) åœ¨äº²å¯†å…³ç³»ä¸­æ„Ÿè§‰åˆ°äº†ç¨³å®šã€‚ å¹´åˆç–«æƒ…éš”ç¦»çš„æ—¶å€™å¥½å¥½å­¦ä¹ äº†ä¸‹Mysqlï¼Œæœ‰äº†æ›´æ·±çš„è®¤è¯†ï¼Œå¼€å§‹åœ¨ã€æå®¢æ—¶é—´ã€ä¹°è¯¾ç¨‹å­¦ä¹ ã€‚ ä¸»åŠ¨äº†è§£ä¿é™©ï¼Œå¤Ÿä¹°ä¿é™©ï¼Œå®‰åˆ©ä¿é™©ã€‚è´­ä¹°åŸºé‡‘è‚¡ç¥¨æ˜¯çœ‹å¤šï¼Œè´­ä¹°ä¿é™©æ˜¯çœ‹ç©º(åŠ æ æ†)ã€‚ å¹´ä¸­çš„é“¶å£¹é¡¹ç›®ä»å¤´è·Ÿåˆ°å°¾ï¼Œå¯¹ä¸šåŠ¡æœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œä¹Ÿç®—ä¸­æµç ¥æŸ±äº†ã€‚ä»£ä»·æ˜¯å·¥ä½œå˜çš„ç¹é‡ï¼Œç™½å¤©å¤„ç†ç”Ÿäº§æ—¶é—´ï¼Œæ™šä¸Šå†™ä»£ç ï¼Œå¹³å‡åˆ°å®¶æ—¶é—´22:00+ã€‚ æ˜å¹´æœ‰ä»€ä¹ˆå‡†å¤‡ï¼Ÿ å­¦å®Œã€Redisæ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜ã€ç›¸å…³è¯¾ç¨‹(çº¸è´¨å·¥å…·ä¹¦+æå®¢æ—¶é—´è¯¾ç¨‹)å­¦ä¹ å®Œï¼Œå¹¶æ€»ç»“ã€‚ å¤ä¹ ä¸‹ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€ å®Œæˆã€Redisæ·±åº¦å†é™©ã€çš„å­¦ä¹  å­¦ä¹ Guavaæºç  å­¦ä¹ openSDKã€‚ è¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„æ²¡ï¼Ÿï¼Ÿ åšæŒå­¦ä¹ ï¼ï¼ï¼ åšæŒæƒ…ç»ªç®¡ç†ï¼ï¼ï¼ åšæŒåœ¨äº²å¯†å…³ç³»ä¸­æˆé•¿ï¼ï¼ï¼ åšæŒã€åšæŒã€è¿™ä»¶äº‹ï¼ï¼ï¼]]></content>
      <categories>
        <category>ProustQA</category>
      </categories>
      <tags>
        <tag>æ™®é²æ–¯ç‰¹é—®å·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¤çŸ¥&èµšé’±]]></title>
    <url>%2F2020%2F01%2F05%2Fknowledge%26make-money%2F</url>
    <content type="text"><![CDATA[ä½ æ°¸è¿œèµšä¸åˆ° è¶…å‡ºä½ è®¤çŸ¥èŒƒå›´å¤–çš„é’± é™¤éä½ é è¿æ°” ä½†æ˜¯é è¿æ°”èµšåˆ°çš„é’± æœ€å¥½å¾€å¾€åˆä¼šé å®åŠ›äºæ‰ è¿™æ˜¯ä¸€ç§å¿…ç„¶ ä½ æ‰€èµšçš„æ¯ä¸€åˆ†é’± éƒ½æ˜¯ä½ å¯¹è¿™ä¸ªä¸–ç•Œçš„è®¤çŸ¥çš„å˜ç° ä½ æ‰€äºçš„æ¯ä¸€åˆ†é’± éƒ½æ˜¯å› ä¸ºå¯¹è¿™ä¸ªä¸–ç•Œè®¤çŸ¥æœ‰ç¼ºé™· è¿™ä¸ªä¸–ç•Œæœ€å¤§çš„å…¬å¹³åœ¨äº å½“ä¸€ä¸ªäººçš„è´¢å¯Œå¤§äºè‡ªå·±è®¤çŸ¥çš„æ—¶å€™ è¿™ä¸ªç¤¾ä¼šæœ‰100ç§æ–¹æ³•æ”¶å‰²ä½  ç›´åˆ°ä½ çš„è®¤çŸ¥å’Œè´¢å¯Œç›¸åŒ¹é…ä¸ºæ­¢]]></content>
      <categories>
        <category>æ‘˜</category>
      </categories>
      <tags>
        <tag>è®¤çŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ™®é²æ–¯ç‰¹é—®å·-2019]]></title>
    <url>%2F2020%2F01%2F01%2FProustQA_2019%2F</url>
    <content type="text"><![CDATA[ğŸ•¯ğŸ•¯ğŸ•¯ä»Šå¤©ç»™é˜¿å¦ˆæ‰“ç”µè¯çš„æ—¶å€™ï¼Œå¾—çŸ¥ä¸‰å¥¶å¥¶ä¹Ÿèµ°äº†ï¼Œä½ ä»¬è¦å¥½å¥½çš„ï¼Œäº’ç›¸ç…§é¡¾å–”ã€‚ ä½ è®¤ä¸ºæœ€å®Œç¾çš„å¿«ä¹æ˜¯æ€æ ·çš„ï¼Ÿå†…å¿ƒçš„å¹³é™ ä½ æœ€å¸Œæœ›æ‹¥æœ‰å“ªç§æ‰åï¼Ÿè¿˜æ˜¯å°†é—®é¢˜æŠ½è±¡æˆä»£ç çš„èƒ½åŠ› ä½ æœ€ææƒ§çš„æ˜¯ä»€ä¹ˆï¼Ÿå˜è€ ä½ ç›®å‰çš„å¿ƒå¢ƒæ€æ ·ï¼Ÿæœ‰ç‚¹ç„¦è™‘ï¼Œï¼Œå…³äºå¹´é¾„ï¼Œå…³äºæœªæ¥ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é’¦ä½©çš„æ˜¯è°ï¼Ÿå·¥ä½œä¸Šè¿˜æ˜¯ç¡…è°·é’¢é“ä¾ ï¼Œç”Ÿæ´»ä¸Šæ˜¯å†¯å” ä½ è®¤ä¸ºè‡ªå·±æœ€ä¼Ÿå¤§çš„æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿæœ¬æœŸæ‹’ç»å›ç­”ï¼Œï¼Œç«‹Flagï¼ ä½ è‡ªå·±çš„å“ªä¸ªç‰¹ç‚¹è®©ä½ æœ€è§‰å¾—ç—›æ¨ï¼Ÿè¿˜æ˜¯è¦æ›´è‡ªå¾‹ä¸€ç‚¹ï¼Œï¼Œè‡ªå¾‹å³è‡ªç”± ä½ æœ€å–œæ¬¢çš„æ—…è¡Œæ˜¯å“ªä¸€æ¬¡ï¼Ÿ2018å¹´ç«¯åˆèŠ‚çš„è‹å·ä¹‹æ—…ï¼Œï¼Œå‡†ç¡®æ¥è¯´æ˜¯å–œæ¬¢è‹å· ä½ æœ€ç—›æ¨åˆ«äººçš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿè¿™æ ·ä¸å¥½.. ä½ æœ€çæƒœçš„è´¢äº§æ˜¯ä»€ä¹ˆï¼Ÿä¸ªäººä¿¡ç”¨ ä½ æœ€å¥¢ä¾ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿçˆ¸å¦ˆæ˜¯å¦‚æ­¤çˆ±æˆ‘ ä½ è®¤ä¸ºç¨‹åº¦æœ€æµ…çš„ç—›è‹¦æ˜¯ä»€ä¹ˆï¼Ÿæµ…çš„éƒ½ä¸ç—›è‹¦ï¼Œç—›è‹¦éƒ½ä¸æµ… ä½ è®¤ä¸ºå“ªç§ç¾å¾·æ˜¯è¢«è¿‡é«˜çš„è¯„ä¼°çš„ï¼Ÿè¿™ä¸ªè¯é¢˜ä¸€ä¸¤å¥è¯´ä¸æ¸…æ¥šï¼Œï¼Œå®¹æ˜“å¼•æˆ˜ ä½ æœ€å–œæ¬¢çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿä¾ç„¶ç¨‹åºå‘˜ ä½ å¯¹è‡ªå·±çš„å¤–è¡¨å“ªä¸€ç‚¹ä¸æ»¡æ„ï¼Ÿå³ä¸Šçœ¼çš®å¯ä¸å¯ä»¥ä¸è¦å†…åŒ ä½ æœ€åæ‚”çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿå¤§å­¦æ··æ²Œä¸”ä¸è‡ªçŸ¥ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é„™è§†çš„æ˜¯è°ï¼Ÿæ— æ³•æ§åˆ¶è‡ªå·±æƒ…ç»ªçš„äºº ä½ æœ€å–œæ¬¢ç”·æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿèƒ½ä¸ºè‡ªå·±è¯´è¿‡çš„è¯ã€åšè¿‡çš„äº‹è´Ÿè´£ ä½ ä½¿ç”¨è¿‡çš„æœ€å¤šçš„å•è¯æˆ–è€…æ˜¯è¯è¯­æ˜¯ä»€ä¹ˆï¼Ÿæœ¬å¹´åº¦æ˜¯ï¼Œï¼ŒåŒä¸€ä¸ªä¸–ç•Œï¼ŒåŒä¸€ä¸ªæ¢¦æƒ³ï¼ˆå¤§å®¶éƒ½æ˜¯åŒäº‹ï¼Œéƒ½æƒ³æŠŠäº‹æƒ…åšå¥½ï¼‰ ä½ æœ€å–œæ¬¢å¥³æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿä¼šç…§é¡¾è‡ªå·±ï¼Œä¹Ÿä¼šç…§é¡¾åˆ«äºº ä½ æœ€ä¼¤ç—›çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå½¢åŒé™Œè·¯ ä½ æœ€çœ‹é‡æœ‹å‹çš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿé è°±å„¿ ä½ è¿™ä¸€ç”Ÿä¸­æœ€çˆ±çš„äººæˆ–ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿ28å²å›ç­”è¿™ä¸ªé—®é¢˜æœ‰äº›æ—©ï¼Œï¼Œç°åœ¨æˆ‘å¸Œæœ›è‡ªå·±æœ‰é•¿æœŸç¨³å®šçš„ä½æ‰€ï¼Œå¯ä»¥æ— æ‰€é¡¾å¿Œçš„ä¹°ä¹¦ï¼Œçº¸è´¨çš„ã€‚ ä½ å¸Œæœ›ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ­»å»ï¼Ÿå®‰ä¹æ­»ï¼Œæˆ–è€…ä¸€åœºçŒä¸åŠé˜²çš„æ„å¤– ä½•æ—¶ä½•åœ°è®©ä½ æ„Ÿè§‰åˆ°æœ€å¿«ä¹ï¼ŸGive Me Fiveï¼ï¼ï¼ å¦‚æœä½ å¯ä»¥æ”¹å˜ä½ çš„å®¶åº­ä¸€ä»¶äº‹ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿæ—©ç‚¹è®©æˆ‘çŸ¥é“ç”µè„‘ä¸å…‰å¯ä»¥ç©æ¸¸æˆ..å¤§å®¶èº«ä½“å¥åº·å°±å¥½ï¼Œåˆ«çš„çœŸä¸å¥¢æ±‚ å¦‚æœä½ èƒ½é€‰æ‹©çš„è¯ï¼Œä½ å¸Œæœ›è®©ä»€ä¹ˆé‡ç°ï¼Ÿå°æˆ‘ï¼šæ—©ä¸Šè¢«æˆ‘çˆ¸çš„å½•éŸ³æœº(è£…ç£å¸¦çš„é‚£ä¸ª)å«é†’ï¼Œæˆ‘è¯¥èµ·åºŠåƒé¥­ä¸Šå­¦äº†ã€‚å¤§æˆ‘ï¼šå¤ªé˜³ç³»é‡å›ä¸‰ç»´å®‡å®™ã€‚ ä½ çš„åº§å³é“­æ˜¯ä»€ä¹ˆï¼Ÿæ€»ä¹‹ï¼Œç»å†è¿‡å°±æ˜¯è´¢å¯Œ Extra..2019å¹´è¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿï¼Ÿ ã€æ±‚ç¨³ã€ï¼Œï¼Œåœ¨å®Œå…¨é™Œç”Ÿçš„åŸå¸‚æ‰¾åˆ°å½’å±æ„Ÿ åœ¨å¤„ç†äº²å¯†å…³ç³»ä¸­æˆé•¿äº†è®¸å¤šè®¸å¤šï¼Œæ„Ÿè°¢å¤§è±¡ è¿™ä¸€å¹´ä½ éƒ½åšäº†äº›å•¥ï¼Ÿï¼Ÿ ç¦»èŒ å…¥èŒ åœ¨ä¸€æ®µæ–°çš„äº²å¯†å…³ç³»ä¸­æˆé•¿ æ˜å¹´æœ‰ä»€ä¹ˆå‡†å¤‡ï¼Ÿ æŠŠã€é«˜æ€§èƒ½MySqlã€ç›¸å…³è¯¾ç¨‹(çº¸è´¨å·¥å…·ä¹¦+æå®¢æ—¶é—´è¯¾ç¨‹)å­¦ä¹ å®Œï¼Œå¹¶æ€»ç»“ã€‚ å¤ä¹ ä¸‹ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€ å®Œæˆã€Redisæ·±åº¦å†é™©ã€çš„å­¦ä¹  å­¦ä¹ Guavaæºç  è¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„æ²¡ï¼Ÿï¼Ÿ åšæŒå­¦ä¹ ï¼ï¼ï¼ åšæŒæƒ…ç»ªç®¡ç†ï¼ï¼ï¼ åšæŒåœ¨äº²å¯†å…³ç³»ä¸­æˆé•¿ï¼ï¼ï¼ åšæŒã€åšæŒã€è¿™ä»¶å°äº‹ï¼ï¼ï¼]]></content>
      <categories>
        <category>ProustQA</category>
      </categories>
      <tags>
        <tag>æ™®é²æ–¯ç‰¹é—®å·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äººç”Ÿçš„æ„ä¹‰ä¸è‡ªç”±æ„å¿—]]></title>
    <url>%2F2019%2F08%2F31%2FFate%26FreeWill%2F</url>
    <content type="text"><![CDATA[Contextä¸Šå‘¨å…­çœ‹ã€å¯„ç”Ÿè™«ã€çš„æ—¶å€™ï¼Œæœ‰ä¸ªç‰‡æ®µï¼Œï¼Œä¸‹æš´é›¨çš„æ—¶å€™ï¼Œç”·ä¸»ä¸€å®¶äººå±…ä½çš„åŠåœ°ä¸‹å®¤è¢«æ°´æ·¹ä¹‹åï¼Œçˆ¶å­ä¿©å’Œå—ç¾ç¾¤ä¼—å»ä½“è‚²é¦†è¿‡å¤œçš„æ—¶çš„å¯¹è¯ğŸ‘‡ è™½ç„¶å…³äºè®¡åˆ’çš„é€»è¾‘æç«¯äº†äº›ï¼Œï¼Œä½†åœ¨é‚£ä¸€éœé‚£æˆ‘è¿˜æ˜¯è¢«å‡»ä¸­äº†ï¼çªç„¶æ„è¯†åˆ°äººç”Ÿçš„æ„ä¹‰å’Œæ‰€è°“è‡ªç”±æ„å¿—æ ¹æœ¬æ˜¯ä¸¤ä¸ªäº’æ–¥çš„ä¸œè¥¿ï¼ï¼ äººç”Ÿçš„æ„ä¹‰äººç”Ÿçš„æ„ä¹‰è¢«å®šä¹‰ä¹‹åä¹Ÿå¥½ä¼¼æ˜¯å…¶ä¸­ä¸€ç§è®¡åˆ’ï¼Œï¼Œè¿™ä¸ªè®¡åˆ’å®šä¹‰äº†æˆ‘ä»¬å¯¹ç”Ÿå‘½çš„ç»ˆæç›®æ ‡ï¼Œå®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬çš„äººç”Ÿä¾¿æ˜¯æœ‰æ„ä¹‰çš„ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ç›¸ä¿¡æ¯ä¸ªäººåœ¨å‡ºç”Ÿçš„æ—¶å€™æ˜¯ä¸å­˜åœ¨è¿™æ ·ç›®æ ‡çš„ï¼Œæˆ–è€…è¯´äººç”Ÿçš„æ„ä¹‰ã€‚ä½ çš„äººç”Ÿå¯æ˜¯æ‰åˆšå¼€å§‹å‘€ï¼Œæ€ä¹ˆä¼šæœ‰é‚£äº›æ¡æ¡æ¡†æ¡†ã€‚ (å²å²å¿µä¸€å¥ï¼Œï¼Œå€˜è‹¥çœŸæœ‰å®¿å‘½å­˜åœ¨ï¼Œé‚£æˆ‘çš„å®¿å‘½å’Œä½ çš„å®¿å‘½æœ‰å†²çªå¯æ€ä¹ˆåŠï¼Ÿåƒµç€ï¼Ÿå®¿å‘½ä¹‹æ‰€ä»¥æ˜¯å®¿å‘½å°±æ˜¯å¾—å®Œæˆå•Šï¼Œåƒµç€ç®—æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼›æ—¢ç„¶ä¸èƒ½åƒµç€ï¼Œé‚£è‚¯å®šæœ‰ä¸€æ–¹çš„å®¿å‘½å®Œæˆä¸äº†ï¼Œé‚£è¿˜ç®—å®¿å‘½ä¹ˆï¼›OKï¼Œé‚£åˆæœ‰äººè¯´äº†ï¼Œæˆ‘çš„å®¿å‘½ä¼˜å…ˆçº§æ¯”ä½ çš„é«˜ï¼Œæ‰€ä»¥ America First ï¼æˆ‘å»ä½ å¤§çˆ·ï¼ï¼) äºæ˜¯ï¼Œæˆ‘ä»¬åæ¥ç”±æœ¬æˆ‘ï¼Œç»å†äº†è‡ªç”±ï¼Œå¯èƒ½è¿˜æœ‰è¶…æˆ‘ã€‚åœ¨æ— æ‰€äº‹äº‹çš„æ—¶å€™ï¼Œéš¾å…ä¼šæƒ³èµ·æˆ‘ä»¬å­˜åœ¨çš„ç›®çš„ï¼Œå°±åƒæˆ‘ä»¬éš¾å…ä¼šè®¤ä¸ºè‡ªå·±æ˜¯å¤©é€‰ä¹‹äººï¼Œï¼Œ(ç¥è®©)[^1]æˆ‘æ¥åˆ°ä¸–ä¸Šï¼Œå¤©é™å¤§ä»»ï¼Œæ€»å¾—å›¾ç‚¹å•¥å§ï¼Ÿå¦‚æœè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬çš„è‡ªç”±æ„å¿—å°†è‡³äºä½•åœ°ï¼Ÿï¼åˆæ˜¯å”¯å¿ƒä¸»ä¹‰åœ¨ä½œæ€ªï¼ã€è‡ªç§çš„åŸºå› ã€ä¹Ÿæåˆ°äº†ï¼š æˆ‘ä»¬éƒ½æ˜¯ç”Ÿå­˜æœºå™¨â€“ä½œä¸ºè½½è¿å·¥å…·çš„æœºå™¨äººï¼Œå…¶ç¨‹åºæ˜¯ç›²ç›®ç¼–åˆ¶çš„ï¼Œä¸ºçš„æ˜¯æ°¸ä¹…ä¿å­˜æ‰€è°“åŸºå› è¿™ç§ç¦€æ€§è‡ªç§çš„åˆ†å­ã€‚ è¯´ç™½äº†ï¼Œæˆ‘ä»¬äººç”Ÿçš„æ„ä¹‰å°±æ˜¯ç”Ÿå­©å­ï¼Œï¼Œè¿˜å¾—å°½å¯èƒ½çš„å¤šç”Ÿï¼Œè¿™æ ·æ‰èƒ½æ‰©å¤§è‡ªå·±çš„åŸºå› åœ¨æ•´ä¸ªåŸºå› åº“ä¸­çš„ä»½é¢ã€‚è¿™ä¸å…‰æ˜¯æˆ‘ä»¬äººç±»ç”Ÿæ´»çš„æ„ä¹‰ï¼Œä¹Ÿæ˜¯æ•´ä¸ªç”Ÿç‰©åœˆä¸­ä½œä¸ºä¸ªä½“å­˜åœ¨çš„æ„ä¹‰ã€‚å¤ªè¿‡èµ¤è£¸è£¸ï¼Œä½†æˆ‘è¿˜æ˜¯æ¥å—äº†ï¼Œè€Œä¸”æ¬£ç„¶æ¥å—ã€‚æ¥å—çš„å¹¶éæ˜¯ï¼Œæˆ‘æ­¤ç”Ÿçš„ä¸€å®šè¦å¤šç”Ÿå¨ƒå¤šä¸‹å´½å„¿ï¼Œï¼Œè€Œæ˜¯æˆ‘ä»¬çš„äººç”Ÿæ²¡æœ‰æ„ä¹‰ï¼Œæˆ‘æ‹’ç»æˆä¸ºåŸºå› çš„è¿è½½å·¥å…·ï¼Œæ‹’ç»å½»åº•æ²¦ä¸ºä¸‹åŠèº«åŠ¨ç‰©ã€‚ è‡ªç”±æ„å¿—ã€å‘½è¿çš„å®‰æ’ã€è¿™ç§ä¸œè¥¿ä¸å¯ä»¥å­˜åœ¨äºæˆ‘çš„ç”Ÿå‘½ä¸­ï¼Œæ ¹æœ¬ä¸åº”è¯¥å­˜åœ¨ã€‚æˆ‘æ·±åˆ»åœ°ç›¸ä¿¡ï¼Œæˆ‘æ‰€åšçš„ä¸€åˆ‡éƒ½æ˜¯ç”±æˆ‘è‡ªå·±é€‰æ‹©çš„ï¼Œï¼Œè‡ªç”±æ„å¿—è¿™ç§ä¸œè¥¿å®åœ¨å¤ªè¿‡é‡è¦ã€‚å…³äºè‡ªç”±æ„å¿—ï¼Œæˆ‘ä»¬æ‹¥æœ‰çš„ä¹Ÿå¹¶éå®Œå…¨çš„è‡ªç”±æ„å¿—ï¼Œï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è‚‰ä½“ï¼Œè‚‰ä½“ä¹‹å†…ï¼Œé‚£äº›çº¯ç”Ÿç†çš„ç—…ç†çš„ã€‚ç»†æ€ææï¼Œï¼Œè†è·³ååº”å±…ç„¶æ˜¯æ˜¯æˆ‘ä»¬è‡ªå·±ä¸èƒ½æ§åˆ¶çš„ã€‚ã€‚å†å¾®è§‚ä¸€äº›ï¼Œæˆ‘ä»¬å¿ƒè„çš„è·³åŠ¨ä¹Ÿä¸å—æˆ‘ä»¬æ„å¿—çš„å·¦å³ã€‚ä½†ï¼Œä¹Ÿè¿˜å¥½ï¼Œï¼Œå€˜è‹¥å¿ƒè„æ€æ ·è·³åŠ¨ï¼Œç¥ç»æ€æ ·æ„Ÿå—ï¼Œè¡€æ¶²æ€æ ·æµæ·Œæˆ‘ä»¬éƒ½éœ€è¦æ“å¿ƒçš„è¯ï¼Œé‚£å¤§è„‘çš„ç®—åŠ›è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œï¼Œå¹²è„†å½¢æˆä¸€å¥—èŒƒå¼ä¹Ÿå¥½~ æ„¿çˆ±æ— å¿§æ‰€ä»¥ï¼Œï¼Œå†¯å”æ‰€è¨€ææ˜¯ï¼š åšäººç¬¬ä¸€åŸåˆ™ï¼Œè‡ªå·±çš„äº‹æƒ…è‡ªå·±åšï¼›ç¬¬äºŒåŸåˆ™ï¼Œä¸ç»™åˆ«äººæ·»ä¸å¿…è¦çš„éº»çƒ¦ã€‚ æ„¿ä¸–ç•Œå’Œå¹³ï¼ [^1]: ç¥ï¼šè¶…è¶Šäººç±»è®¤çŸ¥çš„ä¸€ç§å­˜åœ¨ï¼Œæ— æ‰€è°“ç‰å¸ ä½›ç¥– ä¸Šå¸ çœŸä¸»ã€‚]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™]]></title>
    <url>%2F2019%2F08%2F03%2FMonitor-The_Universal_Key_of_Concurrent_Programming%2F</url>
    <content type="text"><![CDATA[èŠ‚é€‰è‡ª ç‹å®ä»¤-Javaå˜æ³•ç¼–ç¨‹å®æˆ˜ï¼Œæ¬¢è¿å¤§å®¶è®¢é˜…~ ä»€ä¹ˆæ˜¯ç®¡ç¨‹ä¸çŸ¥é“ä½ æ˜¯å¦æ›¾ç»æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆ Java åœ¨ 1.5 ä¹‹å‰ä»…ä»…æä¾›äº† synchronized å…³é”®å­—åŠ wait()ã€notify()ã€notifyAll() è¿™ä¸‰ä¸ªçœ‹ä¼¼ä»å¤©è€Œé™çš„æ–¹æ³•ï¼Ÿåœ¨åˆšåˆšæ¥è§¦ Java çš„æ—¶å€™ï¼Œæˆ‘ä»¥ä¸ºå®ƒä¼šæä¾›æ–°æ¿ æ¢è¿™ç§ç¼–ç¨‹åŸè¯­ï¼Œå› ä¸ºæ“ä½œç³»ç»ŸåŸç†è¯¾ç¨‹å‘Šè¯‰æˆ‘ï¼Œç”¨ä¿¡å·é‡èƒ½è§£å†³æ‰€æœ‰å¹¶å‘é—®é¢˜ï¼Œç»“æœæˆ‘å‘ç°ä¸æ˜¯ã€‚åæ¥æˆ‘æ‰¾åˆ°äº†åŸå› ï¼šJava é‡‡ç”¨çš„æ˜¯ç®¡ç¨‹æŠ€æœ¯ï¼Œsynchronized å…³é”®å­—åŠ wait()ã€notify()ã€notifyAll() è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç®¡ç¨‹çš„ç»„æˆéƒ¨åˆ†ã€‚è€Œç®¡ç¨‹å’Œä¿¡å·é‡æ˜¯ç­‰ä»·çš„ï¼Œæ‰€è°“ç­‰ä»·æŒ‡çš„æ˜¯ç”¨ç®¡ç¨‹èƒ½å¤Ÿå®ç°ä¿¡å·é‡ï¼Œä¹Ÿèƒ½ç”¨ä¿¡å·é‡å®ç°ç®¡ç¨‹ã€‚ä½†æ˜¯ç®¡ç¨‹æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæ‰€ä»¥ Java é€‰æ‹©äº†ç®¡ç¨‹ã€‚ ç®¡ç¨‹ï¼Œå¯¹åº”çš„è‹±æ–‡æ˜¯ Monitorï¼Œå¾ˆå¤š Java é¢†åŸŸçš„åŒå­¦éƒ½å–œæ¬¢å°†å…¶ç¿»è¯‘æˆâ€œç›‘è§†å™¨â€ï¼Œè¿™æ˜¯ç›´è¯‘ã€‚æ“ä½œç³»ç»Ÿé¢†åŸŸä¸€èˆ¬éƒ½ç¿»è¯‘æˆâ€œç®¡ç¨‹â€ï¼Œè¿™ä¸ªæ˜¯æ„è¯‘ï¼Œè€Œæˆ‘è‡ªå·±ä¹Ÿæ›´å€¾å‘äºä½¿ç”¨â€œç®¡ç¨‹â€ã€‚ æ‰€è°“ç®¡ç¨‹ï¼ŒæŒ‡çš„æ˜¯ç®¡ç†å…±äº«å˜é‡ä»¥åŠå¯¹å…±äº«å˜é‡çš„æ“ä½œè¿‡ç¨‹ï¼Œè®©ä»–ä»¬æ”¯æŒå¹¶å‘ã€‚ç¿»è¯‘ä¸º Java é¢†åŸŸçš„è¯­è¨€ï¼Œå°±æ˜¯ç®¡ç†ç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ï¼Œè®©è¿™ä¸ªç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚é‚£ç®¡ç¨‹æ˜¯æ€ä¹ˆç®¡çš„å‘¢ï¼Ÿ MESAæ¨¡å‹åœ¨ç®¡ç¨‹çš„å‘å±•å²ä¸Šï¼Œå…ˆåå‡ºç°è¿‡ä¸‰ç§ä¸åŒçš„ç®¡ç¨‹æ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯ï¼šHasenæ¨¡å‹ã€Hoareæ¨¡å‹å’Œ MESA æ¨¡å‹ã€‚å…¶ä¸­ï¼Œç°åœ¨å¹¿æ³›åº”ç”¨çš„æ˜¯ MESA æ¨¡å‹ï¼Œå¹¶ä¸” Java ç®¡ç¨‹çš„å®ç°ä¹Ÿæ˜¯å‚è€ƒ MESA æ¨¡å‹ã€‚æ‰€ä»¥ä»Šå¤©æˆ‘ä»¬é‡ç‚¹ä»‹ç»ä¸€ä¸‹ MESA æ¨¡å‹ã€‚ åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸï¼Œæœ‰ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ï¼šä¸€ä¸ªæ˜¯äº’æ–¥ï¼Œå³åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºï¼›å¦ä¸€ä¸ªæ˜¯åŒæ­¥ï¼Œå³çº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ã€åä½œã€‚è¿™ä¸¤å¤§é—®é¢˜ï¼Œç®¡ç¨‹éƒ½æ˜¯èƒ½è´­è§£å†³çš„ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç®¡ç¨‹æ˜¯å¦‚ä½•è§£å†³äº’æ–¥é—®é¢˜çš„ã€‚ ç®¡ç¨‹è§£å†³äº’æ–¥é—®é¢˜çš„æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯å°†å…±äº«å˜é‡åŠå…¶å¯¹å…±äº«å˜é‡çš„æ“ä½œç»Ÿä¸€å°è£…èµ·æ¥ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œç®¡ç¨‹ X å°†å…±äº«å˜é‡ queue è¿™ä¸ªé˜Ÿåˆ—å’Œç›¸å…³çš„æ“ä½œå…¥é˜Ÿ enq()ã€å‡ºé˜Ÿ deq() éƒ½å°è½¬èµ·æ¥äº†ï¼›çº¿ç¨‹ A å’Œçº¿ç¨‹ B å¦‚æœæƒ³è®¿é—®å…±äº«å˜é‡ queueï¼Œåªèƒ½é€šè¿‡è°ƒç”¨ç®¡ç¨‹æä¾›çš„ enq() ã€deq() æ–¹æ³•æ¥å®ç°ï¼›enq() ã€deq() ä¿è¯äº’æ–¥æ€§ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ç®¡ç¨‹ã€‚ä¸çŸ¥ä½ ä¸æ²¡æœ‰å‘ç°ï¼Œç®¡ç¨‹æ¨¡å‹å’Œé¢å‘å¯¹è±¡æ˜¯é«˜åº¦å¥‘åˆçš„ã€‚ä¼°è®¡è¿™ä¹Ÿæ˜¯ Java é€‰æ‹©ç®¡ç¨‹çš„åŸå› å§ã€‚ é‚£ç®¡ç¨‹æ˜¯å¦‚ä½•è§£å†³çº¿ç¨‹é—´çš„åŒæ­¥é—®é¢˜å‘¢ï¼Ÿ è¿™ä¸ªå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œä¸è¿‡ä½ å¯ä»¥å€Ÿé‰´ä¸€ä¸‹æˆ‘ä»¬æ›¾ç»æåˆ°è¿‡çš„å°±å·²æµç¨‹ï¼Œå®ƒå¯ä»¥å¸®ä½ å¿«é€Ÿåœ°ç†è§£è¿™ä¸ªé—®é¢˜ã€‚ä¸ºè¿›ä¸€æ­¥ä¾¿äºä½ ç†è§£ï¼Œåœ¨ä¸‹é¢ğŸ‘‡ï¼Œæˆ‘å±•ç¤ºäº†ä¸€å‰¯ MESA çš„ç®¡ç¨‹æ¨¡å‹ç¤ºæ„å›¾ï¼Œå®ƒè¯¦ç»†çš„æè¿°äº† MESA æ¨¡å‹çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚ åœ¨ç®¡ç¨‹æ¨¡å‹é‡Œï¼Œå…±äº«å˜é‡å’Œå¯¹å…±äº«å˜é‡çš„æ“ä½œæ˜¯è¢«å°è£…èµ·æ¥çš„ï¼ŒğŸ‘†å›¾ä¸­æœ€å¤–å±‚çš„æ¡†å°±ä»£è¡¨å°è£…çš„æ„æ€ã€‚æ¡†çš„ä¸Šé¢åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œå¹¶ä¸”åœ¨å…¥å£æ—è¾¹è¿˜æœ‰ä¸€ä¸ªå…¥å£ç­‰å¾…é˜Ÿåˆ—ã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ç®¡ç¨‹å†…éƒ¨æ—¶ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œå…¶ä»–çº¿ç¨‹åˆ™åœ¨å…¥å£ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼å°±åŒ»æµç¨‹çš„åˆ†è¯Šï¼Œåªå…è®¸ä¸€ä¸ªæ‚£è€…å°±è¯Šï¼Œå…¶ä»–æ‚£è€…åœ¨é—¨å£ç­‰å¾…ã€‚ ç®¡ç¨‹é‡Œè¿˜å¼•å…¥äº†æ¡ä»¶å˜é‡çš„æ¦‚å¿µï¼Œè€Œä¸”æ¯ä¸ªæ¡ä»¶å˜é‡éƒ½å¯¹åº”æœ‰ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œæ¡ä»¶å˜é‡ A å’Œæ¡ä»¶å˜é‡ B åˆ†åˆ«éƒ½æœ‰è‡ªå·±çš„ç­‰å¾…é˜Ÿåˆ—ã€‚æ¡ä»¶å˜é‡å’Œç­‰å¾…é˜Ÿåˆ—çš„ä½œç”¨å…¶å®å°±æ˜¯è§£å†³çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚ä½ ä¹Ÿå¯ä»¥ç»“åˆä¸Šé¢æåˆ°çš„å…¥é˜Ÿå‡ºé˜Ÿä¾‹å­åŠ æ·±ä¸€ä¸‹ç†è§£ã€‚ å‡è®¾æœ‰ä¸ªçº¿ç¨‹ T1 æ‰§è¡Œå‡ºé˜Ÿæ“ä½œï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯æ‰§è¡Œå‡ºé˜Ÿæ“ä½œï¼Œæœ‰ä¸ªå‰ææ¡ä»¶ï¼Œå°±æ˜¯é˜Ÿåˆ—ä¸èƒ½æ˜¯ç©ºçš„ï¼Œè€Œé˜Ÿåˆ—ä¸ä¸ºç©ºè¿™ä¸ªå‰ææ¡ä»¶å°±æ˜¯ç®¡ç¨‹çš„æ¡ä»¶å˜é‡ã€‚å¦‚æœçº¿ç¨‹ T1è¿›å…¥ç®¡ç¨‹åæ°å¥½å‘ç°é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œé‚£å°±åªèƒ½å»â€œé˜Ÿåˆ—ä¸ä¸ºç©ºâ€è¿™ä¸ªæ¡ä»¶å˜é‡é˜Ÿåˆ—é‡Œç­‰å¾…äº†ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼å¤§å¤«ç»™ä½ å¼€äº†å•å­è®©ä½ å»éªŒè¡€ï¼Œä½ å°±å»éªŒè¡€çª—å£æ’é˜Ÿå»äº†ã€‚çº¿ç¨‹ T1 è¿›å…¥æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—åï¼Œæ˜¯å…è®¸å…¶ä»–çº¿ç¨‹è¿›å…¥ç®¡ç¨‹çš„ã€‚è¿™ä¸ªä½ å»éªŒè¡€çš„æ—¶å€™ï¼ŒåŒ»ç”Ÿå¯ä»¥ç»™å…¶ä»–æ‚£è€…è¯Šæ²»ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ã€‚ å†å‡è®¾ä¹‹åå¦å¤–ä¸€ä¸ªçº¿ç¨‹ T2æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼Œå…¥é˜Ÿæ“ä½œæ‰§è¡ŒæˆåŠŸä¹‹åï¼Œâ€œé˜Ÿåˆ—ä¸ä¸ºç©ºâ€è¿™ä¸ªæ¡ä»¶å¯¹äºçº¿ç¨‹ T1æ¥è¯´å·²ç»æ»¡è¶³äº†ï¼Œæ­¤æ—¶çº¿ç¨‹ T2è¦é€šçŸ¥T1ï¼Œå‘Šè¯‰å®ƒéœ€è¦çš„æ¡ä»¶å·²ç»æ»¡è¶³äº†ã€‚å½“çº¿ç¨‹ T1å¾—åˆ°é€šçŸ¥åï¼Œä¼šä»ç­‰å¾…é˜Ÿåˆ—é‡Œé¢å‡ºæ¥ï¼Œä½†æ˜¯å‡ºæ¥åä¸æ˜¯é©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯é‡æ–°è¿›å…¥åˆ°å…¥å£ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼ä½ éªŒè¡€å›æ¥æ‰¾å¤§å¤«ï¼Œéœ€è¦é‡æ–°åˆ†è¯Šæ’é˜Ÿã€‚ æ¡ä»¶å˜é‡åŠå…¶ç­‰å¾…é˜Ÿåˆ—æˆ‘ä»¬è®²æ¸…æ¥šäº†ï¼Œä¸‹é¢å†è¯´è¯´ wait()ã€notigy()ã€notifyAll()è¿™ä¸‰ä¸ªæ“ä½œã€‚å‰é¢æåˆ°çº¿ç¨‹ T1å‘ç°â€œé˜Ÿåˆ—ä¸ä¸ºç©ºâ€è¿™ä¸ªæ¡ä»¶ä¸æ»¡è¶³ï¼Œéœ€è¦è¿›åˆ°å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—é‡Œç­‰å¾…ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é€šè¿‡è°ƒç”¨wait()æ¥å®ç°çš„ã€‚å¦‚æœæˆ‘ä»¬ç”¨å¯¹è±¡ A ä»£è¡¨â€œé˜Ÿåˆ—ä¸ä¸ºç©ºâ€è¿™ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆçº¿ç¨‹ T1éœ€è¦è°ƒç”¨ A.wait() ã€‚åŒç†å½“â€œé˜Ÿåˆ—ä¸ä¸ºç©ºâ€è¿™ä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹ T2éœ€è¦è°ƒç”¨ A.notify()æ¥é€šçŸ¥ A ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶è¿™ä¸ªé˜Ÿåˆ—é‡Œé¢åªæœ‰çº¿ç¨‹ T1ã€‚è‡³äº notigAll()è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒå¯ä»¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹ã€‚ è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯æ¥ä¸€æ®µä»£ç å†æ¬¡è¯´æ˜ä¸€ä¸‹å§ã€‚ä¸‹é¢çš„ä»£ç å®ç°çš„æ˜¯ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—æœ‰ä¸¤ä¸ªæ“ä½œåˆ†åˆ«æ˜¯å…¥é˜Ÿå’Œå‡ºé˜Ÿï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å…ˆäº’ç›¸è·å–äº’æ–¥é”ï¼Œç±»æ¯”ç®¡ç¨‹æ¨¡å‹ä¸­çš„å…¥å£ã€‚ å¯¹äºå…¥é˜Ÿæ“ä½œï¼Œï¼Œå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå°±éœ€è¦ç­‰å¾…ç›´åˆ°é˜Ÿåˆ—ä¸æ»¡ï¼Œæ‰€ä»¥è¿™é‡Œç”¨äº†notFull.await(); å¯¹äºå‡ºé˜Ÿæ“ä½œï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå°±éœ€è¦ç­‰å¾…ç›´åˆ°é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œæ‰€ä»¥å°±ç”¨äº†notEmpty.await(); å¦‚æœå…¥é˜ŸæˆåŠŸï¼Œæ‰€ä»¥é˜Ÿåˆ—å°±ä¸ä¸ºç©ºäº†ï¼Œå°±éœ€è¦é€šçŸ¥æ¡ä»¶å˜é‡ï¼šé˜Ÿåˆ—ä¸ä¸ºç©º notEmpty å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—ã€‚ å¦‚æœå‡ºé˜ŸæˆåŠŸï¼Œé‚£é˜Ÿåˆ—å°±ä¸æ»¡äº†ï¼Œå°±éœ€è¦é€šçŸ¥æ¡ä»¶å˜é‡ï¼šé˜Ÿåˆ—ä¸æ»¡ notFull å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738public class BlockQueue&lt;T&gt;&#123; final Lock lock = new ReentrantLock(); // æ¡ä»¶å˜é‡ï¼šnotFull final Condition notFull = lock.newCondition(); // æ¡ä»¶å˜é‡ï¼šnotEmpth final Condition notEmpty = lock.newCondition(); // å…¥é˜Ÿ void enq(T x)&#123; lock.lock(); try&#123; while(é˜Ÿåˆ—å·²æ»¡)&#123; // ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡ notFull.wait(); &#125; // do å…¥é˜Ÿæ“ä½œ // å…¥é˜Ÿåï¼Œé€šçŸ¥å‡ºé˜Ÿ notEmpty.signal(); &#125;fianlly&#123; lock.unlock(); &#125; &#125; // å‡ºé˜Ÿ void deq()&#123; lock.lock(); try&#123; while(é˜Ÿåˆ—å·²ç©º)&#123; // ç­‰å¾…é˜Ÿåˆ—ä¸ç©º notEmpty.wait(); &#125; // do å‡ºé˜Ÿæ“ä½œ notFull.signal(); &#125;finally&#123; lock.unlock(); &#125; &#125;&#125; åœ¨è¿™æ®µä»£ç ğŸ‘†ä¸­ï¼Œæˆ‘ä»¬ç”¨äº† Java å¹¶å‘åŒ…é‡Œé¢çš„ Lock å’Œ Conditionï¼Œå¦‚æœä½ çœ‹ç€åƒåŠ›ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šè¯¦ç»†ä»‹ç»ï¼Œè¿™ä¸ªä¾‹å­åªæ˜¯å…ˆè®©ä½ æ˜ç™½æ¡ä»¶å˜é‡åŠå…¶ç­‰å¾…é˜Ÿåˆ—æ˜¯æ€ä¹ˆå›äº‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šawait() å’Œ å‰é¢æˆ‘ä»¬æåˆ°çš„ wait() çš„è¯­ä¹‰æ˜¯ä¸€æ ·çš„ï¼›signal() å’Œå‰é¢æˆ‘ä»¬æåˆ°çš„ notify() è¯­ä¹‰æ˜¯ä¸€æ ·çš„ã€‚ wait() çš„æ­£ç¡®å§¿åŠ¿ä½†æ˜¯æœ‰ä¸€ç‚¹ï¼Œéœ€è¦å†æ¬¡æé†’ï¼Œå¯¹äº MESA ç®¡ç¨‹æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªç¼–ç¨‹èŒƒå¼ï¼Œå°±æ˜¯éœ€è¦åœ¨ä¸€ä¸ª while å¾ªç¯ä¸­è°ƒç”¨ wait()ï¼Œè¿™ä¸ªæ˜¯ MESAç®¡ç¨‹ç‰¹æœ‰çš„ã€‚ 123while(æ¡ä»¶ä¸æ»¡è¶³)&#123; wait();&#125; Hasen æ¨¡å‹é‡Œé¢ï¼Œè¦æ±‚ notify() æ”¾åœ¨ä»£ç çš„æœ€åï¼Œè¿™æ · T2 é€šçŸ¥å®Œ T1 åï¼ŒT2 å°±ç»“æŸäº†ï¼Œç„¶å T1 å†æ‰§è¡Œã€‚è¿™æ ·å°±èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ Hoare æ¨¡å‹é‡Œé¢ï¼ŒT2 é€šçŸ¥å®Œ T1 åï¼ŒT2 é˜»å¡ï¼Œ T1 é©¬ä¸Šæ‰§è¡Œï¼›ç­‰ T1 æ‰§è¡Œå®Œï¼Œå†å”¤é†’ T2ï¼Œä¹Ÿèƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ä½†æ˜¯ç›¸æ¯” Hesen æ¨¡å‹ï¼ŒT2 å¤šäº†ä¸€ä¸ªé˜»å¡å”¤é†’æ“ä½œã€‚ MESA ç®¡ç¨‹é‡Œé¢ï¼ŒT2 é€šçŸ¥å®Œ T1 åï¼Œ T2 è¿˜æ˜¯ä¼šæ¥ç€æ‰§è¡Œï¼ŒT1 å¹¶ä¸ç«‹å³æ‰§è¡Œï¼Œä»…ä»…æ˜¯ä»æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—è¿›å…¥åˆ°å…¥å£ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ notify()ä¸ç”¨æ”¾åœ¨ä»£ç æœ€åï¼ŒT2 ä¹Ÿæ²¡æœ‰å¤šä½™çš„é˜»å¡å”¤é†’æ“ä½œã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸ªå‰¯ä½œç”¨ï¼Œå°±æ˜¯å½“ T1 å†æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½æ›¾ç»æ»¡è¶³çš„æ¡ä»¶ï¼Œç°åœ¨å·²ç»ä¸æ»¡è¶³äº†ï¼Œæ‰€ä»¥éœ€è¦ä»¥å¾ªç¯çš„æ–¹å¼æ£€éªŒæ¡ä»¶å˜é‡ã€‚ notify() ä½•æ—¶å¯ä»¥ä½¿ç”¨è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯ notify() å’Œ notifyAll() çš„ä½¿ç”¨ï¼Œå‰é¢ç« èŠ‚ï¼Œæˆ‘æ›¾ç»ä»‹ç»è¿‡ï¼Œé™¤éç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œå¦åˆ™å°½é‡ä½¿ç”¨ notifyAll()ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨ notify() å‘¢ï¼Ÿéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š æ‰€æœ‰ç­‰å¾…çº¿ç¨‹æ‹¥æœ‰ç›¸åŒçš„ç­‰å¾…æ¡ä»¶ï¼› æ‰€æœ‰ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’åï¼Œæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼› åªéœ€è¦å”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚ æ¯”å¦‚ä¸Šé¢é˜»å¡é˜Ÿåˆ—çš„ä¾‹å­ä¸­ï¼Œå¯¹äºâ€œé˜Ÿåˆ—ä¸æ»¡â€è¿™ä¸ªæ¡ä»¶å˜é‡ï¼Œå…¶é˜»å¡é˜Ÿåˆ—é‡Œçš„çº¿ç¨‹éƒ½æ˜¯åœ¨ç­‰å¾…â€œé˜Ÿåˆ—ä¸æ»¡â€è¿™ä¸ªæ¡ä»¶ï¼Œåæ˜ åœ¨ä»£ç é‡Œå°±æ˜¯ä¸‹é¢ğŸ‘‡ä¸‰è¡Œä»£ç ã€‚å¯¹æ‰€æœ‰ç­‰å¾…çº¿ç¨‹æ¥è¯´ï¼Œéƒ½æ˜¯æ‰§è¡Œè¿™ä¸‰è¡Œä»£ç ï¼Œé‡ç‚¹æ˜¯ while é‡Œé¢çš„ç­‰å¾…æ¡ä»¶æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ 1234while(é˜Ÿåˆ—å·²æ»¡)&#123; // ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡ notFull.await();&#125; æ‰€æœ‰ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’åæ‰§è¡Œçš„æ“ä½œä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸‹é¢ğŸ‘‡å‡ è¡Œï¼š 123// çœç•¥å…¥é˜Ÿæ“ä½œ...// å…¥é˜Ÿåï¼Œé€šçŸ¥å¯å‡ºé˜ŸnotEmpty.signal(); åŒæ—¶ä¹Ÿæ»¡è¶³ç¬¬ä¸‰æ¡ï¼Œåªéœ€è¦å”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚æ‰€ä»¥ä¸Šé¢ğŸ‘†é˜»å¡é˜Ÿåˆ—çš„ä»£ç ï¼Œä½¿ç”¨ signal() æ˜¯å¯ä»¥çš„ã€‚ æ€»ç»“Java å‚è€ƒäº† MESA æ¨¡å‹ï¼Œè¯­è¨€å†…ç½®çš„ç®¡ç¨‹(synchronized)å¯¹ MESA æ¨¡å‹è¿›è¡Œäº†ç²¾ç®€ã€‚MESA æ¨¡å‹ä¸­ï¼Œæ¡ä»¶å˜é‡å¯ä»¥æœ‰å¤šä¸ªï¼ŒJava è¯­è¨€å†…ç½®çš„ç®¡ç¨‹é‡Œåªæœ‰ä¸€ä¸ªæ¡ä»¶å˜é‡ã€‚å…·ä½“å¦‚ä¸‹å›¾ğŸ‘‡æ‰€ç¤ºã€‚ Java å†…ç½®çš„ç®¡ç¨‹æ–¹æ³•(synchronized)ä½¿ç”¨ç®€å•ï¼Œsynchronizedå…³é”®å­—ä¿®é¥°çš„ä»£ç å—ï¼Œåœ¨ç¼–è¯‘æœŸä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å…³åŠ é”å’Œè§£é”çš„ä»£ç ï¼Œä½†æ˜¯ä»…æ”¯æŒä¸€ä¸ªæ¡ä»¶å˜é‡ï¼›è€Œ Java SDK å¹¶å‘åŒ…å®ç°çš„ç®¡ç¨‹æ”¯æŒå¤šä¸ªæ¡ä»¶å˜é‡ï¼Œä¸è¿‡å¹¶å‘åŒ…é‡Œçš„é”ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±è¿›è¡ŒåŠ é”å’Œè§£é”æ“ä½œã€‚ å¹¶å‘ç¼–ç¨‹é‡Œä¸¤å¤§æ ¸å¿ƒé—®é¢˜â€”äº’æ–¥å’ŒåŒæ­¥ï¼Œéƒ½å¯ä»¥ç”±ç®¡ç¨‹æ¥å¸®ä½ è§£å†³ã€‚å­¦å¥½ç®¡ç¨‹ï¼Œç†è®ºä¸Šæ‰€æœ‰çš„å¹¶å‘é—®é¢˜éƒ½å¯ä»¥è§£å†³ï¼Œå¹¶ä¸”å¾ˆå¤šå¹¶å‘å·¥å…·ç±»çš„åº•å±‚éƒ½æ˜¯ç®¡ç¨‹å®ç°çš„ï¼Œæ‰€ä»¥å­¦å¥½ç®¡ç¨‹ï¼Œå°±ç›¸å½“äºæŒæ¡äº†ä¸€æŠŠå¹¶å‘ç¼–ç¨‹çš„é’¥åŒ™ã€‚ è¯¾åæ€è€ƒ wait()æ–¹æ³•ï¼Œåœ¨ Hasen æ¨¡å‹å’Œ Hoare æ¨¡å‹ä¸­éƒ½æ˜¯æ²¡æœ‰å‚æ•°çš„ï¼Œè€Œåœ¨ MESA æ¨¡å‹é‡Œé¢ï¼Œå¢åŠ äº†è¶…å¸‚å‚æ•°ï¼Œä½ è§‰å¾—è¿™ä¸ªå‚æ•°æœ‰å¿…è¦ä¹ˆï¼Ÿ æœ‰ã€‚Hasen æ¨¡å‹æ˜¯æ‰§è¡Œå®Œï¼Œå†å»å”¤é†’å¦å¤–ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½ä¿è¯çº¿ç¨‹çš„æ‰§è¡Œã€‚Hoare æ¨¡å‹æ˜¯ä¸­æ–­å½“å‰çº¿ç¨‹ï¼Œå”¤é†’å¦å¤–ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œå®Œå†å»å”¤é†’ï¼Œä¹Ÿèƒ½å¤Ÿä¿è¯æ‰§è¡Œã€‚è€Œ MESA æ˜¯è¿›å…¥æ¡ä»¶ç­‰å¾…é˜Ÿåˆ—ï¼Œä¸ä¸€å®šæœ‰æœºä¼šèƒ½å¤Ÿæ‰§è¡Œã€‚ é’ˆå¯¹æ¡ä»¶å˜é‡çš„ while å¾ªç¯ï¼Œè¿˜æ˜¯ä¸å¤ªç†è§£ï¼Œæ‚¨è¯´æ˜¯èŒƒå¼ï¼Œé‚£å®ƒä¸€å®šæ˜¯ä¸ºäº†è§£å†³ç‰¹å®šçš„åœºæ™¯è€Œå¼ºçƒˆæ¨èçš„ï¼Œä¹Ÿæœ‰è¯„è®ºè¯´æ˜¯ä¸ºäº†è§£å†³è™šå‡å”¤é†’ï¼Œä½†å”¤é†’åï¼Œä¸ä¹Ÿæ˜¯ä»æ¡ä»¶çš„ç­‰å¾…é˜Ÿåˆ—è¿›å…¥åˆ°å…¥åº“çš„ç­‰å¾…é˜Ÿåˆ—ï¼ŒæŠ¢åˆ°é”åï¼Œé‡æ–°è¿›è¡Œæ¡ä»¶å˜é‡çš„åˆ¤æ–­ï¼Œç”¨ if å®Œå…¨å¯ä»¥å•Šï¼Œä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ whileï¼Œå¹¶ä¸”æ˜¯èŒƒå¼ï¼Ÿ 12345code1;if(æ¡ä»¶ä¸æ»¡è¶³)&#123; wait();&#125;code2; ä»¥ä¸ŠğŸ‘†ä»£ç ä¸­ï¼Œå½“è°ƒç”¨ wait()æ—¶ï¼Œé˜»å¡ã€‚è¢«å”¤é†’æ—¶ï¼Œå°±ç›´æ¥æ‰§è¡Œ code2äº†ï¼Œæ²¡æœºä¼šé‡æ–°åˆ¤æ–­ã€‚ ä½¿ç”¨ while èŒƒå¼ï¼Œå¦‚æœ A çº¿ç¨‹ wait äº†ï¼Œè€Œä¸”æœªè®¾ç½®è¶…æ—¶æ—¶é—´ã€‚ç”±äºä»£ç  bugï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ notify ï¼Œå°±ä¼šå¯¼è‡´ A çº¿ç¨‹ä¸€ç›´ waitã€‚å¢åŠ è¶…æ—¶æ—¶é—´åï¼ŒA çº¿ç¨‹å¯ä»¥è‡ªå·±å†³å®šæ˜¯å¦ç»§ç»­ç­‰å¾…ã€‚è¿™æ ·ä»£ç çš„å¥å£®æ€§ä¼šæ›´å¥½ã€‚ ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªé”å®é™…ä¸Šå¯¹åº”ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œï¼Œä¸€ä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå¯¹åº”å…¥å£ç­‰å¾…é˜Ÿåˆ—ï¼›ä¸€ä¸ªæ˜¯é˜»å¡é˜Ÿåˆ—ï¼Œå®é™…å¯¹åº”æ¡ä»¶å˜é‡ç­‰å¾…é˜Ÿåˆ—ã€‚wait æ“ä½œæ˜¯æŠŠå½“å‰çº¿ç¨‹æ”¾å…¥æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œè€Œ notifyAll æ˜¯å°†æ¡ä»¶å˜é‡ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹å”¤é†’åˆ°å°±ç»ªé˜Ÿåˆ—(å…¥å£ç­‰å¾…é˜Ÿåˆ—)ä¸­ï¼Œå®é™…ä¸Šå“ªä¸ªçº¿ç¨‹æ‰§è¡Œç”± JVM æ“ä½œã€‚ å¯¹ä¿¡å·é‡å’Œç®¡ç¨‹çš„ç†è§£ // TODO ä¿¡å·é‡ ç®¡ç¨‹æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ•°æ®ç»“æ„å’Œèƒ½ä¸ºå¹¶å‘æ‰§è¡Œçš„ä¸€ç»„æ“ä½œï¼Œè¿™ç§Ÿæ“ä½œèƒ½å¤Ÿè¿›è¡ŒåŒæ­¥å’Œæ”¹å˜ç®¡ç¨‹ä¸­çš„æ•°æ®ã€‚è¿™ç›¸å½“äºå¯¹ä¸´ç•Œèµ„æºçš„åŒæ­¥æ“ä½œéƒ½é›†ä¸­è¿›è¡Œç®¡ç†ï¼Œå‡¡æ˜¯è¦è®¿é—®ä¸´ç•Œèµ„æºçš„è¿›ç¨‹æˆ–çº¿ç¨‹ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡ç®¡ç¨‹ï¼Œç”±ç®¡ç¨‹çš„è¿™å¥—æœºåˆ¶æ¥å®ç°å¤šè¿›ç¨‹æˆ–çº¿ç¨‹å¯¹åŒä¸€ä¸´ç•Œèµ„æºçš„äº’æ–¥ç¿»ä¸ªé—®ä½ å’Œä½¿ç”¨ã€‚ç®¡ç¨‹çš„åŒæ­¥ä¸»è¦é€šè¿‡ condition ç±»å‹çš„å˜é‡(æ¡ä»¶å˜é‡)ï¼Œæ¡ä»¶å˜é‡å¯æ‰§è¡Œ wait() å’Œ signal() æ“ä½œã€‚ç®¡ç¨‹ä¸€èˆ¬æ˜¯æœ‰è¯­è¨€ç¼–è¯‘å™¨è¿›è¡Œå°è£…ï¼Œä½“ç°åœ¨ OOP ä¸­çš„å°è£…æ€æƒ³ï¼Œä¹Ÿå¦‚è€å¸ˆæ‰€è¯´çš„ï¼Œç®¡ç¨‹å’Œé¢å‘å¯¹è±¡é«˜åº¦å¥‘åˆã€‚ æ–‡ä¸­è¯´åˆ°çš„æ¡ä»¶å˜é‡ï¼Œå‡å¦‚ synchronized(instance){// do something;}ï¼Œè¿™æ ·ä¸€æ®µä»£ç ï¼Œç¨‹åºå®é™…è¿è¡Œè¿‡ç¨‹ä¸­æ¡ä»¶å˜é‡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æ²¡ç”¨åˆ°æ¡ä»¶å˜é‡ï¼Œåªæœ‰è°ƒç”¨ wait å’Œ notify çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸–ç•Œéœ€è¦ä»€ä¹ˆæ ·çš„æ™ºèƒ½ç³»ç»Ÿ]]></title>
    <url>%2F2019%2F07%2F16%2FWhat_kind_of_intelligent_system_does_the_world_need%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ‘˜è‡ªå´ç¿°æ¸…-ä¸–ç•Œéœ€è¦ä»€ä¹ˆæ ·çš„æ™ºèƒ½ç³»ç»Ÿ(èŠ‚é€‰) ç§‘æŠ€çš„è¿›æ­¥æ˜¯ä¸ºäº†è§£æ”¾ç”Ÿäº§åŠ›æˆ‘å°†ç”Ÿäº§åŠ›çš„è¿›æ­¥åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼šä½“åŠ›åŠ³åŠ¨ï¼Œæœºæ¢°åŒ–ï¼Œç”µæ°”åŒ–ï¼Œä¿¡æ¯åŒ–ï¼Œæ™ºèƒ½åŒ–ã€‚å…¶ä¸­æ¯ä¸€æ¬¡ç§‘æŠ€çš„è¿›æ­¥ï¼Œéƒ½ä¼šå¸¦æ¥ç”Ÿäº§åŠ›çš„è§£æ”¾ï¼Œå¯¹ç¤¾ä¼šçš„æ”¹å˜æ˜¯å·¨å¤§çš„ã€‚ åœ¨140å¹´å‰å‘ç”Ÿçš„ç¬¬äºŒæ¬¡ç§‘æŠ€é©å‘½ï¼Œè®©ç”µåŠ›æ·±å…¥åˆ°å„è¡Œå„ä¸šã€‚è‡ªä»ä¸­å¤®å‘ç”µç«™å’Œäº¤æµç”µå˜å‹å™¨ç­‰å…³é”®æŠ€æœ¯æ„å»ºçš„ç”µåŠ›åŸºç¡€è®¾æ–½æˆå‹åï¼Œè·å–ç”µåŠ›çš„æˆæœ¬é€æ¸é™ä½ï¼Œå„ç§å„æ ·çš„ç”µæ°”åº”ç”¨å¼€å§‹æ¶Œç°ï¼Œäººä»¬è·å–åˆ°äº†æ–°çš„ã€ç¨³å®šçš„èƒ½æºã€‚ æˆ‘ä»¬ç°åœ¨çŸ¥é“ç”µåŠ›æœ€æ—©æ˜¯åº”ç”¨åœ¨ç”µè¯ã€ç”µæŠ¥ã€ç”µç¯ä¸Šçš„ï¼Œä¹Ÿæ­£æ˜¯ç”µæ°”ç…§æ˜è¿™ä¸€éœ€æ±‚ï¼Œæ‹‰åŠ¨äº†ç”µåŠ›åŸºç¡€è®¾æ–½çš„å‘å±•ã€‚å› ä¸ºåœ¨å½“æ—¶ç”µåŠ›çš„ç”¨é€”æ¯”è¾ƒå•è°ƒï¼Œå¹¶æ²¡æœ‰ä»Šå¤©è¿™ä¹ˆç³ç…æ»¡ç›®çš„ç”µå™¨ã€‚åœ¨100å¹´å‰çˆ±è¿ªç”Ÿé€šç”¨ç”µæ°”ä¸å¨æ–¯æ±€è±ªæ–¯ä¹‹é—´çš„ä¸»è¦ç«äº‰å°±æ˜¯èšç„¦åœ¨ç”µæ°”ç…§æ˜é¢†åŸŸã€‚æˆ‘ä»¬å¾ˆéš¾è¯´åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåˆ°åº•æ˜¯ç”µç¯æ³¡æ›´é‡è¦ï¼Œè¿˜æ˜¯å‘ç”µç«™æ›´é‡è¦ã€‚æˆ‘æ›¾ç»æ¯”å–»è¯´å½“å‰äº‘è®¡ç®—é¢ä¸´çš„çª˜å¢ƒï¼Œå°±æ˜¯ã€Œä¸­å¤®å‘ç”µç«™ã€å·²ç»é€ å‡ºæ¥äº†ï¼Œæˆ‘ä»¬æœ‰å•é›†ç¾¤ä¸Šä¸‡å°æœåŠ¡å™¨è§„æ¨¡çš„ç®—åŠ›åŸºç¡€è®¾æ–½ï¼Œä½†æ˜¯ã€Œç”µç¯æ³¡ã€åœ¨å“ªé‡Œå´æ²¡æœ‰æ‰¾åˆ°ã€‚æˆ‘ä»¬ç”¨ã€Œä¸­å¤®å‘ç”µç«™ã€åœ¨ç‚¹ã€Œç…¤æ°”ç¯ã€ï¼Œä»Šå¤©æ‰˜ç®¡åœ¨äº‘è®¡ç®—ä¸Šçš„ä¸šåŠ¡ï¼Œå¤§å¤šæ•°ä¾ç„¶æ˜¯ã€Œä¿¡æ¯åŒ–ç³»ç»Ÿã€ã€‚è€Œç†æƒ³ä¸­çš„ä¼šæ¶ˆè€—å¤§é‡ç®—åŠ›çš„åº”ç”¨ï¼Œåº”å½“æ˜¯ã€Œæ™ºèƒ½åŒ–ç³»ç»Ÿã€ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è‹¦è‹¦è¿½å¯»äº‘è®¡ç®—çš„ã€Œç”µç¯æ³¡åº”ç”¨ã€ï¼Œå´æ±‚ä¹‹ä¸å¾—ã€‚ è¿™é‡Œéœ€è¦è®²æ¸…æ¥šã€Œä¿¡æ¯åŒ–ç³»ç»Ÿã€å’Œã€Œæ™ºèƒ½åŒ–ç³»ç»Ÿã€çš„åŒºåˆ«ã€‚æˆ‘è®¤ä¸ºã€Œä¿¡æ¯åŒ–ç³»ç»Ÿã€çš„æœ¬è´¨æ˜¯ç¼–è¾‘æ•°æ®åº“ï¼Œä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿå¦‚æœå­˜åœ¨å¤§é‡äººå·¥äº¤äº’ï¼Œä¾èµ–äºäººæäº¤è¡¨å•æ¥å®Œæˆä¸šåŠ¡ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªä¿¡æ¯åŒ–ç³»ç»Ÿã€‚è€Œæˆ‘ç†æƒ³ä¸­çš„ã€Œæ™ºèƒ½åŒ–ç³»ç»Ÿã€ï¼Œåº”è¯¥æ˜¯ä»¥è‡ªåŠ¨å®Œæˆä»»åŠ¡ä¸ºç›®çš„ï¼Œä»¥ä»»åŠ¡ä½œä¸ºè¾“å…¥ï¼Œä»¥å®Œæˆçš„ç»“æœä½œä¸ºè¾“å‡ºï¼Œä¸­é—´çš„è¿‡ç¨‹åº”è¯¥æ˜¯æœºå™¨é«˜åº¦è‡ªåŠ¨åŒ–å®Œæˆçš„ã€‚ä»¥å…¶å®Œæˆä»»åŠ¡çš„å¤æ‚åº¦ï¼Œæ¥è¯„ä»·å…¶æ™ºèƒ½ç¨‹åº¦çš„é«˜ä½ã€‚ ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œã€Œæ™ºèƒ½æ‰‹æœºã€å¹¶ä¸æ™ºèƒ½ï¼Œä¾ç„¶æ˜¯ä¸ªã€Œä¿¡æ¯åŒ–ç³»ç»Ÿã€ã€‚å¸‚é¢ä¸Šå½¢å½¢è‰²è‰²çš„æ™ºèƒ½ç³»ç»Ÿä¹Ÿéƒ½åªæ˜¯å† ä¸Šäº†æ™ºèƒ½çš„åå·åœ¨é±¼ç›®æ··ç ã€‚æˆ‘å¹¶ä¸æ˜¯è¯´ã€Œä¿¡æ¯åŒ–ç³»ç»Ÿã€æ²¡æœ‰ä»·å€¼ï¼Œä¿¡æ¯åŒ–ç³»ç»Ÿå¾ˆæœ‰ä»·å€¼ï¼Œä½†ä¸æ˜¯ä¸‹ä¸ªæ—¶ä»£çš„ä¸œè¥¿ã€‚è‡ªä»è®¡ç®—æœºæŠ€æœ¯å‘å±•ä»¥æ¥ï¼Œäº§ç”Ÿçš„å„è‰²å„æ ·çš„ä¿¡æ¯åŒ–ç³»ç»Ÿæå¤§åœ°æ”¹å˜äº†ä¸–ç•Œï¼Œå®Œæˆäº†ä»ã€Œç”µæ°”åŒ–ã€åˆ°ã€Œä¿¡æ¯åŒ–ã€è½¬å‹å‡çº§çš„é‡è¦ä¸€æ­¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°å„è‰²å„æ ·çš„è®¡ç®—æœºç³»ç»Ÿå¼€å§‹åº”ç”¨åœ¨å„ä¸ªé¢†åŸŸï¼Œå¸®åŠ©äººä»¬æ›´åŠ é«˜æ•ˆçš„ç®¡ç†å·¥ä½œå’Œæä¾›æœåŠ¡ã€‚ äº’è”ç½‘åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­æ‰®æ¼”äº†æ”¾å¤§ä½œç”¨ã€‚æˆ‘è®¤ä¸ºäº’è”ç½‘æœ¬èº«å¹¶ä¸æ˜¯ç”Ÿäº§åŠ›ï¼Œäº’è”ç½‘åªæ˜¯è¿æ¥äº†æˆåƒä¸Šä¸‡ä¸ªä¿¡æ¯åŒ–ç³»ç»Ÿï¼Œä»è€Œå…·å¤‡äº†è§„æ¨¡æ•ˆåº”ã€‚äº’è”ç½‘æ˜¯è§„æ¨¡ç»æµï¼Œèƒ½è®©ä¸€ä¸ªç³»ç»Ÿçš„ä»·å€¼å®ç°ä¸Šåƒå€ã€ä¸Šä¸‡å€çš„æ”¾å¤§ï¼Œä½†æ˜¯ç”Ÿäº§åŠ›æ˜¯ä¿¡æ¯åŒ–ç³»ç»Ÿæœ¬èº«æä¾›çš„ã€‚èƒ½å¤Ÿæ¥æ”¶äº’è”ç½‘è¿æ¥æœåŠ¡çš„ç»ˆç«¯ï¼Œæ˜¯æµè§ˆå™¨ï¼Œæ˜¯ iOS å’Œ Androidï¼Œè¿™äº›ç«¯çš„æ¼”è¿›æœ¬èº«æ˜¯é‡è¦çš„ã€‚ç™¾åº¦é€šè¿‡äº’è”ç½‘è¿æ¥äº†äººå’Œä¿¡æ¯ï¼Œè…¾è®¯é€šè¿‡äº’è”ç½‘è¿æ¥äººå’Œäººï¼Œé˜¿é‡Œé€šè¿‡äº’è”ç½‘è¿æ¥äº†äººå’Œä¿¡æ¯åŒ–æœåŠ¡ã€‚ä½†æ˜¯è¿™äº›éƒ½ä¸æ˜¯ä¸‹ä¸€ä¸ªæ—¶ä»£çš„ä¸œè¥¿ã€‚ ä¸‹ä¸€ä¸ªæ—¶ä»£ä¼šå‘ç”Ÿçš„äº‹æƒ…ï¼Œé¦–å…ˆæ˜¯å‡ºç°æ™ºèƒ½åŒ–ç³»ç»Ÿå¯¹ä¿¡æ¯åŒ–ç³»ç»Ÿçš„å‡çº§æ¢ä»£ï¼Œç„¶åä¼šå‡ºç°é€šè¿‡äº’è”ç½‘è¿æ¥æ‰€æœ‰æ™ºèƒ½åŒ–ç³»ç»Ÿçš„å…¬å¸ã€‚æ™ºèƒ½åŒ–å¯¹ä¿¡æ¯åŒ–çš„å‡çº§æ¢ä»£ï¼Œæ˜¯ä¸€æ¬¡å·¨å¤§çš„ç”Ÿäº§åŠ›è¿›æ­¥ï¼Œå¤„äºç¤¾ä¼šå˜é©ä¸­çš„å•†ä¸šå…¬å¸çš„ç»“å±€æ˜¯é€‚è€…ç”Ÿå­˜ã€‚ä»å†å²æ¥çœ‹ï¼Œåœ¨ä¿¡æ¯åŒ–æ—¶ä»£çš„PCæ“ä½œç³»ç»Ÿå‡çº§æ¢ä»£åˆ°ç§»åŠ¨æ“ä½œç³»ç»Ÿï¼Œå…¶è¿‡ç¨‹å°±æ˜¯å¤©ç¿»åœ°è¦†çš„ã€‚è‹¹æœçš„iPhone å‘å¸ƒä¹‹åï¼Œæ‰€æœ‰çš„å¼€å‘è€…éƒ½ä¸å†ç»™å¾®è½¯çš„ Windows å†™è½¯ä»¶ï¼Œè€Œè½¬å»ç»™ iOS å†™è½¯ä»¶ï¼Œå¯¹å¾®è½¯å¸¦æ¥äº†å¼ºçƒˆçš„å†²å‡»ï¼Œå¦‚æœä¸æ˜¯å¾®è½¯åæ¥åˆæŠ“ä½äº†äº‘è®¡ç®—çš„æœºé‡ï¼Œå°±å¾ˆå¯èƒ½ä¼šä»æ­¤ä¸€è¹¶ä¸æŒ¯ã€‚ä»å•†ä¸šå‘å±•çš„è§’åº¦çœ‹ç±»ä¼¼äº‹ä»¶ä¸€å®šä¼šå‘ç”Ÿï¼Œåœ¨ä¿¡æ¯åŒ–æ—¶ä»£çš„åºç„¶å¤§ç‰©å¾ˆå¯èƒ½éšç€ä¸€æ¬¡ç”Ÿäº§åŠ›çš„å˜é©å°±å˜å¾—æ— è¶³è½»é‡ã€‚é‚£ä¹ˆç°åœ¨æ‰€æœ‰çš„é—®é¢˜åœ¨äºï¼Œæœªæ¥ä¸–ç•Œéœ€è¦çš„æ™ºèƒ½ç³»ç»Ÿåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ è®©æœºå™¨è·å¾—æ™ºèƒ½ï¼Œä¸€ç›´æ˜¯è®¡ç®—æœºç§‘å­¦å®¶å­œå­œä»¥æ±‚çš„äº‹æƒ…ã€‚åœ¨è¿‡å»ç®€å•çš„ä¸“å®¶ç³»ç»Ÿï¼Œä¾é ç»éªŒå’Œè§„åˆ™ï¼Œä¹Ÿèƒ½å¤„ç†ç®€å•çš„ä»»åŠ¡ã€‚ä½†æœ‰ä¸€ä¸ªå¼Šç—…æ˜¯å¯¹äºä¸“å®¶ç»éªŒæœªè¦†ç›–çš„å¼‚å¸¸æƒ…å†µï¼Œæœºå™¨å°±ä¸çŸ¥é“æ€ä¹ˆå¤„ç†äº†ã€‚æ‰€ä»¥åæ¥å‡ºç°äº†æ•°æ®é©±åŠ¨è¯ç”Ÿçš„æ™ºèƒ½ã€‚ æˆ‘ä»¬çœ‹åˆ°å½“æœºå™¨å…·å¤‡ä¸€å®šçš„æ™ºèƒ½åï¼Œå°±èƒ½å¤„ç†ç›¸å¯¹ç®€å•çš„ä»»åŠ¡ï¼Œä»è€Œéƒ¨åˆ†åœ°è§£æ”¾äººçš„ç”Ÿäº§åŠ›ï¼Œæ­¤æ—¶å¢åŠ æœºå™¨è§„æ¨¡å°±ç­‰åŒäºå¢åŠ äººåŠ›çš„è§„æ¨¡ã€‚è€Œæœºå™¨æ™ºèƒ½å’Œäººçš„æ™ºèƒ½åˆå„æœ‰æ‰€é•¿ï¼Œæœºå™¨è¿ç®—é‡å¤§ä¸”ä¸çŸ¥ç–²å€¦ï¼Œå› æ­¤å¯¹äºå¾ˆå¤šå·¥ä½œéƒ½æœ‰å¯èƒ½åšåˆ°ç²¾ç»†åŒ–ç®¡ç†ã€‚è¿™å¾€å¾€èƒ½å¸¦æ¥æˆæœ¬çš„èŠ‚çº¦ã€‚ æ¯”å¦‚åœ¨è¿‡å»å…¬äº¤è½¦çš„æ’ç­æ˜¯æŒ‰ç…§ç»éªŒï¼Œåœ¨ä¸€ä¸ªçº¿è·¯é‡Œè®¾ç½®å¥½å…¬äº¤è½¦çš„æ•°é‡ï¼Œä½†æ˜¯å¦‚æœå¸‚æ°‘çš„å‡ºè¡Œæƒ…å†µå‘ç”Ÿæ³¢åŠ¨æ—¶ï¼Œå…¬äº¤è½¦çš„ä¾›éœ€å…³ç³»ä¹‹é—´ä¸€å®šä¼šå­˜åœ¨å·®å¼‚ï¼Œæœ‰çš„çº¿è·¯ä¼šç¹å¿™ï¼Œæœ‰çš„çº¿è·¯åˆ™ä¼šç©ºé—²ï¼Œä»è€Œå‡ºç°èµ„æºçš„æµªè´¹ã€‚è¦è§£å†³è¿™ä¸€é—®é¢˜éœ€è¦å…ˆç»Ÿè®¡æ¸…æ¥šæ¯è¾†å…¬äº¤è½¦æ¯ä¸€è¶Ÿçš„ç²¾ç¡®è½½å®¢äººæ•°ï¼Œå†ä¾é æœºå™¨æ™ºèƒ½ç²¾ç»†åŒ–çš„è°ƒåº¦å…¬äº¤è½¦åˆ°ä¸åŒçš„çº¿è·¯ï¼Œå°±èƒ½åœ¨åŒç­‰èµ„æºä¸‹å®ç°æ•ˆç‡æœ€ä¼˜ã€‚å› æ­¤ä½¿ç”¨æœºå™¨æ™ºèƒ½çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ äº”å¹´å‰åšä¸å‡ºå¤§è§„æ¨¡çš„æœºå™¨æ™ºèƒ½ç³»ç»Ÿæˆ‘ä»¬çœ‹åˆ°åœ¨ç”Ÿäº§åŠ›å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œä»ä¿¡æ¯åŒ–åˆ°æ™ºèƒ½åŒ–çš„è¿™ä¸€è½¬å‹å‡çº§æ­£åœ¨åˆ°æ¥ï¼Œå·²ç»åˆ°äº†çˆ†å‘çš„å‰å¤œã€‚è¿™å¾—ç›Šäºå››é¡¹æŠ€æœ¯çš„æˆç†Ÿï¼šäº‘è®¡ç®—ã€å¤§æ•°æ®ã€IoTã€ç½‘ç»œè¿æ¥æŠ€æœ¯ã€‚ æˆ‘ä»¬çŸ¥é“æœºå™¨æ™ºèƒ½å½“å‰çš„å‘å±•æ˜¯å¾—ç›Šäºå¯¹è„‘ç§‘å­¦çš„ç ”ç©¶ï¼Œä»¥åŠç®—åŠ›çš„è¿›æ­¥ï¼Œè®©ç¥ç»ç½‘ç»œè¿›åŒ–åˆ°äº†æ·±åº¦å­¦ä¹ ï¼Œä»è€Œåœ¨è§†è§‰ã€è¯­éŸ³ç­‰é¢†åŸŸæœ‰äº†é‡å¤§çªç ´ã€‚ç®—åŠ›çš„é‡è¦æ€§æ¯‹åº¸ç½®ç–‘ï¼Œä½†æ˜¯å…‰æœ‰ç®—åŠ›ä¾ç„¶éš¾ä»¥åœ¨å®é™…çš„åº”ç”¨ä¸­å–å¾—æˆåŠŸï¼Œè¿˜éœ€è¦å…¶ä»–å‡ é¡¹æŠ€æœ¯çš„æˆç†Ÿã€‚åœ¨å½“å‰çš„æŠ€æœ¯ç¯å¢ƒæ¥è¯´ï¼Œäº‘è®¡ç®—ä¸ºæ™ºèƒ½æä¾›äº†è¶³å¤Ÿçš„ç®—åŠ›ï¼Œæ˜¯ç®—åŠ›åŸºç¡€è®¾æ–½ï¼›å¤§æ•°æ®æŠ€æœ¯æä¾›äº†æ•°æ®å¤„ç†çš„æ–¹æ³•è®ºå’Œå·¥å…·ï¼Œæ˜¯æ•°æ®åŸºç¡€è®¾æ–½ï¼ˆå½“å‰è¿˜æ²¡æœ‰å„æ–­æ€§çš„æ•°æ®åŸºç¡€è®¾æ–½ï¼Œç¢ç‰‡åŒ–ä¸¥é‡ï¼‰ï¼›IoT æŠ€æœ¯å°†æ™ºèƒ½è®¾å¤‡çš„æˆæœ¬é™åˆ°äº†è¶³å¤Ÿä½ï¼Œä¸ºéƒ¨ç½²ä¸°å¯Œçš„ç¥ç»å…ƒæ„ŸçŸ¥è®¾å¤‡æä¾›äº†åŸºç¡€ï¼›ç½‘ç»œè¿æ¥æŠ€æœ¯ï¼Œä»4Gåˆ°5Gï¼Œä¸ºæ•°æ®çš„é«˜é€Ÿä¼ è¾“æä¾›äº†é‡è¦åŸºç¡€ã€‚ å¦‚æœæœ‰ç§‘æŠ€æ ‘è¿™ç§è¯´æ³•çš„è¯ï¼Œé‚£ä¹ˆæœºå™¨æ™ºèƒ½çš„å¤§è§„æ¨¡åº”ç”¨ï¼Œå°±éœ€è¦å…ˆç‚¹äº®å‰å››ä¸ªæŠ€æœ¯ï¼Œè¿™æ˜¯åŸºç¡€ã€‚åœ¨äº”å¹´ä»¥å‰ï¼Œè¿™å‡ é¡¹æŠ€æœ¯çš„æˆæœ¬æ˜¯åˆ¶çº¦æˆ‘ä»¬å°†æ™ºèƒ½æŠ€æœ¯å¤§è§„æ¨¡åº”ç”¨çš„ä¸»è¦ç“¶é¢ˆã€‚åˆ°ä»Šå¤©å·²ç»é€æ¸æˆç†Ÿäº†ã€‚ åœ¨ä¸€é¡¹æ–°æŠ€æœ¯åˆšå‡ºç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé‡åˆ°ä¸¤ä¸ªé—®é¢˜ã€‚ ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯äººæ‰çš„ç¨€ç¼ºæ€§é—®é¢˜ã€‚æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ‡‚æ·±åº¦å­¦ä¹ æˆ–å…¶ä»–æœºå™¨æ™ºèƒ½æŠ€æœ¯çš„åšå£«ç”Ÿåˆšæ¯•ä¸šçš„å¹´è–ªå¯èƒ½æ¯”å¾—ä¸Šä¸€ä¸ªå·¥ä½œäº†åå¹´çš„ç¨‹åºå‘˜ã€‚ä¸šç•Œå„å¤„éƒ½éœ€è¦æœºå™¨æ™ºèƒ½ï¼Œä¾›ä¸åº”æ±‚ã€‚ ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æŠ€æœ¯çš„æˆæœ¬é—®é¢˜ã€‚æ–°æŠ€æœ¯åˆšå‡ºæ¥çš„æˆæœ¬ä¸€å®šæ˜¯æ˜‚è´µçš„ï¼Œå°±åƒäº‘è®¡ç®—åˆšå‡ºæ¥çš„æ—¶å€™ä¹Ÿæ˜¯å…ˆè§£å†³èƒ½åŠ›é—®é¢˜ï¼Œå†è§£å†³æ•ˆç‡é—®é¢˜ã€‚æˆ‘å‰äº›æ—¶çœ‹ä¸€ä¸ªæŠ¥å‘Šï¼ŒAWS çš„ EC2 æ¨å‡ºåˆ°ç°åœ¨è¿ç»­é™ä»·äº†57æ¬¡ã€‚æˆ‘ä»¬ç†ŸçŸ¥çš„æ‘©å°”å®šå¾‹ï¼Œè®¡ç®—çš„æ€§èƒ½æ¯18ä¸ªæœˆç¿»ä¸€å€ï¼Œä¹Ÿå°±æ„å‘³ç€åŒç­‰ç®—åŠ›çš„ç¡¬ä»¶æ¯18ä¸ªæœˆä¼šé™ä¸€åŠçš„æˆæœ¬ã€‚æœºå™¨æ™ºèƒ½ä½œä¸ºæ–°æŠ€æœ¯ä¹Ÿæœ‰åŒæ ·çš„è§„å¾‹ï¼Œåœ¨ä¸€å¼€å§‹æˆ‘ä»¬ä¸è¦æŒ‡æœ›å®ƒçš„æˆæœ¬ä¼šè¶³å¤Ÿä¾¿å®œåˆ°èƒ½è¿›å…¥åƒå®¶ä¸‡æˆ·ï¼Œæ–°æŠ€æœ¯çš„æ™®åŠéœ€è¦æ—¶é—´ã€‚åªæ˜¯æˆ‘ä»¬å¾€å¾€è¿«ä¸åŠå¾…ã€‚ è¿™ä¸¤ä¸ªé—®é¢˜å†³å®šäº†æœºå™¨æ™ºèƒ½åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåº”è¯¥é¦–å…ˆè¢«åº”ç”¨åœ¨å¯¹ç¤¾ä¼šæ•ˆç‡æ’¬åŠ¨æœ€å¤§çš„é‚£ä¸ªç‚¹ä¸Šã€‚ä»å•†ä¸šä¸Šæˆ‘ä»¬è¦æ‰¾åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œæ¥è®©è¿™é¡¹æŠ€æœ¯è„±ç¦»å®éªŒå®¤ï¼Œèµ°å‘ç¤¾ä¼šï¼Œé€šè¿‡å•†ä¸šæ¥æºæºä¸æ–­çš„æ»‹å…»è¿™é¡¹æŠ€æœ¯çš„è¿…é€Ÿæˆé•¿ã€‚ ä¸–ç•Œéœ€è¦ä»€ä¹ˆæ ·çš„æœºå™¨æ™ºèƒ½ç³»ç»Ÿè¿™ä¸¤ä¸ªé—®é¢˜éšç€æ—¶é—´çš„æ¨ç§»å¾ˆå¿«å°±èƒ½è§£å†³ã€‚ä½†ä»Šå¤©äº§ä¸šç•ŒçœŸæ­£ç¢°åˆ°çš„é—®é¢˜æˆ‘è®¤ä¸ºæ˜¯æåäº†æ–¹å‘ã€‚è¿™ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ã€‚ ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯æœªæ¥ä¸åº”è¯¥å­˜åœ¨ä¸€ä¸ªã€Œäººå·¥æ™ºèƒ½ã€çš„äº§ä¸šï¼Œæˆ‘ä»¬ä»Šå¤©çš„åˆ†ç±»å°±åˆ†é”™äº†ã€‚å°±åƒè‡ªç”µåŠ›åŸºç¡€è®¾æ–½è¯ç”Ÿä»¥æ¥ï¼Œå„è¡Œå„ä¸šéƒ½éœ€è¦ç”¨ç”µï¼Œå› æ­¤ç”µåŠ›æˆä¸ºäº†ä¸€ä¸ªå…³é”®ç”Ÿäº§è¦ç´ ã€‚æˆ‘è®¤ä¸ºæœªæ¥æ™ºèƒ½ä¹Ÿæ˜¯ä¸€ä¸ªå…³é”®ç”Ÿäº§è¦ç´ ï¼Œæ¯ä¸ªè¡Œä¸šéƒ½éœ€è¦ï¼Œå› æ­¤ä¸éœ€è¦å•ç‹¬åˆ’åˆ†ä¸€ä¸ªäººå·¥æ™ºèƒ½äº§ä¸šã€‚å•ç‹¬æäº†ä¸€ä¸ªäººå·¥æ™ºèƒ½äº§ä¸šï¼Œåå€’ä¸çŸ¥é“è¿™äº›å…¬å¸åœ¨å¹²ä»€ä¹ˆäº†ï¼Œè¿™äº›å…¬å¸è‡ªå·±ä¹Ÿäº§ç”Ÿäº†å›°æƒ‘ã€‚æœ€ç»ˆåº”è¯¥åƒä»Šå¤©çš„é›¶å”®ä¸šä¸€æ ·ï¼Œæ¯ä¸ªåšé›¶å”®çš„éƒ½æœ‰ä¸ªç”µå•†éƒ¨é—¨ï¼Œä¼šé€šè¿‡äº’è”ç½‘æ¥åšè¥é”€å’Œé”€å”®ã€‚æœªæ¥æ¯ä¸ªä¼ä¸šä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ªéƒ¨é—¨ï¼Œå°±æ˜¯è´Ÿè´£ä»–ä»¬çš„æ™ºèƒ½ç³»ç»Ÿçš„å»ºè®¾ä¸è®­ç»ƒã€‚è¦åƒè®­ç»ƒå® ç‰©ä¸€æ ·è®­ç»ƒæ™ºèƒ½ç³»ç»Ÿï¼Œä½¿ä»–å…·å¤‡æ™ºèƒ½ã€‚è¿™ä¸æ˜¯æŸä¸€å®¶äººå·¥æ™ºèƒ½å…¬å¸è¦åšçš„äº‹æƒ…ï¼Œè€Œæ˜¯æ¯å®¶å…¬å¸éƒ½è¦è‡ªå·±åšçš„äº‹æƒ…ã€‚ ç¬¬äºŒä¸ªé—®é¢˜å’Œæœºå™¨æ™ºèƒ½æŠ€æœ¯çš„å‘å±•æœ‰å…³ã€‚å› ä¸ºæœ€è¿‘è¿™æ¬¡æœºå™¨æ™ºèƒ½çš„çƒ­ç‚¹æ˜¯ä»æ·±åº¦å­¦ä¹ å¼€å§‹ï¼Œåœ¨è§†è§‰ã€è¯­éŸ³ç­‰é¢†åŸŸæœ‰äº†å·¨å¤§çªç ´ï¼Œå› æ­¤äº§ä¸šåŒ–åçš„ä¼ä¸šå¾€å¾€éƒ½æ˜¯åœ¨åšè§†è§‰ã€è¯­éŸ³ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰å·¥ä½œã€‚ä½†æ˜¯æˆ‘ä»¬åƒä¸‡åˆ«å¿˜äº†å®Œæ•´çš„äººè„‘æ™ºèƒ½æ˜¯ä»ã€Œæ„ŸçŸ¥ã€åˆ°ã€Œè¡ŒåŠ¨ã€ï¼Œå¹¶é€šè¿‡ä¸æ–­çš„åé¦ˆå®Œæˆé«˜é¢‘ç‡çš„ååŒï¼Œæœ€ç»ˆè¯ç”Ÿäº†æ™ºèƒ½ã€‚ åªåšã€Œæ„ŸçŸ¥ã€æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¯¯åŒºï¼Œä»æŠ€æœ¯ä¸Šè®²æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä»å•†ä¸šä¸Šè®²åˆ›é€ çš„ç¤¾ä¼šä»·å€¼å°±å¾ˆæœ‰é™äº†ï¼Œå› ä¸ºå…¶è§£æ”¾çš„ç”Ÿäº§åŠ›ç›¸å¯¹æ˜¯æœ‰é™çš„ã€‚ ä»ç”Ÿäº§åŠ›å‘å±•çš„è§’åº¦æ¥è®²ï¼Œè¯„åˆ¤ä¸€ä¸ªæ™ºèƒ½ç³»ç»Ÿçš„ç¤¾ä¼šä»·å€¼ï¼Œåº”è¯¥ä»¥å®ƒè§£æ”¾ç”Ÿäº§åŠ›çš„å¤šå°‘æ¥è¡¡é‡ã€‚åªåšã€Œæ„ŸçŸ¥ã€å°±æ˜¯åªèƒ½çœ‹ï¼Œä½†æ˜¯åšäº†è¿™ä¹ˆå¤šå¤§å‹é¡¹ç›®åï¼Œæˆ‘å‘ç°æ‰€æœ‰çš„ä»·å€¼åˆ›é€ éƒ½æ˜¯åœ¨äºã€Œå¤„ç½®ã€ç¯èŠ‚ã€‚å› æ­¤åªåšæ„ŸçŸ¥ï¼Œå¾ˆéš¾è®²æ¸…æ¥šæŠ•å…¥äº§å‡ºæ˜¯å¦å€¼å¾—ï¼Œä½†æ˜¯ä¸€æ—¦å¼€å§‹è¿›å…¥åˆ°ã€Œè¡ŒåŠ¨ã€ç¯èŠ‚ï¼Œå°±ä¼šå¼€å§‹è§£æ”¾ç”Ÿäº§åŠ›ï¼Œä»·å€¼æ˜¯å¯è¢«é‡åŒ–çš„ã€‚è¿™é‡Œçš„è¡ŒåŠ¨ï¼Œæ˜¯æœºå™¨æ™ºèƒ½å®ç°äº†å¯¹äººåŠ›æˆ–å…¶ä»–è®¾å¤‡çš„è°ƒåº¦ã€‚ å®é™…ä¸Šä»æŠ€æœ¯å‘å±•çš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬æ—©å°±æ‹¥æœ‰äº†è®©æœºå™¨æ™ºèƒ½åšå†³ç­–çš„èƒ½åŠ›ã€‚æœç´¢å¼•æ“å’Œä¸ªæ€§åŒ–æ¨èï¼Œå°±æ˜¯å…¸å‹çš„é€šè¿‡æœºå™¨æ™ºèƒ½åšå†³ç­–ã€‚é€šè¿‡æ¯å¤©å¤„ç†æµ·é‡çš„æ•°æ®ï¼Œæœ€ç»ˆå®ç°ç²¾ç»†åŒ–çš„åŒ¹é…ã€‚ æ‰€ä»¥æˆ‘è®¤ä¸ºä¸€ä¸ªå®Œæ•´çš„ã€Œæ™ºèƒ½ç³»ç»Ÿã€ï¼Œæ˜¯åŒ…å«äº†ã€Œæ„ŸçŸ¥ã€ä¸ã€Œè¡ŒåŠ¨ã€ï¼Œå…¶ä¸­æ”¯æ’‘è¡ŒåŠ¨çš„æ˜¯å†³ç­–å’Œè°ƒåº¦çš„æŠ€æœ¯ã€‚è€Œè¡¡é‡è¿™ä¸ªæ™ºèƒ½ç³»ç»Ÿæ˜¯å¦æœ‰ä»·å€¼çš„æ ‡å‡†ï¼Œæ˜¯çœ‹å…¶è§£æ”¾çš„ç”Ÿäº§åŠ›çš„å¤šå°‘ã€‚ é—æ†¾çš„æ˜¯ï¼Œåˆ°ä»Šå¤©ä¸ºæ­¢æˆ‘è®¤ä¸ºä¸šç•Œå¹¶ä¸å­˜åœ¨ä¸€ä¸ªç†æƒ³çš„ã€Œæ™ºèƒ½ç³»ç»Ÿã€ã€‚ä¸šç•Œå½“å‰çš„çŠ¶æ€æˆ‘ç§°ä¹‹ä¸ºã€Œæœ‰æ™ºèƒ½ï¼Œæ²¡ç³»ç»Ÿã€ã€‚å¾ˆå¤šäººå·¥æ™ºèƒ½çš„åˆ›ä¸šå…¬å¸æ‹¥æœ‰å±€éƒ¨çš„æ™ºèƒ½èƒ½åŠ›ï¼Œæ¯”å¦‚è§†è§‰ã€è¯­éŸ³ã€NLPã€çŸ¥è¯†å›¾è°±ã€æœç´¢ã€æ¨èç­‰ä¸­çš„ä¸€é¡¹æˆ–å¤šé¡¹æŠ€æœ¯ï¼Œä½†æ˜¯å¾ˆå°‘æœ‰å…¬å¸æœ‰å®Œæ•´çš„æŠ€æœ¯æ ˆã€‚è€Œåƒ BAT ç­‰å…¬å¸å…·å¤‡å®Œæ•´çš„æŠ€æœ¯æ ˆï¼Œä½†æ˜¯å´å¹¶æ²¡æœ‰å°†æ‰€æœ‰çš„æŠ€æœ¯æ•´åˆæˆä¸ºã€Œæ„ŸçŸ¥ã€+ã€Œè¡ŒåŠ¨ã€çš„ä¸€ä¸ªå®Œæ•´ç³»ç»Ÿï¼Œè€Œæ˜¯å„é¡¹æŠ€æœ¯ä»¥ç¢ç‰‡åŒ–çš„å½¢å¼å­˜åœ¨ã€‚å°¤å…¶æ˜¯å°†æ‰€æœ‰æŠ€æœ¯åº”ç”¨åˆ°æŸä¸€ä¸ªå…·ä½“åœºæ™¯ä¸­è§£å†³æŸä¸€ä¸ªå…·ä½“é—®é¢˜çš„ï¼Œæ›´æ˜¯å¯¥å¯¥æ— å‡ ï¼Œè€Œè¿™æ­£æ˜¯å‚¬ç”Ÿå‡ºè¿™ä¸€æ™ºèƒ½ç³»ç»Ÿçš„å…³é”®æ‰€åœ¨ã€‚æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå·¥ç¨‹åŒ–çš„é—®é¢˜ï¼Œå·¥ç¨‹åŒ–çš„æŒ‘æˆ˜åœ¨äºæ•´åˆæ‰€æœ‰æ™ºèƒ½æŠ€æœ¯ï¼Œå®ç°å®Œæ•´çš„ã€Œæ„ŸçŸ¥ã€+ã€Œè¡ŒåŠ¨ã€èƒ½åŠ›ï¼Œå¹¶æœ‰æ•ˆçš„æ§åˆ¶æˆæœ¬ï¼Œå®ç°å¯¹å¼€å‘è€…å‹å¥½çš„æ¥å£ã€‚ åœ¨æ™ºèƒ½æŠ€æœ¯çš„è§’åº¦æ¥çœ‹ï¼Œã€Œè‡ªåŠ¨é©¾é©¶ã€å’Œã€Œæ™ºèƒ½éŸ³ç®±ã€æ˜¯ä¸¤ä¸ªå®Œæ•´çš„ä»ã€Œæ„ŸçŸ¥ã€åˆ°ã€Œè¡ŒåŠ¨ã€é—­ç¯çš„åœºæ™¯ã€‚æˆ‘è®¤ä¸ºè¿™ä¸¤ä¸ªåœºæ™¯å¯ä»¥ç”¨æ¥æ‰“ç£¨æœºå™¨æ™ºèƒ½æŠ€æœ¯ï¼Œä½†æ˜¯å½“å‰åœ¨å•†ä¸šä¸Šæ¯”è¾ƒéš¾æˆåŠŸã€‚ã€Œè‡ªåŠ¨é©¾é©¶ã€è§£æ”¾äº†æ‰€æœ‰çš„é©¾é©¶å‘˜ï¼Œå¯¹è§£æ”¾ç”Ÿäº§åŠ›çš„ä»·å€¼éå¸¸æ˜æ˜¾ï¼Œä½†æ˜¯å› ä¸ºå—åˆ¶äºä»Šå¤©åŸå¸‚çš„é“è·¯åŸºç¡€è®¾æ–½ï¼Œå› æ­¤å¯¹è€åŸå¸‚çš„æ„ä¹‰ä¸å¤§ã€‚ä»Šå¤©åŸå¸‚çš„é“è·¯ä¸æ˜¯ä¸ºè‡ªåŠ¨é©¾é©¶è®¾è®¡çš„ï¼Œä¹Ÿå¾ˆéš¾å®¹çº³ä¸‹è‡ªåŠ¨é©¾é©¶çš„æ±½è½¦ã€‚å› æ­¤è‡ªåŠ¨é©¾é©¶æ›´é€‚åˆèˆªç©ºã€èˆªæµ·ã€ç‰©æµç­‰é¢†åŸŸï¼Œå•†ä¸šèŒƒå›´ä¸€ä¸‹å°äº†å¾ˆå¤šã€‚ã€Œæ™ºèƒ½éŸ³ç®±ã€ç»¼åˆäº†å¤šé¡¹æœºå™¨æ™ºèƒ½æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒæŠ€æœ¯ã€Œå¯¹è¯æœºå™¨äººã€è¢«ç§°ä¸ºäººå·¥æ™ºèƒ½é¢†åŸŸçš„åœ£æ¯ï¼Œæƒ³è¦åšå¥½éš¾åº¦ç›¸å½“ä¹‹å¤§ã€‚ä½†æ˜¯ã€Œæ™ºèƒ½éŸ³ç®±ã€å½“å‰çš„é˜¶æ®µå¯¹å®¶åº­ä¸­å„ç§ä»»åŠ¡çš„ç”Ÿäº§åŠ›è§£æ”¾æå…¶æœ‰é™ï¼Œä»·å€¼å¾ˆéš¾è®²æ¸…æ¥šï¼Œæœ€åæ²¦ä¸ºç©ç‰©çš„å¯èƒ½æ€§æ¯”è¾ƒå¤§ã€‚å°½ç®¡å¦‚æ­¤ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œéšç€åŸºç¡€è®¾æ–½çš„æ›´æ–°æ¢ä»£ï¼Œè¿™ä¸¤é¡¹æŠ€æœ¯ä¹Ÿä¼šé€æ¸ç„•å‘å‡ºä»–ä»¬çš„ç”Ÿå‘½åŠ›ã€‚ å¦‚æœç”¨èˆªç©ºä¸šæ¥æ¯”å–»çš„è¯ï¼Œä»Šå¤©çš„æ™ºèƒ½æŠ€æœ¯ï¼Œå°±å¥½æ¯”é€ é£æœºï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šé›¶ä»¶å’Œå¼•æ“ï¼Œä½†æ˜¯æ‰€æœ‰çš„å‚å•†éƒ½æ‹¿ç€é›¶ä»¶å½“é£æœºå–ï¼Œå®¢æˆ·ä»¥ä¸ºä»–ä¹°äº†ä¸€æ¶é£æœºï¼Œå…¶å®åªæ˜¯ä¹°äº†ä¸ªé›¶ä»¶ï¼ˆå› ä¸ºç”Ÿäº§åŠ›å¹¶æ²¡æœ‰å¾—åˆ°å¤šå¤§çš„è§£æ”¾ï¼‰ã€‚è€Œä»Šå¤©çœŸæ­£çš„éš¾ç‚¹åœ¨äºé£æœºè®¾è®¡å›¾çº¸éƒ½è¿˜æ²¡æœ‰ã€‚ æ‰€ä»¥æˆ‘æ‰“ç®—å…ˆç”»ä¸€å¼ ï¼Œé€ æ¶é£æœºç©ç©ã€‚ æ„å»ºæ™ºèƒ½æ—¶ä»£é£æœºæƒ³è¦çœŸæ­£é£ä¸Šå¤©ï¼Œè¿˜éœ€è¦å‡ ä¸ªä¸œè¥¿ã€‚ é¦–å…ˆæ˜¯é£è¡Œå‘˜ã€‚é£è¡Œå‘˜ä¸ä¸€å®šè¦æ‡‚å¾—æ€ä¹ˆé€ é£æœºï¼Œé€ é£æœºæ˜¯ä¸ªé—¨æ§›å¾ˆé«˜çš„æ´»ã€‚ä½†æ˜¯é£è¡Œå‘˜è¦æ‡‚å¾—æ€ä¹ˆå¼€é£æœºï¼Œæœ€åè¿˜è¦è®©äººäººéƒ½èƒ½åé£æœºã€‚æˆ‘è®¤ä¸ºé£è¡Œå‘˜å°±æ˜¯æœªæ¥å„ä¸ªä¼ä¸šé‡Œæ™ºèƒ½éƒ¨é—¨çš„å‘˜å·¥ï¼Œä»–ä»¬è´Ÿè´£è®­ç»ƒä¹°æ¥çš„æ™ºèƒ½ç³»ç»Ÿï¼Œè®©æ™ºèƒ½ç³»ç»ŸçœŸæ­£å…·å¤‡æ™ºèƒ½ã€‚ç”±äºå„ä¸ªä¼ä¸šæ‹¥æœ‰çš„æ•°æ®çš„ä¸åŒï¼Œä»¥åŠã€Œé£è¡Œå‘˜ã€æŠ€èƒ½çš„é«˜ä½å’Œè´£ä»»å¿ƒï¼Œæœ€åçš„å„ä¸ªä¼ä¸šçš„æ™ºèƒ½ç³»ç»Ÿçš„èªæ˜ç¨‹åº¦ä¹Ÿä¼šå‡ºç°å·®å¼‚ã€‚ä¸–ç•Œæ˜¯ä¸°å¯Œå¤šå½©çš„ã€‚ å…¶æ¬¡æ˜¯èˆªé“ã€‚æˆ‘è®¤ä¸ºèˆªé“ä¾ç„¶æ˜¯åŸºç¡€è®¾æ–½æä¾›å•†çš„ï¼ŒåŒ…æ‹¬è¿è¥å•†ã€äº‘è®¡ç®—å‚å•†ç­‰ã€‚ æœ€åæ˜¯æœºåœºã€‚æœºåœºéœ€è¦è´Ÿè´£æ‰€æœ‰èˆªç­çš„è°ƒåº¦å’ŒååŒï¼Œä¸ºæ‰€æœ‰çš„é£æœºæä¾›æœåŠ¡ã€‚è¿™æ˜¯æœ€æœ‰æ„æ€çš„åœ°æ–¹ã€‚æˆ‘è®¤ä¸ºã€Œæœºåœºã€æ˜¯æœ€åçœŸæ­£çš„å•†ä¸šæ¨¡å¼ï¼Œå°±åƒè‹¹æœçš„ AppStore ä¸€æ ·ã€‚ æˆ‘è®¤ä¸ºåœ¨æ™ºèƒ½æ—¶ä»£çš„ã€Œæœºåœºã€ï¼Œæœ€é‡è¦çš„å·¥ä½œæ˜¯ç»™æœºå™¨æ™ºèƒ½ç³»ç»Ÿæä¾›æœåŠ¡ï¼Œè€Œå¹¶éç»™äººæä¾›æœåŠ¡ã€‚ æƒ³è±¡ä¸€ä¸‹æœªæ¥äº’è”ç½‘é‡Œï¼Œ70%-80%çš„äººå£æ˜¯æœºå™¨æ™ºèƒ½ï¼Œä»–ä»¬å¤„ç†äº†æœªæ¥ä¸–ç•Œçš„ç»å¤§å¤šæ•°å·¥ä½œï¼Œè€Œæ¯ä¸€ä¸ªæœºå™¨æ™ºèƒ½åˆæ˜¯æœ‰ä¸€ä¸ªä¸»äººçš„ã€‚å…¶ä¸»äººå¯ä»¥æ˜¯ä¸ªäººï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„ç»‡ï¼Œä½†éƒ½æ˜¯æœ‰ä¸»æƒçš„ã€‚æ¯ä¸€ä¸ªæœºå™¨æ™ºèƒ½å­˜åœ¨çš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†å®ŒæˆæŸä¸ªæˆ–å¤šä¸ªä»»åŠ¡ã€‚é‚£ä¹ˆä¸ºæ‰€æœ‰çš„æœºå™¨æ™ºèƒ½æä¾›æœåŠ¡ï¼Œå°±ä¼šæ˜¯ä¸€ä¸ªå·¨å¤§çš„å•†ä¸šæ¨¡å¼ã€‚ æœºå™¨æ™ºèƒ½ç³»ç»Ÿçš„è‡ªåŠ¨ååŒæ˜¯é€šå¾€æœªæ¥çš„å…³é”®è·¯å¾„ åŒæ—¶æˆ‘ä¹Ÿè®¤ä¸ºå½“å‰çš„æœºå™¨æ™ºèƒ½äº§ä¸šï¼Œè¿‡äºé‡è§†äººä¸æœºå™¨çš„äº¤äº’ï¼Œè€Œå¿½è§†äº†æœºå™¨ä¸æœºå™¨çš„äº¤äº’ã€‚è€Œåè€…æ‰æ˜¯æ›´é‡è¦çš„äº‹æƒ…ã€‚å› ä¸ºäººä¸æœºå™¨çš„äº¤äº’ä¾ç„¶æ˜¯å›åˆ°äº†ä¿¡æ¯åŒ–ç³»ç»Ÿçš„è€è·¯ä¸Šå»ï¼Œè€Œæœºå™¨ä¸æœºå™¨çš„è‡ªåŠ¨ååŒï¼Œåˆ™æ˜¯åœ¨è¿›ä¸€æ­¥å°†æ™ºèƒ½ç³»ç»Ÿçš„ä»·å€¼å®ç°è§„æ¨¡æ”¾å¤§ã€‚ å› æ­¤æœªæ¥æœ‰å¿…è¦ç»™æ‰€æœ‰çš„æœºå™¨æ™ºèƒ½å®šä¹‰ä¸€å¥—è¯­è¨€ï¼Œä»–ä»¬ä¹‹é—´çš„äº¤æµå¯ä»¥åƒäººä¸€æ ·æ‹¥æœ‰è‡ªå·±çš„è¯­è¨€ï¼Œå®ç°ç®€å•çš„é€»è¾‘ã€‚è€Œæ‰€æœ‰æœºå™¨æ™ºèƒ½ä¹‹é—´çš„äº¤äº’ä¸ååŒï¼Œæ˜¯ä¸éœ€è¦äººå·¥å¹²é¢„çš„ï¼Œå°±åƒä½ å®¶çš„å­©å­ä¸é‚»å±…å®¶çš„å­©å­è‡ªå·±ä¼šå»ç©è€ä¸€æ ·ï¼Œä½ ä¸éœ€è¦å¹²é¢„åˆ°ä»–ä»¬çš„äº¤æµä¹‹ä¸­ï¼Œä»–ä»¬è‡ªå·±ä¼šå„å–æ‰€éœ€åœ°å®Œæˆå„è‡ªçš„ä»»åŠ¡ã€‚ ä»¥ã€Œä¸€ç½‘é€šåŠã€çš„ä¸šåŠ¡ä¸¾ä¾‹ã€‚åœ¨å½“å‰ä¸€ç½‘é€šåŠçš„ä¸»æµå®ç°åŠæ³•æ˜¯å°†æ”¿åºœå„å§”åŠå±€çš„æ•°æ®å®ç°å…¨é‡æ±‡èšåï¼Œè¿›è¡Œæ•°æ®æ²»ç†ï¼Œå¹¶æ¢³ç†æµç¨‹ï¼Œé‡å¡‘ä¸šåŠ¡ã€‚è¿™ç§å¤§æ•°æ®åº”ç”¨çš„æ€è·¯ä¾ç„¶æ˜¯åœç•™åœ¨ä¿¡æ¯åŒ–å»ºè®¾çš„è€è·¯ä¸Šï¼Œå…¶å¼Šç«¯æ˜¯æƒ³æ¨åŠ¨æ–°æŠ€æœ¯è½åœ°çš„å‰ææ˜¯æµç¨‹å…ˆæ”¹é©ï¼ŒåŒæ—¶å„ä¸ªä¸åŒåœ°åŒºçš„é«˜åº¦å®šåˆ¶åŒ–å¯¼è‡´å¾ˆéš¾åœ¨å…¨å›½å®ç°è§„æ¨¡åŒ–çš„äº§å“ã€‚ä½†å…¶å®ä¹Ÿå¯ä»¥æœ‰å¦å¤–ä¸€ç§æ™ºèƒ½åŒ–çš„å»ºè®¾æ€è·¯ï¼Œè®©æ¯ä¸ªå§”åŠå±€è‡ªå·±å»ºä¸€ä¸ªæœºå™¨æ™ºèƒ½ç³»ç»Ÿï¼Œå…¶ä»»åŠ¡å°±æ˜¯ä»£æ›¿å…¬åŠ¡å‘˜å¤„ç†å„è‡ªçš„çª—å£ä¸šåŠ¡ã€‚å½“å¸‚æ°‘æ¥æäº¤ä¸€ä¸ªç”³è¯·æ—¶ï¼Œç»è¿‡è®¤è¯åï¼Œè¯¥å§”åŠå±€çš„æœºå™¨æ™ºèƒ½ç³»ç»Ÿå°±æ ¹æ®æ‰€éœ€ææ–™ï¼Œè‡ªè¡Œå‘å…¶ä»–å§”åŠå±€çš„æœºå™¨æ™ºèƒ½ç³»ç»Ÿå‘å‡ºååŒè¯·æ±‚ï¼Œç»è¿‡å‡ è½®æœºå™¨æ™ºèƒ½ä¹‹é—´çš„äº¤æµå’ŒååŒä¹‹åï¼Œå¸‚æ°‘å¾ˆå¿«å°±å¾—åˆ°äº†ä»–æƒ³è¦çš„ç»“æœã€‚è¿™ç§å¤šä¸ªæœºå™¨æ™ºèƒ½ç³»ç»Ÿä¹‹é—´è‡ªåŠ¨ååŒçš„æœºåˆ¶ï¼Œå¯¹æµç¨‹çš„å†²å‡»æ˜æ˜¾ä¼šå°å¾ˆå¤šã€‚ æœºå™¨æ™ºèƒ½ä¹‹é—´çš„äº¤äº’ä¸ååŒéœ€è¦é€šè¿‡ç½‘ç»œè¿æ¥åˆ°ä¸€èµ·ï¼Œä½†å®‰å…¨æ€§æ˜¯å¯æ§çš„ï¼Œå› ä¸ºæ˜¯ä¸šåŠ¡ä¹‹é—´çš„ååŒï¼Œè€Œå¹¶éæ•°æ®æœ¬èº«å‘ç”Ÿäº†äº¤æ¢ã€‚å› ä¸ºæ¯ä¸€ä¸ªæœºå™¨æ™ºèƒ½éƒ½æœ‰è‡ªå·±çš„ä¸»äººï¼Œæ‰€æœ‰çš„è®­ç»ƒè¿‡ç¨‹ä¹Ÿéƒ½å‘ç”Ÿåœ¨å…¶ä¸»ä½“å†…éƒ¨ï¼Œå› æ­¤æ•°æ®å¹¶ä¸éœ€è¦è¢«æ‹¿å‡ºæ¥äº¤æ¢å…±äº«ã€‚ä¸»äººå¯ä»¥è®¾å®šæœºå™¨æ™ºèƒ½ä»€ä¹ˆèƒ½è¯´ï¼Œä»€ä¹ˆä¸èƒ½è¯´ï¼Œæ‰€æœ‰çš„å®‰å…¨æ§åˆ¶éƒ½å‘ç”Ÿåœ¨æ™ºèƒ½ç³»ç»Ÿå†…éƒ¨ï¼Œè€Œä¸€æ—¦è¿æ¥åˆ°äº’è”ç½‘è¦ä¸å…¶ä»–æœºå™¨æ™ºèƒ½ååŒæˆ–ä½¿ç”¨ã€Œæœºåœºã€æä¾›çš„æœåŠ¡ï¼Œå°±ä¼šè½¬ä¸ºã€Œé»˜è®¤ä¸ä¿¡ä»»ã€æ¨¡å¼ã€‚ è‡³äºæœºå™¨æ™ºèƒ½ç³»ç»Ÿåˆ°åº•éƒ¨ç½²åœ¨å…¬å…±äº‘è¿˜æ˜¯ä¸“æœ‰äº‘ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œä¸»äººçˆ±éƒ¨ç½²åœ¨å“ªé‡Œå°±éƒ¨ç½²åœ¨å“ªé‡Œã€‚æ‰€ä»¥æ—¶è‡³ä»Šæ—¥ï¼Œäº‘è®¡ç®—ä¾ç„¶æœ‰è¢«ç®¡é“åŒ–çš„å±é™©ï¼Œå°±åƒè¿è¥å•†è¢«äº’è”ç½‘å†…å®¹æä¾›å•†ç®¡é“åŒ–ä¸€æ ·ï¼Œæœªæ¥äº‘è®¡ç®—å‚å•†ä¹Ÿå¯èƒ½ä¼šè¢«æ™ºèƒ½å‚å•†ç®¡é“åŒ–ã€‚å› ä¸ºäº‘è®¡ç®—å’Œå¤§æ•°æ®éƒ½ä¸æ˜¯æ™ºèƒ½ã€‚ Aç»„ä¹Ÿå› æ­¤ï¼Œä¸ºäº†ä»¥ä¸Šè¿™äº›æ„æƒ³ï¼Œæˆ‘å—å‘½åœ¨é˜¿é‡Œäº‘æˆç«‹ã€ŒAç»„ã€ã€‚ã€ŒAç»„ã€æˆç«‹çš„ä½¿å‘½å°±æ˜¯ä¸ºäº†æ„å»ºå‡ºè¿™ä¸€æœºå™¨æ™ºèƒ½ç³»ç»Ÿï¼Œè®©æ™ºèƒ½æ—¶ä»£æ›´å¿«çš„åˆ°æ¥ã€‚ æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä»¶éœ€è¦æ•´ä¸ªç¤¾ä¼šå…±åŒåŠªåŠ›ä¸‰ååˆ°äº”åå¹´çš„äº‹æƒ…ï¼Œå°±åƒåœ¨è¿‡å»çš„ä¸‰ååˆ°äº”åå¹´æˆ‘ä»¬åœ¨ä¿¡æ¯åŒ–å»ºè®¾ä¸Šä»˜å‡ºçš„æ‰€æœ‰åŠªåŠ›ä¸€æ ·ã€‚ ä»¥ä¸Šï¼Œå°±æ˜¯æˆ‘æƒ³å¯¹ä¸–ç•Œè¯´çš„è¯ã€‚ æˆ‘è¯´ï¼Œä½ å¬ã€‚ é˜¿é‡Œäº‘-GTS-Aç»„ å´ç¿°æ¸…]]></content>
      <categories>
        <category>Quote</category>
      </categories>
      <tags>
        <tag>æ™ºèƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­˜åœ¨ä¸»ä¹‰å¿ƒç†åŠ¨åŠ›å­¦]]></title>
    <url>%2F2019%2F06%2F09%2Fexistential_psychodynamics%2F</url>
    <content type="text"><![CDATA[ä»¥ä¸‹å†…å®¹èŠ‚é€‰è‡ªã€å­˜åœ¨ä¸»ä¹‰å¿ƒç†æ²»ç–—ã€-æ¬§æ–‡ãƒ»Dãƒ»äºšéš† å­˜åœ¨ä¸»ä¹‰è§‚ç‚¹å¼ºè°ƒä¸€ç§ä¸åŒç±»å‹çš„åŸºæœ¬å†²çª: æ—¢ä¸æ˜¯ä¸è¢«å‹æŠ‘çš„æœ¬èƒ½æŠ—äº‰ä¹‹é—´çš„å†²çªï¼Œä¹Ÿä¸æ˜¯ä¸å†…åŒ–äº†çš„æˆäººä¹‹é—´çš„å†²çªã€‚è€Œæ˜¯ï¼Œåœ¨ä¸ªä½“é¢å¯¹å­˜åœ¨çš„æ—¢å®šäº‹å®æ—¶å¼•å‘å‡ºæ¥çš„å†²çªã€‚è€Œæˆ‘æ‰€è¯´çš„å­˜åœ¨çš„â€œæ—¢å®šäº‹å®â€ï¼Œæ„æŒ‡æŸäº›ç»ˆæå…³æ€€ã€æŸäº›äººä¹‹æ‰€ä»¥ä¸ºäººçš„å¿…ç„¶ç‰¹è´¨ã€‚ æ€æ ·å‘ç°è¿™äº›æ—¢å®šäº‹å®çš„æ€§è´¨ï¼Ÿåœ¨æŸäº›æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¿™ä¸ªä»»åŠ¡å¹¶ä¸å›°éš¾ã€‚æ–¹æ³•å°±æ˜¯æ·±åº¦çš„ä¸ªäººåæ€ã€‚æ¡ä»¶å¾ˆç®€å•ï¼šä»å……æ–¥ç€æˆ‘ä»¬æ¯ä¸ªäººç»éªŒä¸–ç•Œçš„æ—¥å¸¸çäº‹ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œç»™è‡ªå·±ä»¥ç‹¬å¤„ã€æ²‰é»˜ã€æ—¶é—´ä»¥åŠè‡ªç”±ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ¸…é™¤æˆ–è€…â€œå›Šæ‹¬â€æ—¥å¸¸ç”Ÿæ´»ï¼Œå¦‚æœæˆ‘ä»¬å¯¹äºè‡ªå·±åœ¨ä¸–ç•Œä¸Šçš„â€œå¤„å¢ƒâ€ï¼Œå¯¹äºæˆ‘ä»¬çš„å­˜åœ¨ã€æˆ‘ä»¬çš„ç•Œé™ã€æˆ‘ä»¬çš„æ½œåŠ›è¿›è¡Œæ·±åˆ»çš„åæ€ï¼Œå¦‚æœæˆ‘ä»¬æ·±å…¥åˆ°æ‰€æœ‰å±‚é¢çš„æœ€åº•å±‚ï¼Œæˆ‘ä»¬å¿…ç„¶ä¼šé¢å¯¹å­˜åœ¨çš„æ—¢å®šäº‹å®ï¼Œé¢å¯¹â€œæ·±åº¦ç»“æ„â€ï¼Œæˆ‘ä¹‹åå°†ç§°ä¹‹ä¸ºâ€œç»ˆæå…³æ€€â€ã€‚è¿™äº›åæ€è¿‡ç¨‹å¸¸å¸¸ä¸ºæŸäº›ç´§æ€¥ä½“éªŒæ‰€å‚¬åŒ–ã€‚è¿™äº›å¸¸è¢«ç§°ä½œâ€œè¾¹ç¼˜â€æˆ–è€…â€œä¸´ç•Œâ€çŠ¶æ€ï¼ŒåŒ…æ‹¬å¦‚ä¸‹ä½“éªŒï¼šé¢å¯¹è‡ªå·±çš„æ­»äº¡ã€é¢ä¸´æŸäº›é‡å¤§ä¸å¯é€†è½¬çš„å†³å®šæˆ–è€…æŸäº›æ·±å…·æ„ä¹‰çš„å›¾å¼åœ¨çœ¼å‰åç¼©ã€‚ æœ¬ä¹¦æ¶‰åŠå››ä¸ªç»ˆæå…³æ€€ï¼šæ­»äº¡ã€è‡ªç”±ã€å­¤ç‹¬å’Œæ— æ„ä¹‰ã€‚ä¸ªä½“ä¸è¿™äº›ç”Ÿå‘½çœŸç›¸çš„æ­£é¢äº¤é”‹ï¼Œæ„æˆäº†å­˜åœ¨ä¸»ä¹‰åŠ¨åŠ›æ€§å†²çªçš„å†…å®¹ã€‚ æ­»äº¡ã€‚æœ€æ˜¾è€Œæ˜“è§çš„ã€æœ€å®¹æ˜“ç†è§£çš„ç»ˆæå…³æ€€å°±æ˜¯æ­»äº¡ã€‚æˆ‘ä»¬ç°åœ¨å­˜åœ¨ï¼Œä½†æ˜¯æ€»æœ‰ä¸€å¤©ï¼Œè¿™ç§å­˜åœ¨ä¼šç»ˆæ­¢ã€‚æ­»äº¡å°†å¦‚æœŸè€Œè‡³ï¼Œæ²¡æœ‰é€ƒè„±ä¹‹è·¯ã€‚è¿™æ˜¯ä¸€ä¸ªææ€–çš„çœŸç›¸ï¼Œèƒ½å¼•å‘æˆ‘ä»¬å·¨å¤§çš„ææƒ§ã€‚ç”¨æ–¯å®¾è¯ºèçš„è¯æ¥è¯´ï¼Œâ€œæ¯ä¸€äº‹ç‰©éƒ½åœ¨å°½åŠ›ç»´æŒè‡ªèº«çš„å­˜åœ¨â€ï¼›è€Œå­˜åœ¨çš„ä¸€ä¸ªæ ¸å¿ƒå†²çªå°±æ˜¯ï¼Œå¯¹æ­»äº¡å¿…ç„¶æ€§çš„æ„è¯†ä¸ç»§ç»­ç”Ÿå­˜ä¸‹å»çš„æ„¿æœ›ä¹‹é—´çš„å¼ åŠ›ã€‚ è‡ªç”±ã€‚å¦ä¸€ä¸ªç›¸å¯¹æ¥è¯´ä¸å¤ªå®¹æ˜“ç†è§£çš„ç»ˆæå…³æ€€æ˜¯è‡ªç”±ã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éƒ½è®¤ä¸ºè‡ªç”±æ˜¯ä¸€ä¸ªæ¯‹åº¸ç½®ç–‘çš„ç§¯ææ¦‚å¿µã€‚æœ‰å²ä»¥æ¥ï¼Œäººç±»ä¸æ˜¯ä¸€ç›´éƒ½åœ¨æ¸´æœ›å¹¶ä¸ºè‡ªç”±è€Œå¥‹æ–—å—ï¼Ÿç„¶è€Œä»ç»ˆæå±‚é¢æ¥çœ‹ï¼Œè‡ªç”±æ˜¯ä¸å¿§æƒ§å¶è”åœ¨ä¸€èµ·çš„ã€‚åœ¨å­˜åœ¨çš„æ„ä¹‰ä¸Šï¼Œâ€œè‡ªç”±â€æ„å‘³ç€å¤–éƒ¨ç»“æ„çš„ç©ºç™½ã€‚ä¸æ—¥å¸¸ç»éªŒç›¸åçš„æ˜¯ï¼Œäººç±»å¹¶ä¸æ˜¯è¿›å…¥(å’Œç¦»å¼€)ä¸€ä¸ªæ‹¥æœ‰å†…åœ¨è®¾è®¡ã€é«˜åº¦ç»“æ„åŒ–çš„å®‡å®™ã€‚å®é™…ä¸Šï¼Œä¸ªä½“å¯¹ä»–è‡ªå·±çš„ä¸–ç•Œã€ç”Ÿæ´»è®¾è®¡ã€é€‰æ‹©ä»¥åŠè¡Œä¸ºè´Ÿæœ‰å…¨éƒ¨è´£ä»»â€“ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ªä½“æ˜¯è‡ªå·±ä¸–ç•Œçš„åˆ›é€ è€…ã€‚â€œè‡ªç”±â€åœ¨è¿™ç§å«ä¹‰ä¸Šï¼Œå¸¦æœ‰ä¸€ç§å¯æ€•çš„æš—ç¤ºï¼šå®ƒæ„å‘³ç€åœ¨æˆ‘ä»¬æ‰€ç«™ç«‹çš„åœ°æ–¹å¹¶ä¸åšå®â€“ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæ˜¯ç©ºçš„ï¼Œæ— åº•æ·±æ¸Šã€‚æ‰€ä»¥ï¼Œå­˜åœ¨ä¸»ä¹‰ä¸€ä¸ªå…³é”®çš„åŠ¨åŠ›æ€§å†²çªå°±æ˜¯ï¼Œæˆ‘ä»¬æ— æ ¹åŸºçš„å¤„å¢ƒä¸æˆ‘ä»¬å¯¹æ ¹åŸºä¸ç»“æ„çš„æ¸´æœ›ä¹‹é—´çš„å†²çªã€‚ å­˜åœ¨æ€§å­¤ç‹¬ã€‚ç¬¬ä¸‰ä¸ªç§ç»ˆæå…³æ€€æ˜¯å­¤ç‹¬â€“ä¸æ˜¯ä¼´éšç€å¯‚å¯çš„äººé™…æ€§å­¤ç‹¬ï¼Œä¹Ÿä¸æ˜¯ä¸ªäººå†…å¿ƒçš„å­¤ç‹¬(ä¸è‡ªèº«çš„å…¶ä»–éƒ¨åˆ†éš”ç¦»)ï¼Œè€Œæ˜¯ä¸€ç§æ ¹æœ¬æ€§å­¤ç‹¬â€“æ—¢ä¸ç”Ÿå‘½éš”ç»ï¼Œä¹Ÿä¸ä¸–ç•Œéš”ç»â€“éš”ç»åœ¨æ‰€æœ‰å…¶ä»–å­¤ç‹¬ä¹‹ä¸‹ã€‚æ— è®ºæˆ‘ä»¬ä¹‹é—´å˜å¾—æœ‰å¤šä¹ˆäº²å¯†æ— é—´ï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªæœ€ç»ˆæ— æ³•é€¾è¶Šçš„é¸¿æ²Ÿï¼›æˆ‘ä»¬æ¯ä¸ªäººéƒ½æ˜¯ç‹¬è‡ªä¸€äººè¿›å…¥è¿™ç§å­˜åœ¨ï¼ŒåŒæ—¶ä¹Ÿæ³¨å®šè¦ç‹¬è‡ªç¦»å¼€ã€‚ä¸€æ–¹é¢æ˜¯æˆ‘ä»¬å¯¹è‡ªèº«ç»å¯¹å­¤ç‹¬çš„æ„è¯†ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¯¹æ¥è§¦ã€ä¿æŠ¤çš„æ¸´æœ›ï¼Œä»¥åŠæˆä¸ºä¸€ä¸ªæ›´å¤§æ•´ä½“çš„ä¸€éƒ¨åˆ†çš„æ„¿æœ›ï¼Œå­˜åœ¨æ€§å†²çªå°±æ˜¯è¿™ä¸¤ä¸ªæ–¹é¢ä¹‹é—´çš„å¼ åŠ›ã€‚ æ— æ„ä¹‰ã€‚ç¬¬å››ä¸ªç»ˆæå…³æ€€æˆ–å­˜åœ¨çš„æ—¢å®šäº‹å®æ˜¯æ— æ„ä¹‰ã€‚å¦‚æœæˆ‘ä»¬æ³¨å®šå¾—æ­»ï¼Œå¦‚æœæˆ‘ä»¬æ„å»ºæˆ‘ä»¬è‡ªå·±çš„ä¸–ç•Œï¼Œå¦‚æœæ¯ä¸€ä¸ªäººæœ€ç»ˆéƒ½æ˜¯ç‹¬è‡ªä¸€äººæ·±å¤„äºä¸€ä¸ªæ— å…³ç´§è¦çš„ä¸–ç•Œä¹‹ä¸­ï¼Œé‚£ä¹ˆç”Ÿå‘½æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æ´»ç€ï¼Ÿæˆ‘ä»¬åº”è¯¥æ€æ ·æ´»ç€ï¼Ÿå¦‚æœå¹¶ä¸å­˜åœ¨ä¸ºæˆ‘ä»¬é¢„å…ˆè®¾è®¡çš„è“å›¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯ä¸ªäººå°±å¿…é¡»æ„å»ºè‡ªå·±çš„ç”Ÿå‘½æ„ä¹‰ã€‚ç„¶è€Œï¼Œä¸€ä¸ªäººè‡ªå·±åˆ›é€ å‡ºæ¥çš„æ„ä¹‰èƒ½å¦åšå¼ºåˆ°ä»¤å…¶å®¹å¿ç”Ÿæ´»ï¼Ÿäººç±»è¿™ç§å¯»æ‰¾æ„ä¹‰çš„ç”Ÿç‰©ï¼Œå´è¢«æŠ•å…¥åˆ°æœ¬èº«æ— æ„ä¹‰çš„å®‡å®™ä¹‹ä¸­ï¼Œäºæ˜¯ï¼Œå­˜åœ¨çš„åŠ¨åŠ›æ€§å†²çªä¾¿ä»è¿›é€€ç»´è°·çš„å¢ƒåœ°ä¸­æ»‹ç”Ÿå‡ºæ¥ã€‚ ä¸æ­¢å¬ä¸€ä¸ªäººè¯´è¿‡ï¼Œå“²å­¦è¦æµ…å°è¾„æ­¢ã€‚å¥½åƒçš„ç¡®æ˜¯è¿™æ ·ï¼Œï¼Œæµ…å°è¾„æ­¢ï¼Œå“²å­¦å¸®æˆ‘ä»¬æ„å»ºæ›´ç‹¬ç«‹çš„æ€è€ƒæ–¹å¼ï¼Œè€Œè¿™ç§æ€è€ƒæ–¹å¼è®©æˆ‘ä»¬ä¿æŒè‡ªæˆ‘ï¼Œä¸ä¼šæµäºä¼—äººã€‚ç„¶è€Œï¼Œå“²å­¦å†å¾€æ·±å¤„ï¼Œä¾¿æ˜¯æ·±æ¸Šã€‚è¿™æ·±æ¸Šä¾¿æ˜¯è™šæ— ä¸»ä¹‰ï¼Œåƒä¸Šé¢æåˆ°çš„ã€æ— æ„ä¹‰ã€ã€‚æ— æ•°ä¸ªå‘¨æœ«åˆä¼‘çš„åé†’æ¥ï¼ŒæƒŠè®¶äºå‘¨æœ«çš„æ— æ‰€äº‹äº‹ä¸æ—¶é—´çš„æ‚„ç„¶æµé€â€“å‘¨æœ«åˆåçš„è´¤è€…æ¨¡å¼ã€‚å”¯æœ‰è¯»ä¹¦ã€å†™ä»£ç ã€çœ‹ç”µå½±æˆ–è€…å…¶ä»–çš„æ²‰æµ¸å¼æ´»åŠ¨è®©äººæš‚æ—¶ä»è™šæ— ä¸»ä¹‰ä¸­å›è¿‡å¤´æ¥ï¼Œæ²¾æ²¾çƒŸç«æ°”ï¼Œæˆ‘è¿˜æ´»ç€ï¼Œæ¥åœ°æ°”çš„æ´»ç€ã€‚ è¿™å››ä¸ªç»ˆæå…³æ€€ä¸­ï¼Œï¼Œæ­»äº¡äºæˆ‘ï¼Œå¹¶ä¸å¯æ€•ã€‚åªå¸Œæœ› éª„å‚²çš„äººåº”è¯¥æ­»äºä¸€åœºæ„å¤–ï¼Œè®©ä¸€åˆ‡éƒ½çŒä¸åŠé˜²ã€‚äº‹å®ä¸Šï¼Œåœ¨æŸç§ç¨‹åº¦ï¼Œæˆ‘ç”šè‡³æœ‰äº›æœŸå¾…ï¼šæ­»äº¡æ˜¯å¤šä¹ˆéš¾å¾—çš„ä¸€æ¬¡ç»å†ï¼éš¾å¾—åˆ°ä¸€ç”Ÿåªèƒ½ç»å†ä¸€æ¬¡ã€‚ä¸Šé¢ä¹Ÿæœ‰æåˆ°ã€åæ€è¿‡ç¨‹å¸¸å¸¸è¢«æŸäº›ç´§æ€¥ä½“éªŒæ‰€å‚¬åŒ–ã€ï¼Œæ­»äº¡ä¾¿æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æˆ‘æƒ³ï¼Œåœ¨å“ªä¸ªä¸´ç•Œç‚¹ï¼Œæˆ‘ä»¬ä¸€å®šã€ä¼šåƒæ”¾ç”µå½±ä¸€æ ·ï¼Œäººç”Ÿè¿‡å¾€å†å†åœ¨ç›®ã€ã€‚é‚£ä¸€åˆ»ï¼Œå®Œç¾çš„äººç”Ÿåº”è¯¥è¯´å‡ºä¸€å¥è¯ï¼Œï¼Œã€è¿™è¾ˆå­ï¼Œæ²¡é‡åˆ°ä¸€ä¸ªåäººã€ã€‚ è‡ªç”±äºæˆ‘ï¼Œï¼Œæ¥è§¦åˆ°å“²å­¦ä¹‹åï¼Œä¾¿è®¤è¯†åˆ°å®Œç¾çš„è‡ªç”±æ˜¯ç›¸å¯¹çš„ã€‚æ‰€ä»¥ï¼Œå¾ˆèƒ½ç†è§£ä¸ºä»€ä¹ˆè¦æœ‰æ–‡åŒ–å®¡æŸ¥ï¼Œä¸ºä»€ä¹ˆè¦åœ¨äº’è”ç½‘ä¸–ç•Œä¸­ä¿®å»ºé•¿åŸï¼Œï¼Œè¯¸å¦‚æ­¤ç±»ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ç—›è‹¦ï¼šæˆ‘è¿˜æœ‰å¥½å¤šæ¬²æœ›ï¼Œæ¬²æœ›è®©äººå˜å¾—ä¸é‚£ä¹ˆè‡ªç”±ã€‚ å­¤ç‹¬äºæˆ‘ï¼Œï¼Œå·²ç»è¯•éªŒæ€§çš„ç‹¬è‡ªç”Ÿæ´»äº†ä¸€å¹´å¤šã€‚ä¸€å¤©ä¸­ï¼Œæœ‰16h+çš„æ—¶é—´ï¼Œæˆ‘æ˜¯æ»¡æ„çš„ã€‚å”¯æœ‰ç‹¬è‡ªä¸‹ç­åˆ°å›å®¶è¿™æœŸé—´ä¼šæœ‰äº›ï¼Œï¼Œå­¤ç‹¬ã€‚ä¹Ÿä¸æ˜¯ä¸èƒ½å¿å—ï¼Œæ¯•ç«Ÿåªæœ‰é‚£ä¹ˆä¸€å°æ®µã€‚æˆ‘è¿˜å¯ä»¥é€šè¿‡å“ªäº›æ²‰æµ¸å¼çš„æ´»åŠ¨ï¼Œè®©è‡ªå·±æ´»åœ¨è‡ªå·±çš„ä¸–ç•Œä¸­ï¼Œæ´»åœ¨äº‘ç«¯ã€‚å¶å°”ï¼Œå¶å°”ä¹Ÿä¼šæœ‰é‚£ä¹ˆä¸€ä¸ªå¿µå¤´ï¼šæ¥å—å„¿é»‘å®¢å¸å›½ä¸­çš„ç‰›æ’ä¹Ÿä¸é”™å–”~(è¿™å—ç‰›æ’çœŸçš„å¤ªè¯±äººäº†ï¼Œæ»¡è¶³äº†æˆ‘å¯¹ç‰›æ’çš„æ‰€æœ‰ç¾å¥½æƒ³è±¡[å½ªçœ¼æ³ª])ã€‚ æ— æ„ä¹‰ï¼Œï¼Œå‘ï¼Œè¿™ä¸ªå°±å¯æ€•å¤šäº†ã€‚æ·±æ¸Šï¼Œæˆ‘å®³æ€•çš„æ·±æ¸Šã€‚å¦‚æœæœ‰ä¸€å¤©æˆ‘å†³å®šç»“æŸè‡ªå·±çš„ç”Ÿå‘½(çŸ­æœŸå†…åº”è¯¥é¢„è§ä¸åˆ°è¿™ä¸€å¤©)ï¼Œé‚£ä¸€å®šæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚ä¹‹æ‰€ä»¥ï¼Œè¯»è¿™æœ¬ä¹¦ï¼Œä¹Ÿæ˜¯å› ä¸ºä¸æƒ³æ”¾å¼ƒæ²»ç–—ã€‚å‘¨æœ«åˆåçš„è´¤è€…æ¨¡å¼è¿˜æ˜¯å›æ¥ï¼Œå¸Œæœ›èƒ½ä»è¿™æœ¬ä¹¦å½“ä¸­ï¼Œæ‰¾åˆ°ä¸€äº›ç­”æ¡ˆã€‚ç¬¬åäº”é¡µä¸­æœ‰æåˆ°ï¼š è¦å¤„ç†ç”Ÿå‘½ä¸­æ— æƒ…å­˜åœ¨çš„äº‹å®ï¼Œåªæœ‰ä¸¤ç§æ–¹æ³•â€“å¯¹çœŸç›¸æ„Ÿåˆ°ç„¦è™‘ï¼Œæˆ–è€…å¦è®¤â€“è€Œä¸¤è€…éƒ½ä»¤äººä¸å¿«ã€‚å¡ä¸‡ææ–¯å€Ÿç€ä¸æœ½çš„å ‚å‰è¯ƒå¾·ä¹‹å£è¯´å‡ºäº†è¿™ä¸ªé—®é¢˜ï¼šâ€œä½ è¦åšç–¯ç‹‚çš„æ™ºè€…ï¼Œè¿˜æ˜¯å¥å…¨çš„è ¢è´§ï¼Ÿâ€å­˜åœ¨ä¸»ä¹‰çš„æ²»ç–—ç«‹åœºæ‹’ç»è¿™ç§ä¸¤éš¾ï¼Œæ‰˜é©¬æ–¯ãƒ»å“ˆä»£è¯´ï¼šâ€œå¦‚æœæœ‰å˜å¾—æ›´å¥½çš„æ–¹æ³•ï¼Œå°±æ˜¯å½»åº•çœ‹ä¸€çœ‹æœ€åçš„æƒ…å½¢ã€‚â€è¿™å¥è¯å¯¹æˆ‘å°†è¦æè¿°çš„æ²»ç–—æ–¹æ³•æ˜¯ä¸ªå¾ˆå¥½çš„å†™ç…§ã€‚ â€“ æœ‰åˆ æ”¹ è‡³æ­¤ï¼Œï¼Œå¥½æœŸå¾…å‘¢~]]></content>
      <categories>
        <category>Quote</category>
      </categories>
      <tags>
        <tag>å­˜åœ¨ä¸»ä¹‰å¿ƒç†æ²»ç–—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº HashSet]]></title>
    <url>%2F2019%2F04%2F09%2Fabout_HashSet%2F</url>
    <content type="text"><![CDATA[HashSet çš„ DOC æ³¨é‡Š-Basic JDK7 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/** * This class implements the &lt;tt&gt;Set&lt;/tt&gt; interface, backed by a hash table * (actually a &lt;tt&gt;HashMap&lt;/tt&gt; instance). It makes no guarantees as to the * iteration order of the set; in particular, it does not guarantee that the * order will remain constant over time. This class permits the &lt;tt&gt;null&lt;/tt&gt; * element. * è¯¥ç±»æ˜¯ç”± hash table(å®é™…ä¸Šæ˜¯ HashMap å®ä¾‹) æ”¯æŒçš„ Set æ¥å£çš„å®ç°ç±»ã€‚å®ƒä¸èƒ½ä¿è¯ set çš„è¿­ä»£é¡ºåºï¼›ç‰¹åˆ«æ˜¯ï¼Œå®ƒä¸ä¿è¯ set å†…å…ƒç´ çš„é¡ºåºéšç€æ—¶é—´çš„å˜åŒ–ä¸ä¼šæ”¹å˜ã€‚è¯¥ç±»å…è®¸(æ·»åŠ ) null å…ƒç´ ã€‚ * &lt;p&gt;This class offers constant time performance for the basic operations * (&lt;tt&gt;add&lt;/tt&gt;, &lt;tt&gt;remove&lt;/tt&gt;, &lt;tt&gt;contains&lt;/tt&gt; and &lt;tt&gt;size&lt;/tt&gt;), * assuming the hash function disperses the elements properly among the * buckets. Iterating over this set requires time proportional to the sum of * the &lt;tt&gt;HashSet&lt;/tt&gt; instance's size (the number of elements) plus the * "capacity" of the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance (the number of * buckets). Thus, it's very important not to set the initial capacity too * high (or the load factor too low) if iteration performance is important. * è¯¥ç±»çš„åŸºæœ¬æ“ä½œ(addï¼Œremoveï¼Œcontains å’Œ size)æä¾›O(1)çš„çº§åˆ«çš„æ€§èƒ½è¡¨ç°ï¼Œå‡è®¾ hash æ–¹æ³•å°†å…ƒç´ å‡åŒ€çš„åˆ†å¸ƒåœ¨æ¡¶ä¸­ã€‚éå†æ•´ä¸ª set æ‰€éœ€çš„æ—¶é—´ä¸ HashSet å®ä¾‹çš„ size(å…ƒç´ æ•°é‡) * (åº•å±‚ HashMap å®ä¾‹çš„ capacity(æ¡¶çš„æ•°é‡)) æˆæ­£æ¯”ã€‚ * &lt;p&gt;&lt;strong&gt;Note that this implementation is not synchronized.&lt;/strong&gt; * If multiple threads access a hash set concurrently, and at least one of * the threads modifies the set, it &lt;i&gt;must&lt;/i&gt; be synchronized externally. * This is typically accomplished by synchronizing on some object that * naturally encapsulates the set. * å‚è§ HashMap * If no such object exists, the set should be "wrapped" using the * &#123;@link Collections#synchronizedSet Collections.synchronizedSet&#125; * method. This is best done at creation time, to prevent accidental * unsynchronized access to the set:&lt;pre&gt; * Set s = Collections.synchronizedSet(new HashSet(...));&lt;/pre&gt; * å‚è§ HashMap * &lt;p&gt;The iterators returned by this class's &lt;tt&gt;iterator&lt;/tt&gt; method are * &lt;i&gt;fail-fast&lt;/i&gt;: if the set is modified at any time after the iterator is * created, in any way except through the iterator's own &lt;tt&gt;remove&lt;/tt&gt; * method, the Iterator throws a &#123;@link ConcurrentModificationException&#125;. * Thus, in the face of concurrent modification, the iterator fails quickly * and cleanly, rather than risking arbitrary, non-deterministic behavior at * an undetermined time in the future. * å‚è§ HashMap * &lt;p&gt;Note that the fail-fast behavior of an iterator cannot be guaranteed * as it is, generally speaking, impossible to make any hard guarantees in the * presence of unsynchronized concurrent modification. Fail-fast iterators * throw &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; on a best-effort basis. * Therefore, it would be wrong to write a program that depended on this * exception for its correctness: &lt;i&gt;the fail-fast behavior of iterators * should be used only to detect bugs.&lt;/i&gt; * å‚è§ HashMap * &lt;p&gt;This class is a member of the * &lt;a href="&#123;@docRoot&#125;/../technotes/guides/collections/index.html"&gt; * Java Collections Framework&lt;/a&gt;. * * @param &lt;E&gt; the type of elements maintained by this set * * @author Josh Bloch * @author Neal Gafter * @see Collection * @see Set * @see TreeSet * @see HashMap * @since 1.2 */public class HashSet&lt;E&gt; extends AbstractSet&lt;E&gt; implements Set&lt;E&gt;, Cloneable, java.io.Serializable HashSet çš„ç±»å±æ€§ã€æ„é€ æ–¹æ³•åŠ add() æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110private transient HashMap&lt;E,Object&gt; map;// Dummy value to associate with an Object in the backing Map// ç”± Map æ¥å£æ”¯æŒçš„è™šæ‹Ÿå¯¹è±¡private static final Object PRESENT = new Object();/** * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has * default initial capacity (16) and load factor (0.75). * æ„é€ ä¸€ä¸ªæ–°çš„ç©ºçš„ setï¼›æä¾›åº•å±‚æ”¯æŒçš„ HashMap å®ä¾‹çš„ é»˜è®¤åˆå§‹ capacity ä¸º 16ï¼Œè´Ÿè½½å› å­ä¸º 0.75ã€‚ */public HashSet() &#123; map = new HashMap&lt;&gt;();&#125;/** * Constructs a new set containing the elements in the specified * collection. The &lt;tt&gt;HashMap&lt;/tt&gt; is created with default load factor * (0.75) and an initial capacity sufficient to contain the elements in * the specified collection. * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®š collection ä¸­çš„å…ƒç´ çš„æ–° set å®ä¾‹ã€‚ * @param c the collection whose elements are to be placed into this set * @throws NullPointerException if the specified collection is null */public HashSet(Collection&lt;? extends E&gt; c) &#123; map = new HashMap&lt;&gt;(Math.max((int) (c.size()/.75f) + 1, 16)); addAll(c);&#125;/** * &#123;@inheritDoc&#125; * è¯¥æ–¹æ³•ç»§æ‰¿è‡ª AbstractCollection(å³ï¼ŒHashSet æ²¡æœ‰é‡å†™ addAll()ï¼Œç›´æ¥æŒ‡å‘çš„æ˜¯ AbstractCollection.addAll()æ–¹æ³•) * &lt;p&gt;This implementation iterates over the specified collection, and adds * each object returned by the iterator to this collection, in turn. * è¯¥æ–¹æ³•å®ç°éå†æ•´ä¸ªæŒ‡å®šçš„ collectionï¼Œå¹¶ä¸”å°† collection çš„ iterator è¿”å›çš„æ¯ä¸ª å¯¹è±¡æŒ‰é¡ºåºæ·»åŠ åˆ° set ä¸­ã€‚ * &lt;p&gt;Note that this implementation will throw an * &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt; unless &lt;tt&gt;add&lt;/tt&gt; is * overridden (assuming the specified collection is non-empty). * éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•å®ç°ä¼šæŠ›å‡ºä¸€ä¸ª UnsupportedOperationException å¼‚å¸¸ï¼Œé™¤é add() è¢«é‡å†™(å‡è®¾æŒ‡å®šçš„ collection æ˜¯éç©ºçš„)ã€‚ * @throws UnsupportedOperationException &#123;@inheritDoc&#125; * @throws ClassCastException &#123;@inheritDoc&#125; * @throws NullPointerException &#123;@inheritDoc&#125; * @throws IllegalArgumentException &#123;@inheritDoc&#125; * @throws IllegalStateException &#123;@inheritDoc&#125; * * @see #add(Object) */public boolean addAll(Collection&lt;? extends E&gt; c) &#123; boolean modified = false; for (E e : c) if (add(e)) modified = true; return modified;&#125;/** * Adds the specified element to this set if it is not already present. * More formally, adds the specified element &lt;tt&gt;e&lt;/tt&gt; to this set if * this set contains no element &lt;tt&gt;e2&lt;/tt&gt; such that * &lt;tt&gt;(e==null&amp;nbsp;?&amp;nbsp;e2==null&amp;nbsp;:&amp;nbsp;e.equals(e2))&lt;/tt&gt;. * If this set already contains the element, the call leaves the set * unchanged and returns &lt;tt&gt;false&lt;/tt&gt;. * æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° set ä¸­ï¼Œå¦‚æœ set ä¸­è¿˜æ²¡æœ‰è¯¥å…ƒç´ ã€‚ä¸¥è°¨æ¥è¯´ï¼Œæ·»åŠ ä¸€ä¸ªå…ƒç´  e åˆ°è¯¥ set ä¸­ï¼Œå¦‚æœ set ä¸­ä¸å­˜åœ¨ä¸€ä¸ªæ»¡è¶³è¿™æ ·æ¡ä»¶çš„ (e2: e==null ? e2==null : e.equals(e2)).å¦‚æœ set ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„å…ƒç´ ï¼Œå½“æ¬¡è°ƒç”¨ä¸ä¼šæ”¹å˜ setï¼Œå¹¶ä¸”æ”¾å› falseã€‚ * @param e element to be added to this set * @return &lt;tt&gt;true&lt;/tt&gt; if this set did not already contain the specified * element */public boolean add(E e) &#123; // map.put() è¿”å› nullï¼Œè¯´æ˜æ·»åŠ æ–°å€¼æˆåŠŸï¼›å¦åˆ™è¯´æ˜æ·»åŠ çš„å…ƒç´ å‘ç”Ÿå“ˆå¸Œç¢°æ’ï¼Œæˆ–è€…æ˜¯é‡å¤æ·»åŠ ç›¸åŒå…ƒç´ ã€‚ // å¦å¤–ï¼Œéœ€è¦æ³¨æ„åˆ°çš„æ˜¯ PRESENTï¼Œå³å½±å­å¯¹è±¡ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œçº¯ç²¹ä¸ºäº†å¡«å…… valueã€‚ return map.put(e, PRESENT)==null;&#125; /** * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has * the specified initial capacity and the specified load factor. * æ„å»ºä¸€ä¸ªæ–°çš„ç©ºçš„ setï¼›æŒ‡å®šæ„å»ºç”±åº•å±‚æä¾›æ”¯æŒçš„ HashMap å®ä¾‹æ—¶çš„åˆå§‹å®¹é‡ï¼Œå’Œè´Ÿè½½å› å­ã€‚ * @param initialCapacity the initial capacity of the hash map * @param loadFactor the load factor of the hash map * @throws IllegalArgumentException if the initial capacity is less * than zero, or if the load factor is nonpositive */public HashSet(int initialCapacity, float loadFactor) &#123; map = new HashMap&lt;&gt;(initialCapacity, loadFactor);&#125;/** * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has * the specified initial capacity and default load factor (0.75). * æ„å»ºä¸€ä¸ªæ–°çš„ç©º setï¼›æŒ‡å®šæ„å»ºç”±åº•å±‚æä¾›æ”¯æŒçš„ HashMap å®ä¾‹æ—¶çš„åˆå§‹å®¹é‡ï¼Œè´Ÿè½½å› å­é»˜è®¤ä¸º 0.75. * @param initialCapacity the initial capacity of the hash table * @throws IllegalArgumentException if the initial capacity is less * than zero */public HashSet(int initialCapacity) &#123; map = new HashMap&lt;&gt;(initialCapacity);&#125;/** * Constructs a new, empty linked hash set. (This package private * constructor is only used by LinkedHashSet.) The backing * HashMap instance is a LinkedHashMap with the specified initial * capacity and the specified load factor. * æ„å»ºä¸€ä¸ªæ–°çš„ç©º Linked Hash setã€‚(è¿™ä¸ªåŒ…çº§ä½œç”¨åŸŸç§æœ‰çš„æ„é€ å™¨åªèƒ½è¢« LinkedHashSet ä½¿ç”¨)ã€‚åº•å±‚æä¾›æ”¯æŒçš„ HashMap å®ä¾‹æ˜¯ä¸€ä¸ª ç”±æŒ‡å®šåˆå§‹å®¹é‡å’ŒæŒ‡å®šè´Ÿè½½å› å­çš„ LinkedHashMapã€‚ * @param initialCapacity the initial capacity of the hash map * @param loadFactor the load factor of the hash map * @param dummy ignored (distinguishes this * constructor from other int, float constructor.) * @throws IllegalArgumentException if the initial capacity is less * than zero, or if the load factor is nonpositive */HashSet(int initialCapacity, float loadFactor, boolean dummy) &#123; map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);&#125; remove()12345678910111213141516/** * Removes the specified element from this set if it is present. * More formally, removes an element &lt;tt&gt;e&lt;/tt&gt; such that * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))&lt;/tt&gt;, * if this set contains such an element. Returns &lt;tt&gt;true&lt;/tt&gt; if * this set contained the element (or equivalently, if this set * changed as a result of the call). (This set will not contain the * element once the call returns.) * * @param o object to be removed from this set, if present * @return &lt;tt&gt;true&lt;/tt&gt; if the set contained the specified element */public boolean remove(Object o) &#123; // è§ HashMap.remove() return map.remove(o)==PRESENT;&#125; iterator()123456789101112131415161718192021222324252627282930313233/** * Returns an iterator over the elements in this set. The elements * are returned in no particular order. * è¿”å› set ä¸­å…ƒç´ çš„ iteratorã€‚(è¿­ä»£å™¨)è¿”å›çš„å…ƒç´ æ˜¯æ— åºçš„ã€‚ * @return an Iterator over the elements in this set * @see ConcurrentModificationException */public Iterator&lt;E&gt; iterator() &#123; return map.keySet().iterator();&#125;// æœ€ç»ˆæŒ‡å‘ HashMap ä¸­çš„ KeyIteratorprivate final class KeyIterator extends HashIterator&lt;K&gt; &#123; public K next() &#123; return nextEntry().getKey(); &#125;&#125;// nextEntry ä½äº HashIteratorï¼›// getKey() æ˜¯ Entry&lt;K,V&gt; ç±»ä¸­ key getter æ–¹æ³•ã€‚final Entry&lt;K,V&gt; nextEntry() &#123; if (modCount != expectedModCount) throw new ConcurrentModificationException(); Entry&lt;K,V&gt; e = next; if (e == null) throw new NoSuchElementException(); if ((next = e.next) == null) &#123; Entry[] t = table; while (index &lt; t.length &amp;&amp; (next = t[index++]) == null) ; &#125; current = e; return e;&#125; å…¶ä»–æ–¹æ³•12345678910111213141516171819202122232425262728293031323334// ä»¥ä¸‹æ–¹æ³•éƒ½æ˜¯å¯¹ HashMap çš„æ–¹æ³•çš„å°è£…/** * Returns the number of elements in this set (its cardinality). * è¿”å› set ä¸­å…ƒç´ çš„ä¸ªæ•°(å®ƒçš„åŸºæ•°???)ã€‚ * @return the number of elements in this set (its cardinality) */public int size() &#123; // map.size ä¸º map ä¸­é”®å€¼å¯¹çš„æ•°é‡ return map.size();&#125;/** * Returns &lt;tt&gt;true&lt;/tt&gt; if this set contains no elements. * * @return &lt;tt&gt;true&lt;/tt&gt; if this set contains no elements */public boolean isEmpty() &#123; // return map.size==0 return map.isEmpty();&#125;/** * Returns &lt;tt&gt;true&lt;/tt&gt; if this set contains the specified element. * More formally, returns &lt;tt&gt;true&lt;/tt&gt; if and only if this set * contains an element &lt;tt&gt;e&lt;/tt&gt; such that * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))&lt;/tt&gt;. * å¦‚æœ set ä¸­åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œåˆ™è¿”å› trueã€‚ä¸¥è°¨æ¥è¯´ï¼šå½“ä¸”ä»…å½“ (o==null ? e==null : o.equals(e))æ—¶ï¼Œè¿”å› true. * @param o element whose presence in this set is to be tested * @return &lt;tt&gt;true&lt;/tt&gt; if this set contains the specified element */public boolean contains(Object o) &#123; // return map.getEntry(key) != null; return map.containsKey(o);&#125;]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>æºç </tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>HashSet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº ArrayList]]></title>
    <url>%2F2019%2F04%2F03%2Fabout_ArrayList%2F</url>
    <content type="text"><![CDATA[åŒ…æ‹¬ä¹‹å‰çš„ HashMap å’Œ LinkedList, éƒ½æ˜¯åŸºäº JDK 7çš„(åº”è¯¥å…¨é¢æ‹¥æŠ±JDK 8äº†)ã€‚ ArrayList çš„ DOC æ³¨é‡Š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * Resizable-array implementation of the &lt;tt&gt;List&lt;/tt&gt; interface. Implements * all optional list operations, and permits all elements, including * &lt;tt&gt;null&lt;/tt&gt;. In addition to implementing the &lt;tt&gt;List&lt;/tt&gt; interface, * this class provides methods to manipulate the size of the array that is * used internally to store the list. (This class is roughly equivalent to * &lt;tt&gt;Vector&lt;/tt&gt;, except that it is unsynchronized.) * (ArrayList) é€šè¿‡ List æ¥å£å®ç°çš„å®¹é‡å¯å˜æ•°ç»„ã€‚å®ç°äº† list çš„æ‰€æœ‰å¯é€‰æ“ä½œ(æ–¹æ³•)ï¼Œå¹¶ä¸”å…è®¸æ·»åŠ æ‰€æœ‰å…ƒç´ ï¼ŒåŒ…æ‹¬ nullã€‚é™¤äº†å®ç°äº† List çš„æ¥å£ï¼ŒArrayList è¿˜æä¾›äº†ä¿®æ”¹ç”¨æ¥å®¹çº³ list çš„æ•°ç»„çš„ size çš„æ–¹æ³•(ArrayList æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œé™¤æ­¤ä»¥å¤–å¤§è‡´ä¸Šä¸ Vector ç›¸åŒ)ã€‚ * &lt;p&gt;The &lt;tt&gt;size&lt;/tt&gt;, &lt;tt&gt;isEmpty&lt;/tt&gt;, &lt;tt&gt;get&lt;/tt&gt;, &lt;tt&gt;set&lt;/tt&gt;, * &lt;tt&gt;iterator&lt;/tt&gt;, and &lt;tt&gt;listIterator&lt;/tt&gt; operations run in constant * time. The &lt;tt&gt;add&lt;/tt&gt; operation runs in &lt;i&gt;amortized constant time&lt;/i&gt;, * that is, adding n elements requires O(n) time. All of the other operations * run in linear time (roughly speaking). The constant factor is low compared * to that for the &lt;tt&gt;LinkedList&lt;/tt&gt; implementation. * sizeï¼ŒisEmptyï¼Œgetï¼Œsetï¼Œiterator æ–¹æ³•å’Œ listIterator æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)çš„(å¸¸æ•°çº§)ã€‚add() æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)+çš„(amortized constant time)(å› ä¸ºæ¶‰åŠåˆ°list æ‰©å®¹ï¼Œæ‰©å®¹ä¹Ÿéœ€è¦æ—¶é—´ï¼Œéœ€è¦æŠŠè¿™éƒ¨åˆ†æ—¶é—´å¹³å‡åˆ†æ‘Šåˆ°æ¯æ¬¡ add æ“ä½œä¸­ã€‚)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ·»åŠ å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚å…¶ä»–æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å¤§è‡´ä¸ºO(n)ï¼Œå¸¸é‡å€¼ n é€šå¸¸è¦æ¯” LinkedList çš„æ—¶é—´å¤æ‚åº¦ä¸­å¸¸é‡å€¼è¦å°(å³ï¼Œå…¶ä»–æ“ä½œè¦æ¯” LinkedList çš„å…¶ä»–æ“ä½œè¦å¿«ä¸€ç‚¹)ã€‚ * &lt;p&gt;Each &lt;tt&gt;ArrayList&lt;/tt&gt; instance has a &lt;i&gt;capacity&lt;/i&gt;. The capacity is * the size of the array used to store the elements in the list. It is always * at least as large as the list size. As elements are added to an ArrayList, * its capacity grows automatically. The details of the growth policy are not * specified beyond the fact that adding an element has constant amortized * time cost. * æ¯ä¸€ä¸ª ArrayList å®ä¾‹éƒ½æœ‰ä¸€ä¸ª capacity(å®¹é‡)å±æ€§ï¼Œè¯¥å±æ€§ä¸å°äº list çš„ sizeã€‚å½“å‘ ArrayList ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œå®ƒçš„ capacity ä¼šè‡ªåŠ¨å¢é•¿ã€‚é™¤äº†æ·»åŠ ä¸€ä¸ªå…ƒç´ å…·æœ‰å›ºå®šçš„æ‘Šä½™æ—¶é—´æˆæœ¬ä¹‹å¤–ï¼Œå¢é•¿è§„åˆ™çš„ç»†èŠ‚æ²¡æœ‰è¢«æŒ‡å®šã€‚ * &lt;p&gt;An application can increase the capacity of an &lt;tt&gt;ArrayList&lt;/tt&gt; instance * before adding a large number of elements using the &lt;tt&gt;ensureCapacity&lt;/tt&gt; * operation. This may reduce the amount of incremental reallocation. * åœ¨ç¨‹åºä¸­æ·»åŠ å¤§é‡å…ƒç´ ä¹‹å‰ï¼Œå¯ä»¥è°ƒç”¨ ensureCapacity() æ–¹æ³•æ¥å¯¹ ArrayList è¿›è¡Œæ‰©å®¹ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¤šæ¬¡æ‰©å®¹æ‰€èŠ±è´¹çš„æ—¶é—´(å¯ä»¥å‡å°‘æ‰©å®¹çš„æ¬¡æ•°) * &lt;p&gt;&lt;strong&gt;Note that this implementation is not synchronized.&lt;/strong&gt; * If multiple threads access an &lt;tt&gt;ArrayList&lt;/tt&gt; instance concurrently, * and at least one of the threads modifies the list structurally, it * &lt;i&gt;must&lt;/i&gt; be synchronized externally. (A structural modification is * any operation that adds or deletes one or more elements, or explicitly * resizes the backing array; merely setting the value of an element is not * a structural modification.) This is typically accomplished by * synchronizing on some object that naturally encapsulates the list. * éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒArrayList å¯¹ List çš„å®ç°æ˜¯éåŒæ­¥çš„ã€‚å¦‚æœå¤šçº¿ç¨‹åŒæ—¶è¯·æ±‚å¯¹ ArrayList çš„è®¿é—®ï¼Œå¹¶ä¸”è‡³å°‘ä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹ ArrayList è¿›è¡Œç»“æ„æ€§ä¿®æ”¹(ç»“æ„æ€§ä¿®æ”¹æ˜¯æŒ‡æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªä»¥ä¸Šçš„å…ƒç´ ï¼Œæˆ–è€…æ˜¾å¼çš„ä¿®æ”¹äº†å…¶æ•°ç»„çš„å¤§å°ã€‚ä»…ä»…ä¿®æ”¹å…ƒç´ å€¼å¹¶éç»“æ„æ€§ä¿®æ”¹)ï¼Œé‚£ä¹ˆåŠ¡å¿…åœ¨ ArrayList å¤–éƒ¨è¿›è¡Œ synchronized ä¿®é¥°ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡ synchronized ä¿®é¥° å°è£…äº† list çš„æŸä¸ªå¯¹è±¡æ¥å®ç°çš„ã€‚ * If no such object exists, the list should be "wrapped" using the * &#123;@link Collections#synchronizedList Collections.synchronizedList&#125; * method. This is best done at creation time, to prevent accidental * unsynchronized access to the list:&lt;pre&gt; * List list = Collections.synchronizedList(new ArrayList(...));&lt;/pre&gt; * å¦‚æœ(æ‰‹å¤´å„¿)æ²¡æœ‰è¿™æ ·çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨ Collections.synchronizedList åŒ…è£¹ listã€‚è¯¥æ“ä½œæœ€å¥½åœ¨åˆ›å»º list æ—¶è¿›è¡Œï¼Œä»¥é˜²æ„å¤–çš„éåŒæ­¥è®¿é—® listã€‚ * &lt;p&gt;&lt;a name="fail-fast"/&gt; * The iterators returned by this class's &#123;@link #iterator() iterator&#125; and * &#123;@link #listIterator(int) listIterator&#125; methods are &lt;em&gt;fail-fast&lt;/em&gt;: * if the list is structurally modified at any time after the iterator is * created, in any way except through the iterator's own * &#123;@link ListIterator#remove() remove&#125; or * &#123;@link ListIterator#add(Object) add&#125; methods, the iterator will throw a * &#123;@link ConcurrentModificationException&#125;. Thus, in the face of * concurrent modification, the iterator fails quickly and cleanly, rather * than risking arbitrary, non-deterministic behavior at an undetermined * time in the future. * é€šè¿‡ ArrayList çš„ iterator() æ–¹æ³•ï¼Œæˆ–è€… listIterator(int) æ–¹æ³•è¿”å›çš„ iterator éƒ½æ˜¯ fail-fast(å¿«é€Ÿå¤±æ•ˆ)çš„ï¼šå¦‚æœåœ¨åˆ›å»º iterator ä¹‹åï¼Œä»»ä½•å¯¹ list çš„ç»“æ„æ€§ä¿®æ”¹ï¼Œéƒ½ä¼šæŠ›å‡º ConcurrentModificationExceptionï¼Œé™¤äº† iterator æœ¬èº«çš„ remove() å’Œ add() æ–¹æ³•ã€‚å› æ­¤ï¼Œåœ¨é¢ä¸´å¹¶å‘å¯¹ list çš„ä¿®æ”¹æ—¶ï¼Œiterator ä¼šå¿«é€Ÿè€Œå¹²å‡€çš„å¤±æ•ˆï¼Œè€Œä¸æ˜¯åœ¨æœªæ¥ä¸ç¡®å®šçš„æ—¶é—´å†’ç€ä»»æ„çš„ã€ä¸ç¡®å®šçš„é£é™©ã€‚ * &lt;p&gt;Note that the fail-fast behavior of an iterator cannot be guaranteed * as it is, generally speaking, impossible to make any hard guarantees in the * presence of unsynchronized concurrent modification. Fail-fast iterators * throw &#123;@code ConcurrentModificationException&#125; on a best-effort basis. * Therefore, it would be wrong to write a program that depended on this * exception for its correctness: &lt;i&gt;the fail-fast behavior of iterators * should be used only to detect bugs.&lt;/i&gt; * å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œï¼Œiterator çš„ fail-fast è¡Œä¸ºæ˜¯ä¸èƒ½è¢«ä¿è¯çš„ï¼Œï¼Œé€šå¸¸æ¥è¯´ï¼Œåœ¨å¹¶å‘éåŒæ­¥å¯¹ list çš„ä¿®æ”¹æ—¶ï¼Œä»»ä½•ç¡¬æ€§çš„ä¿è¯éƒ½æ˜¯ä¸å¯èƒ½çš„ã€‚fail-fast ä¼šè®© iterator å°½å¯èƒ½æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œåœ¨ç¨‹åºä¸­é€šè¿‡ä¾èµ–æŠ›å‡º ConcurrentModificationException å¼‚å¸¸æ¥ä¿è¯è‡ªèº«çš„æ­£å¸¸è¿è¡Œæ˜¯é”™è¯¯çš„ï¼šfail-fast è¡Œä¸ºåªåº”è¯¥ç”¨æ¥ debugã€‚ * &lt;p&gt;This class is a member of the * &lt;a href="&#123;@docRoot&#125;/../technotes/guides/collections/index.html"&gt; * Java Collections Framework&lt;/a&gt;. * * @author Josh Bloch * @author Neal Gafter * @see Collection * @see List * @see LinkedList * @see Vector * @since 1.2 */public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable ArrayList çš„ç±»å±æ€§åŠæ„é€ æ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283/** * Default initial capacity. * é»˜è®¤åˆå§‹ capacity, 10 */private static final int DEFAULT_CAPACITY = 10;/** * Shared empty array instance used for empty instances. * å¯¹æ‰€æœ‰ç”±æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ç©ºå®ä¾‹å…±äº«çš„ç©ºæ•°ç»„å¯¹è±¡ */private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;;/** * The array buffer into which the elements of the ArrayList are stored. * The capacity of the ArrayList is the length of this array buffer. Any * empty ArrayList with elementData == EMPTY_ELEMENTDATA will be expanded to * DEFAULT_CAPACITY when the first element is added. * ä¸´æ—¶ç”¨æ¥å­˜å‚¨ ArrayList ä¸­å…ƒç´ çš„æ•°ç»„ã€‚ ArrayList å¯¹è±¡çš„é•¿åº¦å°±æ˜¯è¿™ä¸ªç¼“å­˜æ•°ç»„çš„é•¿åº¦ã€‚ä»»ä½•ç©º ArrayList ï¼Œä¸” elementData == EMPTY_ELEMENTDATAï¼Œåœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å°†è¢«æ‰©å±•åˆ°é»˜è®¤å¤§å°(DEFAULT_CAPACITY, 10)ã€‚ * (å› ä¸ºæ˜¯ä¸´æ—¶çš„ï¼Œæ‰€ä»¥ç”¨ transient ä¿®é¥°ï¼Œä¸ä¼šè¢«åºåˆ—åŒ–) */private transient Object[] elementData;/** * The size of the ArrayList (the number of elements it contains). * ArrayList çš„ size(åŒ…å«çš„å…ƒç´ çš„æ•°é‡)ã€‚ * @serial */private int size;/** * The maximum size of array to allocate. * Some VMs reserve some header words in an array. * Attempts to allocate larger arrays may result in * OutOfMemoryError: Requested array size exceeds VM limit * å…è®¸åˆ†é…ç»™æ•°ç»„çš„æœ€å¤§çš„å®¹é‡ã€‚ * ä¸€äº›è™šæ‹Ÿæœºå®ç°ä¼šåœ¨æ•°ç»„é¢„ç•™ä¸€äº› header wordsã€‚ * è§†å›¾åˆ†é…æ›´å¤§çš„æ•°ç»„å¯èƒ½ä¼šé€ æˆ OOMï¼šæ‰€éœ€æ•°ç»„å¤§å°è¶…å‡ºè™šæ‹Ÿæœºé™åˆ¶ã€‚ */private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;/** * Constructs an empty list with the specified initial capacity. * é€šè¿‡æŒ‡å®šåˆå§‹ capacity å¤§å°æ¥æ„é€ ä¸€ä¸ªç©º list * @param initialCapacity the initial capacity of the list * @throws IllegalArgumentException if the specified initial capacity * is negative */public ArrayList(int initialCapacity) &#123; super(); // åˆå§‹å®¹é‡å°äºé›¶æ—¶ï¼Œä¼šæŠ›å‡º IllegalArgumentException if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal Capacity: "+ initialCapacity); // åˆå§‹åŒ–æŒ‡å®šå¤§å°çš„ä¸´æ—¶å¯¹è±¡æ•°ç»„ this.elementData = new Object[initialCapacity];&#125;/** * Constructs an empty list with an initial capacity of ten. * æ„é€ ä¸€ä¸ªç©º listï¼Œå½“å‘è¯¥ list æ·»åŠ å…ƒç´ æ—¶ï¼Œéœ€å…ˆæ‰©å±•æ•°ç»„åˆ°é»˜è®¤åˆå§‹å®¹é‡å¤§å°ï¼Œå³ 10. */public ArrayList() &#123; super(); this.elementData = EMPTY_ELEMENTDATA;&#125;/** * Constructs a list containing the elements of the specified * collection, in the order they are returned by the collection's * iterator. * æŒ‰ç…§ collection è¿­ä»£å™¨è¿”å›å…ƒç´ çš„é¡ºåºæ„é€ åŒ…å«æŒ‡å®š collection çš„å…ƒç´ çš„ listã€‚ * @param c the collection whose elements are to be placed into this list * @throws NullPointerException if the specified collection is null */public ArrayList(Collection&lt;? extends E&gt; c) &#123; // å¦‚æœ c ä¸º nullï¼Œæ­¤å¤„ä¼šæŠ› NPE elementData = c.toArray(); size = elementData.length; // c.toArray might (incorrectly) not return Object[] (see 6260652) // å¦‚æœ elementData ä¸æ˜¯å¯¹è±¡æ•°ç»„ï¼Œè¿˜éœ€è¦å°†å…¶å¤åˆ¶åˆ°æ–°çš„å¯¹è±¡æ•°ç»„ä¸­ã€‚ if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class);&#125; add()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899/** * Appends the specified element to the end of this list. * æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° list æœ«å°¾å…ƒç´ åè¾¹ã€‚ * @param e element to be appended to this list * @return &lt;tt&gt;true&lt;/tt&gt; (as specified by &#123;@link Collection#add&#125;) */public boolean add(E e) &#123; // ç¡®ä¿å†…éƒ¨æ•°ç»„å®¹é‡è¶³å¤Ÿå¤§ï¼Œåˆå§‹çŠ¶æ€ä¸‹ size ä¸º 0ã€‚ ensureCapacityInternal(size + 1); // Increments modCount!! elementData[size++] = e; return true;&#125;private void ensureCapacityInternal(int minCapacity) &#123; // å¦‚æœ ArrayList ç”±æ— å‚æ„é€ æ–¹æ³•æ„é€ ï¼Œåˆ™ minCapacity ä¸º 1ã€‚ if (elementData == EMPTY_ELEMENTDATA) &#123; minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; // ç¡®ä¿æ‰©å®¹åˆ°æŒ‡å®šå¤§å°çš„å®¹é‡ ensureExplicitCapacity(minCapacity);&#125;private void ensureExplicitCapacity(int minCapacity) &#123; // ç»“æ„ä¿®æ”¹æ¬¡æ•° +1 modCount++; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125;/** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * æ‰©å®¹ï¼Œä»¥å®¹çº³æŒ‡å®šé•¿åº¦çš„æœ€å°æ•°é‡çš„å…ƒç´  * @param minCapacity the desired minimum capacity */private void grow(int minCapacity) &#123; // overflow-conscious code // åŸå®¹é‡ int oldCapacity = elementData.length; // æ–°å®¹é‡ = oldCapacity * 1.5 int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); // å¦‚æœæ–°å®¹é‡å°äºæŒ‡å®šçš„æœ€å°å®¹é‡ï¼Œåˆ™æ–°å®¹é‡ä¸ºæŒ‡å®šçš„å¤§å° if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; // å¦‚æœæ–°å®¹é‡å¤§äºå…è®¸çš„æœ€å¤§å®¹é‡å€¼ if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: // é€šå¸¸ minCapacity = size + 1ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯æ‰§è¡Œåˆ°è¿™é‡Œ elementData = Arrays.copyOf(elementData, newCapacity);&#125;private static int hugeCapacity(int minCapacity) &#123; // å¸¦ç¬¦å·äºŒè¿›åˆ¶æº¢å‡ºï¼Œç¬¦å·ä½ä¸º 1ï¼Œå°äºé›¶ï¼Œï¼Œå³ OOMã€‚ if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;&#125;/** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * æ·»åŠ æŒ‡å®šå…ƒç´ åˆ°æŒ‡å®šä½ç½®ã€‚å°†å½“å‰ç´¢å¼•ä½ç½®çš„å…ƒç´ (å¦‚æœæœ‰çš„è¯)åŠå…¶åè¾¹çš„å…ƒç´ ç»Ÿä¸€å³ç§»ã€‚ * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException &#123;@inheritDoc&#125; */public void add(int index, E element) &#123; // æ£€æŸ¥ index æ˜¯å¦ä¸å°äºé›¶ï¼Œä¸”å°äº size rangeCheckForAdd(index); // list æ‰©å®¹ ensureCapacityInternal(size + 1); // Increments modCount!! // è°ƒç”¨ native æ–¹æ³•å¤åˆ¶ æ’å…¥ç´¢å¼•ä½ç½®ä¹‹åéƒ¨åˆ†çš„æ•°ç»„ åˆ°åŸæ•°ç»„ä¸­ System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125;/** * A version of rangeCheck used by add and addAll. * ä¸º add() å’Œ addAll() æ–¹æ³•å‡†å¤‡çš„å¦ä¸€ä¸ªç‰ˆæœ¬çš„ rangeCheck æ–¹æ³•ã€‚ */private void rangeCheckForAdd(int index) &#123; if (index &gt; size || index &lt; 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;/** * @param src the source array. * @param srcPos starting position in the source array. * @param dest the destination array. * @param destPos starting position in the destination data. * @param length the number of array elements to be copied. */public static native void arraycopy(Object src, int srcPos, Object dest, int destPos, int length); get()12345678910111213141516171819202122232425262728293031323334/** * Returns the element at the specified position in this list. * è¿”å› list ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  * @param index index of the element to return * @return the element at the specified position in this list * @throws IndexOutOfBoundsException &#123;@inheritDoc&#125; */public E get(int index) &#123; rangeCheck(index); // å¦‚æœç´¢å¼•åˆè§„ï¼Œåˆ™è‡³ä»Šè¿”å›æ•°ç»„ç›¸åº”ç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚ return elementData(index);&#125;/** * Checks if the given index is in range. If not, throws an appropriate * runtime exception. This method does *not* check if the index is * negative: It is always used immediately prior to an array access, * which throws an ArrayIndexOutOfBoundsException if index is negative. * æ£€æŸ¥æŒ‡å®šçš„ç´¢å¼•æ˜¯å¦åœ¨èŒƒå›´å†…ã€‚å¦‚æœä¸åœ¨ï¼Œå°†æŠ›å‡ºåˆé€‚çš„è¿è¡Œæ—¶å¼‚å¸¸ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ£€æŸ¥ç´¢å¼•æ˜¯å¦ä¸ºè´Ÿï¼šç´¢å¼•æ€»æ˜¯åœ¨è®¿é—®æ•°ç»„ä¹‹å‰ç«‹å³ä½¿ç”¨ï¼Œï¼Œå¦‚æœåœ¨ç´¢å¼•ä¸ºè´Ÿï¼Œä¼šæŠ›å‡º ArrayIndexOutOfBoundsException å¼‚å¸¸ã€‚ */private void rangeCheck(int index) &#123; // å¦‚æœç´¢å¼•å¤§äºæ•°ç»„çš„å®é™…å¤§å°ï¼Œä¼šæŠ›å‡ºæ•°ç»„è¶Šç•Œå¼‚å¸¸ã€‚ if (index &gt;= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;/** * Constructs an IndexOutOfBoundsException detail message. * Of the many possible refactorings of the error handling code, * this "outlining" performs best with both server and client VMs. * æ„å»ºæ•°ç»„è¶Šç•Œå¼‚å¸¸çš„è¯¦æƒ…ä¿¡æ¯ã€‚åœ¨å¾ˆå¤šé”™è¯¯å¤„ç†ä»£ç å¯èƒ½çš„é‡æ„ä¸­ï¼Œè¿™ä¸ªè¯¦æƒ…å¤§çº²ä¸€ç›´åœ¨æœåŠ¡å™¨æ¨¡å¼å’Œå®¢æˆ·ç«¯æ¨¡å¼ä¸­è¡¨ç°çš„ä¸€ç›´å¾ˆå¥½ã€‚ */private String outOfBoundsMsg(int index) &#123; return "Index: "+index+", Size: "+size;&#125; set()12345678910111213141516171819/** * Replaces the element at the specified position in this list with * the specified element. * ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿æ¢ list ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´  * @param index index of the element to replace * @param element element to be stored at the specified position * @return the element previously at the specified position * @throws IndexOutOfBoundsException &#123;@inheritDoc&#125; */public E set(int index, E element) &#123; // æ˜¯å¦å¤§äºæ•°ç»„çš„ size rangeCheck(index); // è®°å½•æ•°ç»„ä¸­å½“å‰ä½ç½®çš„å…ƒç´  E oldValue = elementData(index); // æ›¿æ¢æŒ‡å®šç´¢å¼•ä½ç½®ä¸ºæ–°å…ƒç´  elementData[index] = element; // è¿”å›åŸç´¢å¼•ä½ç½®çš„å…ƒç´  return oldValue;&#125; remove()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/** * Removes the element at the specified position in this list. * Shifts any subsequent elements to the left (subtracts one from their * indices). * ç§»é™¤å½“å‰ list ä¸­æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ ã€‚å°†è¯¥ä½ç½®åè¾¹çš„å…ƒç´ å·¦ç§»(å½“å‰ç´¢å¼•å‡ä¸€) * @param index the index of the element to be removed * @return the element that was removed from the list * @throws IndexOutOfBoundsException &#123;@inheritDoc&#125; */public E remove(int index) &#123; // æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶…å‡ºæ•°ç»„çš„ size rangeCheck(index); // list ç»“æ„æ€§æ›´æ”¹æ¬¡æ•° +1 modCount++; // è®°å½•æ•°ç»„å½“å‰ç´¢å¼•åŸå…ƒç´  E oldValue = elementData(index); // è®¡ç®—è¦ç§»åŠ¨çš„æ•°ç»„çš„é•¿åº¦ã€‚ int numMoved = size - index - 1; // å¦‚æœåˆ é™¤çš„ä¸æ˜¯ list çš„æœ«å°¾å…ƒç´ ï¼Œåˆ™å°†è¦åˆ é™¤çš„ç´¢å¼•ä½ä¹‹åçš„å…ƒç´ å‘å·¦ç§»åŠ¨ä¸€ä½ã€‚ if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); // æ•°ç»„é•¿åº¦-1ï¼Œå¹¶å°†æ›´æ–°åçš„æ•°ç»„æœ«å°¾å…ƒç´ ç½®ç©º // æ­¤å¤„ç•™å‘ï¼Œï¼Œåœ¨æˆ‘çš„å°è±¡ä¸­ï¼Œå‡å¦‚æ•°ç»„é•¿åº¦ä¸º10ï¼Œé‚£ä¹ˆå³ä½¿æ˜¯åªæœ‰é›¶ç´¢å¼•å¤„æœ‰å€¼ï¼Œå…¶ä»–ä½ç½®çš„å…ƒç´ çš†ä¸ºç©ºï¼Œå…¶ä»–å¯¹è±¡è¿˜æŒæœ‰è¯¥æ•°ç»„å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆGCæ—¶ä¹Ÿä¸ä¼šå°†è¯¥æ•°ç»„å¯¹è±¡å›æ”¶ã€‚ elementData[--size] = null; // clear to let GC do its work // è¿”å›ç´¢å¼•ä½ç½®åŸå…ƒç´  return oldValue;&#125;/** * Removes the first occurrence of the specified element from this list, * if it is present. If the list does not contain the element, it is * unchanged. More formally, removes the element with the lowest index * &lt;tt&gt;i&lt;/tt&gt; such that * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt; * (if such an element exists). Returns &lt;tt&gt;true&lt;/tt&gt; if this list * contained the specified element (or equivalently, if this list * changed as a result of the call). * ä»å½“å‰ list ä¸­åˆ é™¤æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¦‚æœ list ä¸­å­˜åœ¨æŒ‡å®šå…ƒç´ çš„è¯ã€‚ä¸¥è°¨æ¥è¯´æ˜¯åˆ é™¤ç´¢å¼•å€¼æœ€å°çš„åŒ¹é…é¡¹ï¼Œåƒæ˜¯æ»¡è¶³è¿™æ ·çš„æ¡ä»¶ï¼š(o==null?get(i)==null:o.equals(get(i)))ï¼Œå¦‚æœ list ä¸­å­˜åœ¨ o çš„è¯ã€‚å¦‚æœ list ä¸­å­˜åœ¨ oï¼Œåˆ™è¿”å› true(æˆ–è€…è¯´ï¼Œæœ¬æ¬¡è°ƒç”¨å¯¼è‡´äº† list æ”¹å˜) * @param o element to be removed from this list, if present * @return &lt;tt&gt;true&lt;/tt&gt; if this list contained the specified element */public boolean remove(Object o) &#123; // éå†åˆ é™¤æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª o if (o == null) &#123; for (int index = 0; index &lt; size; index++) if (elementData[index] == null) &#123; fastRemove(index); return true; &#125; &#125; else &#123; for (int index = 0; index &lt; size; index++) if (o.equals(elementData[index])) &#123; fastRemove(index); return true; &#125; &#125; return false;&#125;/* * Private remove method that skips bounds checking and does not * return the value removed. * ç§æœ‰åˆ é™¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è·³è¿‡äº†ç´¢å¼•æ˜¯å¦è¶Šç•Œçš„æ£€æŸ¥ï¼Œä¸”ä¸è¿”å›åˆ é™¤çš„å…ƒç´ ã€‚ç²¾ç®€ç‰ˆçš„ remove() */private void fastRemove(int index) &#123; // ç»“æ„æ€§æ›´æ”¹æ¬¡æ•° +1 // ... modCount++; int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work&#125; iterator1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/** * Returns an iterator over the elements in this list in proper sequence. * ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›è¯¥ list ä¸­å…ƒç´ çš„è¿­ä»£å™¨ * &lt;p&gt;The returned iterator is &lt;a href="#fail-fast"&gt;&lt;i&gt;fail-fast&lt;/i&gt;&lt;/a&gt;. * è¿”å›çš„ iterator æ˜¯ fail-fast çš„ * @return an iterator over the elements in this list in proper sequence */public Iterator&lt;E&gt; iterator() &#123; return new Itr();&#125;/** * An optimized version of AbstractList.Itr * AbstractList.Itr çš„ä¼˜åŒ–ç‰ˆæœ¬ */private class Itr implements Iterator&lt;E&gt; &#123; // index of next element to return è¦è¿”å›çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼• int cursor; // index of last element returned; -1 if no such ä¸Šä¸€ä¸ªè¿”å›å…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœè¯¥å…ƒç´ ä¸å¤å­˜åœ¨(è°ƒç”¨iterator.remove()åˆ é™¤å½“å‰å…ƒç´ )ï¼Œåˆ™èµ‹å€¼ä¸º -1 int lastRet = -1; // è®°å½•å½“å‰ list ç»“æ„æ€§ä¿®æ”¹æ¬¡æ•° int expectedModCount = modCount; // æ˜¯å¦è¿˜æœ‰æœªè¿­ä»£è¿‡çš„å…ƒç´  public boolean hasNext() &#123; // å¦‚æœä¸‹ä¸€ä¸ªè¦è¿”å›çš„å…ƒç´ çš„ç´¢å¼•å€¼ä¸ç­‰äº(å³ï¼Œå°äº)æ•°ç»„é•¿åº¦ï¼Œåˆ™è¯´æ˜æœªè¿­ä»£å®Œæˆ return cursor != size; &#125; // è¿”å›ä¸‹ä¸€ä¸ªè¦è¿­ä»£çš„å…ƒç´  @SuppressWarnings("unchecked") public E next() &#123; // æ£€æŸ¥è®°å½• list ç»“æ„æ€§æ›´æ”¹æ¬¡æ•°å(å³ï¼Œç§æœ‰å†…éƒ¨ç±» Itr åˆå§‹åŒ–å®Œæˆå)ï¼Œæ˜¯å¦æœ‰å…¶ä»–æ“ä½œå¯¹ list è¿›è¡Œè¿‡ç»“æ„æ€§ä¿®æ”¹ã€‚å¦‚æœæœ‰ï¼Œåˆ™æŠ›å‡º ConcurrentModificationExceptionã€‚ checkForComodification(); int i = cursor; // å¦‚æœè¦è¿­ä»£çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ä¸å°äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™æŠ›å‡º NoSuchElementException if (i &gt;= size) throw new NoSuchElementException(); // å¤åˆ¶å½“å‰ list çš„å†…éƒ¨å®ç°æ•°ç»„ elementData Object[] elementData = ArrayList.this.elementData; // å¦‚æœè¦è¿­ä»£çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸å°äº elementData çš„é•¿åº¦ï¼Œåˆ™æŠ›å‡º ConcurrentModificationExceptionã€‚ if (i &gt;= elementData.length) throw new ConcurrentModificationException(); // å°† cursor æŒ‡å‘è¦è¿­ä»£çš„ä¸‹ä¸€ä¸ª(æœ¬æ¬¡ next æ–¹æ³•è°ƒç”¨å®Œæˆä¹‹å)å…ƒç´ çš„ç´¢å¼• cursor = i + 1; // æ›´æ–°è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼ŒåŒæ—¶è¿”å›æœ¬æ¬¡è¦è¿­ä»£çš„å…ƒç´  return (E) elementData[lastRet = i]; &#125; public void remove() &#123; // å¦‚æœå½“å‰å…ƒç´ (next æ–¹æ³•ä¸­ï¼Œint i = cursorï¼›lastRet = i;)ç´¢å¼•å°äºé›¶ï¼ŒæŠ›å‡º IllegalStateExceptionï¼Œæ­¤æ—¶ list å¤„äºéæ³•çŠ¶æ€ã€‚ if (lastRet &lt; 0) throw new IllegalStateException(); // æ£€æŸ¥ iterator åˆå§‹åŒ–ä¹‹åï¼Œæ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹å¯¹ list è¿›è¡Œäº†ç»“æ„æ€§ä¿®æ”¹ã€‚ checkForComodification(); try &#123; // è°ƒç”¨ ArrayList çš„ remove() ç§»é™¤è¿­ä»£å™¨å½“å‰æŒ‡å‘çš„å…ƒç´  ArrayList.this.remove(lastRet); // è¿›è¡Œ remove æ“ä½œåï¼Œç›®æ ‡ç´¢å¼•åè¾¹çš„å…ƒç´ å·¦ç§»ï¼Œå³ç›®æ ‡ç´¢å¼•æŒ‡å‘æ–°çš„(å°šæœªè¿­ä»£è¿‡)å…ƒç´ ã€‚å°†è¿­ä»£å™¨ä¸‹æ¬¡è¦è¿”å›çš„å…ƒç´ æŒ‡å‘ç›®æ ‡ç´¢å¼•çš„å…ƒç´  cursor = lastRet; // æœ¬æ¬¡è¿­ä»£çš„å…ƒç´ å·²è¢«åˆ é™¤ï¼Œæ‰€ä»¥ä¸º lastRet èµ‹å€¼ -1 lastRet = -1; // æ›´æ–° list ç»“æ„æ€§æ›´æ”¹æ¬¡æ•° expectedModCount = modCount; &#125; catch (IndexOutOfBoundsException ex) &#123; throw new ConcurrentModificationException(); &#125; &#125; final void checkForComodification() &#123; if (modCount != expectedModCount) throw new ConcurrentModificationException(); &#125;&#125; æ€»ç»“ ArrayList æ˜¯å®¹é‡å¯ä»¥æ”¹å˜çš„éçº¿ç¨‹å®‰å…¨é›†åˆã€‚å†…éƒ¨å®ç°ä½¿ç”¨æ•°ç»„è¿›è¡Œå­˜å‚¨ï¼Œé›†åˆæ‰©å®¹æ—¶ä¼šåˆ›å»ºæ›´å¤§çš„æ•°ç»„ç©ºé—´ï¼ŒæŠŠåŸæœ‰æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚ArrayList æ”¯æŒå¯¹å…ƒç´ çš„å¿«é€Ÿéšæœºè®¿é—®ï¼Œä½†æ˜¯æ’å…¥ä¸åˆ é™¤æ—¶é€Ÿåº¦é€šå¸¸å¾ˆæ…¢ï¼Œå› ä¸ºè¿™ä¸ªè¿‡ç¨‹å¾ˆæœ‰å¯èƒ½éœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ ã€‚ â€“ ç å‡ºé«˜æ•ˆ Java å¼€å‘æ‰‹å†Œ P155]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>ArrayList</tag>
        <tag>æºç </tag>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº HashMap]]></title>
    <url>%2F2019%2F03%2F23%2Fabout_HashMap%2F</url>
    <content type="text"><![CDATA[Contextå…³äº HashMap, æœ‰ä¸€ä»¶äº‹å„¿ä¸€ç›´å¾ˆå›°æƒ‘ï¼Œï¼Œåœ¨ã€Redis æ ¸å¿ƒå†é™©ã€ä¸­æ˜¯è¿™æ ·è¢«æåˆ°çš„: Redis çš„å­—å…¸ç›¸å½“äº Java è¯­è¨€ä¸­çš„ HashMapï¼Œå®ƒæ˜¯æ— åºå­—å…¸ï¼Œå†…éƒ¨å­˜å‚¨äº†å¾ˆå¤šé”®å€¼å¯¹ã€‚å®ç°ç»“æ„ä¸Šä¸ Java çš„ HashMap ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯â€æ•°ç»„ + é“¾è¡¨â€äºŒç»´ç»“æ„ã€‚ç¬¬ä¸€ç»´çš„ hash çš„æ•°ç»„ä½ç½®ç¢°æ’æ—¶ï¼Œå°±ä¼šå°†ç¢°æ’çš„å…ƒç´ ä½¿ç”¨é“¾è¡¨ä¸²æ¥èµ·æ¥ã€‚ å—¯ï¼Œç¬¬ä¸€å¥æ²¡å•¥é—®é¢˜ï¼Œï¼Œç„¶è€Œâ€æ•°ç»„ + é“¾è¡¨â€ä»€ä¹ˆé¬¼ï¼Ÿè¿˜æœ‰ hash ç¢°æ’ã€‚ã€‚ä½œè€…å¹¶æ²¡æœ‰è¯¦ç»†è§£é‡Šè¿™å„¿ï¼Œåº”è¯¥é»˜è®¤æ˜¯æ¯ä¸ª Java å¼€å‘è€…éƒ½çŸ¥é“çš„çŸ¥è¯†ç‚¹äº†ã€‚ç„¶è€Œæˆ‘å´åœ¨è¿™å„¿å¡å£³äº†ï¼Œå¿ƒæ…Œæ…Œã€‚ã€‚è¶ç€å‘¨æœ«èµ¶ç´§è¡¥è¡¥è¯¾ã€‚äº‹å®è¯æ˜ï¼Œè¿™æ³¢è¡¥è¯¾æ˜¯å¾ˆæœ‰æ•ˆæœçš„ï¼Œåœ¨è¿™æœ¬ä¹¦åè¾¹çš„å†…å®¹ä¸­ï¼Œhash è¿˜å°†ä¼šä¸€ç›´å‡ºç°ã€‚ Hashåœ¨ Wiki ä¸­çš„å®šä¹‰ä¸º: æ•£åˆ—å‡½æ•°ï¼ˆè‹±è¯­ï¼šHash functionï¼‰åˆç§°æ•£åˆ—ç®—æ³•ã€å“ˆå¸Œå‡½æ•°ï¼Œæ˜¯ä¸€ç§ä»ä»»ä½•ä¸€ç§æ•°æ®ä¸­åˆ›å»ºå°çš„æ•°å­—â€œæŒ‡çº¹â€çš„æ–¹æ³•ã€‚æ•£åˆ—å‡½æ•°æŠŠæ¶ˆæ¯æˆ–æ•°æ®å‹ç¼©æˆæ‘˜è¦ï¼Œä½¿å¾—æ•°æ®é‡å˜å°ï¼Œå°†æ•°æ®çš„æ ¼å¼å›ºå®šä¸‹æ¥ã€‚è¯¥å‡½æ•°å°†æ•°æ®æ‰“ä¹±æ··åˆï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªå«åšæ•£åˆ—å€¼ï¼ˆhash valuesï¼Œhash codesï¼Œhash sumsï¼Œæˆ–hashesï¼‰çš„æŒ‡çº¹ã€‚æ•£åˆ—å€¼é€šå¸¸ç”¨ä¸€ä¸ªçŸ­çš„éšæœºå­—æ¯å’Œæ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²æ¥ä»£è¡¨ã€‚å¥½çš„æ•£åˆ—å‡½æ•°åœ¨è¾“å…¥åŸŸä¸­å¾ˆå°‘å‡ºç°æ•£åˆ—å†²çªã€‚åœ¨æ•£åˆ—è¡¨å’Œæ•°æ®å¤„ç†ä¸­ï¼Œä¸æŠ‘åˆ¶å†²çªæ¥åŒºåˆ«æ•°æ®ï¼Œä¼šä½¿å¾—æ•°æ®åº“è®°å½•æ›´éš¾æ‰¾åˆ°ã€‚ ç”¨æˆ‘è‡ªå·±çš„è¯æ¥è¯´å°±æ˜¯ï¼Œï¼Œä¸ºæ•°æ®åˆ›å»ºæŒ‡çº¹æ‘˜è¦ï¼Œé€šè¿‡è¯¥æ‘˜è¦å°±å¯ä»¥æ‰¾åˆ°åŸå§‹æ•°æ®ã€‚æˆ‘è§‰å¾—æ›´å¤šçš„åœºæ™¯æ˜¯ä¸ºç›¸å¯¹å¤§çš„æ•°æ®åˆ›å»ºæ‘˜è¦ã€‚å‡å¦‚æœ‰ä¸ª hash()ï¼Œå¯ä»¥ä¸ºä»»æ„æ•°æ®ç”Ÿæˆä¸€ä¸ª32ä½çš„æ‘˜è¦ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨äº’è”ç½‘ä¸‹è½½æ–‡ä»¶çš„æ—¶å€™ï¼Œæœ‰çš„ç½‘ç«™ä¼šåœ¨ä¸‹æ¥é“¾æ¥å¤„ç»™å‡ºè¯¥æ–‡ä»¶çš„ hash å€¼ï¼Œç­‰ç”¨æˆ·ä¸‹è½½å®Œæˆä¹‹åï¼Œé€šè¿‡ hash() å¯¹è¯¥æ–‡ä»¶æå–æ‘˜è¦ï¼Œå°†ä¸¤ä¸ª hash å€¼ï¼Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœç»“æœä¸€æ ·ï¼Œè¯´æ˜æ–‡ä»¶åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ é‚£å€˜è‹¥æˆ‘ä»¬å¯¹æ•°å­— 1 è¿›è¡Œ hash()ï¼Œé‚£åº”è¯¥ä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º 32 ä½çš„æ‘˜è¦ï¼Œä½†è¿™æ—¶å€™è¿˜èƒ½å«ã€æ‘˜è¦ã€ä¹ˆï¼Ÿæˆ‘æ„Ÿè§‰æ˜¯ä¸å¤ªåˆé€‚çš„ã€‚ HashMap-Basic JDK7 OKï¼Œback to the point..å…³äº Hash æˆ‘ä»¬éœ€è¦çŸ¥é“ğŸ‘‡ æ‰€æœ‰æ•£åˆ—å‡½æ•°éƒ½æœ‰å¦‚ä¸‹ä¸€ä¸ªåŸºæœ¬ç‰¹æ€§ï¼šå¦‚æœä¸¤ä¸ªæ•£åˆ—å€¼æ˜¯ä¸ç›¸åŒçš„ï¼ˆæ ¹æ®åŒä¸€å‡½æ•°ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ•£åˆ—å€¼çš„åŸå§‹è¾“å…¥ä¹Ÿæ˜¯ä¸ç›¸åŒçš„ã€‚è¿™ä¸ªç‰¹æ€§æ˜¯æ•£åˆ—å‡½æ•°å…·æœ‰ç¡®å®šæ€§çš„ç»“æœï¼Œå…·æœ‰è¿™ç§æ€§è´¨çš„æ•£åˆ—å‡½æ•°ç§°ä¸ºå•å‘æ•£åˆ—å‡½æ•°ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œæ•£åˆ—å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºä¸æ˜¯å”¯ä¸€å¯¹åº”å…³ç³»çš„ï¼Œå¦‚æœä¸¤ä¸ªæ•£åˆ—å€¼ç›¸åŒï¼Œä¸¤ä¸ªè¾“å…¥å€¼å¾ˆå¯èƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†ä¹Ÿå¯èƒ½ä¸åŒï¼Œè¿™ç§æƒ…å†µç§°ä¸ºâ€œæ•£åˆ—ç¢°æ’ï¼ˆcollisionï¼‰â€ã€‚ æŒ‰æˆ‘ä¹‹å‰ä¸æˆç†Ÿçš„æƒ³æ³•ï¼Œï¼ŒHashMap ä¸­ä¸ºä»€ä¹ˆè¦æ”¾é“¾è¡¨ï¼Ÿç›´æ¥æ”¾æ•°æ®å¯¹è±¡ä¸å°±å¤Ÿäº†ä¹ˆã€‚ã€‚åŸå› å°±æ˜¯å½“æˆ‘ä»¬é€šè¿‡ get(key) æ–¹æ³•ä» HashMap ä¸­è·å–å¯¹è±¡çš„æ—¶å€™ï¼Œç†è®ºä¸Šè¿™ä¸ª key å¯¹åº”çš„ hash å€¼å’ŒæŸä¸ª whateverKey å¯¹åº”çš„ hash å€¼æ˜¯ä¸€æ ·çš„(å³ï¼Œæ•£åˆ—ç¢°æ’)ï¼Œï¼Œå› ä¸ºã€å¦‚æœä¸¤ä¸ªæ•£åˆ—å€¼ç›¸åŒï¼Œä¸¤ä¸ªè¾“å…¥å€¼å¾ˆå¯èƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†ä¹Ÿå¯èƒ½ä¸åŒ(å³ï¼Œkey å’Œ whateverKey)ã€ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ key å’Œ whateverKey éƒ½å¯ä»¥è·å–åˆ°å¯¹åº”çš„æ•°æ®å¯¹è±¡ã€‚å¦‚æ­¤ï¼Œä¸ºäº†è§£å†³æ•£åˆ—ç¢°æ’å¸¦æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ HashMap ä¸­å°†ä¸¤ä¸ªâ€˜keyâ€™éƒ½æŒ‡å‘åŒä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œè€Œåœ¨ HashMap ä¸­çš„é“¾è¡¨å°±æ˜¯ç”¨æ¥ç»´æŠ¤è¿™äº›â€˜keyâ€™çš„ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬è¯•ç€è¯»è¯» HashMap æºç ã€‚ HashMap çš„ DOC æ³¨é‡Š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267/** * Hash table based implementation of the &lt;tt&gt;Map&lt;/tt&gt; interface. This * implementation provides all of the optional map operations, and permits * &lt;tt&gt;null&lt;/tt&gt; values and the &lt;tt&gt;null&lt;/tt&gt; key. (The &lt;tt&gt;HashMap&lt;/tt&gt; * class is roughly equivalent to &lt;tt&gt;Hashtable&lt;/tt&gt;, except that it is * unsynchronized and permits nulls.) This class makes no guarantees as to * the order of the map; in particular, it does not guarantee that the order * will remain constant over time. * ğŸ‘†æ•£åˆ—è¡¨ä¹ŸåŸºäºå¯¹ Map æ¥å£çš„å®ç°ã€‚HashMap ä¹Ÿæ˜¯å¯¹æ˜¯ Map æ¥å£çš„å®ç°ï¼Œæä¾›äº†æ‰€æœ‰å¯¹ Map çš„å¯é€‰æ“ä½œ(çš„æ–¹æ³•)ï¼Œå¹¶ä¸”å…è®¸ null å€¼å’Œ null é”®ã€‚HashMap å¤§è‡´ç›¸å½“ä¸ HashTable ç›¸åŒï¼Œé™¤äº† HashMap æ˜¯éåŒæ­¥çš„ï¼Œä¸”æ¥å— nullã€‚è¯¥ç±»ä¸ä¿è¯æ•°æ®å¯¹è±¡åœ¨å†…éƒ¨çš„é¡ºåºï¼ŒåŒæ—¶ä¹Ÿä¸ä¿è¯å†…éƒ¨çš„é¡ºåºæ˜¯ä¸€æˆä¸å˜çš„ã€‚ * * &lt;p&gt;This implementation provides constant-time performance for the basic * operations (&lt;tt&gt;get&lt;/tt&gt; and &lt;tt&gt;put&lt;/tt&gt;), assuming the hash function * disperses the elements properly among the buckets. Iteration over * collection views requires time proportional to the "capacity" of the * &lt;tt&gt;HashMap&lt;/tt&gt; instance (the number of buckets) plus its size (the number * of key-value mappings). Thus, it's very important not to set the initial * capacity too high (or the load factor too low) if iteration performance * is important. * ğŸ‘†HashMap ä¸­ get å’Œ put è¿™ä¸¤é¡¹åŸºæœ¬æ“ä½œæä¾›å¤æ‚åº¦ä¸ºå¸¸æ•°çº§åˆ«çš„æ€§èƒ½è¡¨ç°ï¼Œå‡å®š hash æ–¹æ³•æŠŠå…ƒç´ å‡åŒ€çš„åˆ†é…åˆ°æ¡¶ä¸­ã€‚å¯¹æ•´ä¸ªé›†åˆè§†å›¾è¿›è¡Œè¿­ä»£æ‰€éœ€çš„æ—¶é—´ä¸ HashMap å®ä¾‹(æ¡¶çš„æ•°é‡)ä¹˜ä»¥å®ƒçš„å®¹é‡(é”®å€¼å¯¹çš„æ•°é‡)ä¹‹ç§¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¿­ä»£æ€§èƒ½å¾ˆé‡è¦çš„è¯ï¼Œä¸è¦åœ¨åˆå§‹åŒ– HashMap çš„æ—¶å€™è®¾ç½®è¿‡é«˜çš„å®¹é‡ï¼ŒåŠå¤ªå°çš„è´Ÿè½½ç³»æ•°(è´Ÿè½½å› å­) * * &lt;p&gt;As a general rule, the default load factor (.75) offers a good tradeoff * between time and space costs. Higher values decrease the space overhead * but increase the lookup cost (reflected in most of the operations of the * &lt;tt&gt;HashMap&lt;/tt&gt; class, including &lt;tt&gt;get&lt;/tt&gt; and &lt;tt&gt;put&lt;/tt&gt;). The * expected number of entries in the map and its load factor should be taken * into account when setting its initial capacity, so as to minimize the * number of rehash operations. If the initial capacity is greater * than the maximum number of entries divided by the load factor, no * rehash operations will ever occur. * ğŸ‘†ä¸€èˆ¬ï¼Œé»˜è®¤çš„è´Ÿè½½ç³»æ•°ï¼ˆ0.75ï¼‰åœ¨æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¹‹é—´æä¾›äº†å¾ˆå¥½çš„å¹³è¡¡ã€‚æ›´é«˜çš„å€¼ä¼šå‡å°‘äº†ç©ºé—´å¼€é”€ï¼Œä½†åŒæ—¶ä¼šå¢åŠ æŸ¥æ‰¾æˆæœ¬ï¼ˆåæ˜ åœ¨ Hashmap çš„å¤§å¤šæ•°æ“ä½œä¸­ï¼ŒåŒ…æ‹¬ get å’Œ putï¼‰ã€‚åœ¨è®¾ç½®åˆå§‹å®¹é‡æ—¶ï¼Œåº”è€ƒè™‘åˆ° Map ä¸­é¢„æœŸçš„æ¡ç›®æ•°é‡åŠå…¶è´Ÿè½½ç³»æ•°ï¼Œä»¥å°½é‡å‡å°‘ rehash çš„æ¬¡æ•°ã€‚å¦‚æœåˆå§‹å®¹é‡å¤§äºæœ€å¤§æ¡ç›®æ•°é™¤ä»¥è´Ÿè½½ç³»æ•°çš„å€¼ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿ rehash æ“ä½œã€‚ * &lt;p&gt;If many mappings are to be stored in a &lt;tt&gt;HashMap&lt;/tt&gt; instance, * creating it with a sufficiently large capacity will allow the mappings to * be stored more efficiently than letting it perform automatic rehashing as * needed to grow the table. * ğŸ‘†å¦‚æœè¦åœ¨ä¸€ä¸ª HashMap å®ä¾‹ä¸­å­˜å‚¨å¤šä¸ªé”®å€¼å¯¹ï¼Œé‚£ä¹ˆåˆ›å»ºå®ä¾‹æ—¶æŒ‡å®šè¶³å¤Ÿå¤§çš„å®¹é‡å°†æ¯”è®©å®ƒæ ¹æ®éœ€è¦ rehash ä»¥æ‰©å……å®¹é‡çš„æ•ˆç‡æ›´é«˜ã€‚ * &lt;strong&gt;Note that this implementation is not synchronized.&lt;/strong&gt; * If multiple threads access a hash map concurrently, and at least one of * the threads modifies the map structurally, it &lt;i&gt;must&lt;/i&gt; be * synchronized externally. (A structural modification is any operation * that adds or deletes one or more mappings; merely changing the value * associated with a key that an instance already contains is not a * structural modification.) This is typically accomplished by * synchronizing on some object that naturally encapsulates the map. * ğŸ‘†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šçº¿ç¨‹åŒæ—¶è¯·æ±‚è®¿é—® HashMapï¼Œå¹¶ä¸”æœ‰è‡³å°‘ä¸€æ¡çº¿ç¨‹æ”¹å˜äº† HashMap å®ä¾‹çš„ç»“æ„ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨ HashMap å¤–å±‚å¯¹å®ƒæ·»åŠ  synchronized ä¿®é¥°ã€‚ï¼ˆç»“æ„ä¿®æ”¹æ˜¯æŒ‡ä»»ä½•æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹çš„æ“ä½œï¼›ä»…æ›´æ”¹å®ä¾‹å·²åŒ…å«çš„é”®å…³è”çš„å€¼ä¸æ˜¯ç»“æ„ä¿®æ”¹ã€‚ï¼‰ï¼ˆè¿™ä¸€å¥ä¸å¤ªæ‡‚è¯¶ã€‚ã€‚ã€‚ï¼‰ * If no such object exists, the map should be "wrapped" using the * &#123;@link Collections#synchronizedMap Collections.synchronizedMap&#125; * method. This is best done at creation time, to prevent accidental * unsynchronized access to the map:&lt;pre&gt; * Map m = Collections.synchronizedMap(new HashMap(...));&lt;/pre&gt; * ğŸ‘†å¦‚æœè¿™æ ·çš„å¯¹è±¡ä¸å­˜åœ¨ï¼Œåˆ™è¯¥ HashMap åº”è¯¥è¢«Collections.synchronizedMap()æ–¹æ³•åŒ…è£¹èµ·æ¥ã€‚æœ€å¥½åœ¨å¯¹è±¡åˆåˆ›å»ºçš„æ—¶å€™å°±è¿™æ ·åšï¼Œä»¥å…å‘ç”Ÿä¸å¯é¢„çŸ¥çš„å¯¹ HashMap çš„è®¿é—®ã€‚ * &lt;p&gt;The iterators returned by all of this class's "collection view methods" * are &lt;i&gt;fail-fast&lt;/i&gt;: if the map is structurally modified at any time after * the iterator is created, in any way except through the iterator's own * &lt;tt&gt;remove&lt;/tt&gt; method, the iterator will throw a * &#123;@link ConcurrentModificationException&#125;. Thus, in the face of concurrent * modification, the iterator fails quickly and cleanly, rather than risking * arbitrary, non-deterministic behavior at an undetermined time in the * future. * ğŸ‘†HashMap çš„è¿­ä»£å™¨è¿”å›çš„è¿™ä¸ªç±»çš„æ‰€æœ‰é›†åˆè§†å›¾æ–¹æ³•éƒ½æ˜¯â€˜å¿«é€Ÿå¤±æ•ˆâ€™çš„: æ‰€æœ‰åœ¨è¿­ä»£å™¨åˆ›å»ºä¹‹åå¯¹ HashMap è¿›è¡Œç»“æ„æ€§ä¿®æ”¹ï¼Œé™¤äº†è¿­ä»£å™¨è‡ªå·±çš„ remove()æ–¹æ³•å¤–ï¼Œä¼šæŠ›å‡º ConcurrentModificationExceptionã€‚åœ¨é¢å¯¹å¹¶å‘å¯¹ HashMap çš„ä¿®æ”¹æ—¶ï¼Œè¿­ä»£å™¨ä¼šå¿«é€Ÿå½»åº•çš„å¤±æ•ˆï¼Œè€Œä¸ä¼šé€‰æ‹©åœ¨ä¹‹åå†’ä¸ç¡®å®šçš„ã€æœªçŸ¥çš„é£é™©ã€‚ * &lt;p&gt;Note that the fail-fast behavior of an iterator cannot be guaranteed * as it is, generally speaking, impossible to make any hard guarantees in the * presence of unsynchronized concurrent modification. Fail-fast iterators * throw &lt;tt&gt;ConcurrentModificationException&lt;/tt&gt; on a best-effort basis. * Therefore, it would be wrong to write a program that depended on this * exception for its correctness: &lt;i&gt;the fail-fast behavior of iterators * should be used only to detect bugs.&lt;/i&gt; * ğŸ‘†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿­ä»£å™¨çš„å¿«é€Ÿå¤±æ•ˆå¹¶ä¸èƒ½è¢«ä¿è¯(ä¸€å®šå‘ç”Ÿ)ï¼Œï¼Œé€šå¸¸æ¥è®²ï¼Œåœ¨éåŒæ­¥å¹¶å‘ä¿®æ”¹ HashMap çš„æƒ…å†µä¸‹ï¼Œæ— æ³•(å¯¹å¿«é€Ÿå¤±æ•ˆ)åšå‡ºç¡¬æ€§ä¿è¯ã€‚è¿­ä»£å™¨å¿«é€Ÿå¤±æ•ˆåä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚å› æ­¤ï¼Œä¸èƒ½ä¾é æ˜¯å¦æŠ›å‡ºè¯¥å¼‚å¸¸æ¥ç¡®å®šå†™çš„ç¨‹åºæ˜¯å¦æ˜¯æ­£ç¡®çš„ï¼šè¿­ä»£å™¨çš„å¿«é€Ÿå¤±æ•ˆè¡Œä¸ºåªèƒ½è¢«ç”¨æ¥æŸ¥æ˜bugã€‚ */public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable/** * The default initial capacity - MUST be a power of two. * HashMap çš„é»˜è®¤åˆå§‹å®¹é‡--å¿…é¡»æ˜¯ 2 çš„ N æ¬¡æ–¹ */static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 (Also Known As, å³åˆå§‹å€¼ä¸º 16)/** * The maximum capacity, used if a higher value is implicitly specified * by either of the constructors with arguments. * MUST be a power of two &lt;= 1&lt;&lt;30. * æœ€å¤§å®¹é‡ï¼Œåœ¨å¸¦å‚æ„é€ å‡½æ•°ä¸­éšå¼åˆ¤æ–­æŒ‡å®šçš„å®¹é‡æ˜¯å¦è¶…å‡ºæœ€å¤§å®¹é‡æ—¶ä½¿ç”¨ã€‚ * å¿…é¡»æ˜¯ 2 çš„ N æ¬¡æ–¹ï¼Œä¸”ä¸å¤§äº 2^30 */static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;/** * The load factor used when none specified in constructor. * æ„é€ å™¨æœªæŒ‡å®šè´Ÿè½½ç³»æ•°æ—¶ï¼Œä½¿ç”¨è¯¥é»˜è®¤å€¼ * (å½“ HashMap çš„ size å¤§äº HashMap çš„ capacity * loadFactor æ—¶ï¼ŒHashMap æ‰©å®¹ï¼Œå³ capacity *= 2ï¼Œå¹¶ rehash()) */static final float DEFAULT_LOAD_FACTOR = 0.75f; /** * An empty table instance to share when the table is not inflated. * åœ¨è¡¨è¿˜æ²¡æœ‰æ‰©å®¹ä¹‹å‰ï¼Œå…±äº«è¯¥ç©ºæ•°ç»„å®ä¾‹ */static final Entry&lt;?,?&gt;[] EMPTY_TABLE = &#123;&#125;;/** * The table, resized as necessary. Length MUST Always be a power of two. * æ•´ä¸ªè¡¨çš„å®¹é‡ï¼Œå¦‚æœæœ‰å¿…è¦çš„è¯(é”®å€¼å¯¹æ¡æ•°/è´Ÿè½½ç³»æ•° &gt;= table.length)ä¼šè¿›è¡Œæ‰©å®¹ã€‚å®¹é‡å¤§å°å¿…é¡»æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ */transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;/** * The number of key-value mappings contained in this map. * map ä¸­é”®å€¼å¯¹çš„æ¡æ•° */transient int size;/** * The next size value at which to resize (capacity * load factor). * @serial * ä¸‹ä¸€æ¬¡æ‰©å®¹åçš„å¤§å°(å®¹é‡*è´Ÿè½½ç³»æ•°) */int threshold;/** * The load factor for the hash table. * table çš„è´Ÿè½½ç³»æ•° * @serial */final float loadFactor;/** * æ— å‚æ„é€ æ–¹æ³•ï¼Œä½¿ç”¨é»˜è®¤åˆå§‹å®¹é‡(16)ï¼Œé»˜è®¤è´Ÿè½½ç³»æ•°(.75) */public HashMap() &#123; this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);&#125;/** * å¸¦å‚æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šåˆå§‹å®¹é‡ä¸ºinitialCapacity */public HashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR);&#125;/** * å¸¦å‚æ„é€ æ–¹æ³•ï¼ŒæŒ‡å®šåˆå§‹å®¹é‡å’Œè´Ÿè½½ç³»æ•° * æœ€ç»ˆæ‰€æœ‰æ„é€ å‡½æ•°éƒ½æŒ‡å‘è¯¥æ„é€ å‡½æ•° */public HashMap(int initialCapacity, float loadFactor) &#123; // å¦‚æœæŒ‡å®šçš„åˆå§‹å®¹é‡ &lt;0ï¼Œåˆ™æŠ›å‡ºä¸åˆæ³•å‚æ•°å¼‚å¸¸ if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); // å¦‚æœæŒ‡å®šçš„å®¹é‡å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™ä½¿ç”¨æœ€å¤§å®¹é‡ä¸ºåˆå§‹å®¹é‡ if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; // å¦‚æœæŒ‡å®šçš„è´Ÿè½½ç³»æ•°ä¸å¤§äºé›¶æˆ–ä¸æ˜¯æµ®ç‚¹æ•°ï¼Œåˆ™æŠ›å‡ºä¸åˆæ³•å‚æ•°å¼‚å¸¸ if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; threshold = initialCapacity; init();&#125;/** * ç»„å»ºä¸€ä¸ªä¸æŒ‡å®š map ç›¸åŒçš„ HashMapï¼Œä½¿ç”¨é»˜è®¤è´Ÿè½½ç³»æ•°ï¼Œåˆå§‹å®¹é‡è¶³ä»¥ç››ä¸‹è¯¥ Mapã€‚ */public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; // å¦‚æœåˆå§‹å®¹é‡å¤§äºå…è®¸çš„æœ€å¤§å®¹é‡ï¼Œåˆ™ä½¿ç”¨æœ€å¤§å®¹é‡ï¼›å¦åˆ™åˆå§‹å®¹é‡ä¸ºæŒ‡å®š Map çš„å¤§å°é™¤ä»¥è´Ÿè½½ç³»æ•°ååŠ ä¸€ this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1, DEFAULT_INITIAL_CAPACITY), DEFAULT_LOAD_FACTOR); // HashMapæ‰©å®¹åˆ°æŒ‡å®šå®¹é‡ inflateTable(threshold); putAllForCreate(m);&#125;/** * Inflates the table. * è¡¨æ‰©å®¹ */ private void inflateTable(int toSize) &#123; // Find a power of 2 &gt;= toSize // æ‰¾åˆ°å¤§äº toSize çš„æœ€å°çš„2çš„å¹‚æ¬¡æ–¹çš„å€¼(å› ä¸ºå®¹é‡åªèƒ½ä¸º2çš„å¹‚æ¬¡æ–¹) int capacity = roundUpToPowerOf2(toSize); // ä¸‹æ¬¡æ‰©å®¹æ—¶åˆ›å»ºè¡¨çš„åˆå§‹å¤§å° threshold = (int) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + 1); table = new Entry[capacity]; initHashSeedAsNeeded(capacity);&#125;// å¯»æ‰¾å¤§äºæŸä¸ªéè´Ÿæ•°çš„çš„æœ€å°çš„2çš„å¹‚æ¬¡æ–¹çš„å€¼(eg. roundUpToPowerOf2(5)=8)private static int roundUpToPowerOf2(int number) &#123; // assert number &gt;= 0 : "number must be non-negative"; // æ–­è¨€ number ä¸ºéè´Ÿæ•° return number &gt;= MAXIMUM_CAPACITY ? MAXIMUM_CAPACITY : (number &gt; 1) ? Integer.highestOneBit((number - 1) &lt;&lt; 1) : 1; // å½“ number ä¸å°äºå…è®¸çš„æœ€å¤§å®¹é‡æ—¶ï¼Œç›´æ¥è¿”å›æœ€å¤§å€¼ï¼› // å½“ number = 1 æ—¶ï¼Œç›´æ¥è¿”å› 1ã€‚ // å¦åˆ™è¿”å› Integer.highestOneBit((number - 1) &lt;&lt; 1)ï¼š // (number - 1) &lt;&lt; 1) = (number - 1)*2 // Integer.highestOneBit(i): å– i è¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶å½¢å¼æœ€å·¦è¾¹çš„æœ€é«˜ä¸€ä½ä¸”é«˜ä½åé¢å…¨éƒ¨è¡¥é›¶ï¼Œæœ€åè¿”å›intå‹çš„ç»“æœã€‚ // å‡è®¾ number å€¼ä¸º 5ï¼›é‚£ä¹ˆåè¿›åˆ¶ 5 å‡å» 1 ä¹‹åå¾— 4ï¼Œ4 çš„äºŒè¿›åˆ¶å¸¦ç¬¦å·å·¦ç§»ä¸€ä½ï¼Œå¾—åè¿›åˆ¶ 8ï¼›8 çš„äºŒè¿›åˆ¶ä¸ºï¼š1000ï¼›ç»è¿‡ Integer.highestOneBit å¤„ç†åå€¼è¿˜æ˜¯ 8ã€‚ // å‡è®¾ number å€¼ä¸º 6ï¼Œé‚£ä¹ˆåè¿›åˆ¶ 6 å‡å» 1 ä¹‹åå¾— 5ï¼Œ5 çš„äºŒè¿›åˆ¶å¸¦ç¬¦å·å·¦ç§»ä¸€ä½ï¼Œå¾—åè¿›åˆ¶ 10ï¼›10 çš„äºŒè¿›åˆ¶ä¸º 1010ï¼›å–æœ€é«˜ä½ 1ï¼Œå…¶ä½™ 3 ä½è¡¥é›¶ï¼Œå¾— 1000ï¼Œå³åè¿›åˆ¶ 8ã€‚&#125;// å†çœ‹çœ‹ HashMap çš„é™æ€å†…éƒ¨ç±» Entry&lt;K,V&gt;static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; V value; // åªæœ‰ nextï¼Œæ²¡æœ‰ prevï¼Œå³å•å‘é“¾ Entry&lt;K,V&gt; next; int hash; /** * Creates new entry. */ Entry(int h, K k, V v, Entry&lt;K,V&gt; n) &#123; value = v; next = n; key = k; hash = h; &#125; // key çš„ getter æ–¹æ³•..ç•¥ // value çš„ getter æ–¹æ³•..ç•¥ // value çš„ setter æ–¹æ³• public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; // Entry çš„ key å’Œ value ä¸ o çš„ key å’Œ value éƒ½ç›¸ç­‰ï¼Œåˆ™return trueï¼Œå¦åˆ™return false public final boolean equals(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry e = (Map.Entry)o; Object k1 = getKey(); Object k2 = e.getKey(); if (k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2))) &#123; Object v1 = getValue(); Object v2 = e.getValue(); if (v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2))) return true; &#125; return false; &#125; public final int hashCode() &#123; return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue()); &#125; public final String toString() &#123; return getKey() + "=" + getValue(); &#125; /** * This method is invoked whenever the value in an entry is * overwritten by an invocation of put(k,v) for a key k that's already * in the HashMap. */ void recordAccess(HashMap&lt;K,V&gt; m) &#123; &#125; /** * This method is invoked whenever the entry is * removed from the table. */ void recordRemoval(HashMap&lt;K,V&gt; m) &#123; &#125;&#125; put() æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140public V put(K key, V value) &#123; // å¦‚æœè¿™æ˜¯ç©ºè¡¨ï¼Œåˆ™é¦–å…ˆä¸ºè¡¨è¿›è¡Œæ‰©å®¹ï¼Œthreshold åˆå§‹å€¼ä¸º DEFAULT_INITIAL_CAPACITYï¼Œå³ 16 if (table == EMPTY_TABLE) &#123; inflateTable(threshold); &#125; // å¦‚æœ key ä¸º null if (key == null) // è¯¥æ–¹æ³•è¿›è¡Œçš„æ“ä½œä¸ä¸‹é¢å¯¹é null keyå€¼çš„æ“ä½œé€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡æ˜¯åœ¨ for å¾ªç¯ä¸­çš„ åˆ¤æ–­æ¡ä»¶æ”¹ä¸ºäº† e.key == null return putForNullKey(value); int hash = hash(key); // é€šè¿‡ Hash å€¼æ‰¾åˆ°åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•å€¼ int i = indexFor(hash, table.length); // éå†ç´¢å¼•æŒ‡å‘çš„å•å‘é“¾è¡¨ï¼ŒæŸ¥çœ‹ key åœ¨å½“å‰ Map ä¸­æ˜¯å¦å­˜åœ¨ for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; Object k; // å¦‚æœ å½“å‰ Entry å¯¹è±¡ e çš„ hash å€¼ä¸ key çš„ hash å€¼ç›¸ç­‰ï¼Œä¸” e.key ä¸ key ç›¸ç­‰ï¼Œåˆ™è¦†ç›–åŸæœ‰ e.value if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123; V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; // å¦‚æœè¦æ’å…¥çš„ key åœ¨ map ä¸­ä¸å­˜åœ¨ï¼Œï¼Œ // ç»“æ„ä¿®æ”¹æ¬¡æ•° ++ modCount++; // åœ¨ HashMap çš„ Entry æ•°ç»„ä¸­æ·»åŠ æ–°çš„ Entry å¯¹è±¡ addEntry(hash, key, value, i); return null;&#125;/** * Returns index for hash code h. * æ‰¾åˆ° hash å€¼åœ¨ table ä¸­çš„ç´¢å¼•å€¼ */static int indexFor(int h, int length) &#123; // assert Integer.bitCount(length) == 1 : "length must be a non-zero power of 2"; //Integer.bitCount(length) ç”¨äºè®¡ç®—åè¿›åˆ¶ length å€¼çš„äºŒè¿›åˆ¶å€¼ä¸­ '1' çš„ä¸ªæ•°ï¼›Integer.bitCount(length) == 1ï¼Œå³æ–­è¨€ length å€¼(HashMap ä¸­Entry&lt;?,?&gt;[]çš„lengthï¼Œå³ HashMap capacity)ä¸º 2 çš„å¹‚æ¬¡æ–¹ã€‚ // åˆšå¼€å§‹æ˜¯æ²¡æœ‰çœ‹æ˜ç™½è¿™è¡Œä»£ç çš„ï¼Œæ±‚åŠ©æœç´¢å¼•æ“ä¹‹åï¼Œæ‰æœ‰äº›çœ‰ç›®ã€‚ // é¦–å…ˆï¼Œè¿™æ˜¯æŒ‰ä½ä¸æ“ä½œï¼Œï¼Œå› ä¸º length å€¼ä¸º 2 çš„å¹‚æ¬¡æ–¹ï¼Œæ‰€ä»¥ length - 1åï¼Œå…¶äºŒè¿›åˆ¶çš„å€¼é™¤é«˜ä½å¤–å…¨ä¸º1(eg. å‡è®¾length å€¼ä¸º 8(äºŒè¿›åˆ¶è¡¨ç°ä¸º 1000)ï¼Œ å‡ 1 å¾— 7ï¼›7 çš„äºŒè¿›åˆ¶ä¸º 0111) return h &amp; (length-1);&#125;/** * Adds a new entry with the specified key, value and hash code to * the specified bucket. It is the responsibility of this * method to resize the table if appropriate. * é€šè¿‡æŒ‡å®šçš„ keyã€valueã€hash code å‘æŒ‡å®šçš„ bucket æ·»åŠ ä¸€ä¸ªæ–°çš„ entry å¯¹è±¡ã€‚åœ¨é€‚å½“çš„æ—¶å€™æ‰©å®¹ table ä¹Ÿæ˜¯è¯¥æ–¹æ³•çš„ä¸»è¦è´£ä»»ã€‚ * Subclass overrides this to alter the behavior of put method. * å­ç±»é‡å†™è¯¥æ–¹æ³•å¯ä»¥ä¿®æ”¹ put() æ–¹æ³•çš„è¡Œä¸ºã€‚ */void addEntry(int hash, K key, V value, int bucketIndex) &#123; // å¦‚æœå½“å‰ HashMap çš„ size å¤§äºç­‰äºæ‰©å®¹ä¸´ç•Œå€¼ï¼Œä¸”å½“å‰ Entry ä¸ä¸º null çš„æ—¶å€™ // å½“ table çš„ capacity ç­‰äº Integer.MAX_VALUEæ—¶ï¼Œint ç±»å‹çš„ size æœ€å¤šä¸ threshold(æ­¤æ—¶ threshold = Integer.MAX_VALUE)ç›¸ç­‰ï¼Œè€Œä¸” null != table[bucketIndex] è‚¯å®šä¸º trueã€‚æ‰€ä»¥ï¼Œå½“ table è¾¾åˆ°æœ€å¤§å®¹é‡åï¼Œå†è°ƒç”¨ put() ä¼šä¸€ç›´è¦†ç›–åŸæœ‰çš„å€¼ã€‚ if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; // 2 å€æ‰©å®¹ resize(2 * table.length); // key ä¸º nullï¼Œåˆ™ hash å€¼ä¸º 0ï¼›å¦åˆ™ é€šè¿‡ hash() æ–¹æ³•è®¡ç®— hash å€¼ hash = (null != key) ? hash(key) : 0; // è®¡ç®—æ‰©å®¹ä¹‹å entry å°†è¦è¢«æ”¾åœ¨çš„ bucket ç´¢å¼• bucketIndex = indexFor(hash, table.length); &#125; // å®é™…æ·»åŠ  entry å¯¹è±¡çš„æ–¹æ³• createEntry(hash, key, value, bucketIndex);&#125;/** * Rehashes the contents of this map into a new array with a * larger capacity. This method is called automatically when the * number of keys in this map reaches its threshold. * Rehash å½“å‰ map å¯¹è±¡åˆ°ä¸€ä¸ªæ–°çš„æ›´å¤§çš„æ•°ç»„ä¸­å»ï¼›è¯¥æ–¹æ³•åœ¨ map.size() è¾¾åˆ°ä¸´ç•Œå€¼æ—¶è‡ªåŠ¨è°ƒç”¨ * If current capacity is MAXIMUM_CAPACITY, this method does not * resize the map, but sets threshold to Integer.MAX_VALUE. * This has the effect of preventing future calls. * å¦‚æœå½“å‰å®¹é‡è¾¾åˆ°å…è®¸çš„æœ€å¤§å®¹é‡æ—¶ï¼Œè¯¥æ–¹æ³•ä¸ä¼šå†è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè€Œæ˜¯ç›´æ¥å°†ä¸´ç•Œå€¼è®¾ç½®ä¸º Integer.MAX_VALUEã€‚ * @param newCapacity the new capacity, MUST be a power of two; * must be greater than current capacity unless current * capacity is MAXIMUM_CAPACITY (in which case value * is irrelevant). */void resize(int newCapacity) &#123; Entry[] oldTable = table; int oldCapacity = oldTable.length; // MAXIMUM_CAPACITY = 2^30ï¼Œå³ oldCapacity æœ€å¤§å€¼ä¸º 2^30 if (oldCapacity == MAXIMUM_CAPACITY) &#123; // Integer.MAX_VALUE = 2^31 - 1ï¼Œä¹‹åä¸å¯èƒ½å†è¿›è¡Œæ‰©å®¹æ“ä½œäº† threshold = Integer.MAX_VALUE; return; &#125; Entry[] newTable = new Entry[newCapacity]; transfer(newTable, initHashSeedAsNeeded(newCapacity)); table = newTable; threshold = (int)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + 1);&#125;/** * Like addEntry except that this version is used when creating entries * as part of Map construction or "pseudo-construction" (cloning, * deserialization). This version needn't worry about resizing the table. * æœ¬æ–¹æ³•ä¸ addEntry() ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯ç”¨äº'ä¼ªæ„é€ æ–¹æ³•æ—¶'(å…‹éš†ã€ååºåˆ—åŒ–)ï¼Œè€Œä¸”è¯¥æ–¹æ³•ä¸ç”¨æ‹…å¿ƒæ‰©å®¹çš„é—®é¢˜~ * Subclass overrides this to alter the behavior of HashMap(Map), * clone, and readObject. */void createEntry(int hash, K key, V value, int bucketIndex) &#123; // åœ¨æœªå‘ç”Ÿæ•£åˆ—ç¢°æ’æ—¶ï¼Œe ä¸º nullï¼›å¦åˆ™ e ä¸º entry å®ä¾‹ Entry&lt;K,V&gt; e = table[bucketIndex]; // æ„å»ºæ–°çš„Entryå¯¹è±¡ï¼Œå¹¶å…¶å±æ€§ next æŒ‡å‘ eï¼Œï¼Œå³åœ¨å‘ç”Ÿæ•£åˆ—ç¢°æ’çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æ·»åŠ  entry å®ä¾‹æ—¶ï¼Œéƒ½æ˜¯ insert(æ·»åŠ åˆ°å•å‘é“¾å¼€å§‹ä½ç½®)ï¼Œè€Œé appendã€‚ table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e); size++;&#125;/** * Transfers all entries from current table to newTable. * å°†ç°åœ¨çš„ table è½¬ç§»åˆ°æ–°çš„ tableä¸­ */void transfer(Entry[] newTable, boolean rehash) &#123; int newCapacity = newTable.length; // éå†åŸ Entry æ•°ç»„ä¸­æ‰€æœ‰å¯¹è±¡ for (Entry&lt;K,V&gt; e : table) &#123; // éå†æ¯ä¸ªæ§½ä½çš„ entry å•å‘é“¾ while(null != e) &#123; // â‘  ğŸ‘‰ è®°å½•ä¸‹ e.next å…ˆ Entry&lt;K,V&gt; next = e.next; if (rehash) &#123; e.hash = null == e.key ? 0 : hash(e.key); &#125; // è®¡ç®— e.hash åœ¨æ–° entry æ•°ç»„ä¸­ bucket ç´¢å¼• int i = indexFor(e.hash, newCapacity); // â‘¡ ğŸ‘‰ å°†åŸæ§½ä½çš„ entry å•å‘é“¾æ·»åŠ åˆ°å½“å‰ e çš„ next å±æ€§ä¸­ã€‚ e.next = newTable[i]; // â‘¢ ğŸ‘‰ å°† æ–°æ•°ç»„çš„æŒ‡å®šç´¢å¼•çš„å€¼ æŒ‡å‘ æ‹¼æ¥è¿‡çš„æ–°çš„ entry å•å‘é“¾ã€‚ newTable[i] = e; // â‘£ ğŸ‘‰ å°†ä¹‹å‰è®°å½•ä¸‹æ¥çš„ e.next å€¼é‡æ–°èµ‹ç»™ eï¼Œå¼€å§‹ä¸‹ä¸€è½®å¾ªç¯(ç±»ä¼¼ for å¾ªç¯ä¸­çš„ i++)ã€‚ e = next; &#125; &#125;&#125;// ğŸ‘† transfer() æ–¹æ³•ä¸­ å°†while å¾ªç¯è½¬æˆ for å¾ªç¯ï¼Œâ‘ ã€â‘£ å¤„å¯èƒ½ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ï¼› â‘¡ã€â‘¢ ä½ç½®ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘ä¹Ÿæ˜¯åå¤å’€åš¼äº†å¥½å¤šéæ‰å¤§æ¦‚æ˜ç™½ä¸€ç‚¹ã€‚// eg. æˆ‘ä»¬å‡è®¾åœ¨ç´¢å¼•ä¸º i çš„æ§½ä½å¤„æœ‰ä¸ª entry å¯¹è±¡ e0ï¼Œå®ƒé“¾æ¥çš„ entry å¯¹è±¡ç»“æ„å¤§æ¦‚ä¸ºï¼še0 -&gt; e1 -&gt; e2 -&gt; e3ï¼›ç°åœ¨æœ‰ä¸ª entry å¯¹è±¡ eï¼Œe çš„ hash å€¼åœ¨æ–°æ•°ç»„ä¸­è®¡ç®—å¾—åˆ°çš„ç´¢å¼•å€¼åŒæ ·ä¸º i(å³ï¼Œæ•£åˆ—ç¢°æ’)ï¼›æ­¤æ—¶éœ€å°† e æ·»åŠ åˆ° e0 çš„å•å‘é“¾ä¸­ï¼Œâ‘¢ã€â‘£ æ“ä½œæ‰§è¡Œè¿‡åï¼Œè¯¥æ§½ä½çš„å•å‘é“¾ç»“æ„å˜ä¸ºï¼še -&gt; e0 -&gt; e1 -&gt; e2 -&gt; e3ã€‚ get() æ–¹æ³•ğŸ‘‡1234567891011121314151617181920212223242526272829303132333435363738394041424344public V get(Object key) &#123; if (key == null) return getForNullKey(); Entry&lt;K,V&gt; entry = getEntry(key); return null == entry ? null : entry.getValue();&#125;/** * Offloaded version of get() to look up null keys. Null keys map * to index 0. This null case is split out into separate methods * for the sake of performance in the two most commonly used * operations (get and put), but incorporated with conditionals in * others. * key å€¼ä¸º null çš„æŒ‡å‘ map ä¸­ Entry æ•°ç»„ index ä¸º 0 çš„ entry å¯¹è±¡ã€‚ä¸ºäº†æ›´é«˜çš„æ€§èƒ½è¡¨ç°ï¼Œåœ¨ get å’Œ put è¯·æ±‚ä¸­ï¼Œkey ä¸º null çš„æƒ…å†µè¢«åˆ†æ”¯å‡ºå•ç‹¬çš„æ–¹æ³•æ¥å¤„ç†ï¼Œä½†åœ¨å…¶ä»–æ–¹æ³•ä¸­å¹¶æ²¡æœ‰è¿™æ ·å»åšã€‚ */ private V getForNullKey() &#123; if (size == 0) &#123; return null; &#125; for (Entry&lt;K,V&gt; e = table[0]; e != null; e = e.next) &#123; if (e.key == null) return e.value; &#125; return null;&#125;final Entry&lt;K,V&gt; getEntry(Object key) &#123; if (size == 0) &#123; return null; &#125; int hash = (key == null) ? 0 : hash(key); // éå†æŒ‡å®š index ä½ç½®çš„çš„å•é¡¹é“¾ for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next) &#123; Object k; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; return null;&#125; remove() æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142public V remove(Object key) &#123; // ç›´æ¥çœ‹å…³é”®æ–¹æ³• Entry&lt;K,V&gt; e = removeEntryForKey(key); return (e == null ? null : e.value);&#125;final Entry&lt;K,V&gt; removeEntryForKey(Object key) &#123; if (size == 0) &#123; return null; &#125; int hash = (key == null) ? 0 : hash(key); int i = indexFor(hash, table.length); // â‘ çœ‹åˆ°è¿™å„¿æ—¶å€™æˆ‘æ˜¯æœ‰äº›æ‡µå“”çš„.. Entry&lt;K,V&gt; prev = table[i]; Entry&lt;K,V&gt; e = prev; while (e != null) &#123; Entry&lt;K,V&gt; next = e.next; Object k; // â‘¢ å…³é”®åœ¨è¿™å„¿ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123; modCount++; size--; // â‘¡ç›´åˆ°çœ‹åˆ°äº†è¿™å„¿ï¼Œæˆ‘æ„è¯†åˆ°æˆ‘åˆšæ‰æ‡µé€¼æ—©äº†... // ç”± â‘  å¾ˆå®¹æ˜“å¾—å‡ºç»“è®ºå•Šï¼Œå¦¥å¦¥ç›¸ç­‰ if (prev == e) table[i] = next; else prev.next = next; e.recordRemoval(this); return e; &#125; â‘£ prev = e; e = next; &#125; return e;&#125;// ğŸ‘†åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœåªçœ‹â‘ â‘¡ï¼Œä¼šè’™åœˆçš„ï¼Œï¼Œå…³é”®åœ¨â‘¢çš„åˆ†æ”¯åˆ¤æ–­ã€‚// åœ¨å‘ç”Ÿæ•£åˆ—ç¢°æ’(ç”±ä¸åŒçš„ keyï¼Œç”Ÿæˆäº†ç›¸åŒçš„ hash å€¼)æƒ…å†µä¸‹ï¼Œe.hash == hash æ˜¯æˆç«‹çš„ï¼Œä½† (k = e.key) == key æˆ– key.equals(k)å°±ä¸æˆç«‹äº†ã€‚// eg. å¦‚æœè¦åˆ é™¤çš„å•å‘é“¾èŠ‚ç‚¹åœ¨é“¾çš„å¼€å¤´ï¼Œåˆ™ç›´æ¥èµ° (prev == e) åˆ†æ”¯ï¼Œå°† table[i] æŒ‡å‘ å…¶ next å±æ€§çš„èŠ‚ç‚¹ï¼›å¦‚æœè¦åˆ é™¤çš„å•å‘é“¾èŠ‚ç‚¹ä½äºç¬¬äºŒï¼Œåˆ™åœ¨ç›´æ¥å°†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘ç¬¬ 3 ä¸ªèŠ‚ç‚¹å³å¯ã€‚ entrySet() æ–¹æ³•123456789101112131415161718192021222324252627282930313233/** * Returns a &#123;@link Set&#125; view of the mappings contained in this map. * The set is backed by the map, so changes to the map are * reflected in the set, and vice-versa. If the map is modified * while an iteration over the set is in progress (except through * the iterator's own &lt;tt&gt;remove&lt;/tt&gt; operation, or through the * &lt;tt&gt;setValue&lt;/tt&gt; operation on a map entry returned by the * iterator) the results of the iteration are undefined. The set * supports element removal, which removes the corresponding * mapping from the map, via the &lt;tt&gt;Iterator.remove&lt;/tt&gt;, * &lt;tt&gt;Set.remove&lt;/tt&gt;, &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt; and * &lt;tt&gt;clear&lt;/tt&gt; operations. It does not support the * &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations. * è¿”å›å½“å‰ map é”®å€¼å¯¹æ˜ å°„çš„ set å¿«ç…§(??)ã€‚è¯¥é›†åˆç”± map æ”¯æŒï¼Œæ‰€ä»¥å¯¹ map çš„ä¿®æ”¹ä¼šåæ˜ åˆ° setä¸­ï¼Œåä¹‹äº¦ç„¶ã€‚ * å¦‚æœ map åœ¨ set è¿­ä»£çš„è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹(é™¤äº†è¿­ä»£å™¨æœ¬èº«çš„remove()å’Œè¿­ä»£å™¨è¿”å›çš„ map entryçš„ setValue()æ“ä½œ)è¯ï¼Œå…¶ç»“æœæ˜¯æœªçŸ¥(??)çš„ã€‚ * set æ”¯æŒç§»é™¤å…ƒç´ ï¼Œ Set.remove(),removeAll(), retainAll() å’Œ clear() ä¼šç›´æ¥å½±å“åˆ°ç›¸å…³çš„ mapã€‚set ä¸çŸ¥é“ add()å’Œ addAll() æ“ä½œã€‚ * @return a set view of the mappings contained in this map */public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123; return entrySet0();&#125;(å®æµ‹ï¼Œåœ¨ for(Map.Entry&lt;String,String&gt; m:map.entrySet()) å¾ªç¯ä¸­ï¼Œé€šè¿‡ map.put() æ–¹æ³•æ”¾å…¥æ–°çš„å€¼ï¼Œä¼šæŠ›å‡º ConcurrentModificationExceptionï¼šğŸ‘‡Exception in thread "main" java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextEntry(HashMap.java:922) at java.util.HashMap$EntryIterator.next(HashMap.java:962) at java.util.HashMap$EntryIterator.next(HashMap.java:960) at Test.main(Test.java:12)å¦‚æœæ”¾å…¥ map ä¸­å·²å­˜åœ¨çš„ keyï¼Œä¸ä¼šæŠ›å‡º ConcurrentModificationExceptionã€‚) private Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet0() &#123; Set&lt;Map.Entry&lt;K,V&gt;&gt; es = entrySet; return es != null ? es : (entrySet = new EntrySet());&#125; åˆ°è¿™é‡Œä¹‹åæ˜¯æœ‰ç‚¹å„¿æ‡µçš„ï¼Œï¼Œå› ä¸º entrySet0() æ–¹æ³•ä¸­ç¬¬ä¸€è¡Œä»£ç ï¼ŒentrySetåœ¨ HashMap ä¸­æ˜¯è¿™æ ·å£°æ˜çš„ï¼šğŸ‘‡1private transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet = null; ä¹‹ååœ¨å…¶ä»–åœ°æ–¹æ²¡æœ‰æ˜ç¡®å¯¹å…¶è¿›è¡Œèµ‹å€¼çš„ä»£ç ï¼Œç„¶é¹…æˆ‘ä»¬åœ¨ Test ç±»è¿›è¡Œ for(Map.Entry&lt;String,String&gt; m: map.entrySet()) å¾ªç¯æ—¶ï¼ŒentrySetæ˜æ˜æ˜¯æœ‰å€¼çš„ã€‚é‚£ä¹ˆ map.entrySet() åˆ°åº•æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œèµ‹å€¼çš„å‘¢ï¼Ÿï¼è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œåœ¨ HashMap æ˜¾å¼ç»§æ‰¿çš„ AbstractMap ç±»å’Œå®ç°çš„ Map&lt;K,V&gt; æ¥å£ä¸­ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆã€‚å‡ºé—¨é›äº†ä¸€åœˆï¼Œçªç„¶æƒ³åˆ°äº† Test ç±»è¢«ç¼–è¯‘ä¹‹åçš„ class æ–‡ä»¶ï¼ï¼ç„¶åç”¨ JD-JUI åç¼–è¯‘ä¹‹åï¼Œç»ˆäºæœ‰äº›å‘ç°äº†ï¼šğŸ‘‡12// class æ–‡ä»¶åç¼–è¯‘ä¹‹åçš„ forEach å¾ªç¯for (Iterator i$ = map.entrySet().iterator(); i$.hasNext(); localEntry = (Map.Entry)i$.next()) ğŸ‘†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè™½è¯´ç”¨çš„æ˜¯ forEach å¾ªç¯ï¼Œä½†åœ¨ç¼–è¯‘ä¹‹åè¿˜æ˜¯é€šè¿‡ Iterator è¿­ä»£å™¨è¿›è¡Œéå†çš„ã€‚é¦–å…ˆåˆå§‹æ¡ä»¶ Iterator i$ = map.entrySet().iterator()ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° map.entrySet() è¿”å›çš„æ˜¯ä¸€ä¸ª Set&lt;Map.Entry&lt;K,V&gt;&gt;ï¼Œæ‰€ä»¥å…¶ iterator() æ˜¯ Set æ¥å£å®ç°ç±»çš„ iterator() æ–¹æ³•ã€‚æˆ‘ä»¬ç»§ç»­çœ‹ entrySet0() æ–¹æ³•çš„ç¬¬äºŒè¡Œä»£ç ï¼Œåœ¨ entrySet ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Set&lt;Map.Entry&lt;K,V&gt;&gt; å¯¹è±¡ï¼Œå³ new EntrySet()ï¼Œæˆ‘ä»¬çœ‹çœ‹ EntrySet ç±»ï¼šğŸ‘‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778private final class EntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; &#123; public Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123; return newEntryIterator(); &#125; public boolean contains(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry&lt;K,V&gt; e = (Map.Entry&lt;K,V&gt;) o; Entry&lt;K,V&gt; candidate = getEntry(e.getKey()); return candidate != null &amp;&amp; candidate.equals(e); &#125; public boolean remove(Object o) &#123; return removeMapping(o) != null; &#125; public int size() &#123; return size; &#125; public void clear() &#123; HashMap.this.clear(); &#125;&#125;// EntrySet ç±»é›†æˆäº† AbstractSet ç±»ï¼Œè€Œ AbstractSet ç±»åˆå®ç°äº† Set&lt;E&gt; æ¥å£ï¼Œé‚£ä¹ˆ EntrySet ç±»ä¸­çš„ iterator() æ–¹æ³•å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ã€‚æˆ‘ä»¬ç»§ç»­é¡ºç€å¾€ä¸‹çœ‹ newEntryIterator ï¼šğŸ‘‡Iterator&lt;Map.Entry&lt;K,V&gt;&gt; newEntryIterator() &#123; return new EntryIterator();&#125;private final class EntryIterator extends HashIterator&lt;Map.Entry&lt;K,V&gt;&gt; &#123; public Map.Entry&lt;K,V&gt; next() &#123; return nextEntry(); &#125;&#125;// å½¢å¼æ¸æ¸æ˜æœ—ï¼Œï¼Œå†çœ‹ nextEntry()private abstract class HashIterator&lt;E&gt; implements Iterator&lt;E&gt; &#123; Entry&lt;K,V&gt; next; // next entry to return int expectedModCount; // For fast-fail int index; // current slot Entry&lt;K,V&gt; current; // current entry HashIterator() &#123; expectedModCount = modCount; if (size &gt; 0) &#123; // advance to first entry Entry[] t = table; while (index &lt; t.length &amp;&amp; (next = t[index++]) == null) ; &#125; &#125; public final boolean hasNext() &#123; return next != null; &#125; final Entry&lt;K,V&gt; nextEntry() &#123; if (modCount != expectedModCount) throw new ConcurrentModificationException(); Entry&lt;K,V&gt; e = next; if (e == null) throw new NoSuchElementException(); if ((next = e.next) == null) &#123; Entry[] t = table; while (index &lt; t.length &amp;&amp; (next = t[index++]) == null) ; &#125; current = e; return e; &#125; public void remove() &#123; if (current == null) throw new IllegalStateException(); if (modCount != expectedModCount) throw new ConcurrentModificationException(); Object k = current.key; current = null; HashMap.this.removeEntryForKey(k); expectedModCount = modCount; &#125;&#125;// è‡³æ­¤ï¼Œæ‰€æœ‰é—®é¢˜è§£å†³~ åœ¨ Iterator i$ = map.entrySet().iterator() ä¸­ï¼Œi$ ä¸º HashIteratorï¼Œi$.hasNext() è°ƒç”¨çš„æ˜¯ HashIterator.hasNext()ï¼Œ(Map.Entry)i$.next() è°ƒç”¨çš„æ˜¯ EntryIterator.next()ï¼Œè€Œ EntryIterator.next() æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨äº† HashIterator.nextEntry()ã€‚ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 2019-04-02.update ä¸Šä¸ªæœˆæœ«çš„æ—¶å€™ï¼ŒèŠ±äº†ä¸€ä¸ªæ™šä¸Šæ›´æ–°äº†ä¸‹ç®€å†ï¼Œä½†å¹¶æ²¡æœ‰åˆ°å¤„å»æŠ•ï¼Œåªæ˜¯å¯¹å¤–å¯è§ã€‚é™†é™†ç»­ç»­å¼€å§‹æœ‰å…¬å¸æ¥è§¦ï¼Œå…¶ä¸­è¿˜æ¥åˆ°ä¸€ä¸ªç”µè¯é¢è¯•ï¼Œï¼Œæ˜¯æŸå¤–åŒ…å…¬å¸çš„ã€‚çªå¦‚å…¶æ¥çš„ç”µè¯é¢è¯•ï¼Œæœ‰ç‚¹ä»“ä¿ƒï¼Œä½†å¥½åœ¨å‰ç«¯æ—¶é—´ä¹Ÿä¸€ç›´åœ¨çœ‹ä¹¦æ¶è¡¥ã€‚å…¶ä¸­æœ‰ä¸ªå¾ˆåŸºç¡€çš„é—®é¢˜ï¼Œï¼Œã€ç®€å•è¯´ä¸‹ Java é›†åˆæ¡†æ¶å„å®¹å™¨ç±»ä¹‹é—´çš„å…³ç³»ã€ã€‚å¤šäºäº†å­¦ä¹  ã€Redis æ ¸å¿ƒå†é™©ã€æ—¶ï¼Œå¯¹ LinkedList å¤šçœ‹äº†ä¸€çœ¼ï¼Œä¹Ÿç»å—ä½äº†è¶…è¶Šå¦¹å¦¹çš„è€ƒéªŒã€‚å½“ä¸­é¢è¯•å®˜ç‰¹åœ°æåˆ° Map å’Œ Collection æœ‰æ²¡æœ‰å…³ç³»? å¯ä»¥ç¡®å®šæ˜¯è‚¯å®šæœ‰å…³ç³»ï¼Œä½†æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæ²¡æœ‰ç­”ä¸Šæ¥ã€‚ã€‚é‚£æ—¶è¿˜æ²¡æœ‰æ•´ç† HashMap è¿™ç¯‡æ–‡ç« ï¼Œåªæœ‰ LinkedListã€‚å…¶å®åœ¨æ•´ç†è¿™ç¯‡æ–‡ç« æ—¶ä¹Ÿæ²¡æ‰¾åˆ°ä¸¤è€…ä¹‹é—´çš„å…³ç³»ï¼Œå› ä¸º interface Map&lt;K,V&gt; ä¸ interface Collection&lt;E&gt;å¹¶æ²¡æœ‰ç›´æ¥çš„ç»§æ‰¿å…³ç³»ã€‚ã€‚è¿™æ—¶å€™éœ€è¦æ„Ÿè°¢çš„æ˜¯ã€ç å‡ºé«˜æ•ˆ Java å¼€å‘æ‰‹å†Œã€äº†ï¼Œå¹³æ—¶æŠŠè¿™æœ¬ä¹¦æ”¾åœ¨äº†åºŠå¤´ï¼Œç¡å‰ä¼šç¿»ä¸€ç¿»ä»æ­¤å†æ— å¤±çœ ï¼Œå¹¶æ²¡æœ‰ä»ç¬¬ä¸€å¼ å¼€å§‹è¯»ï¼Œè€Œæ˜¯ç›´æ¥æŒ‘äº†æœ€è–„å¼±çš„æ•°æ®ç»“æ„ä¸é›†åˆè¿™ä¸€ç« ã€‚ OKï¼Œä¸‹é¢æ¥è¯´è¯´ Map å’Œ Collection çš„å…³ç³»ï¼åœ¨ä¹¦ä¸­æ˜¯è¿™æ ·æè¿°çš„: ğŸ‘‡ åœ¨æ•°æ®å…ƒç´ çš„å­˜å‚¨ã€æŸ¥æ‰¾ã€ä¿®æ”¹å’Œéå†ä¸­ï¼ŒJava ä¸­çš„ Map ç±»é›†åˆéƒ½ä¸ Collection ç±»é›†åˆå­˜åœ¨å¾ˆå¤§çš„ä¸åŒã€‚å®ƒæ˜¯ä¸ Collection ç±»å¹³çº§çš„ä¸€ä¸ªæ¥å£ï¼Œåœ¨é›†åˆæ¡†æ¶å›¾ä¸Šï¼Œå®ƒæœ‰ä¸€æ¡å¾®å¼±çš„ä¾èµ–çº¿æœˆ Collection ç±»äº§ç”Ÿè”ç³»ï¼Œé‚£æ˜¯å› ä¸ºéƒ¨åˆ†æ–¹æ³•è¿”å› Collection è§†å›¾ï¼Œæ¯”å¦‚ values() æ–¹æ³•è¿”å›çš„æ‰€æœ‰ values çš„åˆ—è¡¨ æˆ‘ä»¬å…ˆçœ‹ Map æ¥å£çš„ values() æ–¹æ³•ï¼šğŸ‘‡12// Map æ¥å£ç±»Collection&lt;V&gt; values(); éå¸¸æ˜æ˜¾ï¼Œï¼Œè¯´åˆ°values()æ–¹æ³•ï¼Œè‚¯å®šä¼šæƒ³åˆ° keySet() å’Œ entrySet() ï¼Œæ¯•ç«Ÿè¿™ä¸‰ä¸ªæ–¹æ³•åœ¨ HashMap è¿­ä»£çš„æ—¶å€™å¯æ˜¯è‚©å¹¶è‚©çš„~ğŸ‘‡123// Map æ¥å£ç±»Set&lt;K&gt; keySet();Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet(); æˆ‘ä»¬å†çœ‹çœ‹ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åœ¨ HashMap ä¸­çš„å®ç°~ ğŸ‘‡1234567891011121314151617181920212223242526272829303132333435363738394041424344// values æ–¹æ³•public Collection&lt;V&gt; values() &#123; Collection&lt;V&gt; vs = values; return (vs != null ? vs : (values = new Values()));&#125;// Values ç±»ï¼ŒAbstractCollection ç±»å®ç°ç±»äº† Collection æ¥å£private final class Values extends AbstractCollection&lt;V&gt; &#123; public Iterator&lt;V&gt; iterator() &#123; return newValueIterator(); &#125; public int size() &#123; return size; &#125; public boolean contains(Object o) &#123; return containsValue(o); &#125; public void clear() &#123; HashMap.this.clear(); &#125;&#125;// keySet æ–¹æ³•public Set&lt;K&gt; keySet() &#123; Set&lt;K&gt; ks = keySet; return (ks != null ? ks : (keySet = new KeySet()));&#125;// KeySet ç±»ï¼Œabstract class AbstractSet&lt;E&gt; ç»§æ‰¿äº† AbstractCollection&lt;E&gt; å®ç°äº† Set&lt;E&gt;ï¼Œè€ŒæŠ½è±¡ç±» AbstractCollection å’Œ Set æ¥å£ éƒ½ç»§æ‰¿äº† Collection æ¥å£ã€‚private final class KeySet extends AbstractSet&lt;K&gt; &#123; public Iterator&lt;K&gt; iterator() &#123; return newKeyIterator(); &#125; public int size() &#123; return size; &#125; public boolean contains(Object o) &#123; return containsKey(o); &#125; public boolean remove(Object o) &#123; return HashMap.this.removeEntryForKey(o) != null; &#125; public void clear() &#123; HashMap.this.clear(); &#125;&#125;// è‡³äº entrySet() æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨åˆ†æ HashMap çš„ forEach å¾ªç¯æ—¶å·²ç»æŒ–è¿‡æºç äº†ã€‚EntrySet ç±»ä¸ KeySet ç±»ä¸€æ ·ï¼Œéƒ½ç»§æ‰¿äº† AbstractSet æŠ½è±¡ç±»ã€‚ ç±³ä¸€â€“Hashè¡¨çš„å‰ä¸–ä»Šç”Ÿ è¿½é€ç››å¤æµå¹´â€“HashMapä¸­çš„indexForæ–¹æ³•åˆ†æ March@dhyin.topâ€“hashmapçš„å®ç°åŸç† æ•°ç»„ entry å“ˆå¸Œæ‹‰é“¾æ³• è´å£³é£é“ƒâ€“Javaéå†HashMapå¹¶ä¿®æ”¹(remove)]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>æºç </tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018_12_week_1st]]></title>
    <url>%2F2019%2F03%2F17%2F2018_12_week_1st%2F</url>
    <content type="text"><![CDATA[å¥½ä¹…å¥½ä¹…ä¹‹å‰çš„é›¶ç¢çŸ¥è¯†ç‚¹äº†â€¦ å…³äºLinuxä¸­çš„ç®¡é“12// åˆ—å‡ºå½“å‰ç›®å½•ä¸‹åç¼€ä¸º conf çš„æ–‡ä»¶ls -lh | grep *.conf Pipeï¼šå³ ls å’Œ grep å‘½ä»¤ä¹‹é—´çš„|(â‡§+\)ï¼Œç®¡é“å°±æ˜¯è¿æ¥ä¸€ä¸ªç¨‹åºè¾“å‡ºå’Œå¦ä¸€ä¸ªç¨‹åºè¾“å…¥çš„é€šè·¯ï¼ï¼ï¼ node.js é¡¹ç›®ä¸­çš„ package.json æ–‡ä»¶çš„ä½œç”¨â€” æ‘˜è‡ªGitHub-PanJiaChen-webpack-and-spa-guide npm installçš„--save-dev ä¼šæŠŠå®‰è£…çš„åŒ…å’Œç‰ˆæœ¬å·è®°å½•åˆ° package.json ä¸­çš„ devDependencies å¯¹è±¡ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ª --saveï¼Œ ä¼šè®°å½•åˆ° dependencies å¯¹è±¡ä¸­ï¼Œå®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç®€å•çš„ç†è§£ä¸ºæ‰“åŒ…å·¥å…·å’Œæµ‹è¯•å·¥å…·ç”¨åˆ°çš„åŒ…ä½¿ç”¨ --save-dev å­˜åˆ° devDependenciesï¼Œ æ¯”å¦‚ eslintã€webpackã€‚æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ js ç”¨åˆ°çš„åŒ…å­˜åˆ° dependenciesï¼Œ æ¯”å¦‚ jQuery ç­‰ã€‚é‚£ä¹ˆå®ƒä»¬ç”¨æ¥å¹²å˜›çš„ï¼Ÿ å› ä¸ºæœ‰äº› npm åŒ…å®‰è£…æ˜¯éœ€è¦ç¼–è¯‘çš„ï¼Œé‚£ä¹ˆå¯¼è‡´ windows / mac /linux ä¸Šç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯æ— æ³•é€šç”¨ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æäº¤ä»£ç åˆ° git ä¸Šå»çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨ .gitignore é‡ŒæŒ‡å®šå¿½ç•¥ node_modulesç›®å½•å’Œé‡Œé¢çš„æ–‡ä»¶ï¼Œè¿™æ ·å…¶ä»–äººä» git ä¸Šæ‹‰ä¸‹æ¥çš„é¡¹ç›®æ˜¯æ²¡æœ‰node_modules ç›®å½•çš„ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è¿è¡Œnpm installå®ƒä¼šè¯»å– package.json ä¸­çš„ devDependencies å’Œ dependencies å­—æ®µï¼ŒæŠŠè®°å½•çš„åŒ…çš„ç›¸åº”ç‰ˆæœ¬ä¸‹è½½ä¸‹æ¥ã€‚]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å…³äº LinkedList]]></title>
    <url>%2F2019%2F03%2F17%2Fabout_LinkedList%2F</url>
    <content type="text"><![CDATA[LinkedList çš„ DOC æ³¨é‡Š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * Doubly-linked list implementation of the &#123;@code List&#125; and &#123;@code Deque&#125; * interfaces. Implements all optional list operations, and permits all * elements (including &#123;@code null&#125;). * è¯¥åŒå‘é“¾è¡¨å®ç°äº† List æ¥å£å’Œ Deque æ¥å£ã€‚å®ç°äº† list çš„æ‰€æœ‰å¯é€‰æ“ä½œï¼Œå¹¶ä¸”å…è®¸(æ·»åŠ )æ‰€æœ‰å…ƒç´ (åŒ…æ‹¬ null)ã€‚ * &lt;p&gt;All of the operations perform as could be expected for a doubly-linked * list. Operations that index into the list will traverse the list from * the beginning or the end, whichever is closer to the specified index. * å¯¹äºè¯¥åŒå‘é“¾è¡¨ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯å¯é¢„æœŸçš„ã€‚å¦‚æœå¯¹ list çš„æ“ä½œæ¶‰åŠåˆ°æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°†åˆ¤æ–­æŒ‡å®šçš„ç´¢å¼•ç¦» begin æ›´è¿‘ï¼Œè¿˜æ˜¯ç¦» end æ›´è¿‘ã€‚è¿™æ ·èƒ½è¿›è¡Œæ›´å°‘æ¬¡æ•°çš„è¿­ä»£ï¼Œæ€§èƒ½æ›´å¥½ã€‚ * &lt;p&gt;&lt;strong&gt;Note that this implementation is not synchronized.&lt;/strong&gt; * If multiple threads access a linked list concurrently, and at least * one of the threads modifies the list structurally, it &lt;i&gt;must&lt;/i&gt; be * synchronized externally. (A structural modification is any operation * that adds or deletes one or more elements; merely setting the value of * an element is not a structural modification.) This is typically * accomplished by synchronizing on some object that naturally * encapsulates the list. * éœ€è¦æ³¨æ„çš„æ˜¯ LinkedList ç±»å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šçº¿ç¨‹åŒæ—¶è®¿é—® linked listï¼Œè€Œä¸”è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ä¼šä¿®æ”¹ list çš„ç»“æ„ï¼Œé‚£ä¹ˆå®ƒçš„å¤–éƒ¨å¿…é¡»ä½¿ç”¨ synchronized å…³é”®å­—ã€‚(ç»“æ„æ€§ä¿®æ”¹æŒ‡çš„æ˜¯ æ’å…¥(add)æˆ–è€…åˆ é™¤(remove)æ“ä½œï¼Œä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„å€¼å¹¶ä¸æ˜¯ç»“æ„æ€§ä¿®æ”¹)ã€‚è¿™é€šå¸¸é€šè¿‡åŒæ­¥(synchronized ä¿®é¥°)ä¸€ä¸ª å°è£…äº† list çš„å¯¹è±¡æ¥å®ç°ã€‚ * If no such object exists, the list should be "wrapped" using the * &#123;@link Collections#synchronizedList Collections.synchronizedList&#125; * method. This is best done at creation time, to prevent accidental * unsynchronized access to the list:&lt;pre&gt; * List list = Collections.synchronizedList(new LinkedList(...));&lt;/pre&gt; * å¦‚æœæ‰‹å¤´å„¿æ²¡æœ‰è¿™æ ·çš„å¯¹è±¡ï¼Œlist åº”è¯¥è¢« Collections.synchronizedList() åŒ…è£¹èµ·æ¥ã€‚æœ€å¥½åœ¨åˆå§‹åŒ– LinkedList å¯¹è±¡æ—¶å€™å°±è¿™æ ·å»åšï¼Œä»¥å…ä¸å¯é¢„çŸ¥çš„å¯¹ list çš„éåŒæ­¥è®¿é—®ã€‚ * &lt;p&gt;The iterators returned by this class's &#123;@code iterator&#125; and * &#123;@code listIterator&#125; methods are &lt;i&gt;fail-fast&lt;/i&gt;: if the list is * structurally modified at any time after the iterator is created, in * any way except through the Iterator's own &#123;@code remove&#125; or * &#123;@code add&#125; methods, the iterator will throw a &#123;@link * ConcurrentModificationException&#125;. Thus, in the face of concurrent * modification, the iterator fails quickly and cleanly, rather than * risking arbitrary, non-deterministic behavior at an undetermined * time in the future. * é€šè¿‡LinkedList çš„ iterator() æ–¹æ³•ï¼Œæˆ–è€… listIterator(int) æ–¹æ³•è¿”å›çš„ iterator éƒ½æ˜¯ fail-fast(å¿«é€Ÿå¤±æ•ˆ)çš„ï¼šå¦‚æœåœ¨åˆ›å»º iterator ä¹‹åï¼Œä»»ä½•å¯¹ list çš„ç»“æ„æ€§ä¿®æ”¹ï¼Œéƒ½ä¼šæŠ›å‡º ConcurrentModificationExceptionï¼Œé™¤äº† iterator æœ¬èº«çš„ remove() å’Œ add() æ–¹æ³•ã€‚å› æ­¤ï¼Œåœ¨é¢ä¸´å¹¶å‘å¯¹ list çš„ä¿®æ”¹æ—¶ï¼Œiterator ä¼šå¿«é€Ÿè€Œå¹²å‡€çš„å¤±æ•ˆï¼Œè€Œä¸æ˜¯åœ¨æœªæ¥ä¸ç¡®å®šçš„æ—¶é—´å†’ç€ä»»æ„çš„ã€ä¸ç¡®å®šçš„é£é™©ã€‚ * &lt;p&gt;Note that the fail-fast behavior of an iterator cannot be guaranteed * as it is, generally speaking, impossible to make any hard guarantees in the * presence of unsynchronized concurrent modification. Fail-fast iterators * throw &#123;@code ConcurrentModificationException&#125; on a best-effort basis. * Therefore, it would be wrong to write a program that depended on this * exception for its correctness: &lt;i&gt;the fail-fast behavior of iterators * should be used only to detect bugs.&lt;/i&gt; * å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œï¼Œiterator çš„ fail-fast è¡Œä¸ºæ˜¯ä¸èƒ½è¢«ä¿è¯çš„ï¼Œï¼Œé€šå¸¸æ¥è¯´ï¼Œåœ¨å¹¶å‘éåŒæ­¥å¯¹ list çš„ä¿®æ”¹æ—¶ï¼Œä»»ä½•ç¡¬æ€§çš„ä¿è¯éƒ½æ˜¯ä¸å¯èƒ½çš„ã€‚fail-fast ä¼šè®© iterator å°½å¯èƒ½æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œåœ¨ç¨‹åºä¸­é€šè¿‡ä¾èµ–æŠ›å‡º ConcurrentModificationException å¼‚å¸¸æ¥ä¿è¯è‡ªèº«çš„æ­£å¸¸è¿è¡Œæ˜¯é”™è¯¯çš„ï¼šfail-fast è¡Œä¸ºåªåº”è¯¥ç”¨æ¥ debugã€‚ * &lt;p&gt;This class is a member of the * &lt;a href="&#123;@docRoot&#125;/../technotes/guides/collections/index.html"&gt; * Java Collections Framework&lt;/a&gt;. * * @author Josh Bloch * @see List * @see ArrayList * @since 1.2 * @param &lt;E&gt; the type of elements held in this collection */public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable LinkedList çš„ç±»å±æ€§åŠæ„é€ æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171transient int size = 0;/** * Pointer to first node. // æŒ‡å‘ LinkedList çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ * Invariant: (first == null &amp;&amp; last == null) || * (first.prev == null &amp;&amp; first.item != null) */transient Node&lt;E&gt; first;/** * Pointer to last node. // æŒ‡å‘ LinkedList çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ * Invariant: (first == null &amp;&amp; last == null) || * (last.next == null &amp;&amp; last.item != null) */transient Node&lt;E&gt; last;/** * Constructs an empty list. * æ„é€ ä¸€ä¸ªç©º list */public LinkedList() &#123;&#125;/** * Constructs a list containing the elements of the specified * collection, in the order they are returned by the collection's * iterator. * é€šè¿‡æŒ‡å®šçš„ collection æ„é€ ä¸€ä¸ªåŒ…å«å…ƒç´ çš„ listï¼Œå…¶é¡ºåºç”± collection çš„è¿­ä»£å™¨å†³å®šã€‚ * @param c the collection whose elements are to be placed into this list * @throws NullPointerException if the specified collection is null */public LinkedList(Collection&lt;? extends E&gt; c) &#123; this(); addAll(c);&#125;/** * Appends all of the elements in the specified collection to the end of * this list, in the order that they are returned by the specified * collection's iterator. The behavior of this operation is undefined if * the specified collection is modified while the operation is in * progress. (Note that this will occur if the specified collection is * this list, and it's nonempty.) * å°†æŒ‡å®šçš„ collection çš„æ‰€æœ‰å…ƒç´ æ‹¼æ¥åˆ° list çš„æœ«å°¾å…ƒç´ ä¹‹åï¼Œé¡ºåºç”±æŒ‡å®šçš„ collection çš„è¿­ä»£å™¨å†³å®šã€‚åœ¨æ‰§è¡Œè¯¥æ“ä½œ(addAll())çš„æ—¶å€™ï¼Œå¦‚æœ collection è¢«ä¿®æ”¹äº†ï¼Œè¯¥æ“ä½œçš„è¡Œä¸ºå°†ä¸å¯é¢„çŸ¥(è¯·æ³¨æ„ï¼Œå¦‚æœæŒ‡å®šçš„ collection æ­£å¥½æ˜¯è¯¥ list å¯¹è±¡è‡ªå·±ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°†ä¼šå‘ç”Ÿ)ã€‚ * @param c collection containing elements to be added to this list * @return &#123;@code true&#125; if this list changed as a result of the call * @throws NullPointerException if the specified collection is null */public boolean addAll(Collection&lt;? extends E&gt; c) &#123; return addAll(size, c);&#125;/** * Inserts all of the elements in the specified collection into this * list, starting at the specified position. Shifts the element * currently at that position (if any) and any subsequent elements to * the right (increases their indices). The new elements will appear * in the list in the order that they are returned by the * specified collection's iterator. * ä»æŒ‡å®šçš„ä½ç½®å¼€å§‹å°†æŒ‡å®š collection ä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°è¯¥ list ä¸­ã€‚æŒ‡å®šä½ç½®çš„å…ƒç´ (å¦‚æœæœ‰çš„è¯)åŠå…¶å³è¾¹çš„å…ƒç´ å°†ä¼šå³ç§»(åŸç´¢å¼•å€¼å¢å¤§)ã€‚æ–°çš„å…ƒç´ å°†ä¼šä»¥æŒ‡å®š collection çš„è¿­ä»£å™¨ è¿”å›çš„é¡ºåºå‡ºç°åœ¨ list ä¸­ã€‚ * @param index index at which to insert the first element * from the specified collection * @param c collection containing elements to be added to this list * @return &#123;@code true&#125; if this list changed as a result of the call * @throws IndexOutOfBoundsException &#123;@inheritDoc&#125; * @throws NullPointerException if the specified collection is null */public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123; // åˆ¤æ–­ç´¢å¼•æ˜¯å¦éæ³• checkPositionIndex(index); // å°† collection è½¬ä¸ºæ•°ç»„ Object[] a = c.toArray(); int numNew = a.length; // å¦‚æœä¸ºç©ºæ•°ç»„ï¼Œè¿”å› false if (numNew == 0) return false; Node&lt;E&gt; pred, succ; // å¦‚æœç´¢å¼•å€¼ä¸å®¹å™¨çš„å¤§å°ç›¸åŒï¼Œå³å½“å‰ LinkedList å®ä¾‹ä¸­æ— ä»»ä½•å…ƒç´  if (index == size) &#123; succ = null; pred = last; &#125; else &#123; succ = node(index); pred = succ.prev; &#125; for (Object o : a) &#123; @SuppressWarnings("unchecked") E e = (E) o; // æ„å»º Node èŠ‚ç‚¹å¯¹è±¡ newNode Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, null); // å¦‚æœæŒ‡å®šä½ç½®çš„å…ƒç´ ä½äºåˆ—è¡¨å¤´éƒ¨ï¼Œåˆ™ newNode ä¸º first èŠ‚ç‚¹ if (pred == null) first = newNode; else // å¦åˆ™ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘ newNode pred.next = newNode; // pred æŒ‡å‘ newNodeï¼Œå¼€å§‹ä¸‹ä¸€è½®éå†(ç›¸å½“äºå¸¸è§„ for å¾ªç¯çš„ i++) pred = newNode; &#125; // å¦‚æœåŸ list ä¸ºç©ºåˆ—è¡¨ï¼Œåˆ™ç»è¿‡éå†ä¹‹åï¼Œlast æŒ‡å‘ pred if (succ == null) &#123; last = pred; &#125; else &#123; // å¦‚æœæŒ‡å®šç´¢å¼•ä½ç½®æœ‰å€¼ï¼Œéå†æ·»åŠ  collection ä¸­çš„å…ƒç´ ä¹‹åï¼ŒæŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ åŠå…¶å³ä¾§çš„æ‰€æœ‰å…ƒç´ ç»Ÿä¸€å³ç§»ï¼Œï¼Œå°†æ–°å¢çš„æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ next æŒ‡å‘ å³ç§»çš„å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›å³ç§»çš„å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ prev å±æ€§æŒ‡å‘æ–°å¢å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªã€‚ pred.next = succ; succ.prev = pred; &#125; // åŸ size åŠ ä¸Š æ–°å¢å…ƒç´ çš„æ•°é‡ size += numNew; // list çš„ç»“æ„æ€§æ›´æ”¹æ¬¡æ•° +1 modCount++; return true;&#125;private void checkPositionIndex(int index) &#123; if (!isPositionIndex(index)) throw new IndexOutOfBoundsException(outOfBoundsMsg(index));&#125;/** * Tells if the argument is the index of a valid position for an * iterator or an add operation. * åˆ¤æ–­å‚æ•°ä»£è¡¨çš„ç´¢å¼•ä½ç½®åœ¨ iterator æˆ–è€… add() ä¸­æ˜¯å¦å¯ç”¨ */private boolean isPositionIndex(int index) &#123; // ä¸å°äºé›¶ï¼Œä¸”ä¸å¤§äº size return index &gt;= 0 &amp;&amp; index &lt;= size;&#125;/** * Returns the (non-null) Node at the specified element index. * è¿”å›æŒ‡å®šä½ç½®çš„éç©ºèŠ‚ç‚¹ * æ­¤å¤„éå† list æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„å…ƒç´ æ—¶ï¼Œå…ˆåˆ¤æ–­ index è·ç¦» begin èŠ‚ç‚¹è¿‘è¿˜æ˜¯ end èŠ‚ç‚¹ã€‚å¦‚æ­¤å¯ä»¥å‡å°‘éå†æ¬¡æ•°ï¼Œæœ‰åŠ©äºæ€§èƒ½è¡¨ç°ã€‚å¤§æ¦‚è¿™å°±æ˜¯ç»´æŠ¤æˆåŒå‘åˆ—è¡¨è€Œéå•å‘åˆ—è¡¨çš„åŸå› å§ã€‚ */Node&lt;E&gt; node(int index) &#123; // assert isElementIndex(index); // æŒ‡å®šçš„ç´¢å¼•å€¼æ˜¯å¦å°äºä¸­ä½æ•°(ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼Œåˆ¤æ–­ç´¢å¼•æ˜¯å¦åœ¨åˆ—è¡¨çš„å‰åŠæ®µ) if (index &lt; (size &gt;&gt; 1)) &#123; Node&lt;E&gt; x = first; // å°±æ˜¯ç¡¬éå†ï¼Œç›´åˆ°æŒ‡å®šç´¢å¼•ä½ç½® // å› ä¸º i &lt; indexï¼Œæ‰€ä»¥ä¼šéå†åˆ°æŒ‡å®šç´¢å¼•ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶å–å…¶ next æŒ‡å‘çš„èŠ‚ç‚¹å³å¯ã€‚ for (int i = 0; i &lt; index; i++) x = x.next; return x; &#125; else &#123; Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; &#125;&#125;// ç§æœ‰é™æ€å†…éƒ¨ç±»private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next; Node&lt;E&gt; prev; Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; // item ä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼ this.item = element; // next æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ this.next = next; // prev æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ this.prev = prev; &#125;&#125; å…³äºå…³é”®å­— transientï¼Œï¼Œä¸€ä¸ªå¯¹è±¡åªè¦å®ç°äº† Serializable æ¥å£ï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«åºåˆ—åŒ–ã€‚ç„¶è€Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œè¯¥ç±»æœ‰äº›å±æ€§éœ€è¦åºåˆ—åŒ–ï¼Œå…¶ä»–å±æ€§ä¸éœ€è¦è¢«åºåˆ—åŒ–ã€‚ä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·æœ‰ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼Œé“¶è¡Œå¡å·ç­‰ï¼‰ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¸å¸Œæœ›åœ¨ç½‘ç»œæ“ä½œï¼ˆä¸»è¦æ¶‰åŠåºåˆ—åŒ–ï¼‰ä¸­è¢«ä¼ è¾“ï¼Œè¿™äº›ä¿¡æ¯å¯¹åº”çš„å˜é‡å°±å¯ä»¥åŠ ä¸Š transient å…³é”®å­—ï¼Œè¿™æ ·å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä»…å­˜åœ¨äºè°ƒç”¨è€…çš„å†…å­˜ä¸­è€Œä¸ä¼šè¢«å†™åˆ°ç£ç›˜é‡ŒæŒä¹…åŒ–ã€‚) é¦–å°¾èŠ‚ç‚¹çš„æ“ä½œå› ä¸º first å’Œ last å±æ€§çš„å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨ LinkedList ä¸­é¦–å°¾èŠ‚ç‚¹çš„æ“ä½œæ•ˆç‡å¾ˆé«˜ï¼Œä»¥ getFirst() å’Œ removeFirst() æ–¹æ³•ä¸ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// æŸ¥/** * Returns the first element in this list. * * @return the first element in this list * @throws NoSuchElementException if this list is empty */public E getFirst() &#123; final Node&lt;E&gt; f = first; if (f == null) throw new NoSuchElementException(); return f.item;&#125;// åˆ  /** * Removes and returns the first element from this list. * * @return the first element from this list * @throws NoSuchElementException if this list is empty */public E removeFirst() &#123; final Node&lt;E&gt; f = first; if (f == null) throw new NoSuchElementException(); return unlinkFirst(f);&#125;/** * Unlinks non-null first node f. * é¦–å…ˆ first èŠ‚ç‚¹çš„ prev è‚¯å®šæ˜¯ nullï¼Œå…ˆå¤åˆ¶å®ƒçš„ next èŠ‚ç‚¹ï¼Œç„¶åå°†å®ƒçš„ item å’Œ next ç½®ç©ºï¼Œè‡³æ­¤ï¼Œï¼Œfirst èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªç©ºçš„ Node å¯¹è±¡äº†ï¼Œæœ€ç»ˆè¢« GCã€‚ç„¶ååˆ¤æ–­ next èŠ‚ç‚¹ï¼Œå¦‚æœå®ƒä¸ºnullï¼Œåˆ™è¯´æ˜è¯¥ LinkedList å¯¹è±¡åªæœ‰ä¸€ä¸ª Nodeï¼Œå¦åˆ™å°† first æŒ‡å‘ åˆšæ‰å¤åˆ¶çš„ next èŠ‚ç‚¹ã€‚æœ€å size å‡ 1ï¼ŒmodCount åŠ  1ã€‚ */private E unlinkFirst(Node&lt;E&gt; f) &#123; // assert f == first &amp;&amp; f != null; // æ–­è¨€ f ä¸º first èŠ‚ç‚¹ï¼Œä¸” f ä¸ä¸ºç©º final E element = f.item; final Node&lt;E&gt; next = f.next; f.item = null; f.next = null; // help GC first = next; if (next == null) last = null; else next.prev = null; size--; modCount++; return element;&#125;// 'æ”¹'å°±ä¸è¯´äº†// 'å¢'å…¶å®æ˜¯ removeFirst() åå‘æ“ä½œï¼Œç•¥ã€‚ å…³äº modCount ğŸ‘‡12345678910/** * The number of times this list has been structurally modified. * è¯¥åˆ—è¡¨åœ¨ç»“æ„ä¸Šè¢«ä¿®æ”¹çš„æ¬¡æ•° */protected transient int modCount = 0;modCount ä¸º AbstractList(class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable =&gt;abstract class AbstractSequentialList&lt;E&gt; extends AbstractList&lt;E&gt; =&gt;abstract class AbstractList&lt;E&gt; extends AbstractCollection&lt;E&gt; implements List&lt;E&gt;)çš„å±æ€§ éé¦–å°¾èŠ‚ç‚¹çš„æ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889// åˆ /** * Removes the element at the specified position in this list. * åˆ é™¤è¯¥åˆ—è¡¨æŒ‡å®šä½ç½®çš„å…ƒç´  */public E remove(int index) &#123; checkElementIndex(index); return unlink(node(index));&#125;/** * Returns the (non-null) Node at the specified element index. * è¿”å›æŒ‡å®šä½ç½®çš„éç©ºnodeï¼Œï¼Œåˆ¤æ–­ index åœ¨ LinkedList çš„å‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†ï¼Œç„¶åå–å¾ªç¯æ¬¡æ•°å°‘çš„åˆ†æ”¯è¿›è¡Œéå†ã€‚ */Node&lt;E&gt; node(int index) &#123; // assert isElementIndex(index); // ä¿è¯ä¸ä¼šæŠ›å‡º IndexOutOfBoundsException å¼‚å¸¸ // &gt;&gt;ï¼šå¸¦ç¬¦å·å³ç§»ã€‚æ­£æ•°å³ç§»é«˜ä½è¡¥0ï¼Œè´Ÿæ•°å³ç§»é«˜ä½è¡¥1ã€‚ // æ¯”å¦‚ï¼š4 &gt;&gt; 1ï¼Œ4 çš„äºŒè¿›åˆ¶ä¸º 100ï¼Œç§»ä½ä¹‹åå˜ä¸º 10ï¼Œå³åè¿›åˆ¶ 2ã€‚ if (index &lt; (size &gt;&gt; 1)) &#123; Node&lt;E&gt; x = first; for (int i = 0; i &lt; index; i++) x = x.next; return x; &#125; else &#123; Node&lt;E&gt; x = last; for (int i = size - 1; i &gt; index; i--) x = x.prev; return x; &#125;&#125;/** * Unlinks non-null node x. */E unlink(Node&lt;E&gt; x) &#123; // assert x != null; final E element = x.item; final Node&lt;E&gt; next = x.next; final Node&lt;E&gt; prev = x.prev; // å¦‚æœè¦ç§»é™¤çš„å…ƒç´ ä½äºå¤´èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥å°†å¤´èŠ‚ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ // å¦åˆ™å°†å‰ä¸€ä¸ªèŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹çš„ prev å±æ€§ç½®ç©º if (prev == null) &#123; first = next; &#125; else &#123; prev.next = next; x.prev = null; &#125; // å¦‚æœè¦ç§»é™¤çš„å…ƒç´ ä½äºå°¾èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥å°†å°¾èŠ‚ç‚¹æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ // å¦åˆ™å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ prev å±æ€§æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹çš„ next å±æ€§ç½®ç©º if (next == null) &#123; last = prev; &#125; else &#123; next.prev = prev; x.next = null; &#125; // å°†å½“å‰èŠ‚ç‚¹çš„ item å±æ€§ç½®ç©º x.item = null; // é•¿åº¦ -1 size--; // ç»“æ„æ€§ä¿®æ”¹æ¬¡æ•° +1 modCount++; return element;&#125;// å¢public void add(int index, E element) &#123; checkPositionIndex(index); if (index == size) linkLast(element); else linkBefore(element, node(index));&#125;// linkLast ä¸ linkBefore æ–¹æ³•ç±»ä¼¼ï¼Œä»¥ linkBefore ä¸ºä¾‹void linkBefore(E e, Node&lt;E&gt; succ) &#123; // assert succ != null; // succ ä¸ºæ’å…¥å‰ index ä½ç½®çš„èŠ‚ç‚¹ï¼Œéœ€è¦åšçš„æ˜¯å°†æ–°èŠ‚ç‚¹çš„ prev å±æ€§æŒ‡å‘ succ.prevï¼Œå°†æ–°èŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘ succã€‚ final Node&lt;E&gt; pred = succ.prev; final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ); succ.prev = newNode; if (pred == null) first = newNode; else pred.next = newNode; size++; modCount++;&#125; å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒLinkedList æ”¯æŒæ’å…¥ null å€¼ï¼ŒåŸå› åœ¨äº Node çš„æ„é€ æ–¹æ³•ã€‚æ’å…¥ null å€¼æ—¶ï¼Œå…¶å®æ˜¯å°† null å€¼ç»™äº† node èŠ‚ç‚¹çš„ item å±æ€§ï¼Œnode èŠ‚ç‚¹çš„ prev å’Œ next è¿˜æ˜¯ é null çš„ã€‚ â€”- update@2019-03-18 22ï¼š23ï¼š47 ä¸‹é¢â€”-å‘ç°ä¸ªçŸ¥è¯†ç‚¹ï¼Œï¼Œä»Šå¤©ç‚¹å¼€ LinkedList ä¸­å®ç°çš„ Dequeæ¥å£ï¼ŒDOCæ³¨é‡Šä¸­è¿™æ ·å†™é“ï¼šğŸ‘‡ A linear collection that supports element insertion and removal at both ends. The name deque is short for â€œdouble ended queueâ€ and is usually pronounced â€œdeckâ€.Deque æ˜¯æ”¯æŒåŒç«¯æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œdeque æ˜¯ double ended queue çš„ç¼©å†™ï¼Œé€šå¸¸è¯»ä½œ deckã€‚ æ€»ç»“ LinkedList çš„æœ¬è´¨æ˜¯åŒå‘é“¾è¡¨ã€‚ä¸ ArrayList ç›¸æ¯”ï¼ŒLinkedList çš„æ’å…¥å’Œåˆ é™¤é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯éšæœºè®¿é—®é€Ÿåº¦åˆ™å¾ˆæ…¢ã€‚æµ‹è¯•è¡¨æ˜ï¼Œå¯¹äº 10 ä¸‡æ¡çš„æ•°æ®ï¼Œä¸ ArrayList ç›¸æ¯”ï¼Œéšæœºæå–å…ƒç´ æ—¶å­˜åœ¨æ•°ç™¾å€çš„å·®è·ã€‚é™¤ç»§æ‰¿ AbstractList æŠ½è±¡å¤–ï¼ŒLinkedList è¿˜å®ç°äº†å¦ä¸€ä¸ªæ¥å£ Dequeï¼Œå³ double-ended-queueã€‚è¿™ä¸ªæ¥å£åŒæ—¶å…·æœ‰é˜Ÿåˆ—å’Œæ ˆçš„æ€§è´¨ã€‚LinkedList åŒ…å« 3 ä¸ªé‡è¦çš„æˆå‘˜ï¼šsizeã€firstã€lastã€‚size æ˜¯åŒå‘é“¾è¡¨ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚first å’Œ last åˆ†åˆ«æŒ‡å‘ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ã€‚LinkedList çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥å°†é›¶æ•£çš„å†…å­˜å•å…ƒé™„åŠ å¼•ç”¨çš„æ–¹å¼å…³è”èµ·æ¥ï¼Œå½¢æˆæŒ‰é“¾è·¯é¡ºåºæŸ¥æ‰¾çš„çº¿æ€§ç»“æ„ï¼Œå†…å­˜åˆ©ç”¨ç‡è¾ƒé«˜ã€‚ ç å‡ºé«˜æ•ˆ Java å¼€å‘æ‰‹å†Œ P156 æ¸…æµ…æ± å¡˜â€”LinkedList åˆæ¢ ä½•æŸ„èâ€”ArrayList å’Œ LinkedList çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯(æœ‰åˆ æ”¹)]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>æºç </tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>LinkedList</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…ˆè¡Œå‘ç”ŸåŸåˆ™]]></title>
    <url>%2F2019%2F03%2F13%2FJava_happens_before%2F</url>
    <content type="text"><![CDATA[Contextæœç„¶ï¼Œã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€è¿™æœ¬ä¹¦è¯»ä¸€éæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ¸©æ•…æ€»èƒ½çŸ¥æ–°~ä»Šå¤©è¦å†™çš„æ˜¯å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œè¯´æ¥æƒ­æ„§ï¼Œï¼Œå¥½åƒè¯»ç¬¬ä¸€éçš„æ—¶å€™å¹¶æ²¡æœ‰å¤ªæ·±åˆ»çš„å°è±¡ï¼Œæ˜¨æ™šå†è¯»çš„æ—¶å€™å°±æ‹å¤§è…¿äº†ï¼šé†é†çŒé¡¶å•Šï¼ï¼æ‰€ä»¥ï¼Œä»Šå¤©è¿˜çœŸå¾—æ‰®æ¼”æ¬è¿å·¥çš„è§’è‰²ã€‚ å•¥æ˜¯å…ˆè¡Œå‘ç”ŸåŸåˆ™è¯´åˆ°å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œè¿˜å¾—å†å¾€å‰å€’å€’ï¼Œè¯´ä¸‹ Java å†…å­˜æ¨¡å‹çš„ç‰¹å¾ã€‚Javaå†…å­˜æ¨¡å‹æ˜¯å›´ç»•ç€åœ¨å¹¶å‘è¿‡ç¨‹ä¸­å¦‚ä½•å¤„ç†åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§è¿™ä¸ª3ä¸ªç‰¹å¾æ¥å»ºç«‹çš„ã€‚ åŸå­æ€§(Atommicity): ç”± Java å†…å­˜æ¨¡å‹æ¥ç›´æ¥ä¿è¯åŸå­æ€§å˜é‡çš„æ“ä½œï¼ŒåŒ…æ‹¬ readã€loadã€useã€assignã€storeã€write, å¤§è‡´å¯ä»¥è®¤ä¸ºåŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®è¯»å†™æ˜¯å…·æœ‰åŸå­æ€§çš„(longã€double çš„éåŸå­æ€§åå®šé™¤å¤–)ã€‚å¦‚æœåœºæ™¯éœ€è¦æ›´å¤§èŒƒå›´çš„ä¿è¯åŸå­æ€§ï¼Œåˆ™éœ€è¦ lock å’Œ unlock æ“ä½œã€‚åæ˜ åˆ° Java ä»£ç ä¸­å°±æ˜¯åŒæ­¥å—â€“ synchronized å…³é”®å­—ã€‚å› æ­¤ï¼Œæ‰€ä»¥ synchronized å—ä¹‹é—´çš„æ“ä½œä¹Ÿå…·å¤‡åŸå­æ€§ã€‚ å¯è§æ€§(Visibility): Java å†…å­˜æ¨¡å‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥å›ä¸»å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ä»ä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹å¼æ¥å®ç°å¯è¡Œæ€§çš„ï¼Œæ— è®ºæ˜¯æ™®é€šå˜é‡è¿˜æ˜¯ volatile å˜é‡éƒ½æ˜¯å¦‚æ­¤ã€‚åªä¸è¿‡ï¼Œvolatile å…³é”®å­—èƒ½ä¿è¯æ–°å€¼è¢«ç«‹å³åŒæ­¥å›ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ä½¿ç”¨å‰ä»ä¸»å†…å­˜åˆ·æ–°ï¼Œæ™®é€šå˜é‡åˆ™ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œsynchronized å’Œ final å…³é”®å­—ä¹Ÿå¯ä»¥ä¿è¯å˜é‡çš„å¯è§æ€§ã€‚åŒæ­¥å¿«çš„å¯è§æ€§æ˜¯ç”±ã€å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜ä¸­(æ‰§è¡Œ store å’Œ write æ“ä½œ)ã€è¿™æ¡è§„åˆ™è·å¾—çš„ã€‚è€Œ final å…³é”®å­—çš„å¯è§æ€§æ˜¯æŒ‡: è¢« final ä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠ this çš„å¼•ç”¨ä¼ é€’å‡ºå»^1ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§ final å­—æ®µçš„å€¼ã€‚(æœ€åˆä»¥ä¸ºæ˜¯å› ä¸º final ä¿®é¥°çš„å˜é‡ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥å¯¼è‡´æ‰€æœ‰çº¿ç¨‹è¯»åˆ°çš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸å˜çš„ï¼Œï¼Œç„¶é¹…å¹¶ä¸æ˜¯[^2])ã€‚ æœ‰åºæ€§(Ordering): Java ç¨‹åºä¸­å¤©ç„¶çš„æœ‰åºæ€§å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦å¤–ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚å‰åŠå¥æ˜¯æŒ‡â€œçº¿ç¨‹å†…è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰(Within-Thread As-If Serial Semantics)â€ï¼ŒååŠå¥æ˜¯æŒ‡â€œæŒ‡ä»¤é‡æ’åºâ€å’Œâ€œå·¥ä½œå†…å­˜å’Œä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿâ€çº¿ç¨‹ã€‚ volatile å…³é”®å­—æœ¬èº«å°±å«æœ‰ç¦æ­¢æŒ‡ä»¤é‡æ’çš„è¯­ä¹‰ï¼Œè€Œ synchronized åˆ™æ˜¯ç”±ã€ä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œ lock æ“ä½œã€‚ã€è¿™æ¡è§„åˆ™è·å¾—çš„ï¼Œè¿™æ¡è§„åˆ™å†³å®šäº†æŒæœ‰åŒä¸€ä¸ªé”( lock æ“ä½œçš„å˜é‡)çš„ä¸¤ä¸ªåŒæ­¥å—åªèƒ½ä¸²è¡Œçš„è¿›å…¥ã€‚ å¥½åƒ synchronized å…³é”®å­—åœ¨éœ€è¦è¿™3ç§ç‰¹æ€§çš„æ—¶å€™éƒ½å¯ä»¥ä½œä¸ºå…¶ä¸­ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œäºæ­¤åŒæ—¶å…¶ä¸‡èƒ½çš„å±æ€§å¯¼è‡´äº†è¢«æˆ‘ä»¬ç¨‹åºå‘˜æ»¥ç”¨ã€‚ã€‚ é€¼é€¼å¨åŠå¤©ï¼Œè¿˜æ˜¯æ²¡æåˆ°å•¥æ˜¯å…ˆè¡Œå‘ç”ŸåŸåˆ™ã€‚ã€‚åˆ«æ€¥ï¼Œé©¬ä¸Šã€‚ã€‚å¦‚æœ Java å†…å­˜æ¨¡å‹ä¸­æ‰€æœ‰çš„æœ‰åºæ€§éƒ½é  volatile å’Œ synchronized æ¥å®Œæˆï¼Œé‚£ä¹ˆæœ‰ä¸€äº›æ“ä½œå°†å˜å¾—éå¸¸ç¹çï¼Œç„¶é¹…æˆ‘ä»¬åœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰æ„Ÿå—åˆ°è¿™ä¸€ç‚¹ï¼Œè¿™å°±æ˜¯å› ä¸ºã€å…ˆè¡Œå‘ç”ŸåŸåˆ™ã€ã€‚å®ƒæ˜¯åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ç«äº‰ã€çº¿ç¨‹æ˜¯å¦å®‰å…¨çš„ä¸»è¦ä¾æ®ã€‚å…ˆè¡Œå‘ç”Ÿæ˜¯åœ¨ Java å†…å­˜æ¨¡å‹ä¸­å®šä¹‰ä¸¤é¡¹æ“ä½œä¹‹é—´çš„ååºå…³ç³»ï¼Œå¦‚æœè¯´æ“ä½œ Aå…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Bï¼Œåˆ™è¯´æ˜å‘ç”Ÿæ“ä½œBä¹‹å‰ï¼Œæ“ä½œ A äº§ç”Ÿçš„å½±å“èƒ½è¢«æ“ä½œ B è§‚å¯Ÿåˆ°ï¼Œâ€œå½±å“â€åŒ…æ‹¬ä¿®æ”¹äº†å†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ã€å‘é€äº†æ¶ˆæ¯ã€è°ƒç”¨äº†æ–¹æ³•ç­‰ã€‚ 12345678// ä»¥ä¸‹æ“ä½œåœ¨çº¿ç¨‹ A ä¸­æ‰§è¡Œi = 1;// ä»¥ä¸‹æ“ä½œåœ¨çº¿ç¨‹ B ä¸­æ‰§è¡Œj = i;// ä»¥ä¸‹æ“ä½œåœ¨çº¿ç¨‹ C ä¸­æ‰§è¡Œi = 2; ğŸ‘† å‡è®¾çº¿ç¨‹ A ä¸­çš„æ“ä½œâ€i = 1â€å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹ B çš„æ“ä½œâ€j = iâ€, é‚£ä¹ˆå¯ä»¥ç¡®å®šçš„æ˜¯çº¿ç¨‹ B çš„æ“ä½œæ‰§è¡Œåï¼Œå˜é‡ j ä¸€å®šç­‰äº 1ï¼Œå¾—å‡ºè¿™ä¸ªç»“è®ºçš„ä¾æ®æœ‰ä¸¤ä¸ªï¼š æ ¹æ®å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œâ€i = 1â€çš„ç»“æœå¯ä»¥è¢«è§‚å¯Ÿåˆ°ï¼› çº¿ç¨‹ C è¿˜æ²¡â€ç™»åœºâ€, çº¿ç¨‹ A æ“ä½œç»“æŸä¹‹åæ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¼šä¿®æ”¹å˜é‡ i çš„å€¼ã€‚ç°åœ¨å†æ¥è€ƒè™‘çº¿ç¨‹ Cï¼Œæˆ‘ä»¬ä¾ç„¶ä¿æŒçº¿ç¨‹ A å’Œçº¿ç¨‹ B ä¹‹é—´çš„å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œè€Œçº¿ç¨‹ C å‡ºç°åœ¨çº¿ç¨‹ A å’Œçº¿ç¨‹ B çš„æ“ä½œä¹‹é—´ï¼Œä½†æ˜¯çº¿ç¨‹ C ä¸çº¿ç¨‹ B æ²¡æœ‰å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œé‚£ j çš„å€¼å°±æ— æ³•ç¡®å®šäº†ã€‚ ä¸‹é¢æ˜¯ Java å†…å­˜æ¨¡å‹ä¸­ä¸€äº›â€å¤©ç„¶â€çš„å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œå®ƒä»¬æ— é¡»ä»»ä½•åŒæ­¥å™¨çš„ååŠ©å°±å·²ç»å­˜åœ¨ï¼Œå¯ä»¥åœ¨ç¼–ç ä¸­ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œä¹‹é—´çš„å…³ç³»ä¸åœ¨æ­¤åˆ—ï¼Œå¹¶ä¸”æ— æ³•ä»ä¸‹åˆ—è§„åˆ™ä¸­æ¨å¯¼å‡ºæ¥çš„è¯ï¼Œä»–ä»¬å°±æ²¡æœ‰é¡ºåºæ€§ä¿éšœï¼Œè™šæ‹Ÿæœºå¯ä»¥å¯¹å®ƒä»¬éšæ„åœ°è¿›è¡Œé‡æ’åºã€‚ ç¨‹åºæ¬¡åºåŸåˆ™(Program Order Rule): åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ç¨‹åºä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºå†™åœ¨åé¢çš„æ“ä½œã€‚å‡†ç¡®æ¥è¯´æ˜¯ç¨‹åºæµé¡ºåºè€Œä¸æ˜¯ä»£ç é¡ºåºï¼Œå› ä¸ºè¦è€ƒè™‘åˆ†æ”¯å’Œå¾ªç¯ã€‚ ç®¡ç¨‹é”å®šåŸåˆ™(Monitor Lock Rule): ä¸€ä¸ª unlock æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ lock æ“ä½œã€‚è¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯åŒä¸€ä¸ªé”ï¼Œè€Œâ€åé¢â€æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚ volatile å˜é‡è§„åˆ™(Volatile Variable Rule): å¯¹äºä¸€ä¸ªvolatile å˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼Œè¿™é‡Œçš„â€åé¢â€åŒæ ·æ˜¯æŒ‡æ—¶é—´ä¸Šçš„å…ˆåã€‚ çº¿ç¨‹å¯åŠ¨è§„åˆ™(Thread Start Rule): Thread å¯¹è±¡çš„ start() æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œã€‚ çº¿ç¨‹ç»ˆæ­¢è§„åˆ™(Thread Termination Rule): çº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread.join() æ–¹æ³•ç»“æŸã€Thread.isAlive() çš„è¿”å›å€¼ç­‰æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢è¿è¡Œã€‚ çº¿ç¨‹ä¸­æ–­åŸåˆ™(Thread Interruption Rule): çº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡ Thread.interrupted() æ–¹æ³•æ£€æµ‹åˆ°æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿã€‚ å¯¹è±¡ç»ˆç»“åŸåˆ™(Finalizer Rule): ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆ(æ„é€ å‡½æ•°æ‰§è¡Œç»“æŸ)å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„ finalize()[^3]æ³•çš„å¼€å§‹ã€‚ ä¼ é€’æ€§(Transitivity): å¦‚æœæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Bï¼Œæ“ä½œ B å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Cï¼Œåˆ™æ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Cã€‚ ä¸¾ä¸ªæ —å­ï¼šğŸ‘‡123456789private int value = 0;public void setValue(int value)&#123; this.value = value;&#125;public int getValue()&#123; return value;&#125; ä¸Šé¢ğŸ‘†çš„ä»£ç ä¸ºæœ€æ™®é€šçš„ getter/setter æ–¹æ³•ã€‚å‡è®¾å­˜åœ¨çº¿ç¨‹ A å’Œ Bï¼Œçº¿ç¨‹ A å…ˆ(æ—¶é—´ä¸Šçš„å…ˆ)è°ƒç”¨äº†â€setValue(1)â€ï¼Œç„¶åçº¿ç¨‹ B è°ƒç”¨äº†åŒä¸€ä¸ªå¯¹è±¡çš„â€getValue()â€ï¼Œé‚£ä¹ˆçº¿ç¨‹ B æ”¶åˆ°çš„è¿”å›å€¼ä¸ºå¤šå°‘ï¼Ÿ ç”±ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ä¸ºçº¿ç¨‹ A å’Œçº¿ç¨‹ B è°ƒç”¨ï¼Œä¸åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ç¨‹åºæ¬¡åºè§„åˆ™åœ¨è¿™é‡Œä¸é€‚ç”¨ï¼›ç”±äºæ²¡æœ‰åŒæ­¥å—ï¼Œè‡ªç„¶ä¸ä¼šå‘ç”Ÿ lock å’Œ unlock æ“ä½œï¼Œæ‰€ä»¥ç®¡ç¨‹é”å®šè§„åˆ™ä¹Ÿä¸é€‚ç”¨ï¼›ç”±äº value å˜é‡æ²¡æœ‰è¢« volatile ä¿®é¥°ï¼Œæ‰€ä»¥ volatile å˜é‡è§„åˆ™åœ¨è¿™é‡Œä¹Ÿä¸é€‚ç”¨ï¼›åé¢çš„çº¿ç¨‹å¯åŠ¨ã€ç»ˆæ­¢ã€ä¸­æ–­è§„åˆ™å’Œå¯¹è±¡ç»ˆç»“è§„åˆ™ä¹Ÿå’Œè¿™é‡Œå®Œå…¨æ²¡æœ‰å…³ç³»ã€‚å› ä¸ºæ²¡æœ‰ä¸€ä¸ªé€‚ç”¨çš„å…ˆè¡Œå‘ç”Ÿè§„åˆ™ï¼Œæ‰€ä»¥æœ€åä¸€æ¡ä¼ é€’æ€§ä¹Ÿæ— ä»è°ˆèµ·ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤å®šï¼šå°½ç®¡çº¿ç¨‹ A åœ¨æ“ä½œæ—¶é—´ä¸Šå…ˆäºçº¿ç¨‹ Bï¼Œä½†æ˜¯æ— æ³•ç¡®å®šçº¿ç¨‹ B ä¸­ getValue() æ–¹æ³•çš„è¿”å›å€¼ï¼Œå³è¿™é‡Œçš„æ“ä½œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ è§£å†³æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œè¦ä¹ˆæŠŠ getter/setter æ–¹æ³•éƒ½å®šä¹‰ä¸º synchronized æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥é€‚ç”¨äºç®¡ç¨‹é”å®šè§„åˆ™ï¼›è¦ä¹ˆæŠŠ value å®šä¹‰ä¸º volatile å˜é‡ï¼Œç”±äº setter æ–¹æ³•å¯¹ value å€¼çš„ä¿®æ”¹ä¸ä¾èµ– value çš„åŸå€¼ï¼Œæ»¡è¶³ volatile å…³é”®å­—ä½¿ç”¨åœºæ™¯ï¼Œè¿™æ ·å°±å¯ä»¥å¥—ç”¨ volatile å˜é‡è§„åˆ™æ¥æ»¡è¶³å…ˆè¡Œå‘ç”ŸåŸåˆ™ã€‚é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šä¸€ä¸ªæ“ä½œâ€æ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿâ€ä¸ä»£è¡¨è¿™ä¸ªæ“ä½œä¼šæ˜¯â€å…ˆè¡Œå‘ç”Ÿâ€ï¼Œé‚£å¦‚æœä¸€ä¸ªæ“ä½œâ€å…ˆè¡Œå‘ç”Ÿâ€æ˜¯å¦å°±èƒ½å¯¹å¯¼å‡ºè¿™ä¸ªæ“ä½œå¿…å®šæ˜¯â€æ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿâ€å‘¢ï¼Ÿå¾ˆé—æ†¾ï¼ŒåŒæ ·ä¹Ÿä¸èƒ½ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯â€æŒ‡ä»¤é‡æ’åºâ€ã€‚ğŸ‘‡123// ä¸‹é¢æ“ä½œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œint i = i;int j = 2; ğŸ‘†æ ¹æ®ç¨‹åºæ¬¡åºè§„åˆ™ï¼Œint i = 1;å…ˆè¡Œå‘ç”Ÿäºint j = 2;ä½†æ˜¯int j = 2;çš„ä»£ç å®Œå…¨å¯èƒ½å…ˆè¢«å¤„ç†å™¨æ‰§è¡Œï¼Œè¿™å¹¶ä¸å½±å“å…ˆè¡Œå‘ç”ŸåŸåˆ™çš„æ­£ç¡®æ€§ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿™æ¡çº¿ç¨‹ä¸­æ˜¯æ— æ³•æ„ŸçŸ¥åˆ°è¿™ç‚¹çš„ã€‚ [^2]: Javaçš„Final å…³é”®å­—çš„å†…å­˜è¯­ä¹‰ [^3]: Java ç¦æ­¢ä½¿ç”¨ finalizer æ–¹æ³•]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>çº¿ç¨‹å®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºå¾®è§‚ä¸‹i++çš„å¹¶å‘æ‰§è¡Œ]]></title>
    <url>%2F2019%2F03%2F08%2Fabout_java_microcosmic_i%2B%2B%2F</url>
    <content type="text"><![CDATA[Contextæœ€è¿‘ä¸€ç›´æ²¡æœ‰æ›´æ–°æ–‡ç« æ˜¯å› ä¸ºè¿‡å¾—å¾ˆå……å®ï¼Œï¼Œä¸€æ–¹é¢ï¼Œç°åœ¨åœ¨åšå°ç¨‹åºçš„çº¿ä¸Šå•†åŸï¼Œå°ç¨‹åºè¿™è¾¹å€’æ²¡ä»€ä¹ˆéš¾çš„ï¼Œéš¾çš„æ˜¯æœåŠ¡å™¨ç«¯æ€ä¹ˆè®¾è®¡æ¶æ„ï¼Œæ¶‰åŠåˆ°ä¸åŒçš„å®¢æˆ·,ä¸åŒçš„å®¢æˆ·é—¨åº—ç»„ç»‡æ¶æ„åˆä¸ä¸€æ ·ï¼Œç¡¬ä»¶æ¡ä»¶ä¹Ÿä¸ä¸€æ ·ï¼Œå•†å“ä¹Ÿä¸ä¸€æ ·ï¼Œè¿˜éœ€è¦è·Ÿ ERP çš„åŒäº‹è¿›è¡Œæ²Ÿé€šã€‚ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ç›´è®¡åˆ’åœ¨æˆ¿å­åˆåŒåˆ°æœŸ(2019-04-04)ä¹‹åæ¢å·¥ä½œï¼Œæ‰€ä»¥ç§¯æå‡†å¤‡é¢è¯•ï¼ŒæŸ¥æ¼è¡¥ç¼ºä»€ä¹ˆçš„ã€‚å»å¹´12æœˆä»½æ—¶å€™ï¼Œä¹°äº†ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€å’Œã€Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€ã€‚å‰è€…å…¨æ˜¯å¹²è´§ï¼Œå¹²åˆ°æ²¡æ³•å„¿å†™åšå®¢åšç¬”è®°ï¼Œå¦åˆ™å°±æ˜¯åœ¨ç…§æ¬ä¹¦ä¸Šçš„å†…å®¹äº†ã€‚åè€…ï¼Œï¼Œé¢ï¼Œæœ‰ç‚¹æ™¦æ¶©ï¼Œæ²¡æœ‰è¯»ä¸‹å»çš„æ¬²æœ›ï¼Œç„¶åå°±æ”¾åœ¨çœå›¾è®¡ç®—æœºç§‘å­¦åˆ†ç±»ä¸‹çš„ä¹¦æ¶ä¸Šäº†ï¼Œå—¯ï¼Œä¸Šå‘¨æœ«å»çœå›¾å‘ç°é‚£æœ¬ä¹¦å·²ç»ä¸è§äº†ğŸ¤£ã€‚å¯¹äº†ï¼Œä¸æ­¤åŒæ—¶ï¼Œï¼Œå‘ç°äº† vue-element-admin æ¡†æ¶ï¼Œä¸€ç›´æƒ³è¯•è¯• webpackï¼Œç„¶åå°±åœ¨ä¸å¿™çš„æ—¶å€™æ…¢æ…¢é‡æ„ç°æœ‰çš„åå°é¡µé¢ã€‚ç”¨å°è£…å¥½çš„ç»„ä»¶å†™é¡µé¢çœŸçœå¿ƒï¼Œçˆ½çš„é£èµ·~ å—¯ï¼Œï¼Œä»Šå¤©çš„ä¸»è¦å†…å®¹æ¥è‡ªã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€çš„ç¬¬äº”éƒ¨åˆ†ç¬¬ä¸€ç« â€“Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹ã€‚ è¿™æ˜¯ç¬¬äºŒæ¬¡è¯»è¿™ä¸€éƒ¨åˆ†äº†ï¼Œï¼Œç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™å¤§æ°´æ¼«çŒå›«å›µåæ£ï¼Œå…¨å±€æŠŠæ¡(å¤§è¯¯)ã€‚è¿™æ¬¡è¯»çš„æ—¶å€™ä¸»è¦çš„æ˜¯æŠ ç»†èŠ‚ï¼Œæ¸©æ•…çŸ¥æ–°ï¼Œå—ç›ŠåŒªæµ…ï¼ä¸‹é¢è¿›å…¥æ­£é¢˜å„¿~ Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹ç¡¬ä»¶çš„æ•ˆç‡ä¸ä¸€è‡´æ€§ ç”±äºè®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ä¸å¤„ç†å™¨çš„è¿ç®—é€Ÿåº¦æœ‰å‡ ä¸ªé‡çº§çš„å·®è·ï¼Œæ‰€ä»¥ç°ä»£è®¡ç®—æœºç³»ç»Ÿéƒ½ä¸å¾—ä¸åŠ å…¥ä¸€å±‚è¯»å†™é€Ÿåº¦å°½å¯èƒ½æ¥è¿‘å¤„ç†å™¨è¿ç®—é€Ÿåº¦çš„é«˜é€Ÿç¼“å­˜(Cache)æ¥ä½œä¸ºå†…å­˜ä¸å¤„ç†å™¨ä¹‹é—´çš„ç¼“å†²ï¼šå°†è¿ç®—éœ€è¦ä½¿ç”¨çš„æ•°æ®å¤åˆ¶åˆ°ç¼“å­˜ä¸­ï¼Œè®©è¿ç®—èƒ½å¿«é€Ÿè¿›è¡Œï¼Œå½“è¿ç®—ç»“æŸåå†ä»ç¼“å­˜åŒæ­¥å›å†…å­˜ä¹‹ä¸­ï¼Œè¿™æ ·å¤„ç†å™¨å°±æ— é¡»ç­‰å¾…ç¼“æ…¢çš„å†…å­˜è¯»å†™äº†ã€‚ åŸºäºé«˜é€Ÿç¼“å­˜çš„å­˜å‚¨äº¤äº’å¾ˆå¥½çš„è§£å†³äº†å¤„ç†å™¨ä¸å†…å­˜ä¹‹é—´çš„é€Ÿåº¦çŸ›ç›¾ï¼Œä½†æ˜¯ä¹Ÿä¸ºè®¡ç®—æœºç³»ç»Ÿå¸¦æ¥æ›´é«˜çš„å¤æ‚åº¦ï¼Œå› ä¸ºå®ƒå¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šç¼“å­˜ä¸€è‡´æ€§(Cache Coherence)ã€‚åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œä»–ä»¬åˆå…±äº«åŒä¸€ä¸»å­˜ã€‚ â€“ Page 361 Javaå†…å­˜æ¨¡å‹ Java è™šæ‹Ÿè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§ Java å†…å­˜æ¨¡å‹ (Java Memory Model, JMM) æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®© Java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœã€‚ Java å†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡è¿™æ ·çš„åº•å±‚ç»†èŠ‚ã€‚ Java å†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜(Main Memory)ä¸­ï¼Œæ¯æ¡çº¿ç¨‹è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜(Working Memory)ï¼Œçº¿ç¨‹ä¸­ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å˜é‡çš„ä¸»å†…å­˜çš„å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œ(è¯»å–ã€èµ‹å€¼ç­‰)éƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚ä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚â€“ Page 362-363 å…³äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´å…·ä½“çš„äº¤äº’åè®®ï¼Œå³ä¸€ä¸ªå˜é‡å¦‚ä½•ä»ä¸»å†…å­˜æ‹·è´åˆ°å·¥ä½œå†…å­˜ã€å¦‚ä½•ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¹‹ç±»çš„å®ç°ç»†èŠ‚ï¼ŒJava å†…å­˜æ¨¡å‹ä¸­å®šä¹‰äº†ä¸€ä¸‹ 8 ç§æ“ä½œæ¥å®Œæˆï¼Œè™šæ‹Ÿæœºå®ç°æ—¶å¿…é¡»ä¿è¯ä¸‹é¢æåŠçš„æ¯ä¸€ç§æ“ä½œéƒ½æ˜¯åŸå­çš„ã€ä¸å¯å†åˆ†çš„( double å’Œ long ä¾‹å¤–)ã€‚ lock(é”å®š)ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€ã€‚ unlock(è§£é”)ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚ read(è¯»å–)ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„ load åŠ¨ä½œä½¿ç”¨ã€‚ load(è½½å…¥): ä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œçš„ä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œçš„å˜é‡å‰¯æœ¬ä¸­ã€‚ use(ä½¿ç”¨)ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨åˆ°å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ assign(èµ‹å€¼)ï¼šä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ write(å†™å…¥)ï¼šä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠ store æ“ä½œä»å·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å˜é‡çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­ã€‚ â€“ Page 365 éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢ğŸ‘†æåŠçš„æ¯ä¸€ç§æ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œï¼Œè€Œä¸æ˜¯ã€ä»å†…å­˜ä¸­è¯»å–å˜é‡ï¼Œç„¶åä¿®æ”¹å˜é‡ï¼Œç„¶åå›å†™åˆ°å†…å­˜ã€è¿™æ•´ä¸ªè¿‡ç¨‹æ˜¯åŸå­çš„ã€‚è¿™æ„å‘³ç€å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸åŠ å¹²é¢„æ—¶ä¸Šé¢8ç§æ“ä½œåœ¨çº¿ç¨‹é—´æ˜¯äº¤æ›¿è¿›è¡Œçš„ã€‚å¦‚å¯¹ä¸»å†…å­˜ä¸­çš„å˜é‡aã€b è¿›è¡Œè®¿é—®æ—¶ï¼Œä¸€ç§å¯èƒ½å‡ºç°çš„é¡ºåºæ˜¯ read a, read b, load b, load a.. volatileå…³é”®å­— å½“ä¸€ä¸ªå˜é‡å®šä¹‰ä¸º volatile ä¹‹åï¼Œå®ƒå°†å…·å¤‡ä¸¤ç§ç‰¹æ€§ï¼Œç¬¬ä¸€æ˜¯ä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Œè¿™é‡Œâ€œå¯è§æ€§â€æ˜¯æŒ‡å½“ä¸€æ¡çº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¾—çŸ¥çš„ã€‚è€Œæ™®é€šå˜é‡æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ™®é€šå˜é‡çš„å€¼ï¼Œåœ¨çº¿ç¨‹é—´ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ A ä¿®æ”¹ä¸€ä¸ªæ™®é€šå˜é‡çš„å€¼ï¼Œç„¶åå‘ä¸»å†…å­˜è¿›è¡Œå›å†™ï¼Œå¦å¤–ä¸€æ¡çº¿ç¨‹ B åœ¨çº¿ç¨‹Aå›å†™å®Œæˆä¹‹åå†ä»ä¸»å†…å­˜è¿›è¡Œè¯»å–æ“ä½œï¼Œæ–°å˜é‡çš„å€¼æ‰ä¼šå¯¹çº¿ç¨‹ B å¯è§ã€‚ â€“ Page 366 ä¸å¾—ä¸è¯´çš„æ˜¯ï¼Œè¯»åˆ°è¿™é‡Œçš„æ—¶å€™å¾ˆå›°æƒ‘ï¼Œï¼Œvolatile æ˜¯å¦‚ä½•è®©è¢«ä¿®æ”¹åçš„å˜é‡å€¼ç«‹å³è¢«å…¶ä»–çº¿ç¨‹å¾—çŸ¥çš„å‘¢ï¼Ÿï¼Ÿï¼Ÿè¿™å°±ä¸å¾—ä¸æåˆ°MESIåè®®ï¼ŒMESIåè®®ä½¿ç”¨å››ä¸ªçŠ¶æ€ä½æè¿°æ¯ä¸€ä¸ªç¼“å­˜è¡Œ(Cache Line)ã€‚å…³äºç¼“å­˜è¡Œï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­åªéœ€è¦çŸ¥é“å®ƒæ˜¯ cache å’Œ RAM äº¤æ¢æ•°æ®çš„æœ€å°å•ä½,é€šå¸¸ä¸º 64 Byteå°±å¯ä»¥äº†ã€‚ okï¼Œä¸‹é¢ç®€å•è¯´è¯´MESIåè®®ã€‚ M(Modified)ï¼šè¡¨ç¤ºå½“å‰ Cache è¡Œä¸­åŒ…å«çš„æ•°æ®ä¸å†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œè€Œä¸”å®ƒä»…åœ¨æœ¬ CPU çš„ Cache ä¸­æœ‰æ•ˆï¼Œå…¶ä»– CPU çš„ Cache ä¸­ä¸å­˜åœ¨æ‹·è´ï¼Œå³è¿™ä¸ª Cache è¡Œçš„æ•°æ®æ˜¯å½“å‰å¤„ç†å™¨ç³»ç»Ÿä¸­æœ€æ–°çš„æ•°æ®æ‹·è´ã€‚å½“ CPU å¯¹è¿™ä¸ª Cache è¡Œè¿›è¡Œæ›¿æ¢æ“ä½œæ—¶ï¼Œå¿…ç„¶ä¼šå¼•å‘ç³»ç»Ÿæ€»çº¿çš„å†™å‘¨æœŸï¼Œå°† Cache è¡Œä¸­æ•°æ®ä¸å†…å­˜ä¸­çš„æ•°æ®åŒæ­¥ã€‚ E(Exclusive)ï¼šä¸ Modified çŠ¶æ€ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ Modified çŠ¶æ€è¡¨ç¤ºå½“å‰ Cache Line ä¸­çš„æ•°æ®ä¸å†…å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´ï¼Œè€Œ Exclusive çŠ¶æ€ä¸‹çš„ Cache ä¸å†…å­˜ä¸­çš„æ•°æ®ä¸€è‡´ã€‚ S(Shared)ï¼šè¡¨ç¤ºç¼“å­˜è¡Œä¸­åŒ…å«çš„æ•°æ®æœ‰æ•ˆï¼Œè€Œä¸”åœ¨å½“å‰ CPU å’Œå…¶ä»– CPU ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå‰¯æœ¬ã€‚åœ¨è¯¥ç¼“å­˜è¡Œä¸­çš„æ•°æ®æ˜¯å½“å‰å¤„ç†å™¨ç³»ç»Ÿä¸­æœ€æ–°çš„æ•°æ®æ‹·è´ï¼Œè€Œä¸”ä¸å†…å­˜ä¸­çš„æ•°æ®ä¸€è‡´ã€‚I(Invalid)ï¼šè¡¨ç¤ºå½“å‰ç¼“å­˜è¡Œä¸­æ•°æ®æ— æ•ˆã€‚ åœ¨ MESI ç¼“å­˜ä¸€è‡´æ€§åè®®ä¸‹ï¼Œæˆ‘ä»¬çœ‹çœ‹åœ¨Javaä¸­ i++ æ“ä½œæ˜¯æ€ä¹ˆæ‰§è¡Œçš„ã€‚ ä¸¤ä¸ª CPU Aã€B(å³å¤šæ ¸å¤šçº¿ç¨‹)åŒæ—¶æ‰§è¡Œ i++ çš„æ“ä½œï¼Œå‡è®¾ i åˆå§‹å€¼ä¸º0ï¼š CPU A ä»ä¸»å†…å­˜ä¸­è¯»å…¥(read) i åˆ°å·¥ä½œå†…å­˜ï¼Œå¹¶è½½å…¥(load)åˆ°å‰¯æœ¬ï¼Œæ­¤æ—¶å…¶ä»– CPU çš„ç¼“å­˜ä¸­å¹¶ä¸å­˜åœ¨å˜é‡ iï¼Œæ‰€ä»¥ CPU A ä¸­ç¼“å­˜è¡ŒçŠ¶æ€ä¸º Exclusiveã€‚ CPU B ä»ä¸»å†…å­˜ä¸­è¯»å…¥(read) i åˆ°å·¥ä½œå†…å­˜ï¼Œå¹¶è½½å…¥(load)åˆ°å‰¯æœ¬ï¼Œå‘ç° CPU A çš„ç¼“å­˜ä¸­å·²ç»å­˜åœ¨å˜é‡ i äº†ï¼Œé‚£ä¹ˆCPU B ä¸­å·¥ä½œç¼“å­˜çš„ç›¸å…³ç¼“å­˜è¡Œè®¾ç½®ä¸º Sharedï¼ŒCPU A ä¸­çš„ç›¸å…³ç¼“å­˜è¡Œä¹Ÿè®¾ç½®ä¸º Sharedã€‚ CPU A å¼€å§‹æ‰§è¡Œ i++ï¼Œi å€¼åŠ ä¸€ç­‰äºä¸€ï¼Œä½†æ˜¯åªæ˜¯åœ¨å¯„å­˜å™¨ä¸­ï¼Œå¹¶æœªå†™å…¥ç¼“å­˜ï¼Œæ­¤æ—¶çŠ¶æ€è¿˜æ˜¯ Sharedã€‚ CPU B å¼€å§‹æ‰§è¡Œ i++ï¼Œiå€¼åŠ ä¸€ç­‰äºä¸€ï¼ŒåŒä¸Šï¼Œè¿˜æ˜¯ Sharedã€‚ CPU A å°†è®¡ç®—åçš„å€¼é‡æ–°èµ‹å€¼(assign)ç»™ç¼“å­˜ä¸­çš„å‰¯æœ¬ï¼Œi å€¼ä¸º1ï¼Œç¼“å­˜è¡ŒçŠ¶æ€æ”¹ä¸º Modifiedï¼Œæ­¤æ—¶ CPU B çš„ç¼“å­˜è¡ŒçŠ¶æ€æ”¹ä¸º Invalidã€‚ CPU B å‡†å¤‡æ¯”èµ‹å€¼ç»™ç¼“å­˜ä¸­ i çš„å‰¯æœ¬æ—¶ï¼Œå‘ç°ç¼“å­˜è¡Œå·²å¤„äºæ— æ•ˆ(Invalid)çŠ¶æ€ï¼Œéœ€è¦ä»å†…å­˜ä¸­é‡æ–°è¯»å–(read)ï¼Œåˆå› ä¸º CPU A ä¸­ç›¸å…³ç¼“å­˜è¡Œä¸­æœ‰å˜é‡ i ä¸”ä¸º Modified çŠ¶æ€ï¼Œé‚£ä¹ˆè¦æ±‚CPU A å°†è®¡ç®—åçš„ i å€¼å›å†™å…¥(write)å†…å­˜ï¼Œå†…å­˜ä¸­çš„ i å€¼ä¸º1ï¼ŒCPU Açš„ç¼“å­˜è¡ŒçŠ¶æ€ä¸º Exclusiveï¼ŒCPU B å°†å†…å­˜ä¸­çš„ i å€¼è¯»å…¥(read+load)è‡ªå·±çš„ç¼“å­˜ä¸­çš„å˜é‡içš„å‰¯æœ¬ï¼Œæ­¤æ—¶CPU Aã€B çš„ç¼“å­˜è¡Œéƒ½ä¸º Sharedï¼Œi å€¼éƒ½ä¸º1ã€‚ CPU B å°† å·¥ä½œå†…å­˜ä¸­çš„ i å€¼å‰¯æœ¬å†™å…¥(write)åˆ°å†…å­˜ä¸­ï¼Œi å€¼å‰¯æœ¬æ­¤æ—¶ä¸º1ï¼Œå†…å­˜ä¸­çš„ i å€¼äº¦ä¸º1ï¼Œå³æŠŠ1èµ‹å€¼ç»™1ï¼ŒCPU B ä¸­ç¼“å­˜è¡Œçš„çŠ¶æ€å˜ä¸º Modifiedï¼ŒCPU Aä¸­çš„ç¼“å­˜è¡Œå€¼å˜ä¸ºInvalidã€‚ ä»¥ä¸ŠğŸ‘†å³ä¸ºä¸åŠ äººä¸ºå¹²é¢„æƒ…å†µ(ä½¿ç”¨volatileã€synchronizedå…³é”®å­—)ä¸‹ i++ åœ¨å¤šæ ¸å¤šçº¿ç¨‹æ¶æ„ä¸­å¯èƒ½äº§ç”Ÿçš„æ‰§è¡Œç»“æœã€‚æ‰€ä»¥ MESI ç¼“å­˜ä¸€è‡´æ€§åè®®å¹¶ä¸èƒ½ä¿è¯å†…å­˜ä¸€è‡´æ€§ã€‚å¦å¤–ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¡¨è¿°å¹¶ä¸ç®—å¤ªä¸¥è°¨ï¼Œï¼Œæ¯”å¦‚å…³äºæåˆ°çš„ã€å·¥ä½œå†…å­˜ã€ï¼Œåœ¨ã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€ä¸­æ˜¯è¿™ä¹ˆè¯´çš„ï¼š ä¸ºäº†è·å–æ›´å¥½çš„è¿è¡Œé€Ÿåº¦ï¼Œè™šæ‹Ÿæœº(ç”šè‡³æ˜¯ç¡¬ä»¶ç³»ç»Ÿæœ¬èº«çš„ä¼˜åŒ–æªæ–½)å¯èƒ½ä¼šè®©å·¥ä½œå†…å­˜ä¼˜å…ˆå­˜å‚¨äºå¯„å­˜å™¨å’Œé«˜é€Ÿç¼“å­˜ä¸­ï¼Œå› ä¸ºç¨‹åºè¿è¡Œæ—¶ä¸»è¦è®¿é—®è¯»å†™çš„æ˜¯å·¥ä½œå†…å­˜ã€‚â€“ Page 364 è¿˜æœ‰ï¼Œåœ¨1ã€2ä¸­ï¼ŒCPU Aã€B read å¹¶ load i åˆ°å·¥ä½œå†…å­˜ä¸­çš„å‰¯æœ¬ä¸­ï¼Œåœ¨ä¹¦ä¸­æ˜¯è¿™æ ·è¯´çš„ï¼š Java å†…å­˜æ¨¡å‹åªè¦æ±‚readã€loadå’Œstoreã€writeæ“ä½œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œæ²¡æœ‰ä¿è¯æ˜¯è¿ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œreadä¸Loadä¹‹é—´ã€stireä¸writeä¹‹é—´æ˜¯å¯æ’å…¥å…¶ä»–è´¨é‡çš„ã€‚å¦‚å¯¹å†…å­˜ä¸­çš„å˜é‡aã€bè¿›è¡Œè®¿é—®æ—¶ï¼Œä¸€ç§å¯èƒ½å‡ºç°çš„é¡ºåºæ˜¯read aã€read bã€load bã€load aã€‚â€“ Page365 ğŸ‘†è¯¸å¦‚æ­¤ç±»ï¼Œï¼Œæ‰€ä»¥ï¼Œå—¯ï¼Œæ³¨æ„é¢†ä¼šç²¾ç¥ã€‚ OKï¼Œè¿›è¡Œä¸‹ä¸€è¯é¢˜..å€˜è‹¥æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ volatile å…³é”®å­—ä¿®é¥°å˜é‡ iã€‚å› ä¸º volatile è¡¨ç¤ºä¸ä½¿ç”¨å¯„å­˜å™¨çš„å€¼ï¼Œæ¯æ¬¡éƒ½ä»å†…å­˜è¯»(ä¸åŒ…æ‹¬ç¼“å­˜)ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šè¾¹ä¾‹å­ä¸­çš„ç¬¬ä¸‰æ­¥ï¼Œassign å·¥ä½œå†…å­˜ä¸­ i çš„å‰¯æœ¬ä¹‹åï¼Œç«‹å³å°†å€¼å›å†™åˆ°ä¸»å†…å­˜ä¸­ã€‚ä¹¦ä¸­çš„è¡¨è¿°ä¸ºï¼š æœ‰ volatile ä¿®é¥°çš„å˜é‡ï¼Œåœ¨ç¼–è¯‘æˆæ±‡ç¼–è¯­è¨€ä¹‹åï¼Œæ¯”ä¸ä½¿ç”¨ volatile ä¿®é¥°å˜é‡å¤šäº†ä¸€è¡Œlock addl $0x0,(%esp),æŸ¥è¯¢ IA32 æ‰‹å†Œå¾—çŸ¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½¿å¾—æœ¬ CPU çš„ Cache å†™å…¥äº†å†…å­˜ï¼Œè¯¥å†™å…¥åŠ¨ä½œä¹Ÿä¼šå¼•èµ·åˆ«çš„ CPU æˆ–è€…åˆ«çš„å†…æ ¸æ— æ•ˆåŒ–(Invalidate)å…¶ Cacheï¼Œè¿™ç§æ“ä½œç›¸å½“äºå¯¹ Cache ä¸­çš„å˜é‡åšäº†ä¸€æ¬¡å‰é¢ä»‹ç»Javaå†…å­˜æ¨¡å¼ä¸­æ‰€è¯´çš„â€œstoreâ€å’Œâ€œwriteâ€æ“ä½œã€‚æ‰€ä»¥é€šè¿‡è¿™æ ·ä¸€ä¸ªæ“ä½œï¼Œå¯è®©å‰é¢ volatile å˜é‡çš„ä¿®æ”¹å¯¹å…¶ä»– CPU ç«‹å³å¯è§ã€‚ å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè§‰å¾— i++ è¢« volatile ä¿®é¥°è¿‡ä¹‹åï¼Œå°±å¯å¾—åˆ°æœŸæœ›çš„ i å€¼ã€‚ç„¶è€Œå³ä½¿è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ i å€¼ä¾ç„¶æ¯”æœŸæœ›å€¼è¦å°ã€‚ é—®é¢˜å°±å‡ºåœ¨è‡ªå¢è¿ç®—â€œi++â€ä¹‹ä¸­ï¼Œæˆ‘ä»¬ç”¨ javap åç¼–è¯‘è¿™æ®µä»£ç åä¼šå‘ç°åªæœ‰ä¸€è¡Œ i++ çš„ä»£ç åœ¨ Class æ–‡ä»¶ä¸­æ˜¯ç”±4æ¡å­—èŠ‚ç æŒ‡ä»¤æ„æˆçš„ã€‚123456// i ä¸ºé™æ€å˜é‡0: getstatic3: iconst_14: iadd5: putstatic&gt; ä»å­—èŠ‚ç å±‚é¢ä¸Šå¾ˆå®¹æ˜“å°±åˆ†æå‡ºå¹¶å‘å¤±è´¥çš„åŸå› äº†ï¼šå½“ getstatic æŒ‡ä»¤æŠŠ i å€¼å–åˆ°æ“ä½œæ ˆæ—¶ï¼Œvolatile å…³é”®å­—ä¿è¯äº† i çš„å€¼åœ¨æ­¤æ—¶æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œ iconst_1ã€iadd è¿™äº›æŒ‡ä»¤çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½å·²ç»æŠŠ i çš„å€¼åŠ å¤§äº†ï¼Œè€Œåœ¨æ“ä½œæ ˆé¡¶çš„å€¼å°±å˜æˆäº†è¿‡æœŸçš„æ•°æ®ï¼Œæ‰€ä»¥ putstatic æŒ‡ä»¤æ‰§è¡Œåå°±å¯èƒ½æŠŠè¾ƒå°çš„ i å€¼åŒæ­¥å›ä¸»å†…å­˜ä¹‹ä¸­ã€‚(PS: ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œä¹Ÿå¹¶ä¸æ„å‘³ç€æ‰§è¡Œè¿™æ¡æŒ‡ä»¤å°±æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤åœ¨è§£é‡Šæ‰§è¡Œæ—¶ï¼Œè§£é‡Šå™¨å°†è¦è¿è¡Œè®¸å¤šè¡Œä»£ç æ‰èƒ½å®ç°å®ƒçš„è¯­ä¹‰ï¼Œå¦‚æœæ˜¯ç¼–è¯‘æ‰§è¡Œï¼Œä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ä¹Ÿå¯èƒ½è½¬åŒ–ä¸ºè‹¥å¹²æ¡æœ¬åœ°æœºå™¨ç æŒ‡ä»¤ã€‚) ç”±äº volatile å˜é‡åªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä¸€ä¸‹ä¸¤æ¡è§„åˆ™çš„è¿ç®—åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä»è¦é€šè¿‡é”(ä½¿ç”¨synchronizedå’Œjava.util.conrurrentä¸­çš„åŸå­ç±»)æ¥ä¿è¯åŸå­æ€§ã€‚ è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚ å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çš„çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ æ‰€ä»¥ï¼Œï¼Œæ­¤æ—¶å¦‚æœè¦è§£å†³ i++ çš„é—®é¢˜ï¼Œé  volatile å…³é”®å­—æ˜¯ä¸è¡Œçš„ï¼Œè¦ä¹ˆå°† volatile å…³é”®å­—æ”¹ä¸º synchronized å…³é”®å­—ä¸Šé”(lock ä½œç”¨äºä¸»å†…å­˜ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€ã€‚)ï¼›è¦ä¹ˆï¼Œå°† i++ æ›¿æ¢ä¸º Java å¹¶å‘å·¥å…·åŒ…ä¸­çš„ AtomicInteger ç±»:123AtomicInteger i = new AtomicInteger(0);...AtomicInteger.incrementAndGet(); å‚è€ƒé“¾æ¥ï¼š ä¸å¯ä¸è¯´çš„Javaâ€œé”â€äº‹ ç¼“å­˜ä¸€è‡´æ€§åè®® mesi volatileå®ç°å¯è§æ€§çš„åŸç† cacheä¸€è‡´æ€§åè®®ï¼ŒMESIå’ŒMOESI å‘¨å¿—æ˜-æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº [ä¸€é’ˆè§è¡€ç³»åˆ—[8]: ä»€ä¹ˆå«å†…å­˜å¯è§æ€§ï¼Ÿä»€ä¹ˆå«å¯„å­˜å™¨å¯è§æ€§ï¼Ÿ(http://swiftlet.net/archives/3024) MESIä¸å†…å­˜å±éšœ]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>çº¿ç¨‹å®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ™®é²æ–¯ç‰¹é—®å·-2018]]></title>
    <url>%2F2018%2F12%2F31%2FProustQA_2018%2F</url>
    <content type="text"><![CDATA[ğŸ•¯ğŸ•¯ğŸ•¯æˆ‘ä¸Šå°å­¦ï¼Œä½ å‡ºå·®ï¼›ä¹‹åæˆ‘å¼€å§‹ä½æ ¡ï¼Œåˆä¸­ä¸¤å‘¨å›å®¶ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸¤å¤©ï¼›é«˜ä¸­å››å‘¨å›å®¶ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸åˆ°36å°æ—¶ï¼›æˆ‘ä¸Šå¤§å­¦äº†ï¼Œä½ é€€ä¼‘äº†ï¼Œæˆ‘åŠå¹´å›å®¶ä¸€æ¬¡ã€‚å¦‚æœä½ è¿˜åœ¨.. ä½ è®¤ä¸ºæœ€å®Œç¾çš„å¿«ä¹æ˜¯æ€æ ·çš„ï¼Ÿå†…å¿ƒçš„å¹³é™ ä½ æœ€å¸Œæœ›æ‹¥æœ‰å“ªç§æ‰åï¼Ÿè¿˜æ˜¯å°†é—®é¢˜æŠ½è±¡æˆä»£ç çš„èƒ½åŠ› ä½ æœ€ææƒ§çš„æ˜¯ä»€ä¹ˆï¼Ÿå˜è€ ä½ ç›®å‰çš„å¿ƒå¢ƒæ€æ ·ï¼Ÿé‚»å±…ä¸æ‡‚äº‹å„¿ï¼ŒæŒªåŠ¨æ¤…å­å’Œæ¡Œå­çš„æ—¶å€™ç¡¬æ‰¯ï¼Œå‘å‡ºåˆºè€³çš„å£°éŸ³ï¼Œï¼ŒMMPè¿™ä¸€å¹´è¿‡å¾—çœŸç‰¹ä¹ˆå¿«ï¼ï¼ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é’¦ä½©çš„æ˜¯è°ï¼Ÿç”±åŸƒéš†é©¬æ–¯å…‹ä¸´æ—¶æ”¹ä¸ºã€ä¸é¦™åŒ»ç”Ÿã€ï¼Œï¼Œä¸ä¼šåˆ ç¨¿ï¼Œå¯¹æ¯ä¸€ä¸ªå­—è´Ÿè´£ï¼Œæ¬¢è¿æ¥å‘Šã€‚ ä½ è®¤ä¸ºè‡ªå·±æœ€ä¼Ÿå¤§çš„æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿå¤§æ¦‚æ˜¯å…¨é©¬323å§ ä½ è‡ªå·±çš„å“ªä¸ªç‰¹ç‚¹è®©ä½ æœ€è§‰å¾—ç—›æ¨ï¼Ÿäº²å¯†å…³ç³»é‡ŒæŠŠæ¡ä¸å¥½åº¦ï¼Ÿ ä½ æœ€å–œæ¬¢çš„æ—…è¡Œæ˜¯å“ªä¸€æ¬¡ï¼Ÿ2018å¹´ç«¯åˆèŠ‚çš„è‹å·ä¹‹æ—…ï¼Œï¼Œå‡†ç¡®æ¥è¯´æ˜¯å–œæ¬¢è‹å· ä½ æœ€ç—›æ¨åˆ«äººçš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿä¸çŸ¥ä½•ä¸ºä¸ªäººè¾¹ç•Œï¼ ä½ æœ€çæƒœçš„è´¢äº§æ˜¯ä»€ä¹ˆï¼Ÿä¸ªäººä¿¡ç”¨ ä½ æœ€å¥¢ä¾ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿå¾ˆå¹¸è¿ï¼Œï¼Œå¦‚æ­¤å¹¸è¿ ä½ è®¤ä¸ºç¨‹åº¦æœ€æµ…çš„ç—›è‹¦æ˜¯ä»€ä¹ˆï¼Ÿæµ…çš„éƒ½ä¸ç—›è‹¦ï¼Œç—›è‹¦éƒ½ä¸æµ… ä½ è®¤ä¸ºå“ªç§ç¾å¾·æ˜¯è¢«è¿‡é«˜çš„è¯„ä¼°çš„ï¼Ÿè¿™ä¸ªè¯é¢˜ä¸€ä¸¤å¥è¯´ä¸æ¸…æ¥šï¼Œï¼Œå®¹æ˜“å¼•æˆ˜ã€‚ ä½ æœ€å–œæ¬¢çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿè¿˜æ˜¯ç¨‹åºå‘˜ï¼Œï¼Œèƒ½ç”¨æŠ€æœ¯æ”¹å˜ä¸–ç•Œçš„èŒä¸šéƒ½æ˜¯æˆ‘å–œæ¬¢çš„ ä½ å¯¹è‡ªå·±çš„å¤–è¡¨å“ªä¸€ç‚¹ä¸æ»¡æ„ï¼Ÿå³è¾¹çš„çœ‰æ¯›ï¼Œï¼Œä¸ºä»€ä¹ˆä½ ä¸èƒ½å¬è¯ä¸€ç‚¹.Smile. ä½ æœ€åæ‚”çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿå¤§å­¦æ—¶å¤ªæ··æ²Œï¼Œè€Œä¸”å½“æ—¶å®Œå…¨ä¸è‡ªçŸ¥.. è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é„™è§†çš„æ˜¯è°ï¼Ÿæ ç²¾ä»¬ï¼Œï¼ŒLove&amp;Peace ä½ æœ€å–œæ¬¢ç”·æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿèƒ½ä¸ºè‡ªå·±è¯´è¿‡çš„è¯ã€åšè¿‡çš„äº‹è´Ÿè´£ ä½ ä½¿ç”¨è¿‡çš„æœ€å¤šçš„å•è¯æˆ–è€…æ˜¯è¯è¯­æ˜¯ä»€ä¹ˆï¼ŸClear?(PS: è·Ÿåˆ«äººæ²Ÿé€šæ—¶ï¼Œä¸ç¡®å®šå¯¹æ–¹æ˜¯å¦å®Œå…¨æ¥æ”¶åˆ°è‡ªå·±æƒ³ä¼ è¾¾çš„ä¿¡æ¯ï¼Œä¼šé—®ä¸€å¥Clearï¼ŸClear = æˆ‘è¡¨è¾¾æ¸…æ¥šäº†ä¹ˆï¼Ÿ+ä½ GETåˆ°äº†ä¹ˆï¼Ÿ) ä½ æœ€å–œæ¬¢å¥³æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼ŸçœŸâˆ™ç”·å¥³å¹³ç­‰ ä½ æœ€ä¼¤ç—›çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå½¢åŒé™Œè·¯ ä½ æœ€çœ‹é‡æœ‹å‹çš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿè¨€è¡Œä¸€è‡´ï¼Œï¼Œä¸æ•´é‚£äº›ç‰‡å„¿æ±¤è¯ ä½ è¿™ä¸€ç”Ÿä¸­æœ€çˆ±çš„äººæˆ–ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼ŸMacbook Pro 15â€™â€™ (Especially 32G)ï¼Œï¼Œå¿ƒå¿ƒå¿µ ä½ å¸Œæœ›ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ­»å»ï¼Ÿå®‰ä¹æ­»ï¼Œæˆ–è€…ä¸€åœºçŒä¸åŠé˜²çš„æ„å¤– ä½•æ—¶ä½•åœ°è®©ä½ æ„Ÿè§‰åˆ°æœ€å¿«ä¹ï¼Ÿå†™äº†ä¸€å¤§æ®µä»£ç ï¼Œä¸€æ¬¡å°±èƒ½è·‘èµ·æ¥ï¼Œä¸ç”¨è°ƒè¯•çš„é‚£ç§ å¦‚æœä½ å¯ä»¥æ”¹å˜ä½ çš„å®¶åº­ä¸€ä»¶äº‹ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿæ—©ç‚¹è®©æˆ‘çŸ¥é“ç”µè„‘ä¸å…‰å¯ä»¥ç©æ¸¸æˆ..å¤§å®¶èº«ä½“å¥åº·å°±å¥½ï¼Œåˆ«çš„çœŸä¸å¥¢æ±‚ å¦‚æœä½ èƒ½é€‰æ‹©çš„è¯ï¼Œä½ å¸Œæœ›è®©ä»€ä¹ˆé‡ç°ï¼Ÿå°æˆ‘ï¼šæ—©ä¸Šè¢«æˆ‘çˆ¸çš„å½•éŸ³æœº(è£…ç£å¸¦çš„é‚£ä¸ª)å«é†’ï¼Œæˆ‘è¯¥èµ·åºŠåƒé¥­ä¸Šå­¦äº†ã€‚å¤§æˆ‘ï¼šå¤ªé˜³ç³»é‡å›ä¸‰ç»´å®‡å®™ã€‚ ä½ çš„åº§å³é“­æ˜¯ä»€ä¹ˆï¼Ÿç”Ÿå‘½çš„è¿‡ç¨‹ï¼Œæ— è®ºæ˜¯é˜³æ˜¥ç™½é›ªï¼Œé’èœè±†è…ï¼Œæˆ‘éƒ½å¾—å°å°æ˜¯ä»€ä¹ˆæ»‹å‘³ï¼Œæ‰ä¸æ‰æ¥èµ°è¿™ä¹ˆä¸€é­ã€‚ Extra..2018å¹´çš„ Keyword æ˜¯ï¼Ÿï¼Ÿ ã€ç„¦è™‘ã€ï¼Œï¼Œæœ€ç„¦è™‘çš„æ—¶å€™ä¼šåœ¨å…¬äº¤è½¦ä¸Šç”¨æ‰‹æœºå­¦ä¹ å»–é›ªå³°è€å¸ˆçš„Pythonæ•™ç¨‹ ğŸ˜” é™¤äº†ä¸¤ç‚¹ä¸€çº¿ï¼Œä½ æœ€å¸¸å»çš„åœ°æ–¹æ˜¯ï¼Ÿï¼Ÿå‘¨äº”ä¸‹ç­åœ¨åŒ—å›½å•†åŸä¸‹è½¦ï¼Œå»å‹’æ³°æºœä¸€åœˆï¼Œæ­¥è¡Œå›å®¶ã€‚å‘¨æ—¥æ²¡ä»€ä¹ˆäº‹å„¿å°±å»çœå›¾å¾…ä¸€ä¼šå„¿ã€‚ ä¸ºä»€ä¹ˆè¦å»çœå›¾ï¼Ÿï¼Ÿä¿æŒç„¦è™‘ã€‚ã€‚åœ¨çœå›¾ï¼Œå¹´é•¿çš„äººåœ¨å­¦ä¹ ï¼Œå¹´å¹¼çš„äººåœ¨å­¦ä¹ ï¼ŒåŒé¾„äººä¹Ÿåœ¨å­¦ä¹ ã€‚ æ‰€ä»¥ï¼Œè¿™ä¸€å¹´ä½ éƒ½å­¦äº†äº›å•¥ï¼Ÿï¼Ÿ å°ç¨‹åºçˆ†å‘ï¼Œæƒ³ç»™è‡ªå·±åšä¸ªå°ç¨‹åºï¼Œç”¨æ¥æ”¶é›†è‡ªå·±çš„ä½ç½®ä¿¡æ¯ã€‚æ‰€ä»¥çœ‹æ–‡æ¡£å­¦ä¹ äº†å°ç¨‹åºï¼Œä¸­é—´è¿˜å¿…é¡»å­¦ Vue.jsã€‚ç„¶ååˆšå¥½å…¬å¸ä¹Ÿè¦å‡†å¤‡åšå°ç¨‹åºï¼Œï¼Œæ‰€ä»¥ï¼Œè¿™ä¸€å¹´å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨åšä¸å°ç¨‹åºç›¸å…³çš„é¡¹ç›®ï¼Œå¯¹å¾®ä¿¡å…¬ä¼—å·å’Œå°ç¨‹åºçš„ API ç†Ÿæ‚‰äº†å¾ˆå¤šï¼Œä¸­é—´çˆ¬è¿‡çš„å‘éƒ½åœ¨åšå®¢ä¸­è®°å½•ä¸‹æ¥äº†ã€‚ é‡è¯»ã€å“²å­¦å®¶éƒ½å¹²äº†äº›ä»€ä¹ˆã€ é‡è¯»ã€ä¸‰ä½“ã€ å­¦ä¹ ã€é¸Ÿå“¥çš„ Linux ç§æˆ¿èœ(åŸºç¡€å­¦ä¹ ç¯‡)ã€: è®¡ç®—æœºæ¦‚è®ºã€Linux æ˜¯ä»€ä¹ˆã€é¦–æ¬¡ç™»é™†ä¸åœ¨çº¿æ±‚åŠ© man pageã€Linux çš„æ–‡ä»¶æƒé™ä¸ç›®å½•é…ç½®ã€Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†ã€Linux ç£ç›˜ä¸æ–‡ä»¶ç³»ç»Ÿç®¡ç†(è®¤è¯†Ext2æ–‡ä»¶ç³»ç»Ÿ)ã€æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©ä¸æ‰“åŒ…(Linux ç³»ç»Ÿå¸¸ç”¨å‹ç¼©å‘½ä»¤ã€æ‰“åŒ…å‘½ä»¤tar)ã€Vim ç¼–è¾‘å™¨ã€è®¤è¯†ä¸å­¦ä¹ Bashã€æ­£åˆ™è¡¨è¾¾å¼ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†ã€å­¦ä¹ Shell Scriptã€ä¾‹è¡Œæ€§å·¥ä½œã€ç¨‹åºç®¡ç†ä¸ SELinux åˆæ¢(å·¥ä½œç®¡ç†ï¼ˆjob controllerï¼‰ã€è¿›ç¨‹ç®¡ç†)ã€‚å…¨ä¹¦778é¡µï¼Œåªé€‰ä¿®äº†éƒ¨åˆ†ç« èŠ‚ï¼Œï¼Œå—¯ï¼Œä¸€è¾¹å­¦ä¸€è¾¹å¿˜ï¼Œä¸€è¾¹å¿˜ä¸€è¾¹å­¦ã€‚ã€‚ ä¹°äº† Linux æœåŠ¡å™¨ï¼Œä¸»è¦ç”¨æ¥éƒ¨ç½²è‡ªå·±åšçš„å°ç¨‹åºæœåŠ¡ç«¯å’Œlinuxç›¸å…³çš„æŠ€æœ¯éªŒè¯ç»ƒä¹ (Tomcat MySql Redis Nginx https)ï¼›é¡ºä¾¿æ­äº†æ¢¯å­ã€‚ ç²—è¯»ä¸€éã€ç å†œç¿»èº«ã€ï¼Œç¬¬äºŒéæ­£åœ¨ç²¾è¯»ä¸­.. ä¸ºäº†ç¼“è§£ç„¦è™‘ï¼Œæ­£åœ¨æŠ„ã€é£é¸Ÿé›†ã€ï¼Œç›®å‰æŠ„åˆ°äº†ç¬¬122é¦–ã€‚ å»–é›ªå³°è€å¸ˆçš„ Python æ•™ç¨‹å‰10ç« æ–­æ–­ç»­ç»­çœ‹äº†3éï¼Œï¼Œå› ä¸ºå·¥ä½œä¸­ç”¨ä¸åˆ°ï¼ŒçœŸæ˜¯ä¸€è¾¹å­¦ä¸€è¾¹å¿˜ã€‚ã€‚12æœˆåˆï¼Œç”¨ Python çš„å¼€æºæ¡†æ¶ Scrapy å†™äº†è¶…å¸‚å•†å“å›¾ç‰‡çˆ¬è™«ï¼Œæ„Ÿè§‰è¿˜ä¸é”™~å—¯ï¼Œç°åœ¨æ­£åœ¨å­¦ç¬¬å››éã€‚ã€‚ å­¦ä¼šäº†æ‹’ç»ï¼Œå­¦ä¼šäº†ç‹¬å¤„ã€‚(å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œï¼ŒæœŸé—´ä¹Ÿè¯»äº†å…¶ä»–ä¹¦ï¼Œæš‚æ—¶æ²¡æœ‰è¯»ç¬¬äºŒéçš„å…´è¶£ï¼Œç•¥è¿‡ä¸è¡¨ã€‚) æ˜å¹´å‡†å¤‡å­¦å•¥ï¼Ÿäº‰å–åœ¨4æœˆä»½å‰è¯»å®Œã€æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€å’Œã€Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€ï¼Œç„¶åå†è¯»ä¸€éã€Javaç¼–ç¨‹æ€æƒ³ã€ï¼Œï¼ŒæŠŠå‰©ä¸‹çš„ã€äººç±»ç®€å²ã€å’Œã€å®‡å®™ç®€å²ã€æ”¶ä¸ªå°¾ã€‚ã€‚ è¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„æ²¡ï¼Ÿï¼Ÿ ä¸ä¼šçš„ä¸œè¥¿è¶Šæ¥è¶Šå¤šï¼Œæˆ‘å¯èƒ½ä¼šä¸€ç›´ç„¦è™‘ä¸‹å»ã€‚ã€‚ è®¨å¥½è‡ªå·±æ€»å½’æ˜¯æœ€å®¹æ˜“çš„ æ²¡é‚£ä¹ˆå–œæ¬¢è€ç½—äº†ï¼Œå¯¹ä»–çš„æœŸå¾…åªå‰©ä¸‹è‡ªä¼ äº†ã€‚ Talk is cheap, show me your code phone. ä»¥å‰æ€»ç›¼ç€æ¥ç§æ´»å„¿ï¼Œç°åœ¨å®Œå…¨æ²¡è¿™ç§æ„Ÿè§‰äº†ã€‚ä¸ªäººé¡¹ç›®ä¸€èˆ¬ä»·æ ¼æ•æ„Ÿï¼›å…¬å¸é¡¹ç›®ä¸€èˆ¬æœ‰å‘ï¼Œå¤§æ¦‚ç‡èƒŒé”…ã€‚è€Œä¸”ï¼Œæ¥ç§æ´»å„¿æ˜¯å¯¹å…«å°æ—¶å·¥ä½œåˆ¶çš„ä¸¥é‡äºµæ¸ï¼æœ‰æ—¶é—´å¤šçœ‹ä¼šå„¿ä¹¦ï¼Œç‚¹ç‚¹æŠ€èƒ½æ ‘å¤šå¥½~ åšæŒçœ‹äººæ°‘æ—¥æŠ¥ã€‚]]></content>
      <categories>
        <category>ProustQA</category>
      </categories>
      <tags>
        <tag>æ™®é²æ–¯ç‰¹é—®å·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018å¹´11æœˆç¬¬ä¸‰å‘¨]]></title>
    <url>%2F2018%2F11%2F20%2F2018_11_week_3rd%2F</url>
    <content type="text"><![CDATA[shadowssocksæ—¥å¿—çº§åˆ«é…ç½®Contextè¿™ä¸ªï¼Œï¼Œé—²å¾—æ— èŠï¼Œçœ‹äº†çœ‹shadowsocks.logæ–‡ä»¶ğŸ‘‡123456# æ±Ÿæ¹–é™©æ¶å•Šï¼Œï¼Œè¯·æ±‚IPåœ°å€å¤„ç†äº†ä¸‹ä¸‹ã€‚2018-11-20 07:45:21 INFO connecting mtalk.google.com:5228 from 1*4.2*6.2*0.10:423732018-11-20 07:46:21 INFO connecting mtalk.google.com:5228 from 1*4.2*6.2*0.10:423762018-11-20 07:46:39 INFO connecting notifications.google.com:443 from 1*4.2*6.2*0.10:423772018-11-20 07:47:22 INFO connecting mtalk.google.com:5228 from 1*4.2*6.2*0.10:422392018-11-20 07:47:58 INFO connecting clients4.google.com:443 from 1*4.2*6.2*0.10:42346 æ—¥å¿—ä¿¡æ¯ä¸­æ²¡å•¥ç‰¹åˆ«æœ‰ç”¨çš„ä¿¡æ¯ï¼Œï¼Œå…³é”®æ˜¯è¿™ä¹ˆé•¿æ—¶é—´äº†ï¼Œæ—¥å¿—æ–‡ä»¶å·²ç»å¾ˆå¤§äº†ğŸ‘‡12[root@host ~]# ls -lh /var/log/shadowsocks.log-rw-r--r-- 1 root root 56M Nov 20 08:21 /var/log/shadowsocks.log å·²ç„¶55Mäº†ï¼Œæ—¢ç„¶ç›®å‰æ²¡æœ‰æ—¶é—´ç²¾åŠ›å»æè¾“å‡ºæ›´è¯¦ç»†çš„æ—¥å¿—ï¼Œï¼Œé‚£ä¹ˆåªå¥½æƒ³åŠæ³•æŠŠè¿™äº›æ—¥å¿—ä¿¡æ¯è¦ä¹ˆæŒ‰æ—¥æœŸæ—¶é—´åˆ†å‰²ä¸‹ï¼Œè¦ä¹ˆæé«˜ä¸‹æ—¥å¿—è¾“å‡ºçº§åˆ«(æ­£å¸¸è¯·æ±‚ä¿¡æ¯ä¸è¾“å‡ºï¼Œåªè¾“å‡ºWARNçº§åˆ«ä»¥ä¸Šçš„ä¿¡æ¯)ã€‚ å¼€æå¾ˆç”¨åŠ›åœ°ç¿»äº†æ–‡æ¡£ï¼Œæ²¡æ‰¾åˆ°ä»€ä¹ˆå…³äºæ—¥å¿—çš„ä¿¡æ¯ã€‚åªçŸ¥é“æ—¥å¿—æ–‡ä»¶åœ¨/var/log/shadowsocks.logï¼Œç„¶å¹¶åµã€‚åªå¥½è‡ªå·±åŠ¨æ‰‹ç¿»æºç äº†ï¼Œå¥½å¯æ€•ã€‚ã€‚ã€‚ è¿™ä¸ªPythonï¼Œï¼Œé›¶é›¶æ˜Ÿæ˜Ÿç¿»è¿‡ä¸¤éï¼Œåœ¨å»–é›ªå³°çš„åšå®¢ç½‘ç«™ä¸Šï¼Œå¹¶æ²¡æœ‰å®é™…æ·±å…¥å»äº†è§£ï¼Œæ›´åˆ«è¯´åšé¡¹ç›®äº†(å…³é”®æ˜¯å·¥ä½œä¸­æš‚æ—¶ç”¨ä¸åˆ°..)ï¼Œæœ‰ç‚¹æ€‚ã€‚æ‰“å¼€é¡¹ç›®ä¹‹åï¼Œå¹¶ä¸çŸ¥é“ä»å“ªå„¿å¼€å§‹çœ‹â€¦ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢å…³é”®å­—ä¿¡æ¯å•Šï¼Œå“ˆå“ˆâ€¦ç¬‘å¾—ä¸€ç‚¹åº•æ°”éƒ½æ²¡æœ‰â€¦ç›´æ¥æœã€/var/log/shadowsocks.logã€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨â¨shadowsocks-2.8.2â©/â¨shadowsocksâ©/shell.pyæ–‡ä»¶ä¸­ğŸ‘‡12345678910111213141516171819# æ—¥å¿—æ–‡ä»¶é…ç½®è·¯å¾„ R224config['log-file'] = config.get('log-file', '/var/log/shadowsocks.log')## configï¼Ÿéš¾é“æ˜¯æˆ‘æƒ³çš„é‚£ç§configä¹ˆï¼Ÿï¼Ÿï¼Ÿç»§ç»­å¾€ä¸‹çœ‹ R245logging.getLogger('').handlers = [] logging.addLevelName(VERBOSE_LEVEL, 'VERBOSE') if config['verbose'] &gt;= 2: level = VERBOSE_LEVEL elif config['verbose'] == 1: level = logging.DEBUG elif config['verbose'] == -1: level = logging.WARN elif config['verbose'] &lt;= -2: level = logging.ERROR else: level = logging.INFO verbose = config['verbose'] logging.basicConfig(level=level, format='%(asctime)s %(levelname)-8s %(message)s', datefmt='%Y-%m-%d %H:%M:%S')## çœ‹åˆ°è¿™å„¿å¥½åƒé—®é¢˜è§£å†³äº†ã€‚ã€‚ åŸæ¥é…ç½®æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ verbose æ¥è®¾ç½®æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼Œç»“åˆè„šæœ¬ä»£ç å’Œæ—¥å¿—ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤çº§åˆ«ä¸º INFOï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦åœ¨/etc/shadowsocks.confä¸­æ·»åŠ &quot;verbose&quot;: -1å°±å¯å°†æ—¥å¿—çº§åˆ«æå‡è‡³WARNäº†~åˆ«å¿˜äº†é‡å¯æœåŠ¡å™¢1234[root@host ~]# ssserver -c /etc/shadowsocks.json -d restartINFO: loading config from /etc/shadowsocks.jsonstoppedstarted äº²æµ‹æœ‰æ•ˆ~ä½†æ˜¯ï¼WARNINGæ—¥å¿—ä¹Ÿå¾ˆå¤šï¼Œï¼Œæ— å¥ˆç›´æ¥æ”¹æˆäº†&quot;verbose&quot;:-2ã€‚å…³äºå…¶ä»–é…ç½®ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥é˜…ä¸‹shell.pyæ–‡ä»¶ä¸­çš„configå¯¹è±¡çš„å…·ä½“ä¿¡æ¯ã€‚ å¦å¤–æ—¥å¿—è¾“å‡ºä¿¡æ¯æ˜¯åœ¨â¨shadowsocks-2.8.2â©/shadowsocksâ©/tcprelay.pyæ–‡ä»¶ä¸­12# R293logging.info('connecting %s:%d from %s:%d' %(common.to_str(remote_addr), remote_port, self._client_address[0], self._client_address[1])) çœ‹æ ·å­æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—å…·ä½“è¾“å‡ºå“ªäº›å†…å®¹çš„ï¼Œï¼Œå¯¹pythonæ¯”è¾ƒäº†è§£çš„åŒå­¦å¯ä»¥å°è¯•ä¿®æ”¹ä¸‹ï¼Œå¯ä»¥è¯•ç€æ·»åŠ ä¸Šè¯·æ±‚ç”¨æˆ·çš„ä¿¡æ¯~ å¾®ä¿¡é˜²ç›—é“¾Contextå¾®ä¿¡å…¬ä¼—å·ä½¿ç”¨å¼€å‘æ¨¡å¼åï¼Œéƒ¨åˆ†åŠŸèƒ½å°±åªèƒ½ä½¿ç”¨APIæ¥å£å»å®ç°äº†ï¼Œï¼Œæ¯”å¦‚ã€è‡ªå®šä¹‰èœå•ã€åŠŸèƒ½ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦åœ¨åå°å®ç°ç±»å…¬ä¼—å·åå°çš„è‡ªå®šä¹‰èœå•åŠŸèƒ½ã€‚è¿™å…¶ä¸­å°±ä¼šæ¶‰åŠåˆ°ç´ æå¼•ç”¨çš„é—®é¢˜ï¼Œï¼Œå€˜è‹¥ç›´æ¥åœ¨è‡ªå·±æœåŠ¡å™¨ä¸­çš„åå°ä¸­å¼•ç”¨ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹å›¾ç‰‡ğŸ‘‡ ä½†å¦‚æœç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥å›¾ç‰‡åœ°å€å°±å¯ä»¥æ­£å¸¸è®¿é—®ã€‚åæ¥å¾—çŸ¥æ˜¯referrerPolicyåœ¨ä½œæ€ªã€‚ metaæ ‡ç­¾æˆ‘ä»¬éœ€è¦åšçš„æ˜¯åœ¨è¯·æ±‚å›¾ç‰‡èµ„æºçš„æ—¶å€™éšè—è‡ªå·±çš„referrerï¼Œé¿å…è…¾è®¯è¯†åˆ«å‡ºæˆ‘ä»¬çš„æœåŠ¡å™¨ä¸æ˜¯è‡ªå·±äººã€‚å…·ä½“åšæ³•æ˜¯æ·»åŠ metaæ ‡ç­¾(è¯¦ç»†ä¿¡æ¯å‚è€ƒMDN-Referrer-Policy)ğŸ‘‡12# contentå€¼ä¹Ÿå¯ä»¥æ˜¯no-referrer&lt;meta name="referrer" content="same-origin"&gt; å€˜è‹¥ï¼Œï¼Œå¼•ç”¨çš„å›¾ç‰‡æ˜¯é€šè¿‡CSSä¸­background-colorå¼•ç”¨çš„ï¼Œé‚£å°±æ‚²å‚¬äº†ã€‚ã€‚æƒ³åŠæ³•å°†divå…ƒç´ è½¬ä¸ºimgå…ƒç´ ï¼Œé€šè¿‡srcå±æ€§å¼•ç”¨å›¾ç‰‡ï¼Œè¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ img.referrerPolicyå¦‚æœä¸æƒ³ç”¨metaæ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥åœ¨imgå…ƒç´ ä¸­æ·»åŠ referrerPolicyå±æ€§ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸å¼•ç”¨(è¯¦è§HTMLImageElement-referrerPolicy)ã€‚å¦‚æœæ— æ•ˆï¼Œè¯·å°è¯•æ¸…ç©ºç¼“å­˜ä¹‹åé‡æ–°è¯·æ±‚ï¼Œäº²æµ‹æœ‰æ•ˆ~ link.referrerpolicyå¦‚æœæ˜¯å¼•ç”¨å¤–éƒ¨æ ·å¼ï¼Œï¼Œå¯ä»¥åœ¨linkæ ‡ç­¾ä¸­æ·»åŠ referrerpolicyå±æ€§ï¼Œï¼Œè¯¦è§Element-linkã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œï¼Œimg.referrerPolicyå’Œlink.referrerpolicyå±äºå®éªŒåŠŸèƒ½ï¼Œä½¿ç”¨å‰åŠ¡å¿…æ£€æŸ¥è‡ªå·±çš„æµè§ˆæ˜¯å¦æ”¯æŒï¼å¦å¤–ï¼Œï¼Œä¸èƒ½é€šè¿‡ducument.referrer=&#39;no-referrer&#39;å»ä¿®æ”¹ï¼Œå› ä¸ºducument.referreræ˜¯åªè¯»å±æ€§..è¯¦è§ducument.referrer å…¶ä»–text-overflowæ ·å¼ç”¨æ¥æ§åˆ¶æ–‡å­—æº¢å‡ºç›’å­ä¹‹åçš„å¤„ç†é€»è¾‘ï¼Œï¼Œå€¼ä¸ºclipï¼Œåˆ™ç›´æ¥è£åˆ‡(å³éšè—)å€¼ä¸ºellipsisï¼Œåˆ™æ˜¾ç¤ºæº¢å‡ºçœç•¥æ ‡è®°â€¦ white-space: nowrap æ–‡æœ¬ä¸æ¢è¡Œ word-wrapç”¨æ¥æ§åˆ¶æ–‡æœ¬è¶…å‡ºå…ƒç´ è¾¹ç•Œåçš„å¯¹è‹±æ–‡å•è¯æ¢è¡Œçš„å¤„ç†é€»è¾‘ï¼Œé€‚ç”¨äºå—å…ƒç´ ï¼Œè¡Œå…ƒç´ éœ€è®¾ç½®widthã€heightã€‚å€¼ä¸ºbreak-wordï¼Œåˆ™ä»¥å•è¯ä¸ºå•ä½æ¢è¡Œï¼›å€¼ä¸ºbreak-allï¼Œåˆ™ä»¥å­—æ¯ä¸ºå•ä½æ¢è¡Œã€‚]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>shadowscoks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº nginx æ—¥å¿—åˆ†æ]]></title>
    <url>%2F2018%2F11%2F10%2Fabout_nginx_log_analyse%2F</url>
    <content type="text"><![CDATA[Contextè¿™æ¬¡æ˜¯è‡ªå·±çš„éœ€æ±‚ï¼Œåˆšå¥½å‘¨å…­ï¼Œé—²æ¥æ— äº‹æ¥å…¬å¸åŠ ç­ï¼Œå¥½å¥½æ€»ç»“ä¸‹ã€‚ è‡ªå·±åšäº†ä¸ªå°ç¨‹åºï¼Œç”¨æ¥æ”¶é›†å¹³æ—¶çš„ä½ç½®ä¿¡æ¯ï¼Œè¿˜æœ‰å¾®ä¿¡æ­¥æ•°ä»€ä¹ˆçš„ï¼Œç§Ÿçš„å›½å¤–çš„æœåŠ¡å™¨ï¼Œï¼Œç¿»å¢™å’Œéƒ¨ç½²é¡¹ç›®ä¸¤ä¸è¯¯ï¼Œé¡ºä¾¿åšåšlinuxçš„ç»ƒä¹ ï¼Œå®Œç¾~ åœ¨åˆæœŸï¼Œéƒ¨ç½²é¡¹ç›®ä»¥åŠä¸€äº›é™æ€èµ„æºæ—¶ï¼Œç»å¸¸404ï¼Œè‚¯å®šnginxå“ªé‡Œé…ç½®é”™äº†ï¼Œï¼Œç›´æ¥åœ¨linuxæœåŠ¡å™¨ä¸Šç”¨å‘½ä»¤è¡Œç¿»æ—¥å¿—åˆå¾ˆéº»çƒ¦ï¼Œsshè¿˜æ€»æ–­(æ‰¶é¢)ã€‚æŠŠnginxæ—¥å¿—æ–‡ä»¶å½“é™æ€èµ„æºè®¿é—®å¥½å•¦ï¼Œè¿™æ ·ç›´æ¥åœ¨æµè§ˆå™¨å°±å¯ä»¥è®¿é—®ï¼Œå®Œç¾~è¿™ä¸€æ­¥å¹¶ä¸éš¾ï¼Œå¥½å¥½é…ç½®nginx.confä¸­çš„locationå±æ€§å°±å¥½ï¼Œç•¥è¿‡ä¸è¡¨ã€‚ ä½†æˆ‘æ‹…å¿ƒçš„æ˜¯è®¿é—®è·¯å¾„æš´éœ²äº†æ€ä¹ˆåŠã€‚ã€‚æœ‰å¿…è¦åŠ ä¸ŠåŸºç¡€çš„è®¿é—®é™åˆ¶ï¼ŒéªŒè¯ç”¨æˆ·åå¯†ç ä»€ä¹ˆçš„ã€‚è¿˜è¦è‡ªå·±å†™ä¸ªé¡µé¢ï¼Ÿåœ¨æ•°æ®åº“é…ç½®ç”¨æˆ·åå¯†ç ï¼Ÿå¤ªä¸ä¼˜é›…äº†ã€‚è¿˜å¥½æœ‰nginxçš„auth_basicæ¨¡å—ï¼Œå®Œç¾è§£å†³é—®é¢˜~ è¿™ä¹‹åï¼Œæœ‰ä¸€æ¬¡é—²æ¥æ²¡äº‹ï¼Œç¿»ç¿»nginxæ—¥å¿—ï¼Œï¼Œå‘¦ï¼Œè¢«å“ä¸€è·³ï¼ğŸ‘‡12345678910&#123;"timestamp":"2018-11-09T19:58:25-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":195,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/dbadmin/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:26-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":202,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/web/phpMyAdmin/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:26-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":197,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/pma/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:26-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":197,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/PMA/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:26-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":199,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/mysql/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:26-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":200,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/mysql2/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:27-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":204,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/phpmyadmin/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:27-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":204,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/phpMyAdmin/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:27-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":205,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/admin/phpmyadmin2/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125;&#123;"timestamp":"2018-11-09T19:58:27-05:00","host":"66.98.120.58","client":"180.180.243.223","size":162,"requestlengh":198,"requesttime":0.000,"responsetime":"-","domain":"66.98.120.58","url":"/mysqladmin/index.php","referer":"-","agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0","status":"404","x_forwarded_for":"-"&#125; ğŸ‘†ä»¥ä¸Šæ˜¯ä»Šå¤©nginxæ—¥å¿—ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œï¼Œè°¢è°¢æ¥è‡ªIP180.180.243.223(æ³°å›½)æœ‹å‹çš„é—®å€™ï¼Œï¼Œå—¯ï¼Œè®¿é—®çš„è·¯å¾„éƒ½æ˜¯/mysqladmin/index.phpã€/admin/mysql/index.phpã€/admin/PMA/index.phpä»€ä¹ˆçš„ï¼Œå¤ªæš´åŠ›äº†ï¼ï¼æˆ‘è¿˜æ˜¯ä¸ªå­©å­å‘€ã€‚ã€‚å•¥éƒ½åˆ«è¯´äº†ï¼Œnginxå¿…é¡»é…ç½®åŠ¨æ€é»‘åå•ï¼ basic_authç›´æ¥çœ‹nginxå®˜æ–¹æ–‡æ¡£å°±å¥½ngx_http_auth_basic_moduleï¼Œæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œæ¯”è¾ƒç®€å•ï¼Œï¼Œä¹Ÿæ˜¯ç•¥è¿‡ä¸è¡¨ã€‚123456# å…³äºé…ç½®è®¿é—®ç”¨æˆ·åå’Œå¯†ç ï¼Œï¼Œ# ç¬¬ä¸€æ¬¡éœ€è¦åˆ›å»ºå¯†ç æ–‡ä»¶ï¼ŒåŠ  -c å‚æ•°htpasswd -c å¯†ç æ–‡ä»¶è·¯å¾„ ç”¨æˆ·å# ç”Ÿæˆå¯†ç æ–‡ä»¶ä¹‹åï¼Œå†æ·»åŠ ç”¨æˆ·åå¯†ç htpasswd å¯†ç æ–‡ä»¶è·¯å¾„ ç”¨æˆ·å æ·»åŠ åŠ¨æ€ipé»‘åå•è¿™ä¸€å—ï¼Œæœ€æ—©æ˜¯æƒ³ç”¨ELKçš„ï¼Œï¼Œç„¶åæœåŠ¡å™¨å´©æºƒäº†ã€‚å—¯ï¼Œ1Gå†…å­˜ï¼Œæ”¾å¼ƒäº†ã€‚è¿˜æ˜¯ç”¨awkå§ï¼Œä¹‹å‰çœ‹åˆ° awk çš„æ—¶å€™ï¼Œå‘½ä»¤é‚£ä¹ˆé•¿ï¼Œçœ‹éƒ½æ²¡çœ‹ç›´æ¥ç•¥è¿‡äº†ã€‚åæ¥æ‹–å¤ªä¹…åˆæ²¡æ‰¾åˆ°å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œç¡¬ç€å¤´çš®ä¸Šå§ï¼Œï¼ŒèŠ±ç‚¹æ—¶é—´è¯»ä¸€è¯»æ–‡æ¡£ï¼Œå…¶å®ä¹Ÿæ²¡å¤ªéš¾(è‡³å°‘å®ç°æœ¬èŠ‚å†…å®¹ä¸ç®—å¤ªéš¾)ã€‚è¿™å„¿ä¸»è¦å‚è€ƒäº† Hjqjkâ€™s Blog-NginxåŠ¨æ€é»‘åå•ï¼Œè¿™ä½ä»å…„çš„åšå®¢çœ‹æ ·å­ä¹Ÿæ˜¯ç”¨çš„HEXOæ¡†æ¶ï¼Œå“ˆå“ˆåŒé“ä¸­äºº~ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œï¼Œå› ä¸ºè¿˜æƒ³è¿‡ç”¨Java IOå°†æ—¥å¿—æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨è¯­å¥åˆ†æè®¿é—®è¡Œä¸ºäº†ï¼Œç”Ÿæˆå›¾è¡¨ä¹Ÿæ–¹ä¾¿ã€‚æƒ³æƒ³ï¼Œå·¥ç¨‹é‡æœ‰ç‚¹å¤§ï¼Œï¼ŒåæœŸæ—¥å¿—æ•°æ®å¯èƒ½æ¯”è¾ƒæ”¶é›†åˆ°çš„ä½ç½®ä¿¡æ¯å’Œå¾®ä¿¡æ­¥æ•°æ•°æ®è¿˜è¦å¤§ï¼Œå—¯æ’æœŸå§å…ˆ(ç¬‘å“­)ã€‚æ‰€ä»¥ï¼Œå°†nginxæ—¥å¿—æ ¼å¼é…ç½®æˆäº†jsonæ ¼å¼ğŸ‘‡12345678910111213141516# json æ ¼å¼é…ç½®log_format logstash_json '&#123;"timestamp":"$time_iso8601",' '"host":"$server_addr",' '"client":"$remote_addr",' '"size":$body_bytes_sent,' '"requestlengh":$request_length,' '"requesttime":$request_time,' '"responsetime":"$upstream_response_time",' '"domain":"$host",' '"url":"$request_uri",' '"referer":"$http_referer",' '"agent":"$http_user_agent",' '"status":"$status",' '"x_forwarded_for":"$http_x_forwarded_for"&#125;';# å¯ç”¨logstash_jsonæ—¥å¿—æ ¼å¼é…ç½®access_log /var/log/nginx/access.log logstash_json; ä»¥ä¸‹æ˜¯æˆ‘ç­›é€‰IPçš„è„šæœ¬ğŸ‘‡12345678910111213141516171819202122232425262728293031323334#!/bin.bash# (æ¯å¤©)å¯¹ç”¨æˆ·çœŸå®ipè®¿é—®é‡åšç»Ÿè®¡ï¼Œç²—ç•¥ç»Ÿè®¡æ¯å¤©å¤§äº20æ¬¡çš„åŠ å…¥ nginx é»‘åå•# @latest_date 2018-11-2# @author Shang# é»‘åå•æ–‡ä»¶conf_path=/pathToBlockips/blockips.conf# nginx æ—¥å¿—æ–‡ä»¶log_path='/pathToAccessLog/access.log-'$(date +%Y%m%d)# nginx å‘½ä»¤ç»å¯¹è·¯å¾„nginx_command=/usr/sbin/nginx# è¿‡æ»¤æ‰æ­£å¸¸çš„èœ˜è››è®¿é—® grep -i -v -E $&#123;spider&#125;|# spider="Google|Baidu|msnbot|FeedSky|Sogou|360|bing|yahoo"# å› ä¸ºæˆ‘çš„nginxä½¿ç”¨yumå®‰è£…çš„ï¼Œä¼šè‡ªåŠ¨æŒ‰æ—¥æœŸåˆ‡å‰²æ—¥å¿—ï¼Œæ–‡ä»¶ä¹Ÿä¸å¤§ï¼Œæ‰€ä»¥ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å…¥æ—¥å¿—æ–‡ä»¶cat $&#123;log_path&#125;| \# æŒ‡å®š','ä¸ºåˆ†å‰²ç¬¦(è®¤æŒ‰ç©ºæ ¼åˆ†å‰²)ï¼Œè¾“å‡ºç¬¬ä¸‰ä¸ªfieldï¼Œå³ "client":"180.180.243.223"awk -F'[,]' '&#123;print $3&#125;' | \# æŒ‡å®š':'ä¸ºåˆ†å‰²ç¬¦ï¼Œå°†ç¬¬äºŒä¸ªfield(å³"180.180.243.223")å»æ‰é¦–å°¾'"'åè¾“å‡ºawk -F: '&#123;print substr($2,2,length($2)-2)&#125;'| \# è®¡æ•°ï¼Œç±»SQLä¸­çš„count(ip) group by ipuniq -c| \# å€’å™æ’åˆ—ï¼Œç±»SQLä¸­çš„order by count(ip) descsort -rn| \# å¦‚æœè®¡æ•°å¤§äº20æ¬¡ï¼Œä»¥apeendçš„æ–¹å¼æ·»åŠ åˆ°ipé»‘åå•æ–‡ä»¶ä¸­awk '&#123; if($1 &gt; 20) print "deny "$2 ";"&#125;' &gt;&gt; $&#123;conf_path&#125;# æ£€æŸ¥nginx.confæ˜¯å¦æ­£ç¡®$&#123;nginx_command&#125; -tif [ $? -eq 0 ]then # å¦‚æœè¿”å›ç»“æœæ­£å¸¸ï¼Œåˆ™é‡æ–°è½½å…¥nginx.confæ–‡ä»¶ $&#123;nginx_command&#125; -s reloadfi åˆ›å»ºå¥½è¯¥è„šæœ¬(auto_add_nginx_blockips.sh)ï¼Œï¼Œè®°å¾—èµ‹äºˆå®ƒå¯æ‰§è¡Œçš„æƒé™ï¼Œï¼Œ123456789101112# æ·»åŠ  x æƒé™chmod u=rwx pathToAuto_add_nginx_blockips.sh# æµ‹è¯•ä¸‹å…ˆ./auto_add_nginx_blockips.sh# å¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œå°±å¯ä»¥æ·»åŠ å®šæ—¶ä»»åŠ¡äº†~# ç¼–è¾‘å½“å‰ç”¨æˆ·ä¸‹çš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶crontab -e# ç„¶åæ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©23:50æ‰§è¡Œè„šæœ¬(é¡ºä¾¿å°†æ­£å¸¸æ‰§è¡Œä¹‹åçš„è¾“å‡ºå†…å®¹é‡å®šå‘åˆ°'æ— åº•æ´'ä¸­ï¼Œå¦åˆ™æ¯å¤©ä¸€å°é‚®ä»¶ï¼Œå—ä¸é¸Ÿ..)50 23 * * * /bin/sh /path/to/auto_add_nginx_blockips.sh 1&gt;/dev/null# :wqåä¼šè‡ªåŠ¨ä¿å­˜åˆ°`/var/spool/cron/$user`ä¸­ åˆšå¼€å§‹ï¼Œåˆ¶å®šçš„æ‰§è¡Œè®¡åˆ’å¹¶ä¸æ˜¯åœ¨23:50ï¼Œï¼Œå”‰ï¼Œéƒ½æ˜¯å› ä¸ºè‡ªåŠ¨åˆ‡å‰²æ—¥å¿—ï¼Œåˆ‡å‰²ä¹Ÿå°±ç®—äº†ï¼Œå…³é”®è¿˜æœ‰å‹ç¼©æˆ.gzæ–‡ä»¶ï¼Œè¿™æ ·è„šæœ¬çš„å¤æ‚åº¦å°±ä¸Šå‡äº†ï¼Œåˆä¸€ç›´æä¸æ˜ç™½logrotateä»€ä¹ˆæ—¶å€™æ‰§è¡Œåˆ‡å‰²ä»»åŠ¡ï¼Œï¼Œè´¹è§£ã€‚æ‰€ä»¥ï¼Œæœ€åˆä¸€ç›´blockips.confä¸€ç›´æ²¡ååº”ï¼Œåæ¥å¼€å§‹æŸ¥/var/log/cronï¼Œå‘ç°ä»»åŠ¡ä¹Ÿæ‰§è¡Œäº†ğŸ‘‡1234567Nov 9 23:01:01 host run-parts(/etc/cron.hourly)[6988]: starting 0anacronNov 9 23:01:01 host run-parts(/etc/cron.hourly)[6997]: finished 0anacron## auto_add_nginx_blockips è„šæœ¬å·²æ‰§è¡ŒNov 9 23:50:01 host CROND[9407]: (root) CMD (/bin/sh /etc/nginx/conf.d/auto_add_nginx_blockips.sh)Nov 10 00:01:02 host CROND[9975]: (root) CMD (run-parts /etc/cron.hourly)Nov 10 00:01:02 host run-parts(/etc/cron.hourly)[9975]: starting 0anacron... åæ¥ä¹Ÿä¸è®°å¾—åœ¨å“ªçœ‹åˆ°çš„ï¼Œå¦‚æœå®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„æ‰§è¡Œæƒ…å†µï¼Œä¼šå‘é€åˆ°mailï¼Œï¼Œå¯ä»¥å»/var/spool/mail/å½“å‰ç”¨æˆ·åä¸­æŸ¥çœ‹ğŸ‘‡123456789101112131415161718192021222324252627From root@host.localdomain Tue Nov 6 01:30:02 2018Return-Path: &lt;root@host.localdomain&gt;X-Original-To: rootDelivered-To: root@host.localdomainReceived: by host.localdomain (Postfix, from userid 0) id 0CF4D4E1C; Tue, 6 Nov 2018 01:30:02 -0500 (EST)From: "(Cron Daemon)" &lt;root@host.localdomain&gt;To: root@host.localdomainSubject: Cron &lt;root@host&gt; /bin/sh /etc/nginx/conf.d/auto_add_nginx_blockips.shContent-Type: text/plain; charset=UTF-8Auto-Submitted: auto-generatedPrecedence: bulkX-Cron-Env: &lt;XDG_SESSION_ID=567&gt;X-Cron-Env: &lt;XDG_RUNTIME_DIR=/run/user/0&gt;X-Cron-Env: &lt;LANG=en_US.UTF-8&gt;X-Cron-Env: &lt;SHELL=/bin/sh&gt;X-Cron-Env: &lt;HOME=/root&gt;X-Cron-Env: &lt;PATH=/usr/bin:/bin&gt;X-Cron-Env: &lt;LOGNAME=root&gt;X-Cron-Env: &lt;USER=root&gt;Message-Id: &lt;20181106063002.0CF4D4E1C@host.localdomain&gt;Date: Tue, 6 Nov 2018 01:30:02 -0500 (EST)# æ—¥å¿—æ–‡ä»¶è·¯å¾„å‡ºé—®é¢˜äº†ï¼Œï¼Œä¼°è®¡æ˜¯å·²ç»å‹ç¼©æˆ.gzæ–‡ä»¶äº†ã€‚ã€‚cat: /var/log/nginx/access.log-20181106: No such file or directorynginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful å¦‚æœä½ ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•å»mailä¸­æ‰¾æ‰¾çº¿ç´¢~ Doneï¼]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºå¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™]]></title>
    <url>%2F2018%2F10%2F30%2FAbout_WeChat_Open_account_manage_auth%2F</url>
    <content type="text"><![CDATA[Contextæœ€è¿‘åœ¨ä¸ºå®¢æˆ·éƒ¨ç½²å°ç¨‹åºæ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé€šè¿‡æ—¥å¿—å®šä½åˆ°é—®é¢˜æ˜¯ï¼Œï¼Œæ²¡æœ‰è·å–åˆ°å°ç¨‹åºç”¨æˆ·çš„UnionIDï¼Œå¯¼è‡´æ— æ³•å¯¹å°ç¨‹åºç”¨æˆ·å’Œå¡åŒ…(å…¬ä¼—å·)ç”¨æˆ·å½¢æˆæœ‰æ•ˆçš„æ˜ å°„ï¼Œbulabulaâ€¦æ€»ä¹‹ï¼Œç¿»åˆ°æ—¥å¿—æ‰æƒ³èµ·æ¥ï¼Œåº”è¯¥é€šè¿‡å¾®ä¿¡æä¾›çš„æ¥å£åˆ›å»ºå¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œç„¶åç»‘å®šå¦ä¸€ä¸ªappidå³å¯ã€‚ æƒ³æƒ³ä¹Ÿæ²¡å•¥ï¼Œä¹‹å‰ä¹Ÿä¸ºå…¶ä»–å®¢æˆ·éƒ¨ç½²è¿‡ï¼Œæ— éæ˜¯è°ƒç”¨ä¸¤æ¬¡æ¥å£ï¼šä¸€æ¬¡åˆ›å»ºï¼Œä¸€æ¬¡ç»‘å®šï¼Œï¼Œé½æ´»~ BUTï¼ï¼ï¼ä½†ï¼ï¼ï¼è¿™æ¬¡æçš„æ ¼å¤–è‰°è¾›ï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¸€ç›´è¿”å›1234&#123; "errcode":40013, "errmsg":"invalid appid hint: [iAEcfA03241959]"&#125; æ—¥ç‹—ï¼ŒçœŸå¿ƒæ—¥ç‹—ï¼ç¡®å®šä¸€å®šä»¥åŠè‚¯å®šï¼Œä¸¤ä¸ªappidéƒ½æ²¡é—®é¢˜ï¼Œï¼Œå› ä¸ºé€šè¿‡åˆ›å»º å¼€æ”¾å¹³å°å¸å·å¹¶ç»‘å®šå…¬ä¼—å·/å°ç¨‹åºæ¥å£ï¼Œä¸¤ä¸ªappidéƒ½å¯ä»¥åˆ›å»ºå¼€æ”¾å¹³å°ã€‚æåˆ°è¿™å„¿ä¹Ÿæƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œï¼Œ æˆ‘æƒ³é€šè¿‡æ¥å£ï¼ŒæŠŠå®¢æˆ·çš„å°ç¨‹åºå’Œå…¬ä¼—å·ç»‘åœ¨åŒä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œï¼Œæ— ç–‘ï¼Œå°ç¨‹åºè‚¯å®šæ˜¯æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°çš„ã€‚å€˜è‹¥ï¼Œæˆ‘ç”¨å°ç¨‹åºçš„appidï¼Œåˆ›å»ºå¼€æ”¾å¹³å°ï¼Œç„¶åå°†å…¬ä¼—å·çš„appidç»‘åˆ°å°ç¨‹åºåˆ›å»ºçš„å¼€æ”¾å¹³å°ä¸Šã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œï¼Œå…¬ä¼—å·éœ€è¦å°†å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°ä¹ˆï¼Ÿï¼Ÿï¼Ÿ ä¸ºäº†èµ¶ç´§ç»‘å®šæˆåŠŸå…ˆï¼Œæš‚æ—¶å°†å…¬ä¼—å·çš„å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°äº†ã€‚ Succeedï¼Ÿï¼Ÿæˆ‘ç–¯äº†ï¼ŒæˆåŠŸç–¯äº†ã€‚ã€‚æœ€åæ‰¾ä¹‹å‰æ²¡æ¥è§¦è¿‡è¿™å—å„¿çš„åŒäº‹ä»é˜…è¯»æ–‡æ¡£å¼€å§‹ï¼Œæ…¢æ…¢reviewä»£ç ã€‚åˆšå¼€å§‹ä¹Ÿæ˜¯ä¸è¡Œï¼Œï¼Œåæ¥ä»–è¦é™é™ï¼Œç„¶åé—·å¤´æã€‚â€¦ä¸€ä¼šå„¿ï¼Œï¼Œè¯¶ï¼Ÿæˆ‘å¥½åƒåˆ›å»ºæˆåŠŸäº†ï¼Ÿï¼ ç¨€é‡Œç³Šæ¶‚çš„ åˆ›å»ºæˆåŠŸäº†ï¼Œï¼Œç„¶åæˆ‘è¦æ±‚ä»–å¤ç›˜æ•´ä¸ªæµç¨‹ã€‚ åˆ†åˆ«ç”¨ä¸¤ä¸ªappidéƒ½åˆ›å»ºå¼€æ”¾å¹³å°ï¼› ç„¶ååœ¨å°ç¨‹åºåå°è§£ç»‘å¼€æ”¾å¹³å°ï¼› é€šè¿‡æ¥å£å°†å°ç¨‹åºçš„appidç»‘å®šåˆ°å…¬ä¼—å·åˆ›å»ºçš„å¼€æ”¾å¹³å°è´¦å·ä¸Šã€‚ å‰ä¸¤æ­¥éƒ½æ²¡å•¥ï¼Œä½†æ˜¯ç¬¬ä¸‰æ­¥ï¼æˆ‘åœ¨è°ƒç”¨æ¥å£çš„åœ°å€ä¸Šå‘ç°ç‚¹ç«¯å€ªï¼Œè·Ÿæˆ‘ä¹‹å‰è°ƒç”¨æ—¶å†™çš„ä¸ä¸€æ ·ï¼Œç„¶åå°±æé†’ä»–è¿™å„¿åº”è¯¥å†™å…¬ä¼—å·çš„appidï¼Œè€Œä¸æ˜¯å°ç¨‹åºçš„ã€‚ä»–çªç„¶ä¹Ÿæƒ³åˆ°äº†äº›ä»€ä¹ˆï¼Œå¾ˆè‚¯å®šçš„è¯´ï¼Œä¸Šæ¬¡ç»‘å®šæˆåŠŸçš„æ—¶å€™å°±æ˜¯è¿™æ ·å†™çš„ï¼ ç»ˆäºæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œï¼ŒéªŒè¯ï¼ŒæˆåŠŸï¼ï¼ï¼åœ¨è¿™å„¿è¯¦ç»†å¤ç›˜ä¸‹ï¼Œç»™å¤§å®¶ä¼™å„¿åšä¸ªå‚è€ƒï¼Œï¼Œ æˆ‘å°†æ–‡æ¡£ä¸­å°† å…¬ä¼—å·/å°ç¨‹åºç»‘å®šåˆ°å¼€æ”¾å¹³å°å¸å·ä¸‹çš„æ¥å£å°è£…æˆæˆ‘ä»¬è‡ªå·±çš„æ¥å£ï¼Œï¼Œä¼ªä»£ç å¦‚ä¸‹ğŸ‘‡1234567891011/** * å°† å…¬ä¼—å·/å°ç¨‹åºç»‘å®šåˆ°å¼€æ”¾å¹³å°å¸å·ä¸‹ * @Attention è¯¥APIç”¨äºå°†ä¸€ä¸ªå°šæœªç»‘å®šå¼€æ”¾å¹³å°å¸å·çš„å…¬ä¼—å·æˆ–å°ç¨‹åºç»‘å®šè‡³æŒ‡å®šå¼€æ”¾å¹³å°å¸å·ä¸Šã€‚äºŒè€…é¡»ä¸»ä½“ç›¸åŒã€‚ */public void bindOpen() &#123; String appid = getPara("appId"); String open_appid = getPara("open_appid"); String target_appid = getPara("target_appid"); final String BIND_OPEN = "https://api.weixin.qq.com/cgi-bin/open/bind?access_token=" + getAuthorizerAccessToken(appid); String result = HttpUtils.post(BIND_OPEN, Kv.set("appid", target_appid).set("open_appid", open_appid).toJson());&#125; å¤±è´¥ï¼šæˆ‘ä¹‹å‰çš„ç»‘å®šæ–¹å¼ï¼Œï¼Œ é€šè¿‡å°ç¨‹åºappidåˆ›å»ºå¼€æ”¾å¹³å°ï¼› è°ƒç”¨æ¥å£http://IP:Port/path/bindOpen?appId=å°ç¨‹åºAPPID&amp;open_appid=å¼€æ”¾å¹³å°è´¦å·&amp;target_appid=å…¬ä¼—å·APPIDã€‚ ğŸ‘†In a wordï¼Œï¼Œä½¿ç”¨ A åˆ›å»ºå¼€æ”¾å¹³å°ï¼Œç„¶åä½¿ç”¨ A çš„access_tokenç»‘å®š Bã€‚æŠ¥é”™{&quot;errcode&quot;:40013,&quot;errmsg&quot;:&quot;invalid appid hint: [iAEcfA03241959]&quot;} æˆåŠŸï¼šåŒäº‹çš„ç»‘å®šæ–¹å¼ï¼Œï¼Œ ä½¿ç”¨å…¬ä¼—å·çš„appidåˆ›å»ºå¼€æ”¾å¹³å°è´¦å·ï¼› è°ƒç”¨æ¥å£http://IP:Port/path/bindOpen?appId=å°ç¨‹åºAPPID&amp;open_appid=å¼€æ”¾å¹³å°è´¦å·&amp;target_appid=å°ç¨‹åºAPPIDã€‚ ğŸ‘†In a wordï¼Œï¼Œä½¿ç”¨ A åˆ›å»ºå¼€æ”¾å¹³å°ï¼Œç„¶åä½¿ç”¨ B çš„access_tokenç»‘å®š Bã€‚ è‡³æ­¤ï¼Œï¼Œé—®é¢˜è§£å†³ï¼å¦å¤–ï¼Œä¹‹å‰çš„é—®é¢˜ä¹Ÿè¿åˆƒè€Œè§£ï¼šå…¬ä¼—å·å’Œå°ç¨‹åºéƒ½éœ€è¦å°†å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°ã€‚ æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œå½“åˆå°†å°ç¨‹åºå’Œå…¬ä¼—å·çš„æƒé™æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°æ—¶ä¹Ÿæ˜¯è¿™æ ·ï¼Œï¼Œæ ‡çš„ä¸»åŠ¨ç»‘å®šå¹³å°ï¼Œè€Œä¸æ˜¯å¹³å°ä¸»åŠ¨ç»‘å®šæ ‡çš„ã€‚ One more thingå—¯ï¼Œå¸Œæœ›å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ç®¡ç†å®Œæ¡£è¶Šæ¥æœˆå®Œå–„ï¼Œï¼Œæ„å‘³æ·±é•¿çš„å¾®ç¬‘ ğŸ™‚ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºã€è¯¥å…¬ä¼—å·æä¾›çš„æœåŠ¡å‡ºç°æ•…éšœï¼Œè¯·ç¨åå†è¯•ã€]]></title>
    <url>%2F2018%2F10%2F11%2Fmistake_in_Wechat-public-account_passvely_reply_text_message%2F</url>
    <content type="text"><![CDATA[ContextæŒ‰ç…§æƒ¯ä¾‹å…ˆè¯´ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œï¼Œæ˜¯è¿™æ ·ï¼Œï¼Œå…¬å¸éœ€è¦åšä¸ªåŠŸèƒ½: å¯¹ERPç”¨æˆ·å’Œå…¬å¸å…¬ä¼—å·ç”¨æˆ·åšæ˜ å°„ï¼Œç„¶åå‘è¯¥ç”¨æˆ·æ¨é€ç›¸åº”è§’è‰²çš„ç»è¥æ—¥æŠ¥æ¨¡æ¿æ¶ˆæ¯ã€‚ å®ç°æµç¨‹:1.é€šè¿‡å¾®ä¿¡æ¥å£ç”Ÿæˆå¸¦å‚äºŒç»´ç ;2.ç”¨æˆ·ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«åŠŸèƒ½æ‰«æç”Ÿæˆçš„å¸¦å‚äºŒç»´ç ;3.è·å–äºŒç»´ç ä¸­çš„å®¢æˆ·è¯†åˆ«ç å’Œç”¨æˆ·çš„openid;4.è¢«åŠ¨å›å¤ç”¨æˆ·æ–‡æœ¬æ¶ˆæ¯(é™„è¶…é“¾æ¥),å¼•å¯¼ç”¨æˆ·å®Œæˆç»‘å®šè¿‡ç¨‹ã€‚ Tipsæ€»çš„æ¥è¯´æ˜¯æ²¡å•¥éš¾åº¦çš„ï¼Œï¼Œè¿‡ç¨‹è¿˜ç®—é¡ºåˆ©ã€‚æœ‰ä¸¤ç‚¹å€¼å¾—ä¸€æï¼Œï¼Œ å…³äºæˆæƒæµç¨‹æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ˜¯æƒ³è®©ç”¨æˆ·æ‰«ç ä¹‹åç›´æ¥è·³è½¬åˆ°ç»‘å®šé¡µé¢ï¼Œå®Œç¾~ç„¶é¹…ï¼Œäº‹å®å¹¶éè¿™æ ·ï¼Œï¼Œæ­£å¸¸æˆ‘ä»¬ç”¨æµè§ˆå™¨ã€ç›¸æœºç­‰APPæ‰«æäºŒç»´ç çš„æ—¶å€™ï¼Œå¦‚æœäºŒç»´ç å†…å®¹æ˜¯é“¾æ¥çš„è¯ï¼Œæœ‰çš„ä¼šç›´æ¥è®¿é—®ï¼Œæœ‰çš„ä¼šæç¤ºæ˜¯å¦è®¿é—®è¿™ä¸ªé“¾æ¥ã€‚ç„¶è€Œï¼Œåœ¨å¾®ä¿¡ä¸­æ‰«æäºŒç»´ç åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œï¼Œ scancode_pushï¼šæ‰«ç æ¨äº‹ä»¶ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼Œå¾®ä¿¡å®¢æˆ·ç«¯å°†è°ƒèµ·æ‰«ä¸€æ‰«å·¥å…·ï¼Œå®Œæˆæ‰«ç æ“ä½œåæ˜¾ç¤ºæ‰«æç»“æœï¼ˆå¦‚æœæ˜¯URLï¼Œå°†è¿›å…¥URLï¼‰ï¼Œä¸”ä¼šå°†æ‰«ç çš„ç»“æœä¼ ç»™å¼€å‘è€…ï¼Œå¼€å‘è€…å¯ä»¥ä¸‹å‘æ¶ˆæ¯ã€‚ scancode_waitmsgï¼šæ‰«ç æ¨äº‹ä»¶ä¸”å¼¹å‡ºâ€œæ¶ˆæ¯æ¥æ”¶ä¸­â€æç¤ºæ¡†ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼Œå¾®ä¿¡å®¢æˆ·ç«¯å°†è°ƒèµ·æ‰«ä¸€æ‰«å·¥å…·ï¼Œå®Œæˆæ‰«ç æ“ä½œåï¼Œå°†æ‰«ç çš„ç»“æœä¼ ç»™å¼€å‘è€…ï¼ŒåŒæ—¶æ”¶èµ·æ‰«ä¸€æ‰«å·¥å…·ï¼Œç„¶åå¼¹å‡ºâ€œæ¶ˆæ¯æ¥æ”¶ä¸­â€æç¤ºæ¡†ï¼Œéšåå¯èƒ½ä¼šæ”¶åˆ°å¼€å‘è€…ä¸‹å‘çš„æ¶ˆæ¯ã€‚ scancode_pushå€˜è‹¥æˆ‘ä»¬ä½¿ç”¨ scancode_push çš„æ–¹å¼ï¼Œï¼ŒOKï¼Œå¦‚æœäºŒç»´ç å†…å®¹æ˜¯URLçš„è¯ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ã€‚ä½†å¦‚æ­¤ï¼Œï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨å¾®ä¿¡ç”Ÿæˆå¸¦å‚äºŒç»´ç çš„æ¥å£ç”ŸæˆäºŒç»´ç äº†ï¼Œï¼Œå› ä¸ºï¼Œè¿™ç§æ–¹å¼ç”Ÿæˆçš„äºŒç»´ç å†…å®¹æœ¬è´¨ä¸Šæ˜¯å¾®ä¿¡çš„é“¾æ¥:123456&#123; "ticket":"gQH47joAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL2taZ2Z3TVRtNzJXV1Brb3ZhYmJJAAIEZ23sUwMEmm3sUw==", "expire_seconds":60, "url":"http://weixin.qq.com/q/kZgfwMTm72WWPkovabbI"&#125; ticket: è·å–çš„äºŒç»´ç ticketï¼Œå‡­å€Ÿæ­¤ticketå¯ä»¥åœ¨æœ‰æ•ˆæ—¶é—´å†…æ¢å–äºŒç»´ç ã€‚expire_seconds: è¯¥äºŒç»´ç æœ‰æ•ˆæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚ æœ€å¤§ä¸è¶…è¿‡2592000ï¼ˆå³30å¤©ï¼‰ã€‚url: äºŒç»´ç å›¾ç‰‡è§£æåçš„åœ°å€ï¼Œå¼€å‘è€…å¯æ ¹æ®è¯¥åœ°å€è‡ªè¡Œç”Ÿæˆéœ€è¦çš„äºŒç»´ç å›¾ç‰‡ è®¿é—® URL çš„é“¾æ¥æ— è®ºå¦‚ä½•æ˜¯ä¸èƒ½æŒ‡å‘æˆ‘ä»¬çš„ç»‘å®šé¡µé¢çš„ã€‚PASSï¼é‚£å¦‚æœç”¨å…¶ä»–å·¥å…·æŠŠæŒ‡å‘ç»‘å®šé¡µé¢çš„é“¾æ¥åšæˆäºŒç»´ç å‘¢ï¼Ÿå¦‚æ­¤å°±å¯ä»¥è®¿é—®é¡µé¢äº†ï¼Œï¼Œä½†æ˜¯ï¼ï¼æˆ‘ä»¬å°±è·å–ä¸åˆ°ç”¨æˆ·çš„OpenIDäº†ã€‚ã€‚å› ä¸ºï¼Œäº²æµ‹è¿™ç§æ–¹å¼æ˜¯ç”¨æˆ·å…ˆè®¿é—®é¡µé¢(é¡µé¢å·²ç„¶æ¸²æŸ“å¥½äº†)ï¼Œç„¶åä¸‹å‘é€šçŸ¥(è·å–åˆ°openid)ï¼Œï¼Œè¿™æ ·ï¼Œé¡µé¢è¿˜æ˜¯æ— æ³•è·å–åˆ°openidã€‚ã€‚ scancode_waitmsgçœ‹æ ·å­åªèƒ½ä½¿ç”¨ scancode_waitmsgï¼Œè¿™ç§æ–¹å¼æ—¢å¯ä»¥è·å–å®¢æˆ·è¯†åˆ«ç ï¼Œåˆå¯ä»¥è·å–åˆ°ç”¨æˆ·openidï¼Œï¼Œç„¶é¹…ï¼Œä¹‹ååªèƒ½ä¸‹å‘æ¶ˆæ¯ï¼Œä¸èƒ½ç›´æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢ã€‚åœ¨ä¸€å †æ±‰å­—æ–‡æœ¬ä¸­æ˜¾ç¤ºé“¾æ¥çœŸçš„å¥½å—ï¼Ÿï¼å°±åœ¨è¿™æ—¶ï¼Œï¼Œã€èŠ±ç‚¹æ—¶é—´ã€‘ç»™æˆ‘æ¨é€æ¶ˆæ¯äº†(å…¶å®æˆ‘æ›´å–œæ¬¢ã€èŠ±åŠ ã€,ç¬‘å“­)ã€‚åŒæ ·æ˜¯æ–‡æœ¬æ¶ˆæ¯ï¼Œä½†æ˜¯æœ‰è¶…é“¾æ¥ï¼ï¼ æ–‡æœ¬æ¶ˆæ¯ä¸­çš„é“¾æ¥ä¼˜é›…çš„æ˜¾ç¤ºæ–¹å¼å¯¹ï¼Œï¼Œå°±æ˜¯è¶…é“¾æ¥ï¼Œè€Œä¸æ˜¯èµ¤æœæœçš„å°†ç½‘å€å †åœ¨ä¸€å †æ±‰å­—ä¸­ã€‚ å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œï¼Œå°±æ˜¯æŠŠé“¾æ¥æ”¾åœ¨ a æ ‡ç­¾çš„ href å±æ€§ä¸­ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²å„¿äº†ã€‚ã€‚ ç»ˆäºåˆ°æ­£é¢˜å„¿äº†ç»ˆäºï¼Œï¼Œç„¶è€Œï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯å‰æ€»æ˜¯æŠ¥é”™ï¼Ÿ æœ¬ä»¥ä¸ºæ˜¯ngrokä¸ç¨³å®šçš„åŸå› ï¼Œï¼Œä½†æŠ¥é”™é—®é¢˜å‡ºç°çš„å¤ªè§„å¾‹äº†ï¼Œåº”è¯¥ä¸æ˜¯å®ƒ(äº‹å®ä¸Šå®ƒå¤ªç¨³å®šäº†ï¼Œæ„Ÿè°¢å¼€æºï¼)ã€‚ç›´åˆ°çœ‹åˆ°äº†å¾®ä¿¡å¼€å‘å‡ºç°â€œè¯¥å…¬ä¼—å·æš‚æ—¶æ— æ³•æä¾›æœåŠ¡ï¼Œè¯·ç¨åå†è¯•â€çš„å‘ï¼Œè™½ç„¶æœ€ç»ˆé‡åˆ°çš„é—®é¢˜ä¸ä¸€æ ·ï¼Œä½†è¿˜æ˜¯æ”¶åˆ°å¯å‘äº†ï¼Œï¼Œé‚£å°±æ˜¯ã€ç¬¬ä¸‰æ–¹å¹³å°æˆæƒã€çš„é—®é¢˜ã€‚å› ä¸ºæˆ‘å¸ä¹‹å‰åšæ¨¡æ¿å°ç¨‹åºçš„æ—¶å€™çœŸçš„æœ‰å°†ã€åŒ—äº¬ä¼—é˜³è½¯ä»¶ã€å…¬ä¼—å·æˆæƒç»™ã€ä¼—é˜³å®œå•†ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ã€ç¬¬ä¸‰æ–¹å¹³å°ï¼Œï¼Œåšæˆæƒæµ‹è¯•å˜›ã€‚ä½†æˆ‘è®°å¾—åæ¥æ”¹ä¸ºåªæˆæƒå…¬ä¼—å·çš„ã€å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™ã€ï¼Œå…¶ä»–æƒé™éƒ½å–æ¶ˆäº†å‘€ï¼Ÿï¼å’¦ï¼Œï¼Œç™»é™†å…¬ä¼—å·å¾®ä¿¡åå°ä¹‹åï¼Œåœ¨ã€åŠŸèƒ½ã€-&gt;ã€è‡ªåŠ¨å›å¤ã€&gt;&gt;ã€è¢«å…³æ³¨å›å¤ã€ä¸­çœ‹åˆ°æœ‰ç¬¬ä¸‰æ–¹å¹³å°æˆæƒç®¡ç†ã€‚å“¦ï¼ŒåŸæ¥è¿˜æœ‰å…¶ä»–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œï¼Œå”¤ä½œã€é­”ç›’ã€ä»€ä¹ˆçš„ã€‚å…¶ä¸­å°±å°†å…¬ä¼—å·çš„ã€æ¶ˆæ¯å›å¤ã€æƒé™ã€‚æ€ªä¸å¾—ï¼Œï¼Œæ¯æ¬¡è¢«åŠ¨å›å¤å‰ï¼Œå…ˆå‘ã€é­”ç›’ã€æœåŠ¡å™¨ä¸‹å‘æ¶ˆæ¯ï¼Œå¤±è´¥åå†å‘å…¬ä¼—å·æœåŠ¡å™¨åœ°å€ä¸‹å‘æ¶ˆæ¯ã€‚æ‰€ä»¥ï¼Œï¼Œæ¯æ¬¡æ‰€è°“çš„æœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œæ˜¯é­”ç›’çš„é—®é¢˜ï¼ Binggoï¼ï¼å–æ¶ˆæˆæƒä¹‹åï¼Œä¸€åˆ‡éƒ½é‚£ä¹ˆæ¸…å‡€~]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å¾®ä¿¡å…¬ä¼—å·</tag>
        <tag>è¢«åŠ¨å›å¤ç”¨æˆ·æ¶ˆæ¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°]]></title>
    <url>%2F2018%2F09%2F25%2FWeChat_third_platform%2F</url>
    <content type="text"><![CDATA[æ—¶è‡³ä»Šæ—¥ï¼Œï¼Œä½œä¸ºç¬¬ä¸‰æ–¹å¹³å°å¼€å‘çš„å°ç¨‹åºå·²ç»ä¸Šçº¿æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œç¬¬ä¸€æ¬¡ç»å†æ•´ä¸ªå¼€å‘æµç¨‹ã€‚å†å›é¦–ï¼Œå°è¯•ç€ä»å®è§‚ä¸Šæ¢³ç†ä¸‹ã€å½“æˆ‘ä»¬è°ˆå¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°æ—¶æˆ‘ä»¬åœ¨è°ˆä»€ä¹ˆã€ã€‚åŒæ ·ï¼Œï¼Œä¸æ¶‰åŠä»£ç çº§çš„å…·ä½“å®ç°ã€‚ BTWï¼Œå…³äºå¾®ä¿¡å¼€æ”¾å¹³å°é¡ºä¾¿èŠèŠå¾®ä¿¡å¼€æ”¾å¹³å°å…ˆï¼Œï¼Œç™»é™†å¾®ä¿¡å¼€æ”¾å¹³å°åï¼Œè¿›å…¥ã€ç®¡ç†ä¸­å¿ƒã€Tabã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢ä¸­æœ‰5ä¸ªäºŒçº§Tabï¼Œåˆ†åˆ«æ˜¯ã€ç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨ã€å…¬ä¼—è´¦å·ã€å°ç¨‹åºã€ç¬¬ä¸‰æ–¹å¹³å°ã€ã€‚OKï¼Œå¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œé¡¾åæ€ä¹‰ï¼Œï¼Œæ˜¯å°†å¾®ä¿¡ä½“ç³»ä¸‹çš„æœåŠ¡æ¥å…¥å…¶ä»–äº’è”ç½‘åº”ç”¨çš„å¹³å°ã€‚è¿™5ä¸ªtabä»£è¡¨äº†ç›®å‰å¯ä»¥æ¥å…¥çš„äº’è”ç½‘åº”ç”¨ç±»å‹(å‡†ç¡®æ¥è¯´æ˜¯4ä¸ªï¼Œï¼Œç¬¬ä¸‰æ–¹å¹³å°åº”è¯¥ç®—ä¸šåŠ¡å®ç°ç±»å‹ï¼Œä¸ç®—äº’è”ç½‘åº”ç”¨ç±»å‹ã€‚å†ä¸¥è°¨ä¸€ç‚¹ï¼Œåº”è¯¥æ˜¯ä¸¤ç§ï¼Œï¼Œwebåº”ç”¨å’Œå®¢æˆ·ç«¯åº”ç”¨ï¼Œå¾®ä¿¡å…¬ä¼—å·å’Œå°ç¨‹åºæœ¬è´¨ä¸Šè¿˜æ˜¯å®¢æˆ·ç«¯åº”ç”¨ã€‚å†æ— èŠä¸€ç‚¹ï¼Œï¼Œå°±åªæœ‰ä¸€ç§client-serveräº†ï¼Œç¬‘å“­)ã€‚ è¦äº†è§£å¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œæˆ‘ä»¬å¿…é¡»æ·±åˆ»ç†è§£å¾®ä¿¡çš„UnionIDæœºåˆ¶ï¼š è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯(UnionIDæœºåˆ¶)åœ¨å…³æ³¨è€…ä¸å…¬ä¼—å·äº§ç”Ÿæ¶ˆæ¯äº¤äº’åï¼Œå…¬ä¼—å·å¯è·å¾—å…³æ³¨è€…çš„OpenIDï¼ˆåŠ å¯†åçš„å¾®ä¿¡å·ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªå…¬ä¼—å·çš„OpenIDæ˜¯å”¯ä¸€çš„ã€‚å¯¹äºä¸åŒå…¬ä¼—å·ï¼ŒåŒä¸€ç”¨æˆ·çš„openidä¸åŒï¼‰ã€‚å…¬ä¼—å·å¯é€šè¿‡æœ¬æ¥å£æ¥æ ¹æ®OpenIDè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€æ‰€åœ¨åŸå¸‚ã€è¯­è¨€å’Œå…³æ³¨æ—¶é—´ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœå¼€å‘è€…æœ‰åœ¨å¤šä¸ªå…¬ä¼—å·ï¼Œæˆ–åœ¨å…¬ä¼—å·ã€ç§»åŠ¨åº”ç”¨ä¹‹é—´ç»Ÿä¸€ç”¨æˆ·å¸å·çš„éœ€æ±‚ï¼Œéœ€è¦å‰å¾€å¾®ä¿¡å¼€æ”¾å¹³å°ï¼ˆopen.weixin.qq.comï¼‰ç»‘å®šå…¬ä¼—å·åï¼Œæ‰å¯åˆ©ç”¨UnionIDæœºåˆ¶æ¥æ»¡è¶³ä¸Šè¿°éœ€æ±‚ã€‚ UnionIDæœºåˆ¶è¯´æ˜ï¼šå¼€å‘è€…å¯é€šè¿‡OpenIDæ¥è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¼€å‘è€…æ‹¥æœ‰å¤šä¸ªç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨å’Œå…¬ä¼—å¸å·ï¼Œå¯é€šè¿‡è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä¸­çš„unionidæ¥åŒºåˆ†ç”¨æˆ·çš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåªè¦æ˜¯åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ä¸‹çš„ç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨å’Œå…¬ä¼—å¸å·ï¼Œç”¨æˆ·çš„unionidæ˜¯å”¯ä¸€çš„ã€‚æ¢å¥è¯è¯´ï¼ŒåŒä¸€ç”¨æˆ·ï¼Œå¯¹åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹çš„ä¸åŒåº”ç”¨ï¼Œunionidæ˜¯ç›¸åŒçš„ã€‚ â€“ è¯¦è§è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯(UnionIDæœºåˆ¶) æˆ‘ä»¬ç°åœ¨ä»£å…¥åœºæ™¯æƒ³è±¡ä¸‹ï¼š æ¯ä¸ªå¾®ä¿¡ç”¨æˆ·å¯¹ã€ç§»åŠ¨åº”ç”¨ã€webåº”ç”¨ã€å…¬ä¼—å·ã€å°ç¨‹åºã€éƒ½æœ‰å”¯ä¸€OpenIDï¼›å‡å¦‚æˆ‘æœ‰ä¸ªå•†åŸå–å–é›¶é£Ÿä»€ä¹ˆçš„ï¼Œå®¢æˆ·éå¸ƒå„ä¸ªå¹³å°ï¼Œï¼Œè¿™æ ·ï¼Œè®©å®¢æˆ·åœ¨Androidã€IOSå®¢æˆ·ç«¯ Webç½‘ç«™ å…¬ä¼—å·èœå•ä¸­çš„å•†åŸ å°ç¨‹åºåˆ†åˆ«æ³¨å†Œä¸€ä¸ªè´¦å·æ— ç–‘æ˜¯åäººç±»çš„ã€‚è¿™æ—¶å€™å¾®ä¿¡è¯´äº†ï¼Œï¼Œé‚£ä½ åœ¨æˆ‘çš„å¾®ä¿¡å¼€æ”¾å¹³å°æ³¨å†Œä¸ªè´¦å·ï¼Œç„¶åæŠŠç§»åŠ¨å®¢æˆ·ç«¯ webç½‘ç«™ å…¬ä¼—å· å°ç¨‹åºä»€ä¹ˆçš„ç»Ÿç»Ÿç»‘å®š(å¼€æ”¾å¹³å°ä¸­çš„åˆ›å»º)åˆ°å¼€æ”¾å¹³å°çš„è¿™ä¸ªè´¦å·ä¸»ä½“ä¸Šã€‚é‚£ä¹ˆæ–°ç”¨æˆ·å°±å¯ä»¥åœ¨ä¸Šè¿°æ‰€æœ‰åº”ç”¨é€šè¿‡å¾®ä¿¡æˆæƒç™»é™†äº†ï¼Œæ— éœ€æ³¨å†Œ(å½“ç„¶ï¼Œç™»é™†åŠŸèƒ½æ˜¯å®ç°äº†ï¼Œï¼Œå…¶å®åªæ˜¯ä»å¾®ä¿¡é‚£è·å–äº†å‡ ä¸ªæ— å…³ç—›ç—’çš„å‡ ä¸ªåŸºæœ¬å­—æ®µä¿¡æ¯,å®é™…æ“ä½œè¿‡æˆåŠŸï¼Œä¸€èˆ¬éƒ½ä¼šè¦æ±‚ç”¨æˆ·é‡æ–°ç»‘å®šæ‰‹æœºå·æˆ–è€…é‚®ç®±ä»€ä¹ˆçš„ï¼Œä»¥åŠå…¶ä»–ç”¨æˆ·ä¿¡æ¯ã€‚)~å½“ç„¶ï¼Œç»Ÿä¸€å¾®ä¿¡æˆæƒç™»é™†åŠŸèƒ½åªæ˜¯å…¶ä¸­ä¸€ä¸ªåœºæ™¯ï¼Œè¿˜æœ‰å¾®ä¿¡æ”¯ä»˜æ¥å£ä»€ä¹ˆçš„ï¼Œå…·ä½“çœ‹æ–‡æ¡£å•¦ã€‚ OKï¼Œï¼Œå‡è®¾ç°åœ¨æ‰€æœ‰åº”ç”¨éƒ½å¯ä»¥é€šè¿‡å¾®ä¿¡æˆæƒç™»é™†äº†ã€‚é‚£ä¹ˆåœ¨è·å–ç”¨æˆ·é¢å¤–ä¿¡æ¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¦‚ä½•å°†æ‰€æœ‰åº”ç”¨çš„ç”¨æˆ·ä½“ç³»æ‰“é€šå‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­åœ¨ç§»åŠ¨å®¢æˆ·ç«¯æˆæƒçš„OpenID A ä¸ åœ¨å°ç¨‹åºç«¯(æˆ–Webç½‘ç«™ã€å…¬ä¼—å·)çš„OpenID Bæ˜¯åŒä¸€ä¸ªç°å®ä¸–ç•Œä¸­çš„åŒä¸€ä¸ªç”¨æˆ·å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦ UnionID äº†ã€‚å½“æˆ‘ä»¬æŠŠæ‰€æœ‰ç«¯çš„åº”ç”¨å…¨éƒ¨ç»‘å®šåœ¨å¾®ä¿¡å¼€æ”¾å¹³å°çš„åŒä¸€ä¸ªè´¦å·ä¸»ä½“ä¸Šï¼Œè¿™æ—¶å€™å°±å¯ä»¥è·å– UnionID äº†ï¼Œå› ä¸ºå¯¹åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹çš„ä¸åŒåº”ç”¨ï¼Œunionidæ˜¯ç›¸åŒçš„ã€‚å³æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä¸åŒç«¯è·å–åˆ°çš„ UnionID è¿›è¡Œæ¯”å¯¹ï¼Œï¼Œå¦‚æœç›¸åŒï¼Œåˆ™ä¸ºåŒä¸€ä¸ªè´¦å·ä¸»ä½“ä¸‹çš„ç”¨æˆ·ã€‚åŠ¡å¿…æ³¨æ„æ˜¯åŒä¸€ä¸»ä½“ã€‚ å¼€æ”¾å¹³å°å°±æ˜¯è¿™æ ·ï¼Œè¯´çš„æœ‰äº›å•°å—¦äº†éƒ½ã€‚ã€‚ å¾®ä¿¡å¼€æ”¾å¹³å°çš„ç¬¬ä¸‰æ–¹å¹³å°ä¹‹å‰ä¸€ç›´ç§°å‘¼ã€ç¬¬ä¸‰æ–¹å¹³å°ã€ï¼Œä¹Ÿæ€»æ˜¯å›°æƒ‘ç¬¬ä¸‰æ–¹å¹³å°å’Œå¼€æ”¾å¹³å°æ˜¯ä»€ä¹ˆå…³ç³»ã€‚åæ¥åœ¨å¼€æ”¾å¹³å°çš„ã€ç®¡ç†ä¸­å¿ƒã€Tabæ‰¾åˆ°äº†ç­”æ¡ˆï¼Œï¼ŒåŸæ¥ä¸€ç›´éƒ½æ²¡æ³¨æ„ã€‚ã€‚ ç¬¬ä¸‰æ–¹å¹³å°æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿæ˜¯ä¸ºäº†å®ç°ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿæœ€å¼€å§‹äº†è§£ã€ç¬¬ä¸‰æ–¹å¹³å°ã€æ˜¯å…¬å¸è¦åšå°ç¨‹åºï¼ŒåŒä¸€ä¸ªå°ç¨‹åºè¦ç»™å¾ˆå¤šå®¢æˆ·ç”¨ï¼Œç±»ä¼¼å¥—ç”¨æ¨¡æ¿ä¸€æ ·ï¼Œï¼Œä½†åˆæ€•å¾®ä¿¡æœ‰å®¡æ ¸ï¼Œæ€•ç›¸ä¼¼åº¦å¤ªé«˜ä¸ç»™å®¡æ ¸é€šè¿‡ä»€ä¹ˆçš„(äº‹å®è¯æ˜æˆ‘æƒ³å¤šäº†ã€‚ã€‚)ï¼Œç„¶åäº†è§£åˆ°äº†ã€ç¬¬ä¸‰æ–¹å¹³å°ã€ã€‚é‚£ä¸ªæ—¶å€™å¯¹ç¬¬ä¸‰å¹³å°å¹¶ä¸äº†è§£ï¼Œåªæ˜¯çœ‹æ–‡æ¡£ï¼Œå¼€å‘æ¥å£ï¼Œå®ç°ä¸šåŠ¡ã€‚çŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œï¼Œç›´åˆ°æœ‰ä¸€å¤©å°ç¨‹åºå¼€å‘åŸºæœ¬å®Œæˆï¼Œé¢ä¸´ä¸Šä¼ å®¡æ ¸çš„é—®é¢˜ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¯¸å¤šç–‘é—®èµ¶åˆ°ä¸€å—å„¿ã€‚å…¶ä¸­ï¼Œåˆä»¥è¿™ä¸¤ä¸ªé—®é¢˜æœ€ä¸ºæ£˜æ‰‹ï¼Œï¼Œ ç¬¬ä¸‰æ–¹å¹³å°çš„å°ç¨‹åºæ¨¡æ¿æ€ä¹ˆä¸Šä¼ ï¼Ÿéœ€è¦å®¡æ ¸ä¹ˆï¼Ÿï¼Ÿ è¿™ä¸ªå…¨ç½‘å‘å¸ƒä»€ä¹ˆé¬¼ï¼Ÿä¹Ÿè¦å®¡æ ¸ï¼Ÿï¼Ÿï¼Ÿ å°ç¨‹åºå®¡æ ¸å‘å¸ƒä»€ä¹ˆçš„æˆ‘åŸºæœ¬æƒ³å¾—é€šï¼Œåƒåœ¨åº”ç”¨åˆ†å‘å¹³å°(å„åº”ç”¨å¸‚åœº)ä¸Šä¼ Appä¸€æ ·çš„é“ç†ï¼Œï¼Œä½†è¿™ä¸ªã€å…¨ç½‘å‘å¸ƒã€æœ‰ç‚¹å¤ªæŠ½è±¡äº†ï¼Œï¼Œé¢†å¯¼é—®èµ·æ¥ï¼Œæˆ‘ä¹Ÿæœ‰ç‚¹å¿ƒè™šï¼Œåªèƒ½ç¡¬ç€å¤´çš®ä¸€ç‚¹ç‚¹è¯•ã€‚å¥½åœ¨é¢†å¯¼ç»™åŠ›ï¼Œè¯´ å¤§ä¸äº†å¾®ä¿¡ä¸ç»™å®¡æ ¸é€šè¿‡ï¼Œæˆ‘ä»¬å†æŒ‰ç€æœªé€šè¿‡ç†ç”±æ”¹å‘—ã€‚å…¶å®ä¹Ÿçœ‹äº†å…¨ç½‘å‘å¸ƒæ¥å…¥æ£€æµ‹è¯´æ˜ï¼Œè¦æ£€æŸ¥ä¸€äº›æ–‡æ¡£ä¸­çš„æ¥å£æ˜¯å¦å¯ç”¨ã€‚ä½†æ˜¯æ€»æœ‰ä¸€å±‚å¾ˆæ¨¡ç³Šçš„ä¸œè¥¿æ²¡æƒ³æ˜ç™½ï¼Œï¼ŒWhyï¼Ÿåæ¥å…¨ç½‘å‘å¸ƒæ£€æµ‹ï¼Œä¸€éè¿‡ï¼Œï¼Œ(å› ä¸ºæœ€åˆæ˜¯ä¸ºäº†å‘å¸ƒå°ç¨‹åºï¼Œæ‰€ä»¥å°ç¨‹åºçš„æ¥å£å…¨éƒ¨å®ç°äº†ï¼Œå…¬ä¼—å·çš„æ¥å£æ²¡æ€ä¹ˆåšï¼Œï¼Œå› æ­¤æœ‰ä¸¤é¡¹æµ‹è¯•å¤±è´¥ï¼Œä½†è¿˜æ˜¯æç¤ºæ£€æµ‹é€šè¿‡äº†ã€‚) ç„¶åæ£€æµ‹é€šè¿‡åï¼Œå°±æ˜¯ç­‰å¾…å¾®ä¿¡å®¡æ ¸(å¤§æ¦‚ä¸¤ä¸ªå·¥ä½œæ—¥)ã€‚è¿™ä¸ªæ—¶å€™è¿˜æ˜¯ä¸å¤ªç¡®å®šå…¨ç½‘å‘å¸ƒæ˜¯ä»€ä¹ˆé¬¼ï¼Œï¼Œç›´åˆ°å®¡æ ¸é€šè¿‡ã€‚å®¡æ ¸é€šè¿‡ä¹‹åï¼Œï¼Œåœ¨ä¸Šå›¾ä¸­åŸã€å…¨ç½‘å‘å¸ƒã€æŒ‰é’®æ‰€åœ¨çš„é‚£ä¸ª section(å°±æ˜¯ç°èƒŒæ™¯è‰²é‚£éƒ¨åˆ†ï¼Œï¼Œä¸çŸ¥é“æ€ä¹ˆå½¢å®¹ã€‚ã€‚) ä¸­ç°å­—éƒ¨åˆ†ï¼Œä¼šå˜æˆã€å…¨ç½‘å‘å¸ƒçš„å®¡æ ¸å·²é€šè¿‡ï¼Œå·²å…è®¸å…¬ä¼—å·æ¥è¿›è¡Œæˆæƒæ‰˜ç®¡ã€‚ã€ã€‚çœ‹åˆ°è¿™è¡Œå°å­—çš„æ—¶å€™å¥½åƒçªç„¶æ˜ç™½äº†ï¼Œï¼ŒåŸæ¥å…¨ç½‘å‘å¸ƒç›‘æµ‹æ˜¯ä¸ºäº†ä¿è¯åŸºæœ¬æœåŠ¡å¯ç”¨(å› ä¸ºaccess_tokenè·å–æ–¹å¼å˜äº†ï¼Œå…¶ä»–æ¥å£ç»å¤§éƒ¨åˆ†éœ€è¦é€šè¿‡ä¼ é€’access_tokenæ¥å®ç°ä¸šåŠ¡)ã€‚æ£€æµ‹é€šè¿‡ä¹‹åï¼Œå°±å¯ä»¥é¢å‘æ‰€æœ‰å®¢æˆ·(åœ¨æµ‹è¯•é˜¶æ®µåªæµ‹è¯•ç™½åå•ä¸­åº”ç”¨å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°çš„æ¥å£å®ç°ä¸šåŠ¡)ã€‚ å…¶å®ï¼Œåœ¨ç¬¬ä¸‰æ–¹å¹³å°æ¦‚è¿°ä¸­ï¼Œå·²ç»æåˆ°äº†ï¼Œï¼Œåªä¸è¿‡æœ€å¼€å§‹å¼€å‘çš„æ—¶å€™ï¼Œä¸æ˜æ‰€ä»¥ï¼Œå°±ç•¥è¿‡äº†ï¼Œï¼Œ å››ã€ç¬¬ä¸‰æ–¹å¹³å°æˆæƒåå¦‚ä½•å¸®åŠ©æ——ä¸‹å…¬ä¼—å¹³å°å¸å·å®ç°ä¸šåŠ¡è¯·æ ¹æ®æœ¬æ–‡æ¡£ç›®å½•ä¸­çš„â€œä»£å…¬ä¼—å·å®ç°ä¸šåŠ¡â€æ–‡ä»¶å¤¹ä¸­çš„ç›¸å…³æ–‡æ¡£ï¼Œæ¥äº†è§£å¦‚ä½•å¸®åŠ©æ——ä¸‹å…¬ä¼—å·è°ƒç”¨æ¥å£ï¼Œå®ç°ä¸šåŠ¡ã€‚ä¹Ÿå¯æ ¹æ®æœ¬æ–‡æ¡£ç›®å½•ä¸­çš„â€œä»£å°ç¨‹åºå®ç°ä¸šåŠ¡â€æ–‡ä»¶å¤¹ä¸­çš„ç›¸å…³æ–‡æ¡£ï¼Œæ¥äº†è§£å¦‚ä½•å¸®åŠ©æ——ä¸‹å°ç¨‹åºå¸å·è°ƒç”¨æ¥å£ï¼Œå®ç°ä¸šåŠ¡ã€‚ å…³é”®å­— -&gt; ã€ä»£å…¬ä¼—å·å®ç°ä¸šåŠ¡ã€ã€‚è¿™å‡ ä¸ªå­—å°±æ˜¯ç¬¬ä¸‰æ–¹å¹³å°çš„ä½œç”¨ã€‚å½“ç„¶ï¼Œä¸å…‰æ˜¯å…¬ä¼—å·ï¼Œè¿˜æœ‰å°ç¨‹åºï¼Œï¼Œå› ä¸ºå…¬ä¼—å·ä¸šåŠ¡æ¯”å°ç¨‹åºå®ç°çš„è¦æ—©ï¼Œæ–‡æ¡£ç»´æŠ¤ä¸åŠæ—¶ã€‚ã€‚ä»¥å…¬ä¼—å·ä¸ºä¾‹ï¼Œï¼Œå…¬ä¼—å·çš„å¼€å‘é¦–å…ˆæ˜¯é¢å‘å¤§ä¼—çš„ï¼Œæœ‰å¾®ä¿¡å…¬ä¼—å·åå°é¡µé¢ï¼Œå›¾å½¢åŒ–é¡µé¢ä¸­ä¹Ÿå¯ä»¥ä¸ªæ€§åŒ–å®šåˆ¶ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªå®šä¹‰æ¶ˆæ¯å›å¤ä»€ä¹ˆçš„ã€‚ä½†å¦‚æœæ·±åº¦å®šåˆ¶çš„è¯ï¼Œå°±éœ€è¦å¼€å‘è€…é€šè¿‡è°ƒç”¨å¾®ä¿¡æ¥å£å®ç°äº†ï¼Œæ¥å£çš„ä»¤ç‰Œå°±æ˜¯access_tokenï¼Œæ—¢å¯ä»¥é€šè¿‡å®ƒè¯†åˆ«å…¬ä¼—å·èº«ä»½ï¼Œåˆå¯ä»¥æ§åˆ¶è¯·æ±‚æ¬¡æ•° é¢‘ç‡ä»€ä¹ˆçš„ã€‚é‚£ç¬¬ä¸‰æ–¹å¹³å°å‘¢ï¼Œä¸ºäº†å…å»ä¸ºå¤šä¸ªå®¢æˆ·é‡å¤å¼€å‘ç›¸åŒä¸šåŠ¡éº»çƒ¦ï¼Œä¸€å¥—æ¥å£ï¼Œä¸€ä¸ªé¡¹ç›®å®ç°æ‰€æœ‰ç”¨æˆ·çš„ä¸šåŠ¡(å½“ç„¶ï¼Œéœ€è¦å‚æ•°æ¥åŒºåˆ†æ¯ä¸ªè¯·æ±‚å±äºå“ªä¸ªå…¬ä¼—å·)ã€‚åŒç†ï¼Œå°ç¨‹åºã€‚ è¿™å°±æ˜¯ç¬¬ä¸‰æ–¹å¹³å°å­˜åœ¨çš„ä»·å€¼ã€‚å®¢æˆ·å…·ä½“æ€ä¹ˆæˆæƒç¬¬ä¸‰æ–¹å¹³å°å®ç°ä¸šåŠ¡ï¼Œå¯ä»¥æˆæƒæµç¨‹æŠ€æœ¯è¯´æ˜ï¼Œä¹Ÿå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„åšå®¢å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°å°ç¨‹åºçˆ¬å‘ã€‚ å¦å¤–ï¼Œå…¬ä¼—å·æˆ–å°ç¨‹åºæˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰è¦æˆæƒçš„æƒé™ã€‚æ½œå°è¯å°±æ˜¯ï¼Œå°†ç›¸å…³æƒé™æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°åï¼Œé‚£ä¹ˆç›¸åº”çš„æƒé™å°±ç”±ç¬¬ä¸‰æ–¹å¹³å°å®ç°ï¼Œæœªæˆæƒçš„æƒé™è¿˜æ˜¯ç”±è‡ªå·±å¼€å‘å¼€å‘å®ç°ã€‚æœ‰äº›æƒé™æ˜¯äº’æ–¥çš„ï¼Œæœ‰äº›åˆ™æ˜¯å¯ä»¥åŒæ—¶æˆæƒç»™å¤šä¸ªå¹³å°çš„ï¼Œï¼Œæ¯”å¦‚å¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ç®¡ç†æƒé™ã€‚å…¶ä¸­å°±æœ‰æåˆ°ï¼Œï¼Œ å°ç¨‹åºåªå¯å°†æ­¤æƒé™é›†æˆæƒç»™ä¸€ä¸ªç¬¬ä¸‰æ–¹å¹³å°ï¼Œå³æˆæƒäº’æ–¥ã€‚ å…¶ä½™çš„äº’æ–¥æƒé™å€’æ²¡æ€ä¹ˆæ³¨æ„åˆ°ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‚®ä»¶æŠ¥è­¦çš„ç®€å•å®ç°]]></title>
    <url>%2F2018%2F09%2F20%2Fsimple_implementation_of_email_early_warning%2F</url>
    <content type="text"><![CDATA[å…¶å®ï¼Œlog4jå°±å¯ä»¥å®ç°é‚®ä»¶æŠ¥è­¦åŠŸèƒ½ï¼Œåªéœ€è¦ç®€å•çš„é…ç½®å³å¯ã€‚å…¶å®ï¼Œä¸å…‰å¯ä»¥å‘é‚®ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡socketså°†æ—¥å¿—æ–‡ä»¶å‘é€åˆ°ç½‘ç»œä¸­çš„æŒ‡å®šåœ°å€ã€‚å…·ä½“æŸ¥çœ‹log4jçš„å„ä¸ªappenderå°±å¥½å•¦ã€‚errorçº§åˆ«çš„æ—¥å¿—å‘é€é‚®ä»¶é…ç½®ğŸ‘‡123456789101112131415# Errorçº§åˆ«çš„æ—¥å¿—å‘é€é‚®ä»¶log4j.appender.MAIL=org.apache.log4j.net.SMTPAppenderlog4j.appender.MAIL.Threshold=ERRORlog4j.appender.MAIL.BufferSize=10log4j.appender.MAIL.From=189********@163.comlog4j.appender.MAIL.SMTPHost=smtp.163.comlog4j.appender.MAIL.Subject=Error Message from *** Project# å¯ä»¥å‘é€å¤šä¸ªç”¨æˆ·ä¸­é—´ç”¨,å»åˆ†éš”log4j.appender.MAIL.To=destination0@qq.com,destination1@qq.com# é‚®ç®±å¸å·log4j.appender.MAIL.SMTPUsername=189********@163.com# é‚®ç®±å¯†ç log4j.appender.MAIL.SMTPPassword=authcodelog4j.appender.MAIL.layout=org.apache.log4j.PatternLayoutlog4j.appender.MAIL.layout.ConversionPattern=%-d&#123;yyyy-MM-dd HH\:mm\:ss&#125; [%c]-[%p] [%t] (%F\:%L) %X&#123;merchant_id&#125; -&gt;%m %n (PSï¼šæœ¬ç¯‡å†…å®¹æ— å…·ä½“å®ç°ï¼Œåªæœ‰å®ç°æ€è·¯) (PPS: PS æ˜¯ postscript çš„ç¼©å†™ï¼Œç¬‘å“­) Contextæˆ‘å¸ä¸»åŠ›é¡¹ç›®æ‰˜ç®¡åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œæœ‰äº›ä¸šåŠ¡éœ€è¦è°ƒç”¨å®¢æˆ·æœåŠ¡å™¨çš„ä¸€äº›æ¥å£(ä»¥HTTPè¯·æ±‚çš„æ–¹å¼ï¼Œï¼Œç†è®ºä¸Šæ•ˆç‡å¹¶ä¸æ˜¯éå¸¸å¥½ï¼Œä¼ è¯´ä½¿ç”¨nettyä¼šå¥½ä¸€äº›ï¼ŒæŒ–å‘å¾…å®ç°)ã€‚ä¸»åŠ›é¡¹ç›®ä¸»è¦åšç»Ÿç­¹å·¥ä½œï¼Œç±»ä¼¼å¾®ä¿¡å¼€æ”¾å¹³å°ä¸­çš„ç¬¬ä¸‰æ–¹å¹³å°ï¼Œç„¶åå®¢æˆ·æˆæƒç›¸å…³æƒé™ç»™æˆ‘å¸ï¼Œç„¶åæˆ‘å¸ä»£å®ç°å…¶ä¸šåŠ¡é€»è¾‘ï¼Œï¼Œä½†å•†å“æ•°æ®å­˜æ”¾åœ¨ç”¨æˆ·æœåŠ¡å™¨çš„æ•°æ®åº“ä¸­ï¼Œå€˜è‹¥å°†æ‰€æœ‰ç”¨æˆ·çš„å•†å“æ•°æ®åŒæ­¥åˆ°é˜¿é‡Œäº‘çº¿ä¸Šï¼Œä¸€åˆ™æ˜¯æ²¡å¿…è¦ï¼ŒäºŒåˆ™æ‰€æœ‰å®¢æˆ·çš„å•†å“æ•°æ®ä¹Ÿæ˜¯ä¸å°çš„ä½“é‡ï¼Œä¸‰åˆ™ä¹Ÿå¯èƒ½ä¼šæœ‰å®¢æˆ·ä¸å¸Œæœ›å°†è‡ªå·±çš„æ•°æ®ä»£æ‰˜ç®¡ï¼Œï¼Œç§ç§ã€‚æ‰€ä»¥é‡‡ç”¨çš„è¿™ç§æ–¹å¼ã€‚ äºæ˜¯ï¼Œéœ€æ±‚å‡ºç°äº†ï¼Œï¼Œä¸ºäº†ä¿è¯é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­çš„é¡¹ç›®ä¸å®¢æˆ·æœåŠ¡å™¨é€šè®¯çš„å¯é æ€§ï¼Œéœ€ä¿è¯è°ƒç”¨å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¼€å‘äººå‘˜åŠæ—¶çŸ¥æ™“å¹¶fix bugã€‚æ‰€ä»¥å¼‚å¸¸æŠ¥è­¦åŠ¿åœ¨å¿…è¡Œã€‚ æœ‰ç‚¹æ„æ€ï¼Œï¼Œè®©æˆ‘æ¥~ å¼€å¤´éš¾äºæ˜¯ï¼Œå¼€å§‹ç½‘ä¸Šäº†è§£ç›¸å…³è§£å†³æ–¹æ¡ˆï¼Œï¼Œå¾—åˆ°çš„å¤§éƒ¨åˆ†éƒ½æœåŠ¡å™¨çŠ¶æ€ç›‘æµ‹ç›¸å…³ï¼Œæ¯”å¦‚zabbixã€nagios(è™½ç„¶ä¸çŸ¥é“è¿™ä¿©è´§å…·ä½“æ˜¯å•¥ã€‚ã€‚å¾…æˆ‘ç”¨è‡ªå·±çš„æœåŠ¡å™¨ç»ƒç»ƒæ‰‹å…ˆ)ã€‚çœ‹ä¸Šå»æ¯”è¾ƒã€é‡ã€ï¼Œï¼Œå› ä¸ºæˆ‘ç›®å‰åªéœ€è¦é‚®ä»¶æŠ¥è­¦çš„åŠŸèƒ½ï¼Œï¼Œä¸»è¦æ˜¯æˆ‘å¸æœåŠ¡å™¨æ˜¯ Windows çš„ã€‚ã€‚ å¥½å§ï¼Œè¿™æ¡è·¯æš‚æ—¶èµ°ä¸é€šäº†ã€‚ æƒ³æƒ³å…¶ä»–åŠæ³•å¼‚å¸¸æŠ¥è­¦ï¼Œï¼Œé‚£è‚¯å®šæ˜¯æ•æ‰åˆ°å¼‚å¸¸ä¹‹åçš„å¤„ç†ï¼Œæ‰€ä»¥åº”è¯¥åœ¨ catch å—å„¿ä¸­å®ç°ç›¸å…³æŠ¥è­¦ä»£ç å°±è¡Œã€‚æŒ‰ç…§java ä½¿ç”¨JavaMail åšå¼‚å¸¸é‚®ä»¶æŠ¥è­¦ ï¼Œæ”¯æŒ163é‚®ç®±ã€outlooké‚®ç®±ä¸­ä»£ç å®ç°å³å¯ã€‚åæ¥å‘ç°é¡¹ç›®æ¡†æ¶ä¸­æœ‰ç›¸å…³çš„ MailUtil å·¥å…·ç±»ï¼Œå€’æ˜¯çœäº‹å„¿ã€‚è™½ç„¶ä¸Šé¢åšå®¢ä¸­çš„ä»£ç å¹¶æœªå¤ç”¨ï¼Œä½†è‡³å°‘è®©æˆ‘çœ‹åˆ°äº†æˆåŠŸçš„å¸Œæœ›ã€‚ç„¶è€Œï¼Œï¼Œå®ç°RuntimeExceptionï¼Œç„¶åæ•æ‰åˆ°å¼‚å¸¸åæŠ›å‡ºæ–°å®ç°çš„å¼‚å¸¸ç±»ï¼Œï¼ŒçœŸçš„æœ‰å¿…è¦ä¹ˆ??æˆ‘åœ¨æ•æ‰åˆ°å¼‚å¸¸ä¹‹åï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å‘é€é‚®ä»¶ï¼Œåè€Œç»§ç»­å‘ä¸Šå±‚æŠ›å¼‚å¸¸ï¼Ÿä¸Šå±‚è¿˜æœ‰æœªæ•è·å¼‚å¸¸çš„å¤„ç†ï¼Ÿï¼Ÿè‡³å°‘æˆ‘çš„é¡¹ç›®ä¸­æ²¡æœ‰ï¼›å¦å¤–ï¼Œï¼Œå¦‚æœåœ¨æ¯ä¸ªæ–¹æ³•ä¸­å»try{}catch(e){}ï¼Œéœ€è¦æ”¹åŠ¨æ¯ä¸ªç›¸å…³æ¥å£ä»£ç ï¼Œå¤ªä¸ä¼˜é›…äº†ã€‚ã€‚ æœ‰æ²¡æœ‰ä¸€ç§ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•ï¼Œï¼Œä¸€å¤„è®¾ç½®ï¼Œå¤„å¤„ç”Ÿæ•ˆï¼Ÿï¼Ÿæˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯è¿‡æ»¤å™¨ï¼Œï¼Œ12345678try&#123; doFilter();&#125;catch(Exception e)&#123; e.printStackTrace(); // é‚®ä»¶æŠ¥è­¦ // çŸ­ä¿¡æŠ¥è­¦ // bulabula&#125; ä½†å®ç°ä¹‹åï¼Œå‘ç°å¼‚å¸¸å¹¶æ²¡æœ‰è¢«æŠ›å‡ºåˆ°è¿‡æ»¤å™¨ä¸­ï¼Œï¼Œç›´æ¥è¢«å…¶ä»–é€»è¾‘catchæ•æ‰å¤„ç†äº†ï¼Œï¼Œé¢ã€‚é‚£å°±åœ¨ Route(æˆ–Controller) çº§åˆ«çš„æ‹¦æˆªå™¨ä¸­å¤„ç†ï¼Œï¼Œ12345try&#123; invocation.invoke();&#125;catch(Exception e)&#123; // æŠ¥è­¦bulabula&#125; å®Œç¾ï¼ï¼ç„¶é¹…ï¼Œï¼Œä¸šåŠ¡ä¸­è°ƒç”¨å®¢æˆ·æœåŠ¡å™¨ä¸­çš„æ¥å£éœ€è¿”å›å€¼ï¼Œä¸«çš„ï¼ï¼ å¦å¤–ï¼Œæ‰€æœ‰ä¸å®¢æˆ·æœåŠ¡å™¨äº¤äº’çš„æ–¹æ³•å…¨è¢«å†™åœ¨äº† API.java ä¸­ï¼Œï¼Œå…¶ä»–ä¸šåŠ¡ä¸­ç›´æ¥é™æ€è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å³å¯ã€‚æ‰€ä»¥ï¼Œç”¨ Controller çº§åˆ«çš„æ‹¦æˆªå™¨è¿˜ä¸è¡Œã€‚ã€‚ æƒè¡¡ä¹‹ä¸‹ï¼Œæœ€ç»ˆä»¥ action ä¸ºå•ä½ï¼Œè‡ªå®šä¹‰ catch é€»è¾‘ï¼Œè¿”å›ç›¸åº”çš„é”™è¯¯ä»£ç è°ƒç”¨å°è£…å¥½çš„å‘é€æŠ¥è­¦é‚®ä»¶çš„æ–¹æ³•ã€‚åŒç†ï¼ŒçŸ­ä¿¡æŠ¥è­¦åŠå…¶ä»–æŠ¥è­¦å½¢å¼ã€‚å…·ä½“å®ç°å…¶å®æ²¡ä»€ä¹ˆéš¾çš„ï¼Œè¿™é‡Œæ¢³ç†ä¸‹æ€è·¯ã€‚ å‚è€ƒé“¾æ¥ï¼šjava ä½¿ç”¨JavaMail åšå¼‚å¸¸é‚®ä»¶æŠ¥è­¦ ï¼Œæ”¯æŒ163é‚®ç®±ã€outlooké‚®ç®±]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>é‚®ä»¶é¢„è­¦</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†æƒ³çš„ç”Ÿæ´»]]></title>
    <url>%2F2018%2F07%2F27%2Fideal_life%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨å°é¾™å¥³çš„å¾®åšä¸­å‘ç°è¿™æ ·ä¸€æ®µè½¬å‘çš„è¯ï¼Œï¼Œ å…³äºäº¦èˆ’çš„ã€ç†æƒ³çš„ç”Ÿæ´»ã€æˆ‘æ˜¯å®Œå…¨åŒæ„çš„ï¼Œï¼Œæ¯•ç«Ÿç†æƒ³çš„ç”Ÿæ´»å˜›ï¼Œä¹Ÿæ˜¯å‘å¾€çš„ç”Ÿæ´»ã€‚åªæ˜¯çœ‹åˆ°å°çŒ«å’ªçš„è¯„è®ºï¼Œæˆ‘èƒ½ç†è§£ TA ä¸ºä»€ä¹ˆåšå‡ºè¿™æ ·çš„è¯„è®ºï¼Œä½†ä¸èƒ½å®Œå…¨è®¤åŒã€‚ç‚¹å¼€è¯„è®ºæƒ³ç¨å¾®åˆ†(å)äº«(é©³)ä¸‹è‡ªå·±çš„çœ‹æ³•ã€‚ä½†å†™åˆ°ä¸€åŠï¼Œæ„è¯†åˆ°ä¸€ä¸ªå¾ˆä¸¥é‡é—®é¢˜ã€‚ã€‚åˆ†(å)äº«(é©³)çš„å‰åŠæˆªæ˜¯è¿™æ ·çš„ğŸ‘‡ æˆ‘ä»¬å®åœ¨æ²¡æœ‰åŠæ³•è®©å­©å­é€‰æ‹©è‡ªå·±çš„å‡ºèº«ï¼Œä½†æ˜¯å‡å¦‚å¯ä»¥é€‰æ‹©è¯ï¼Œï¼Œ æˆ‘åè¾¹è¿˜æƒ³å†™ä¸€äº›ä½“éªŒä¸–ç•Œï¼Œä½“éªŒæœªçŸ¥ä¹‹ç±»çš„è¯(ğŸ¤¦â€â™€ï¸)ï¼Œä½†æ˜¯å†™åˆ°ä½†æ˜¯çš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸ªã€å‡å¦‚ã€å®åœ¨æœ‰å¤ªå¤šä¸œè¥¿å¯ä»¥è®²ï¼Œè„‘æ´å¤§å¼€ï¼Œï¼Œæ”¾å¼ƒè¯„è®ºäº†ï¼Œä¸‰è¨€ä¸¤è¯­å®åœ¨æ— æ³•å‡†ç¡®è¡¨è¾¾å‡ºè‡ªå·±æƒ³è¡¨è¿°çš„ä¸œè¥¿ã€‚ä¹°å®Œåƒçš„ï¼Œèµ¶ç´§å›åˆ°å…¬å¸è¯•ç€æŠŠè‡ªå·±æƒ³åˆ°çš„ä¸œè¥¿è®°ä¸‹æ¥ï¼Œï¼Œå°±åƒç°åœ¨ã€‚ å¦‚æœæˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±çš„å‡ºèº«(ç”Ÿ)é¦–å…ˆï¼Œï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±çš„å‡ºèº«(ç”Ÿ)ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€ï¼Œåœ¨æˆ‘ä»¬å‡ºç”Ÿä¹‹å‰ï¼Œæˆ‘ä»¬çš„æ„è¯†å·²ç„¶å­˜åœ¨äº†ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸ªå…ˆéªŒçš„ä¸ä¾é äººé—´(ç›®å‰æƒ³ä¸åˆ°æ›´å¥½è¯..)å­˜åœ¨çš„æ„è¯†æ˜¯æ€æ ·äº§ç”Ÿçš„ï¼Ÿï¼Ÿè¿™ç®—ä¸ç®—æŸç§ç¨‹åº¦ä¸Šçš„ æ„è¯†ä¸ç­è®º ï¼Ÿï¼Ÿï¼Ÿè‚‰èº«ä¼šæ¯è åŒ–ä½œæ³¥åœŸï¼Œæ„è¯†å´æ°¸è¿œå­˜åœ¨æŸä¸ªç‹¬ç«‹çš„ç©ºé—´(è¿™ä¸ªç©ºé—´å†…æœ‰æ²¡æœ‰æ—¶é—´çš„æ¦‚å¿µ?æ—¶é—´å¯¹æ„è¯†ä¼šäº§ç”Ÿæ€æ ·çš„å½±å“ï¼Ÿï¼Ÿ)ã€‚è¿™äº›æ„è¯†ä¼šä¸ä¼šã€æ„è¯†ã€åˆ°å…¶ä»–æ„è¯†çš„å­˜åœ¨ï¼Œå¦‚æœå¯ä»¥ã€æ„è¯†ã€åˆ°ï¼Œé‚£è¿™äº›æ„è¯†å­˜åœ¨çš„ç©ºé—´å†…ä¼šä¸ä¼šä¹Ÿæœ‰ç±»ä¼¼äººç±»çš„ã€ç¤¾ä¼šã€çš„æ¦‚å¿µï¼Œä»–ä»¬å¯ä»¥äº’ç›¸äº¤æµï¼Œåšä¿¡æ¯äº¤æ¢ã€‚ä»–ä»¬æ€ä¹ˆåšä¿¡æ¯äº¤æ¢ï¼Ÿåƒä¸‰ä½“äººä¸€æ ·ï¼Œé æ€ç»´ç›´æ¥å¯¹è¯ï¼Ÿï¼Ÿæˆ‘ç”šè‡³æƒ³è±¡ä¸å‡ºã€æ€ç»´ã€å¯¹ã€æ„è¯†ã€æ¥è¯´æ˜¯æ€æ ·ä¸€ç§å­˜åœ¨â€¦ å…¶æ¬¡ï¼Œï¼Œå¦‚æœå¯ä»¥é€‰æ‹©ï¼Œé‚£ä¹ˆè‚¯å®šåº”è¯¥æœ‰æŸç§æœºåˆ¶é«˜äºä»–ä»¬åšå‡ºçš„é€‰æ‹©ï¼Œç±»ä¼¼äººç±»ç¤¾ä¼šä¸­çš„ã€æ³•å¾‹ã€ã€ã€è§„èŒƒã€ã€ã€é“å¾·ã€ä¹‹ç±»çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å§‘ä¸”å«åšã€è§„çº¦ã€ã€‚ã€è§„çº¦ã€ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ˜¯ä¸ºäº†è§£å†³æ„è¯†ä¹‹é—´äº‰å¤ºã€å‡ºèº«é€‰æ‹©ã€çš„è§£å†³æœºåˆ¶ã€‚ä¸”å…ˆä¸è€ƒè™‘ã€è§„çº¦ã€æ˜¯æ€æ ·äº§ç”Ÿçš„ï¼Œï¼Œæ„è¯†æ˜¯æ€æ ·åšå‡ºã€å‡ºèº«é€‰æ‹©ã€çš„ï¼Ÿé æŸç§æ›´é«˜åŠ›é‡çš„å­˜åœ¨åˆ†é…(ç±»ä¼¼äºä¹‹å‰çš„é«˜æ ¡è´Ÿè´£å°±ä¸šåˆ†é…)ï¼Œè¿˜æ˜¯é æ„è¯†ä¸ªä½“çš„èƒ½åŠ›å»æŠ¢å¤ºèµ„æº(å‡ºèº«é€‰æ‹©)ï¼Ÿå¦‚æœæ˜¯åˆ†é…çš„è¯ï¼Œï¼Œå¦‚ä½•ä¿è¯ã€æ„è¯†ç¤¾ä¼šã€çš„å…¬å¹³æ­£ä¹‰ï¼Ÿï¼Ÿå¦‚æœæ˜¯é ä¸ªä½“èƒ½åŠ›æŠ¢å¤ºèµ„æºçš„è¯ï¼Œå¦‚æœè§£å†³æŠ¢å¤ºè¿‡ç¨‹ä¸­å­˜åœ¨çš„é€‰æ‹©æƒäº‰è®®ï¼Ÿé ç±»ä¼¼äººç±»ç¤¾ä¼šæ³•åº­ä¸€æ ·çš„å­˜åœ¨ï¼Ÿä¼šä¸ä¼šå¤ªä½æ•ˆã€‚ã€‚é‚£åƒç¨‹åºä¸­çš„é”é—®é¢˜ï¼Ÿæ–°çš„å‡ºèº«é€‰æ‹©å‡ºç°ï¼ŒæŸä¸ªæ„è¯†æŠ¢åˆ°è¯»å–è¿™ä¸ªé€‰æ‹©æƒçš„æƒåˆ©ï¼Œï¼Œç„¶åäº†è§£è¿™ä¸ªé€‰æ‹©ï¼Œç„¶ååšå‡ºé€‰æ‹©è¦ä¸è¦åšè¿™å¯¹å¤«å¦»å­©å­ï¼Œï¼Œè¿™æœŸé—´å…¶ä»–æ„è¯†ä¸ªä½“æ˜¯ä¸èƒ½é‡å¤äº‰å¤ºè¿™ä¸ªå‡ºèº«é€‰æ‹©çš„ã€‚ç­‰ä¹‹å‰æŠ¢åˆ°çš„é‚£ä¸ªæ„è¯†åšå‡ºå†³å®šï¼Œï¼Œå¦‚æœé€‰æ‹©ã€æŠ•èƒã€(æ€ªæ€ªçš„..)ï¼Œé‚£ä¹ˆè¿™ä¸ªé€‰æ‹©æ¶ˆå¤±ã€‚å¦‚æœæ”¾å¼ƒè¿™ä¸ªå‡ºèº«é€‰æ‹©ï¼Œé‚£ä¹ˆå…¶ä»–æ„è¯†æ‰å¯ä»¥å†å»äº‰å¤ºè¿™ä¸ªé€‰æ‹©æƒçš„è¯»å–æƒåˆ©ã€‚ å†å…¶æ¬¡ï¼Œï¼Œå¦‚æœæœ‰çš„æ„è¯†ä¸ªä½“èƒ½åŠ›å¾ˆå¼±ï¼Œæ€»æ˜¯æŠ¢ä¸åˆ°ã€å‡ºèº«é€‰æ‹©ã€ï¼ŒTAä¼šä¸ä¼šè¢«ã€è§„çº¦ã€æ·˜æ±°ï¼Œå¼ºåˆ¶ã€æŠ¥åºŸã€ï¼Ÿå¦‚æœæœ‰çš„æ„è¯†èƒ½åŠ›å¹¶ä¸å¼±ï¼Œåªæ˜¯ä¸€ç›´ä¸èƒ½åšå‡ºæŠ•èƒçš„é€‰æ‹©ï¼Œï¼Œé‚£TAä¼šä¸ä¼šã€å˜è€ã€ï¼Ÿï¼ŸTAçš„èƒ½åŠ›ä¼šä¸ä¼šéšåšå‡ºé€‰æ‹©æ¬¡æ•°çš„å¢é•¿è€Œè¡°å‡ï¼Ÿï¼Ÿï¼Ÿå¦‚æœæ„è¯†åœ¨æ„è¯†çš„ä¸–ç•Œä¸ä¼šæ¶ˆäº¡ï¼Œé‚£ä¹ˆæ„è¯†ä¸–ç•Œä¼šä¸ä¼šåƒäººç±»ä¸€æ ·é¢ä¸´ã€äººå£é—®é¢˜ã€(ã€èµ„æºé—®é¢˜ã€)ï¼Œä¸ä¼šä¹Ÿæœ‰ç­éœ¸å§ï¼Ÿï¼ï¼ OKï¼Œï¼Œåˆ«çš„éƒ½ç‰¹ä¹ˆä¸ç®¡äº†ã€‚å¦‚æœæ„è¯†åšå‡ºæŠ•èƒçš„é€‰æ‹©ä¹‹åï¼Œæ¥åˆ°ã€äººé—´ã€ï¼Œé‚£ TA èƒ½ä¸ºè‡ªå·±çš„é€‰æ‹©è´Ÿè´£ä¹ˆï¼ŸTA ä¼šä¸ä¼šåæ‚”åšå‡ºå½“åˆçš„é€‰æ‹©ï¼Ÿçˆ¶æ¯è¿˜æœ‰å¿…è¦å¯¹è¿™ä¸ªã€æ„è¯†ã€è´Ÿè´£ä¹ˆï¼Ÿå“å‘¦ï¼Œå½“åˆæ˜¯ä½ åšå‡ºçš„é€‰æ‹©è¦åšæˆ‘ä»¬çš„å­©å­ï¼Œæˆ‘ä»¬åˆæ²¡æœ‰é€¼ä½ è¯¶ã€‚ã€‚æ€ä¹ˆåˆæœ‰ç‚¹åƒè‡ªåŠ¨é©¾é©¶å‘ç”Ÿäº‹æ•…æ—¶çš„ä¼¦ç†é—®é¢˜ã€‚ã€‚ã€‚æ—¥ï¼Œï¼Œåˆæƒ³åˆ°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼è‡ªæ€ä¼šä¸ä¼šå˜æˆä¸€ç§æƒåˆ©(ä»æŸç§ç¨‹åº¦ä¸Šè®²ï¼Œä¸€ç›´éƒ½æ˜¯)ï¼Ÿæ¯å½“æœ‰æ„è¯†ä¸æ»¡ç°çŠ¶çš„æ—¶å€™ï¼Œå°±ä¼šåšå‡ºè‡ªæ€çš„é€‰æ‹© æ¥è¾¾åˆ°é‡æ–°é€‰æ‹©å‡ºèº«çš„ç›®çš„ã€‚é‚£è¿™æ ·ï¼Œï¼Œã€äººé—´ã€ä¼šä¸ä¼šå˜æˆã€åœ°ç‹±ã€ã€‚ã€‚é‚£é¢‘ç¹ã€è‡ªæ€ã€çš„æ„è¯†ä¼šä¸ä¼šè¢«æ‹‰é»‘ï¼ŒæŸæ®µæ—¶é—´å†…ç¦æ­¢æŠ•èƒ(ğŸ¤¦â€â™€ï¸)ï¼Ÿï¼Ÿä¸«ä¸«ï¼Œï¼Œåˆä¼‘çš„æ—¶å€™åˆæƒ³åˆ°ä¸€ä¸ªä¸¥é‡çš„åæœï¼ï¼è¿™ä¸ªä¸–ç•Œä¼šå› æ­¤å˜å¾—æ— è¶£ï¼Œä¸¥é‡ç ´åäº†äººç±»åŸºå› åº“çš„å¤šæ ·æ€§ï¼ï¼è¯•æƒ³ä¸€ä¸‹ï¼Œå…¨ä¸–ç•Œåªå‰©ä¸‹å‡ å¤§å®¶æ—ä»¥åŠä»–ä»¬çš„äº²æˆšã€æœ‹å‹ã€‚ã€‚å€’æ˜¯æ²¡ç©·äººäº†ï¼Œå¤§å®¶éƒ½é‚£ä¹ˆæœ‰é’±ï¼Œå¯¹æˆ‘ä»¬è€Œè¨€ï¼Œå£¹ä½°äº¿å’Œä¸€äº¿åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œåæ­£ä¸€ä¸ªäººèƒ½åŒæ—¶å ç”¨çš„èµ„æºä¹Ÿå°±é‚£ä¹ˆå¤šã€‚ã€‚ è¯¶ï¼Ÿï¼Ÿæ„è¯†æŠ•èƒä¹‹å‰åº”è¯¥ä¼šå¿˜è®°è‡ªå·±ã€æ„è¯†ç¤¾ä¼šã€ä¸­çš„ç”Ÿæ´»å§ï¼Ÿï¼Ÿï¼Ÿè¯¶ï¼Œï¼Œé‚£è¿™æ ·ï¼Œç°åœ¨å†è¯´è‡ªå·±å½“åˆæ²¡å¾—é€‰æ‹©å¥½åƒä¸å¤ªåˆç†è¯¶ã€‚ã€‚ã€‚ å…³äºæ— çŸ¥ä¹‹å¹•æ— çŸ¥ä¹‹å¹•æœ€æ—©æ˜¯åœ¨è¿ˆå…‹å°”âˆ™æ¡‘å¾·å°”çš„ã€å…¬æ­£-è¯¥å¦‚ä½•åšæ˜¯å¥½ã€(ä¸­ä¿¡å‡ºç‰ˆç¤¾)çœ‹åˆ°çš„ä¸€ä¸ªæ¦‚å¿µã€‚å®ƒå‡ºç°åœ¨&lt;è®¾æƒ³å®Œç¾çš„å¥‘çº¦&gt;ä¸­ï¼Œï¼Œ è®©æˆ‘ä»¬æ¥æƒ³è±¡ä¸€ç§åœ¨é‚£äº›æ‹¥æœ‰å¹³ç­‰çš„ï¼Œè€Œéä¸å¹³ç­‰çš„æƒåˆ©å’ŒçŸ¥è¯†çš„äººä»¬ä¹‹é—´æ‰€è¾¾æˆçš„åè®®ï¼šä»–ä»¬å¤„äºåŒæ ·çš„å¢ƒå†µï¼Œè€Œå¹¶éä¸åŒçš„å¢ƒå†µã€‚åŒæ—¶ä¹Ÿè®¾æƒ³ä¸€ä¸‹ï¼Œè¿™ä»½å¥‘çº¦çš„å¯¹è±¡å¹¶ä¸æ˜¯ç®¡é“é“ºè®¾æˆ–å…¶ä»–çš„æ™®é€šäº¤æ˜“ï¼Œè€Œæ˜¯é‚£äº›æ²»ç†æˆ‘ä»¬çš„ç”Ÿæ´»çš„ã€åˆ†é…æˆ‘ä»¬ä½œä¸ºå…¬æ°‘æ‰€å…·æœ‰çš„æƒåˆ©ä¸ä¹‰åŠ¡çš„å„ç§åŸåˆ™ã€‚åœ¨è¿™æ ·çš„å„æ–¹ä¸­æ‰€è¾¾æˆçš„è¿™æ ·ä¸€ä¸ªå¥‘çº¦ï¼Œå°±ä¸ä¼šæœ‰å‹è¿«ã€æ¬ºéª—æˆ–å…¶ä»–ä¸å…¬å¹³çš„ç¼ºç‚¹ã€‚å®ƒçš„å„é¡¹æ¡æ¬¾ç”±äºåŒæ„æœ¬èº«ï¼Œå°±å¿…ç„¶æ˜¯å…¬æ­£çš„ï¼Œè€Œæ— è®ºå®ƒä»¬æ˜¯ä»€ä¹ˆã€‚â€¦æ— çŸ¥ä¹‹å¹•é€šè¿‡ä¿è¯æ²¡æœ‰äººçŸ¥é“ä»–åœ¨ç¤¾ä¼šä¸­çš„åœ°ä½ï¼Œä»–çš„ä¼˜ç‚¹æˆ–ç¼ºç‚¹ï¼Œä»–çš„ä»·å€¼æˆ–ç›®çš„ï¼Œä»è€Œä¿è¯äº†æ²¡æœ‰äººèƒ½å¤Ÿ(å³ä½¿æ˜¯æ— æ„çš„)åˆ©ç”¨ä¸€ç§æ›´å¥½çš„äº¤æ˜“åœ°ä½ã€‚ å¦‚æ­¤ï¼Œï¼Œæˆ‘ä»¬ä¸èƒ½é€‰æ‹©è‡ªå·±çš„å‡ºèº«(ç”Ÿ)ï¼Œè¿™ä¸å°±æ˜¯ã€æ— çŸ¥ä¹‹å¹•ã€ä¹ˆï¼Ÿ è®°å¾—åœ¨ä¹‹å‰çš„æŸä¸€ä¸ªå†¬å¤©ï¼Œå’Œä¸€ä¸ªå¾ˆè¦å¥½çš„æœ‹å‹å»é¾™æ³‰å¯ºï¼ŒåŠå±±è…°ä¼‘æ¯çš„æ—¶å€™ï¼Œè®¨è®ºç±»ä¼¼çš„è¯é¢˜ã€‚æœ‹å‹æåˆ°ã€æˆ‘è§‰çš„äººè¿™ä¸€ç”Ÿæ˜¯ä¸å®Œæ•´çš„ï¼Œæˆ‘ä»¬æ²¡åŠæ³•å†³å®šè‡ªå·±çš„å‡ºç”Ÿï¼Œä¹Ÿæ²¡åŠæ³•æ¸…é†’çš„ç»å†è‡ªå·±çš„æ­»äº¡ã€‚ã€ã€‚æ·±ä»¥ä¸ºç„¶ï¼Œæå¤´å»å°¾ï¼Œæˆ‘ä»¬åªèƒ½æ¸…é†’çš„ä½“éªŒæ´»ç€çš„è¿™æ®µæ—¶é—´ã€‚å‡ºç”Ÿä¹‹å‰ï¼ŒåŒ…æ‹¬å‡ºç”Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œä»¥åŠå‡ºç”Ÿåçš„å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å¯¹å¤–ç•Œçš„åˆºæ¿€åšå‡ºåˆç†çš„ååº”(å¤§æ¦‚å°±æ˜¯ã€æ— çŸ¥ã€ã€æœªå¼€åŒ–ã€çš„é‚£æ®µæ—¶é—´ï¼Œè¿™é‡Œä¸çŸ¥é“æ€ä¹ˆè¡¨è¿°äº†..)ï¼Œæ­»äº¡äº¦æ˜¯å¦‚æ­¤ã€‚ä½†å¦‚æœæˆ‘ä»¬å¯ä»¥é€‰æ‹©å‡ºèº«çš„è¯ï¼Œé‚£ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†ï¼Œæˆ‘ä»¬æ‹¥æœ‰äº†å®Œæ•´çš„äººç”Ÿï¼Œäººç”Ÿæ‰€æœ‰çš„é˜¶æ®µéƒ½æœ‰æ„è¯†å­˜åœ¨ï¼Œç”šè‡³è¿˜æœ‰å¦å¤–ä¸€ä¸ªä¸–ç•Œçš„ä½“éªŒï¼Œè™½ç„¶æˆ‘ä»¬å¯èƒ½ä¼šä¸è®°å¾—ï¼Œï¼Œè¿™é‡Œæœ‰bugã€‚ã€‚äººç±»ä¸ºä»€ä¹ˆè¦æœ‰åˆšå‡ºç”Ÿé‚£æ®µæ—¶é—´çš„æ— çŸ¥ã€æœªå¼€åŒ–ï¼Œè®°å¿†å’Œè®¤çŸ¥èƒ½åŠ›ä¸ºä»€ä¹ˆä¸å¯ä»¥é—ä¼ ï¼Ÿï¼ï¼Ÿè¿™é‡Œä¹Ÿå¯ä»¥å¥½å¥½å¼€ä¸‹è„‘æ´ï¼Œï¼Œ ä»¥å‰ä¹Ÿä¼šå› ä¸ºè‡ªå·±ä¸èƒ½é€‰æ‹©å‡ºèº«è€Œè€¿è€¿äºæ€€ï¼Œï¼Œè¯·ä¸è¦è¯¯ä¼šï¼Œæˆ‘éå¸¸çˆ±æˆ‘çš„çˆ¸å¦ˆï¼Œæˆ‘åªæ˜¯æƒ³ä¸æ˜ç™½ä¸ºä»€ä¹ˆä¸å¯ä»¥ï¼Œè€Œä¸æ˜¯å¯ä»¥é€‰æ‹©å‡ºèº«çš„è¯ï¼Œæˆ‘å¯èƒ½ä¼šæ‹¥æœ‰æ›´å¥½çš„äººç”Ÿã€‚ä½†æ˜¯ç»è¿‡è¿™ä¸ªã€æ€ç»´æ¸¸æˆã€åï¼Œæˆ‘å¥½åƒæ˜ç™½äº†ï¼Œä¹Ÿåº†å¹¸æ— çŸ¥ä¹‹å¹•çš„å­˜åœ¨ã€‚ æœ€åè¯»è¿‡çš„ä¹¦çš„ç¡®ä¼šå¿˜è®°ï¼Œä½†å†¥å†¥ä¸­è¿˜æ˜¯å¯¹ä¼šæ”¹å˜ä¸€äº›ä»€ä¹ˆï¼Œï¼Œåƒã€æ— çŸ¥ä¹‹å¹•ã€ï¼Œè‹¥éè¯»è¿‡ã€å…¬æ­£ã€ï¼Œå¯èƒ½è¿˜ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šæ„è¯†åˆ°è¿™æ ·ä¸€ç§å­˜åœ¨ã€‚ä¹¦æ˜¯13å¹´å¯’å‡ä¹°çš„ï¼Œåœ¨é‡åº†å¾…çš„é‚£ä¸€ä¸ªæœˆï¼Œç¬¬ä¸€æ¬¡åœ¨äºšé©¬é€Šä¹°ä¹¦ã€‚æƒ³æ¥é‚£æ—¶å€™å°±å¯¹è¿™ç§ä¸œè¥¿æ„Ÿå…´è¶£ï¼Œä¹¦ç«Ÿç„¶ä¹Ÿè¯»ä¸‹å»äº†ä¸€åŠï¼Œå†°ç³•æ£å„¿è¿˜å¤¹åœ¨203é¡µğŸ¤¦â€â™€ï¸ã€‚é‚£æ—¶å€™è¿˜æ²¡æ¥è§¦å“²å­¦ï¼Œä¹¦ä¸­çš„ç¬”è®°ä¹Ÿå¾ˆå¹¼ç¨šï¼Œï¼Œæƒ³æ¥ç°åœ¨è¯¥é‡è¯»äº†ã€‚æ¸©æ•…çŸ¥æ–°ï¼Œï¼Œä»¥å‰ä¸æ˜¯å¾ˆæ˜ç™½è¿™å¥è¯ï¼Œä¹¦ä¸Šçš„ç¡¬çŸ¥è¯†ç‚¹å°±é‚£äº›ï¼Œè·Ÿä»€ä¹ˆæ—¶å€™çœ‹æœ‰ä»€ä¹ˆå…³ç³»ã€‚ã€‚ç°åœ¨æƒ³æ¥ï¼Œæ¸©æ•…çŸ¥æ–°ç¡®æ˜¯æœ‰é“ç†çš„ï¼Œï¼Œå¾ˆå¤šä¹¦è¯»ä¸æ‡‚ï¼Œåƒä¸‡ä¸è¦ç¡¬å•ƒï¼Œæ”¾ä¸€æ”¾ï¼Œå†ç»å†ä¸€äº›äº‹æƒ…ï¼Œå›è¿‡å¤´é‡è¯»ï¼Œæ€»èƒ½è¯»åˆ°æ–°çš„æ„Ÿå—ã€‚æ€»ä¹‹å‘¢ï¼Œè¯»çš„ä¹¦å¿…é¡»è·Ÿè‡ªå·±çš„é˜…å†ç›¸åŒ¹é…ï¼Œæ¯ä¸ªäººåœ¨ä¹¦ä¸­ï¼Œåœ¨ç”µå½±ä¸­è¯»åˆ°çš„å¤§æŠµè¿˜æ˜¯è‡ªå·±çš„æ•…äº‹ã€‚ æ™šå®‰~]]></content>
      <tags>
        <tag>å‡ºèº«</tag>
        <tag>æ— çŸ¥ä¹‹å¹•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºå¾®ä¿¡å¡åˆ¸é¢„è§ˆæ¥å£]]></title>
    <url>%2F2018%2F07%2F13%2FWeChat-card-coupons-preview-interface-%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨åšå¾®ä¿¡å¡åˆ¸æ¥å£ç›¸å…³çš„åŠŸèƒ½ï¼Œï¼Œå¦ˆè€¶ï¼Œç›¸å½“äºå¤åˆ¶ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å¹³å°çš„å¡åˆ¸æ¨¡å—ï¼å…‰å­—æ®µå°±èƒ½å4å±ï¼Œç®€ç›´å°±æ˜¯æƒ©ç½šæ€§ç¼–ç¨‹ï¼Œæçš„æˆ‘å¾ˆç„¦è™‘ã€‚ã€‚èŠ±äº†ä¸¤å‘¨çš„æ—¶é—´ï¼Œç»ˆäºä»¿ç…§å¾®ä¿¡åŸç‰ˆåœ¨è‡ªå·±åå°å®Œæˆäº†åˆ›å»ºå¡åˆ¸çš„åŠŸèƒ½ï¼Œï¼Œå½“åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°çœ‹åˆ°æ–°åˆ›å»ºçš„æŠ˜æ‰£åˆ¸ï¼Œé•¿èˆ’ä¸€å£æ°”ï¼Œç»ˆäºçœ‹è§äº†æ­£åé¦ˆï¼ï¼æ¥ä¸‹æ¥ï¼Œï¼Œå¾—é¢„è§ˆä¸‹å§ï¼Ÿä¸èƒ½ç›´æ¥æŠ•æ”¾å‘€ã€‚OKï¼Œé¢„è§ˆæ¥å£ï¼Œï¼Œä»Šå¤©çš„ä¸»è§’å„¿ã€‚è¦çŸ¥é“ï¼Œå¡åˆ¸é¢„è§ˆæ¥å£åšçš„å¾ˆé¡ºåˆ©çš„è¯ï¼Œä¹Ÿå°±æ²¡è¿™ç¯‡æ–‡ç« äº†ã€‚ã€‚ OKï¼Œè¿›å…¥æ­£é¢˜å„¿ã€‚ åˆ›å»ºå®Œå¡åˆ¸ä¹‹åï¼Œæˆ‘ä»¬æŒ‰ç…§é€»è¾‘ï¼Œå¯ä»¥åº”è¯¥ç»§ç»­å¾€ä¸‹è¿›è¡Œï¼Œåœ¨æ–‡æ¡£ä¸­å¯ä»¥æ‰¾åˆ°ç®¡ç†å¡åˆ¸çš„æ¨¡å—ã€‚ç›´æ¥åœ¨è¿™ä¸ªé¡µé¢æœç´¢å…³é”®å­—ã€é¢„è§ˆæ¥å£ã€ï¼Œï¼Œå³ğŸ‘‡ ###4.6 é¢„è§ˆæ¥å£æ”¯æŒå¼€å‘è€…è°ƒç”¨è¯¥æ¥å£ä¸‹å‘å¡åˆ¸ã€‚è®¢é˜…å·ä¸å¯ç”¨ï¼ŒæœåŠ¡å·è®¤è¯åå¯ç”¨ã€‚è¯¦æƒ…è§ é¢„è§ˆæ¥å£ æŒ‰ç†å„¿è¯´ï¼Œè¿™å°±æˆäº†å‘€ï¼Œï¼Œç…§é¢„è§ˆæ¥å£åšå°±å¾—äº†å‘—ã€‚ä½†æ˜¯ï¼ï¼ï¼ç‚¹å¼€é¢„è§ˆæ¥å£ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å•¥ï¼Ÿä¸«ä¸«ï¼Œç©ºçš„ï¼Œç©ºé¡µé¢ï¼Œå•¥ç©æ„å„¿æ²¡æœ‰ï¼Ÿï¼ğŸ™ƒ(é—®å€™ä¸€ä¸‹å¾®ä¿¡å†™æ–‡æ¡£çš„åŒå­¦) å†·é™ä¸€ä¸‹ï¼Œï¼Œæ—¢ç„¶åšäº†é“¾æ¥ï¼Œè¿™è¯´æ˜ææœ‰å¯èƒ½åœ¨åˆ«çš„æ¨¡å—ä¸­ï¼Œå¦åˆ™å°±æ²¡å¿…è¦åšé“¾æ¥äº†å¯¹å§ï¼›å¦å¤–ï¼Œé¢„è§ˆæ¥å£ï¼Œé‚£å¾—æŠŠæ¶ˆæ¯æ¨é€åˆ°æ‰‹æœºä¸Šå‘€ï¼Œäº‹ä»¶æ¨é€ï¼Œæ¶ˆæ¯ç®¡ç†ï¼Ÿ~é‚£æ‰¾å§ï¼Œï¼Œloding.. è¯¶ï¼è¿˜çœŸåœ¨æ¶ˆæ¯ç®¡ç†çš„ç¾¤å‘æ¥å£å’ŒåŸåˆ›æ ¡éªŒæ¨¡å—ä¸­ç»™æ‰¾ç€äº†ï¼ é¢„è§ˆæ¥å£ã€è®¢é˜…å·ä¸æœåŠ¡å·è®¤è¯åå‡å¯ç”¨ã€‘ æ–‡æ¡£æœ‰äº†ï¼ŒnÃ¨ng! å¡åˆ¸ï¼š123456789&#123;"touser": "OPENID", "wxcard": &#123; "card_id": "123dsdajkasd231jhksad", "card_ext": "&#123;"code": "","openid": "","timestamp": "1402057159","signature": "017bb17407c8e0058a66d72dcc61632b70f511ad"&#125;" &#125;, "msgtype": "wxcard"&#125;// è¯·æ³¨æ„ï¼Œä¸Šè¿°JSONæ•°æ®ä¸­çš„touserå­—æ®µéƒ½å¯ä»¥æ”¹ä¸ºtowxnameï¼Œè¿™æ ·å°±å¯ä»¥é’ˆå¯¹å¾®ä¿¡å·è¿›è¡Œé¢„è§ˆï¼ˆè€ŒéopenIDï¼‰ï¼Œtowxnameå’ŒtouseråŒæ—¶èµ‹å€¼æ—¶ï¼Œä»¥towxnameä¼˜å…ˆã€‚ å‚æ•°è¯´æ˜å°±ä¸æ”¾äº†ï¼Œæ–‡æ¡£ä¸­æœ‰è¯´æ˜ï¼Œï¼Œä½†æ˜¯è¿™ä¸ªcard_extä»€ä¹ˆé¬¼ï¼Ÿï¼ï¼æ²¡å¬è¯´è¿‡å‘€éƒ½ï¼Œå¿’çœ¼ç”Ÿã€‚ã€‚å¦å¤–ï¼Œè¿™ä¸ªå­—æ®µé‡Œï¼Œåˆ«çš„å‚æ•°è¿˜å¥½è¯´ã€‚ä½†ï¼Œï¼Œsignatureæ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Ÿè¿™æ˜¯å…³é”®å‘€ã€‚å¾—ï¼Œè¿™çœŸéš¾å€’æˆ‘äº†ï¼Œè€Œä¸”è¿™é¡µé¢ä¸­åªæœ‰è¿™ä¸€ä¸ªåœ°æ–¹å‡ºç°äº†è¿™ä¸€å±æ€§ã€‚æå“ªå„¿æ‰¾å‘€ï¼Œï¼Œç™¾åº¦å…ˆè¡Œï¼Œå…³é”®å­—[å¾®ä¿¡ å¡åˆ¸ card_ext] é¡ºè—¤æ‘¸ç“œï¼Œæ‰¾åˆ°äº†å¾®ä¿¡ç½‘é¡µå¼€å‘æ¨¡å—ä¸­çš„å¾®ä¿¡JS-SDKè¯´æ˜æ–‡æ¡£çœ‹ä¸Šå»æ€ä¹ˆé‚£ä¹ˆä¸é è°±ï¼Ÿæ¶ˆæ¯æ¨é€è·Ÿç½‘é¡µå¼€å‘æœ‰å˜›å…³ç³»ï¼Ÿï¼ï¼ä½†åœ¨è¿™ä¸ªé¡µé¢ä¸­è¿˜çœŸå°±æ‰¾åˆ°äº†card_extå­—æ®µï¼Œï¼ŒğŸ‘‡ é™„å½•4-å¡åˆ¸æ‰©å±•å­—æ®µåŠç­¾åç”Ÿæˆç®—æ³•å¡åˆ¸ api_ticketå¡åˆ¸æ‰©å±•å­—æ®µcardExtè¯´æ˜ç­¾åè¯´æ˜ å‰©ä¸‹çš„ä¸€åˆ‡æŒ‰æ–‡æ¡£æ¥å°±æˆäº†ï¼Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ğŸ‘‡ ######ç­¾åè¯´æ˜1.å°† api_ticketã€timestampã€card_idã€codeã€openidã€nonce_strçš„valueå€¼è¿›è¡Œå­—ç¬¦ä¸²çš„å­—å…¸åºæ’åºã€‚ è¿™ä¸ªå­—å…¸åºæ’åºï¼Œç¬¬ä¸€æ¬¡çœ‹è§è¿˜çœŸæœ‰ç‚¹æ‡µï¼Œï¼Œä½†å¥½åœ¨é€šè¿‡æœç´¢å¼•æ“å¯ä»¥è§£å†³~æˆ‘å‚è€ƒäº†è¿™ç¯‡åšå®¢ï¼Œï¼ŒTreeMapæŒ‰ç…§valueè¿›è¡Œæ’åºå®ç°ä»£ç å¦‚ä¸‹ğŸ‘‡123456789101112131415161718192021222324252627Map&lt;String, String&gt; wxMap = new TreeMap&lt;String, String&gt;();//å‚æ•°å°è£…wxMap.put("api_ticket", wxJsApiTicket);wxMap.put("timestamp", wxTimestamp);wxMap.put("card_id", cardId);wxMap.put("code", "");// è§†å®é™…æƒ…å†µwxMap.put("openid", "");// è§†å®é™…æƒ…å†µwxMap.put("noncestr", wxNoncestr);// å°† api_ticketã€timestampã€card_idã€codeã€openidã€nonce_strçš„valueå€¼è¿›è¡Œå­—ç¬¦ä¸²çš„å­—å…¸åºæ’åºã€‚List&lt;Entry&lt;String, String&gt;&gt; list = new ArrayList&lt;Entry&lt;String, String&gt;&gt;(wxMap.entrySet()); Collections.sort(list,new Comparator&lt;Map.Entry&lt;String,String&gt;&gt;() &#123; //å‡åºæ’åº public int compare(Entry&lt;String, String&gt; o1, Entry&lt;String, String&gt; o2) &#123; return o1.getValue().compareTo(o2.getValue()); &#125; &#125;);// å°†æ’åºåçš„å€¼ä¾æ¬¡å–å‡ºï¼Œå¹¶æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ã€‚StringBuilder wxBaseString = new StringBuilder();for (Entry&lt;String, String&gt; param : list) &#123; wxBaseString.append(param.getValue());&#125;log.info(wxBaseString.toString());// åŠ å¯†è·å–signatureString wxSignature = HashKit.sha1(wxBaseString.toString()); è¿™å‰©ä¸‹çš„å°±æ˜¯è°ƒç”¨å¾®ä¿¡å¡åˆ¸é¢„è§ˆæ¥å£äº†ï¼Œè‡ªå·±æ¥å§~ PS: è¿™æ˜¨å„¿ä¸ªçœ‹äº†å§œæ–‡å„¿çš„ã€é‚ªä¸å‹æ­£ã€ï¼Œï¼Œæœ¬ç¯‡åˆ†äº«çš„é£æ ¼å°±è¿™æ ·äº†ï¼Œå¤šåŒ…æ¶µã€‚å“­ç¬‘ å‚è€ƒé“¾æ¥ï¼š ç¾¤å‘æ¥å£ https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1481187827_i0l21 å¾®ä¿¡JS-SDKè¯´æ˜æ–‡æ¡£ https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421141115 å­—å…¸åºæ’åº http://www.cnblogs.com/Berryxiong/p/6240514.html debug https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=cardsign]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å¡åˆ¸</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¯¹é©¬æ–¯æ´›éœ€è¦å±‚æ¬¡ç†è®ºçš„ç®€å•æŠ½è±¡]]></title>
    <url>%2F2018%2F07%2F12%2FAbstraction_Maslow's-hierarchy-of-needs%2F</url>
    <content type="text"><![CDATA[ä¸­åˆåäºŒç‚¹ï¼Œå¤ªé¥¿äº†ï¼Œï¼Œå¿ƒé‡Œåˆæ€»æƒ³ç€å‰é˜µå­è¯»åˆ°çš„ä¸€å¥è¯ã€‚å™¢ï¼Ÿçªç„¶è§‰å¾—é©¬æ–¯æ´›çš„éœ€æ±‚å±‚æ¬¡ç†è®ºåˆšå¥½å¯ä»¥æŠ½è±¡ä¸€ä¸‹~ â†‘ ++++++++++++++++++++++++++++++++â†‘ +++++++++++++&nbsp;++++++++++++++&nbsp;&nbsp;++++â†‘ +++++++++++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++++++++++&nbsp;&nbsp;&nbsp;&nbsp;++++â†‘ +++++++++&nbsp;è‡ªæˆ‘å®ç°&nbsp;+++++++++â†’äººä¸å†…å¿ƒ++++â†‘ +++++++&nbsp;&nbsp;&nbsp;å°Šé‡éœ€è¦&nbsp;&nbsp;&nbsp;++++++++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++â†‘ +++++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å½’å±ä¸çˆ±&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++â†’äººä¸ç¤¾ä¼š&nbsp;&nbsp;&nbsp;++++++â†‘ +++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®‰å…¨éœ€è¦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++++++â†‘ +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”Ÿç†éœ€è¦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+â†’äººä¸ç‰©è´¨&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++++++â†‘ ++++++++++++++++++++++++++++++++++++++++++++++++++ ç®€å•æ¥è¯´ï¼Œï¼Œã€ç”Ÿç†éœ€è¦ã€å’Œã€å®‰å…¨éœ€è¦ã€æ˜¯äººä¸ç‰©è´¨çš„å…³ç³»ï¼Œã€å½’å±ä¸çˆ±çš„éœ€è¦ã€å’Œã€å°Šé‡éœ€è¦ã€æ˜¯äººä¸äººæˆ–äººä¸ç¤¾ä¼šçš„å…³ç³»ï¼Œã€è‡ªæˆ‘å®ç°ã€æ˜¯äººä¸å†…å¿ƒæˆ–äººä¸è‡ªå·±å…³ç³»ã€‚ æ¯«æ— è¿å’Œæ„Ÿï¼å¹´é¾„è¶Šå¤§ï¼Œè¶Šå‘çš„å–œæ¬¢è·Ÿå¹´é•¿çš„äººæ¥è§¦ï¼Œï¼Œå¥½åƒçªç„¶å°±çŸ¥é“åŸå› äº†ã€‚]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>é©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®º</tag>
        <tag>æŠ½è±¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çœŸéšæœº]]></title>
    <url>%2F2018%2F07%2F08%2Ftruly_random%2F</url>
    <content type="text"><![CDATA[æ˜¯è¿™æ ·ä¹ˆï¼Ÿ@(2018-06-28 09:30)]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>éšæœº</tag>
        <tag>è‡ªç”±æ„å¿—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºå±€éƒ¨æ€§åŸç†]]></title>
    <url>%2F2018%2F06%2F25%2Fbranch_prediction%2F</url>
    <content type="text"><![CDATA[å› ä¸ºä¹‹å‰ä¸€ç›´åœ¨å…³æ³¨ã€ç å†œç¿»èº«ã€å…¬ä¼—å·ï¼Œä½œè€…ä»¥å¾ˆåŸºç¡€çš„æ–‡å­—æ„å»ºå…³äºè®¡ç®—æœºå…³äºç¼–ç¨‹çš„å°æ•…äº‹ï¼Œç”±æµ…å…¥æ·±ï¼Œï¼Œå…¶ä¸­çš„çŸ¥è¯†ç‚¹å¯ä»¥è‡ªå·±å»¶ä¼¸é˜…è¯»ï¼Œè¿˜æ˜¯éå¸¸ä¸é”™çš„ï¼Œå¾ˆé€‚åˆå…¥é—¨~åæ¥ï¼Œä½œè€…å‡ºä¹¦äº†ï¼Œæ”¯æŒäº†ä¸€æ³¢ï¼Œï¼Œæ¯•ç«Ÿçº¸è´¨ä¹¦ç¿»èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚OKï¼Œè¿›å…¥æ­£é¢˜ï¼Œï¼Œåœ¨ã€CPUé˜¿ç”˜ã€ä¸­æœ‰æåˆ°ã€å±€éƒ¨æ€§åŸç†ã€ï¼Œï¼Œæœ‰å¿…è¦å»¶ä¼¸é˜…è¯»ä¸‹ã€‚ç½‘ä¸Šæ‰¾åˆ°äº†Stack Overflowä¸­ä¸€ç¯‡æ–‡ç« -Why is it faster to process a sorted array than an unsorted array?-æœ¬æ–‡æ˜¯å¯¹è¿™ç¯‡æ–‡ç« çš„ç®€å•ç¿»è¯‘ï¼Œå››çº§æ°´å¹³ï¼Œè¿˜è¯·å¤šåŒ…æ¶µ å“ˆå“ˆã€‚ ä¸ºä»€ä¹ˆæ’åºåçš„æ•°ç»„æ¯”ä¹±åºçš„æ•°ç»„æ‰§è¡Œèµ·æ¥è¦å¿«ï¼Ÿè¿™æ˜¯ä¸€æ®µçœ‹èµ·æ¥éå¸¸å¥‡æ€ªçš„C++ä»£ç ï¼Œå› ä¸ºæŸäº›åŸå› ï¼Œå°†æ•°ç»„æ’åºä¹‹åå¥‡è¿¹èˆ¬çš„å°†è¿è¡Œé€Ÿåº¦æé«˜äº†å°†è¿‘å…­å€ã€‚ 1234567891011121314151617181920212223242526272829303132#include &lt;algorithm&gt;#include &lt;ctime&gt;#include &lt;iostream&gt;int main()&#123; // ç”Ÿæˆæ•°æ®(æ•°ç»„) const unsigned arraySize = 32768; int data[arraySize]; for (unsigned c = 0; c &lt; arraySize; ++c) data[c] = std::rand() % 256; // !!! å› ä¸ºè¿™ä¸€è¡Œä»£ç ï¼Œä¸‹è¾¹çš„å¾ªç¯è¿è¡Œçš„æ›´å¿«äº† std::sort(data, data + arraySize); // æµ‹è¯• clock_t start = clock(); long long sum = 0; for (unsigned i = 0; i &lt; 100000; ++i)&#123; // Primary loop for (unsigned c = 0; c &lt; arraySize; ++c)&#123; if (data[c] &gt;= 128) sum += data[c]; &#125; &#125; double elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC; std::cout &lt;&lt; elapsedTime &lt;&lt; std::endl; std::cout &lt;&lt; "sum = " &lt;&lt; sum &lt;&lt; std::endl;&#125; å¦‚æœæ²¡æœ‰std::sort(data, data + arraySize);(å³æ•°ç»„æ•°æ®å¤§å°ä¹±åº), ä»£ç è¿è¡Œ11.54ç§’ã€‚ æ•°ç»„å…ƒç´ æ’åºä¹‹åï¼Œè¿è¡Œåªç”¨äº†1.93ç§’ã€‚ èµ·åˆï¼Œæˆ‘ä»¥ä¸ºè¿™ç§ç°è±¡ä¸ç¼–ç¨‹è¯­è¨€æˆ–è€…ç¼–è¯‘å™¨ä»€ä¹ˆçš„æœ‰å…³ç³»ï¼Œï¼Œæ‰€ä»¥ï¼Œæˆ‘æŠŠä»£ç ç§»æ¤åˆ°Javaä¸­è¯•äº†ä¸€ä¸‹ğŸ‘‡ 1234567891011121314151617181920212223242526272829303132import java.util.Arrays;import java.util.Random;public class Main&#123; public static void main(String[] args)&#123; // Generate data int arraySize = 32768; int data[] = new int[arraySize]; Random rnd = new Random(0); for (int c = 0; c &lt; arraySize; ++c) data[c] = rnd.nextInt() % 256; // !!! With this, the next loop runs faster Arrays.sort(data); // Test long start = System.nanoTime(); long sum = 0; for (int i = 0; i &lt; 100000; ++i)&#123; // Primary loop for (int c = 0; c &lt; arraySize; ++c)&#123; if (data[c] &gt;= 128) sum += data[c]; &#125; &#125; System.out.println((System.nanoTime() - start) / 1000000000.0); System.out.println("sum = " + sum); &#125;&#125; è¿è¡Œç»“æœæœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ²¡æœ‰åƒåœ¨C++ä¸­å·®å¾ˆå¤šã€‚ æˆ‘åˆšå¼€å§‹æƒ³åˆ°çš„æ˜¯æŠŠæ•°ç»„æ’åºä¹‹åï¼Œå°†æ•°ç»„è½½å…¥åˆ°å†…å­˜ä¸­äº†ï¼Œï¼Œè½¬å¿µä¸€æƒ³ï¼Œè¿™å¿’è ¢äº†ï¼Œæ•°ç»„æ˜æ˜æ˜¯åˆšç”Ÿæˆçš„(ä¸€ç›´åœ¨å†…å­˜ä¸­)ã€‚ åˆ°åº•å‘ç”Ÿäº†ç¥é©¬ï¼Ÿ ä¸ºä»€ä¹ˆæ’åºåçš„æ•°ç»„æ¯”ä¹±åºæ—¶å¤„ç†é€Ÿåº¦å¿«å¾ˆå¤šï¼Ÿ ä»£ç ä¸­æ±‚å’Œé¡¹æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œåº”è¯¥è·Ÿæ•°ç»„æ•°æ®æ²¡ä»€ä¹ˆå…³ç³»ã€‚ã€‚(å­˜ç–‘) é«˜ç¥¨å›ç­”ä½ å¯èƒ½æ˜¯åˆ†æ”¯é¢„æµ‹å¤±è´¥çš„å—å®³è€…ã€‚ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯åˆ†æ”¯é¢„æµ‹å‘¢ï¼Ÿï¼Ÿ æƒ³è±¡é“è·¯çš„å²”å£ï¼Œï¼ŒğŸ‘‡@(Image by Mecanismo, via Wikimedia Commons. Used under the CC-By-SA 3.0 license.) ç°åœ¨ä¸ºäº†æ–¹ä¾¿è®¨è®ºï¼Œå‡æƒ³æˆ‘ä»¬å›åˆ°äº†19ä¸–çºªï¼Œé‚£æ—¶å€™è¿˜æ— æ³•è¿›è¡Œè¿œè·ç¦»æ— çº¿é€šè®¯ã€‚ ä½ ä½œä¸ºè¿™ä¸ªå²”è·¯å£çš„æ“ä½œå‘˜ï¼Œå¬åˆ°ä¸€è¾†è´§è½¦æ­£åœ¨é©¶æ¥ï¼Œä½†åˆå®Œå…¨ä¸çŸ¥é“å®ƒæƒ³å»å“ªæ¡åˆ†æ”¯è·¯çº¿ã€‚è¿™æ—¶ï¼Œä½ ç¤ºæ„è´§è½¦åœä¸‹æ¥ï¼Œé—®ä»–ä½ æƒ³å»å“ªä¸ªæ–¹å‘ï¼Œç„¶åå°†å¼€å…³è®¾ç½®ä¸ºæ­£ç¡®çš„ä½ç½®ã€‚ ç«è½¦å¾ˆç¬¨é‡ï¼Œå› ä¸ºæƒ¯æ€§çš„åŸå› ï¼Œå®ƒä»¬åœ¨å¯åŠ¨å’Œåœä¸‹æ¥çš„æ—¶å€™é€šå¸¸è¦èŠ±å¾ˆé•¿æ—¶é—´ã€‚ æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å—«ï¼Ÿ(åŠæ³•æ˜¯)çŒœæµ‹å®ƒä¼šå»å¾€å“ªä¸ªæ–¹å‘ï¼ å¦‚æœä½ çŒœå¯¹äº†ï¼Œå®ƒç»§ç»­è¡Œé©¶~ å¦‚æœä½ çŒœé”™äº†ï¼Œç«è½¦å¸æœºä¼šå‘ä½ å¤§å–Šå¤§å«ï¼Œè®©ä½ é‡ç½®å¼€å…³ï¼Œï¼Œç„¶åTAé‡æ–°å¯åŠ¨ï¼Œé©¶å‘å¦ä¸€æ–¹å‘ã€‚ å¦‚æœä½ æ¯æ¬¡éƒ½çŒœå¯¹ï¼Œç«è½¦å°±æ°¸è¿œä¸éœ€è¦åœä¸‹æ¥~å¦‚æœä½ æ€»æ˜¯éƒ½çŒœé”™ï¼Œç«è½¦ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´åœä¸‹æ¥ï¼Œåé€€ï¼Œé‡æ–°å¯åŠ¨ã€‚ã€‚ æŠŠå®ƒçœ‹åšä¸€ä¸ª if ä»£ç å—ï¼šåœ¨èŠ¯ç‰‡çº§åˆ«ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ†æ”¯æŒ‡ä»¤ğŸ‘‡ä½œä¸ºä¸€ä¸ªå¤„ç†å™¨ï¼Œä½ çœ‹åˆ°ä¸€ä¸ªåˆ†æ”¯ç»“æ„ï¼Œï¼Œå®Œå…¨ä¸çŸ¥é“å®ƒå°†è¦æ€ä¹ˆè¿è¡Œï¼Ÿä½ æ€ä¹ˆåšï¼Ÿç­‰åˆ¤æ–­æ¡ä»¶å…ˆè¿è¡Œç»“æŸï¼Œç„¶åæ ¹æ®æ­£ç¡®çš„ç»“æœé€‰æ‹©åˆé€‚çš„åˆ†æ”¯è¿è¡Œã€‚ ç°ä»£å¤„ç†å™¨(é€šå¸¸)å¾ˆå¤æ‚ï¼Œæœ‰å¾ˆé•¿çš„æµæ°´çº¿çº§æ•°ã€‚æ‰€ä»¥ï¼Œä¼šåƒç«è½¦ä¸€æ ·è¯å¾ˆé•¿çš„æ—¶é—´ã€å¯åŠ¨ã€å’Œã€åˆ¹è½¦ã€ã€‚ æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å—«ï¼Ÿ(ç­”æ¡ˆæ˜¯)çŒœæµ‹ç¨‹åºä¼šè¿è¡Œå“ªä¸ªåˆ†æ”¯çš„ä»£ç ã€‚ å¦‚æœçŒœå¯¹äº†ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ~ å¦‚æœçŒœé”™äº†ï¼Œéœ€è¦æ¸…ç©ºæµæ°´çº¿(çš„æ‰€æœ‰ä»»åŠ¡)ï¼Œå›æ»šåˆ°åˆ†æ”¯ç»“æ„å¼€å§‹çš„ä½ç½®ã€‚ç„¶åé‡æ–°å¯åŠ¨æ‰§è¡Œå¦ä¸€ä¸ªåˆ†æ”¯ã€‚ å¦‚æœæ¯æ¬¡éƒ½çŒœå¯¹ï¼Œä½ æ°¸è¿œä¸éœ€è¦è¢«è¿«åœä¸‹~å¦‚æœæ€»æ˜¯çŒœé”™ï¼Œä½ ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´å‡é€Ÿï¼Œå›æ»šï¼Œé‡å¯ã€‚ã€‚ è¿™å°±æ˜¯åˆ†æ”¯é¢„æµ‹ï¼Œï¼Œæˆ‘æ‰¿è®¤è¿™ä¸æ˜¯æœ€å¥½çš„æ¯”å–»ï¼Œå› ä¸ºç«è½¦å¯ä»¥ç”¨æ——å­ä½œä¸ºæŒ‡ç¤ºæ–¹å‘çš„ä¿¡å·ã€‚ä½†æ˜¯åœ¨è®¡ç®—æœºä¸­ï¼Œå¤„ç†å™¨ç›´åˆ°æœ€åä¸€åˆ»æ‰çŸ¥é“æœ€ç»ˆä¼šè¿è¡Œå“ªä¸ªåˆ†æ”¯(çš„ä»£ç )ã€‚ é‚£ä¹ˆï¼Œä½ å¦‚ä½•ç­–ç•¥æ€§åœ°çŒœæµ‹ï¼Œä»¥å°½é‡å‡å°‘ç«è½¦å¿…é¡»åé€€æ‰èƒ½æ‰èƒ½é©¶å‘æ­£ç¡®çš„æ–¹å‘çš„æ¬¡æ•°ï¼Ÿè§‚å¯Ÿè¿‡å»çš„æ‰§è¡Œå†å²ï¼å¦‚æœ99%çš„æƒ…å†µï¼Œç«è½¦éƒ½å‘é©¶å‘å·¦ä¾§ï¼Œé‚£ä¹ˆä½ (è‚¯å®š)çŒœæµ‹(ä¸‹ä¸€æ¬¡)ç«è½¦(åŒæ ·)é©¶å‘å·¦ä¾§ã€‚å¦‚æœå®ƒ(é©¶å‘å·¦ä¾§æˆ–è€…å³ä¾§çš„æƒ…å†µ)äº¤æ›¿å‡ºç°ï¼Œé‚£ä¹ˆä½ (æ ¹æ®æƒ…å†µ)äº¤æ›¿æ”¹å˜ä½ çš„çŒœæµ‹ã€‚å¦‚æœæ¯ä¸‰æ¬¡å°±ä¼šé©¶å‘æŸä¸€ç‰¹å®šçš„æ–¹å‘ï¼Œé‚£ä¹ˆä½ ä¹Ÿä¼šæ®æ­¤ä½œå‡ºåˆç†çš„çŒœæµ‹.. æ¢å¥è¯è¯´ï¼Œä½ è¯•å›¾æŠ½è±¡å‡ºä¸€ä¸ªæ¨¡å‹å¹¶æ®æ­¤ä½œå‡ºçŒœæµ‹ã€‚è¿™æˆ–å¤šæˆ–å°‘æ˜¯åˆ†æ”¯é¢„æµ‹å™¨çš„å·¥ä½œåŸç†ã€‚ å¤§å¤šæ•°åº”ç”¨ç¨‹åºå…·æœ‰è‰¯å¥½è¡¨ç°(well-behaved å…·ä½“æŒ‡ä»€ä¹ˆ??)çš„åˆ†æ”¯ã€‚æ‰€ä»¥ç°ä»£åˆ†æ”¯é¢„æµ‹å™¨é€šå¸¸ä¼šè¾¾åˆ°å¤§äº90ï¼…çš„å‘½ä¸­ç‡ã€‚ä½†æ˜¯å½“é¢å¯¹ä¸å¯è¯†åˆ«çš„æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬æ— æ³•é¢„æµ‹å°†è¦æ‰§è¡Œçš„åˆ†æ”¯ï¼Œè¿™æ—¶åˆ†æ”¯é¢„æµ‹å™¨å®é™…ä¸Šæ˜¯æ¯«æ— ç”¨å¤„çš„ã€‚ æ­£å¦‚ä¸Šè¾¹æˆ‘ä»¬çŒœæµ‹çš„é‚£æ ·ï¼Œç½ªé­ç¥¸é¦–æ˜¯è¿™ä¸ªifä»£ç å—ğŸ‘‡ 12if (data[c] &gt;= 128) sum += data[c]; æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œæ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨0å’Œ255ä¹‹é—´ã€‚æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ’åºä¹‹åï¼Œå¤§è‡´å‰åŠéƒ¨åˆ†å…ƒç´ è¿­ä»£æ—¶ä¸ä¼šè¿›å…¥ifè¯­å¥ã€‚å‰©ä¸‹ååŠéƒ¨åˆ†çš„å…ƒç´ ï¼Œå®ƒä»¬å°†å…¨éƒ¨è¿›å…¥ifè¯­å¥ã€‚ åˆ†æ”¯è¿ç»­å¤šæ¬¡èµ°å‘ç›¸åŒçš„æ–¹å‘æ—¶ï¼Œè¿™å¯¹äºåˆ†æ”¯é¢„æµ‹å™¨éå¸¸å‹å¥½ã€‚å³ä½¿æ˜¯ç®€å•çš„é¥±å’Œè®¡æ•°å™¨ä¹Ÿèƒ½æ­£ç¡®é¢„æµ‹åˆ†æ”¯ï¼Œé™¤äº†é¥±å’Œåæ”¹å˜æ–¹å‘åçš„å°‘æ•°è¿­ä»£ã€‚ å¿«é€Ÿé¢„è§ˆï¼š 1234567T = branch takenN = branch not takendata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...branch = N N N N N ... N N T T T ... T T T ... = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT (easy to predict) ä½†æ˜¯ï¼Œå½“æ•°æ®æ˜¯å®Œå…¨éšæœºçš„æ—¶ï¼Œåˆ†æ”¯é¢„æµ‹å™¨å°†æ— æ³•å‘æŒ¥ä½œç”¨ï¼Œå› ä¸ºå®ƒæ— æ³•é¢„æµ‹éšæœºæ•°æ®ã€‚å› æ­¤ï¼Œå¯èƒ½ä¼šæœ‰å¤§çº¦50ï¼…çš„é¢„æµ‹å¤±è¯¯ã€‚(æ¯”éšæœºä¹±çŒœå¥½ä¸åˆ°å“ªè€Œå»..)ã€‚ 1234data[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118, 14, 150, 177, 182, 133, ...branch = T, T, N, T, T, T, T, N, T, N, N, T, T, T, N ... = TTNTTTTNTNNTTTN ... (completely random - hard to predict) é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ å¦‚æœç¼–è¯‘å™¨æ— æ³•å°†åˆ†æ”¯ä¼˜åŒ–ä¸ºæ¡ä»¶è½¬ç§»(conditional move???)ï¼Œé‚£ä¹ˆå¦‚æœæ‚¨æ„¿æ„ä¸ºäº†æé«˜æ€§èƒ½è€Œç‰ºç‰²å¯è¯»æ€§ï¼Œåˆ™å¯ä»¥å°è¯•ä¸€äº›é£éªšçš„æ“ä½œã€‚ğŸ‘‡ 1234567if (data[c] &gt;= 128) sum += data[c]; // å°†ä¸Šé¢ğŸ‘†çš„ä»£ç ä¿®æ”¹ä¸ºä¸‹é¢ğŸ‘‡çš„ï¼Œï¼Œint t = (data[c] - 128) &gt;&gt; 31;sum += ~t &amp; data[c]; è¿™æ ·ï¼Œç”¨ä¸€äº›ä½æ“ä½œä»£æ›¿åˆ†æ”¯(åˆ¤æ–­)ã€‚(PS:éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§é£éªšçš„æ“ä½œå¹¶ä¸å®Œå…¨ç­‰åŒäºåŸå§‹çš„ifè¯­å¥ã€‚ä½†åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒå¯¹æ•°æ®çš„æ‰€æœ‰è¾“å…¥å€¼éƒ½æœ‰æ•ˆ[])ã€‚ åŸºäº: Core i7 920 @ 3.5 GHz C++ - Visual Studio 2010 - x64 Release ğŸ‘‡ 1234567891011// Branch - Randomseconds = 11.777// Branch - Sortedseconds = 2.352// Branchless - Randomseconds = 2.564// Branchless - Sortedseconds = 2.587 Java - Netbeans 7.1.1 JDK 7 - x64 1234567891011// Branch - Randomseconds = 10.93293813// Branch - Sortedseconds = 5.643797077// Branchless - Randomseconds = 3.113581453// Branchless - Sortedseconds = 3.186068823 åˆ†æ”¯ï¼šæ’åºåçš„æ•°ç»„ä¸ä¹±åºçš„æ•°ç»„ä¹‹é—´(æ‰§è¡Œé€Ÿåº¦)æœ‰å·¨å¤§çš„å·®å¼‚ã€‚ é£éªšã®æ“ä½œï¼šæ’åºåçš„æ•°ç»„ä¸ä¹±åºçš„æ•°ç»„ä¹‹é—´(æ‰§è¡Œé€Ÿåº¦)æ— æ˜æ˜¾å·®å¼‚ã€‚ åœ¨C++ä¸­ï¼Œæ’åºåçš„æ•°ç»„ç”¨é£éªšçš„ä½æ“ä½œç”šè‡³æ¯”åˆ†æ”¯é¢„æµ‹æœ‰äº›æ…¢ã€‚ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥é¿å… data-dependent branching in critical loops. (such as in this example)]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç³»ç»Ÿ</tag>
        <tag>branch prediction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°å°ç¨‹åºçˆ¬å‘]]></title>
    <url>%2F2018%2F06%2F06%2FWeChat-third-party-platform-mina%2F</url>
    <content type="text"><![CDATA[ç´§æ¥ä¸Šç¯‡æ–‡ç« -å…³äºè·å–å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°çš„ component_verify_ticket å’Œ component_access_token-ä¹‹åï¼Œï¼Œ æˆ‘ä»¥ä¸ºâ€¦åœ¨ä¸Šç¯‡ä¸­ï¼Œè·å– component_access_token ä¹‹åï¼Œçœ‹çœ‹ä¸‹è¾¹çš„æ­¥éª¤å¥½åƒè·Ÿè‡ªå·±æ²¡ä»€ä¹ˆå¤ªå¤§å…³ç³»äº†ï¼Œç›´æ¥è·³è¿‡ã€æˆæƒæµç¨‹æŠ€æœ¯è¯´æ˜ã€ä¹‹åçš„æ­¥éª¤ï¼Œï¼Œå¼€å§‹å‡†å¤‡ã€ä»£å°ç¨‹åºå®ç°ä¸šåŠ¡ã€ä¸­çš„å¾®ä¿¡ç™»é™†ï¼Œï¼Œæ²¡æƒ³åˆ°æ­¥å­è¿ˆçš„æœ‰ç‚¹å¤§ï¼Œç»ˆç©¶è¿˜æ˜¯æ‰¯ç€ * äº†ã€‚ã€‚ é¡ºç€è¿™ä¸ªæ€è·¯èµ°ï¼Œï¼Œåœ¨åš å¾®ä¿¡ç™»é™† æ—¶ï¼Œå¯¹äºå¼€å‘è€…æ¥è®²ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤ªå¤§è¿å’Œæ„Ÿå‘€ï¼Œï¼ŒğŸ‘‡ ä¸‹è¾¹çš„å‚æ•°ä¹Ÿéƒ½æœ‰äº†å‘€ï¼Œï¼Œ å‚æ•° æ˜¯å¦å¿…é¡» è¯´æ˜ appid æ˜¯ å°ç¨‹åºçš„AppID js_code æ˜¯ ç™»å½•æ—¶è·å–çš„ code grant_type æ˜¯ å¡«authorization_code component_appid æ˜¯ ç¬¬ä¸‰æ–¹å¹³å°appid component_access_token æ˜¯ ç¬¬ä¸‰æ–¹å¹³å°çš„ component_access_token ç„¶è€Œï¼Œåœ¨è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯ğŸ‘‡1&#123;"errcode":40001,"errmsg":"invalid credential, access_token is invalid or not latest, hints: [ req_id: MNHl9a0063th42 ]"&#125; è¿™æ—¶å€™é¦–å…ˆæ˜¯å¾ˆè´¹è§£ï¼Œï¼Œä¸ºä»€ä¹ˆä¼šæŠ¥ä¸åˆæ³•çš„è°ƒç”¨å‡­è¯é”™è¯¯ï¼Ÿaccess_token æœ‰é—®é¢˜ï¼Œï¼Œ component_access_token æœ‰é—®é¢˜ï¼Ÿä¸èƒ½å•Šï¼Œåˆšåˆšè·å–çš„ï¼Œè¿˜çƒ­ä¹å‘¢ã€‚ã€‚ ä½†æ˜¯å‚æ•°ä¸­åªä¼ äº†è¿™ä¸€ä¸ªåŒ…å« access_token çš„å‚æ•°å‘€ã€‚ã€‚ ä¸ºäº†éªŒè¯ component_access_token æ˜¯å¦æœ‰æ•ˆï¼Œç´§æ¥ç€å»ä»¥æ­¥éª¤ 3 çš„æ–¹æ³•è·å–é¢„æˆæƒç  pre_auth_codeäº†ï¼Œï¼Œäº‹å®è¯æ˜ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚è¿™å°±æœ‰ç‚¹è¹Šè··äº†ï¼Œï¼Œ å»å°ç¨‹åºå®˜æ–¹ç¤¾åŒºæ‰¾ç›¸å…³å¸–å­ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€æ”¾å¹³å° ç”¨æˆ·å¾®ä¿¡ç™»å½•å¤±è´¥ invalid credentialï¼Œï¼Œä¸‹è¾¹æœ‰å®˜æ–¹å›å¤æ˜¯ ğŸ‘‡ åº”è¯¥æ˜¯loginæ¢å–çš„codeå¤±æ•ˆæˆ–è€…å·²ç»è¢«æ¶ˆè´¹äº†ï¼Œå¯¼è‡´è·å–åˆ°äº†é”™è¯¯çš„access_tokenï¼Œè¯·æ£€æŸ¥åç«¯loginçš„é€»è¾‘çš„ç¡®æœ‰å¯èƒ½ï¼Œï¼Œå› ä¸º è°ƒç”¨æ¥å£wx.login() è·å–ä¸´æ—¶ç™»å½•å‡­è¯ï¼ˆcodeï¼‰æ˜¯æœ‰æ—¶æ•ˆé™åˆ¶çš„ï¼Œç›®å‰æœ‰æ•ˆæœŸä¸º5åˆ†é’Ÿï¼Œï¼Œè€Œä¸”æµ‹è¯•ä¹‹åå‘ç°ï¼ŒCode æ˜¯ä¸€æ¬¡æ€§çš„ï¼ï¼ï¼å°±åƒå‘å¸–çš„å“¥ä»¬å„¿å›å¤çš„é‚£æ ·ï¼Œï¼ŒCode å¤ç”¨ä¹‹åï¼Œçš„ç¡®ä¼šæŠ¥ 41063 çš„é”™è¯¯ã€‚ è‡³æ­¤ï¼Œï¼Œå“¥ä»¬å„¿å½»åº•åœ¨è¿™å„¿è¶´çªäº†ã€‚ã€‚ã€‚å¸¦ç€â€BUGâ€ä¸‹ç­äº†ï¼Œä¸å¥½ã€‚ ä¹–ä¹–çœ‹æ–‡æ¡£å§æ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œï¼Œ ç½‘ä¸Šæ‰¾ä¸åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œï¼Œä¹–ä¹–çœ‹æ–‡æ¡£ æ‰¾åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œæ ¹æ®åˆ«äººæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ˜¯è§£å†³ä¸äº†ï¼Œï¼Œä¹–ä¹–çœ‹æ—¥å¿—ï¼Œæ£€æŸ¥ä¸Šä¸‹æ–‡ å®åœ¨æ²¡è¾™äº†ï¼Œï¼ŒæŠ„ä¸€éæ–‡æ¡£ï¼Œä»å¤´å„¿å¼€å§‹ï¼ æˆ‘å†³å®šä¹–ä¹–çœ‹æ–‡æ¡£ï¼Œï¼Œä»ã€ä»£å°ç¨‹åºå®ç°ä¸šåŠ¡ã€ä¸­çš„å¼€å‘ç®€ä»‹å¼€å§‹ã€‚ ç¬¬ä¸€æ­¥ï¼šç»‘å®šå¼€å‘å°ç¨‹åºDoneï¼ ç¬¬äºŒæ­¥ï¼šå°ç¨‹åºæ¨¡ç‰ˆçš„å¼€å‘å’Œä¸Šä¼ Doneï¼ ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ åˆ°å°ç¨‹åºæ¨¡ç‰ˆåº“ï¼Œè·å¾—æ¨¡ç‰ˆIDDoneï¼ ç¬¬å››æ­¥ï¼šè°ƒç”¨æ¥å£ï¼Œä¸ºæ——ä¸‹æˆæƒçš„å°ç¨‹åºéƒ¨ç½²ä»£ç ï¼Ÿï¼Ÿï¼Ÿ å¯èƒ½æˆ‘é”™è¿‡äº†äº›ä»€ä¹ˆã€‚ã€‚ã€‚èµ¶ç´§å»çœ‹ã€ä»£ç ç®¡ç†ã€ 1ã€ä¸ºæˆæƒçš„å°ç¨‹åºå¸å·ä¸Šä¼ å°ç¨‹åºä»£ç è°ƒç”¨æ¥å£æ‰€éœ€å‚æ•°ä¸­çš„ access_tokenï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°è·å–åˆ°çš„è¯¥å°ç¨‹åºæˆæƒçš„authorizer_access_tokenï¼Œï¼Œåˆ°è¿™å„¿ï¼Œæ˜äº†äº†ã€‚è¿˜æ˜¯éœ€è¦æŒ‰ã€æˆæƒæµç¨‹æŠ€æœ¯è¯´æ˜ã€çš„æµç¨‹æ¥ã€‚ã€‚ è¿˜å¾—æŒ‰æµç¨‹æ¥æ­¥éª¤1ï¼šç¬¬ä¸‰æ–¹å¹³å°æ–¹è·å–é¢„æˆæƒç ï¼ˆpre_auth_codeï¼‰è¿™ä¸ªçœŸæ²¡å•¥è¯´çš„ï¼Œæµ‹è¯•ä¸€éè¿‡ï¼Œï¼Œè¿™å„¿è¦å‡ºå•¥é—®é¢˜ï¼Œææœ‰å¯èƒ½æ˜¯ component_access_token çš„é—®é¢˜ã€‚ æ­¥éª¤2ï¼šå¼•å…¥ç”¨æˆ·è¿›å…¥æˆæƒé¡µè¿™ä¸€æ­¥ä¹‹å‰ä¹Ÿçœ‹è¿‡ï¼Œï¼Œå½“æ—¶æƒ³åˆ°çš„åœºæ™¯åªæœ‰å…¬ä¼—å·çš„ï¼Œè§‰å¾—è¿™ä¸ªè·Ÿå°ç¨‹åºæ²¡å•¥å…³ç³»å‘€ã€‚æ€»ä¸èƒ½è®©ç”¨æˆ·åœ¨å°ç¨‹åºä¸­ä»¥è¿™ç§æ–¹å¼è¿›è¡Œæ‰€è°“çš„æˆæƒçš„ï¼Ÿï¼ (PS:äº‹å®è¯æ˜ï¼Œçš„ç¡®ä¸ä¼šè®©ç”¨æˆ·åœ¨å°ç¨‹åºä¸­ä»¥è¿™ç§æ–¹å¼æˆæƒï¼Œnaive!!åœ¨è¿™å„¿ï¼Œæˆ‘å¯¹æ•´ä¸ªç¬¬ä¸‰æ–¹å¹³å°çš„ä½œç”¨ï¼Œä»¥åŠæˆæƒæµç¨‹è¿˜ä¸æ¸…æ™°ï¼Œï¼Œä»¥ä¸ºåƒ oauth 2.0 ä¸€æ ·ï¼Œnaive!!! è¿™é‡Œçš„æˆæƒå…¶å®æ˜¯å…¬ä¼—å·æˆ–è€…å°ç¨‹åºæˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°ï¼Œå°±åƒç¬¬ä¸‰æ–¹å¹³å°æ–‡æ¡£ä¸­èœå•è¯´çš„é‚£æ ·ã€ä»£å…¬ä¼—å·å®ç°ä¸šåŠ¡ã€ã€ã€ä»£å°ç¨‹åºå®ç°ä¸šåŠ¡ã€ã€‚åœ¨è¿™é‡Œï¼Œè¿˜æ²¡æœ‰é¢å‘ç»ˆç«¯ç”¨æˆ·ï¼Œé¢å‘çš„æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°çš„å®¢æˆ·ï¼Œå®¢æˆ·çš„å…¬ä¼—å·æˆ–è€…å°ç¨‹åºé¢å‘ç»ˆç«¯ç”¨æˆ·ã€‚) çœ‹è¿™ä¸ªæ¥å£çš„æ—¶å€™æœ‰ä¸€ä¸¢ä¸¢è´¹è§£ï¼Œï¼Œæ¢³ç†ä¹‹åå¤§æ¦‚æ˜¯è¿™æ · ğŸ‘‡12345è·å–é¢„æˆæƒç ï¼ˆpre_auth_codeï¼‰=&gt; å¼•å¯¼ç”¨æˆ·è¿›å…¥ä¸€é™æ€é¡µé¢ï¼Œé¡µé¢ä¸­æœ‰ä¸€é“¾æ¥æˆ–ä¸€æŒ‰é’®ï¼Œç”¨æˆ·ç‚¹å‡»=&gt; è¿›å…¥å¾®ä¿¡æˆæƒé¡µ=&gt; ç”¨æˆ·ç¡®è®¤è¦æˆäºˆç¬¬ä¸‰æ–¹å¹³å°çš„æƒé™ï¼Œå†³å®šæ˜¯å¦æˆæƒ=&gt; End å¤§æ¦‚è§£é‡Šä¸‹ï¼Œï¼Œæˆ‘è§‰å¾—ï¼Œè·å–é¢„æˆæƒç ï¼ˆpre_auth_codeï¼‰å’Œå¼•å¯¼ç”¨æˆ·è¿›å…¥æˆæƒé¡µè¿™ä¸¤ä¸ªå…³ç³»å¾ˆç´§å¯†ï¼ŒæŸç§ç¨‹åº¦ä¸Šæ˜¯ä¸€ä¸ªæ­¥éª¤ï¼Œï¼Œå› ä¸ºé¢„æˆæƒç åªèƒ½ç”¨åœ¨å¼•å¯¼ç”¨æˆ·è·³è½¬å‘æˆæƒé¡µé¢çš„é“¾æ¥ä¸­ã€‚æ‰€ä»¥ï¼Œï¼Œæˆ‘ç›´æ¥æŠŠè¿™ä¸¤æ­¥åˆå¹¶äº†ï¼šè·å–é¢„æˆæƒç ï¼ˆpre_auth_codeï¼‰ï¼Œè¿”å›å¼•å¯¼æˆæƒé¡µé¢ã€‚ æ­¥éª¤3ï¼šç”¨æˆ·ç¡®è®¤å¹¶åŒæ„ç™»å½•æˆæƒç»™ç¬¬ä¸‰æ–¹å¹³å°æ–¹EASY~ æ­¥éª¤4ï¼šæˆæƒåå›è°ƒURIï¼Œå¾—åˆ°æˆæƒç ï¼ˆauthorization_codeï¼‰å’Œè¿‡æœŸæ—¶é—´æˆæƒæµç¨‹å®Œæˆåï¼Œæˆæƒé¡µä¼šè‡ªåŠ¨è·³è½¬è¿›å…¥å›è°ƒURIï¼Œå¹¶åœ¨URLå‚æ•°ä¸­è¿”å›æˆæƒç å’Œè¿‡æœŸæ—¶é—´(redirect_url?auth_code=xxx&amp;expires_in=600)[^1] åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œæœ‰ä¸ªå‚æ•°redirect_uriï¼Œè¿™ä¸ªå‚æ•°å…¶å®æ˜¯ä»¥æ¥å£çš„å½¢å¼æŒ‡å‘äº†ä¸€ä¸ªæˆ‘ä»¬è‡ªèº«å®šä¹‰çš„å›è°ƒå‡½æ•°ï¼Œï¼Œåœ¨è¿™ä¸ªæ¥å£ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ request.getParameter()è·å–åˆ°auth_codeå’Œexpires_inä¸¤ä¸ªå‚æ•°ã€‚ æ­¥éª¤5ï¼šåˆ©ç”¨æˆæƒç è°ƒç”¨å…¬ä¼—å·æˆ–å°ç¨‹åºçš„ç›¸å…³APIå‰©ä¸‹çš„å°±ç®€å•äº†ï¼Œï¼Œ ä½¿ç”¨æˆæƒç æ¢å–å…¬ä¼—å·æˆ–å°ç¨‹åºçš„æ¥å£è°ƒç”¨å‡­æ®å’Œæˆæƒä¿¡æ¯æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜ httpè¯·æ±‚æ–¹å¼: POSTï¼ˆè¯·ä½¿ç”¨httpsåè®®ï¼‰https://api.weixin.qq.com/cgi-bin/component/api_query_auth?component_access_token=xxxx POSTæ•°æ®ç¤ºä¾‹: 12345&gt;&#123;&gt; "component_appid":"appid_value",&gt; "authorization_code": "auth_code_value"&gt;&#125;&gt; 123456789101112131415161718åœ¨è¿”å›ç»“æœä¸­ï¼Œåœ¨ authorization_info å¯¹è±¡ä¸­å¯ä»¥è·å–åˆ° `authorizer_appid`ã€`authorizer_access_token`ã€`authorizer_refresh_token`ä¸‰ä¸ªé‡è¦å‚æ•°ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹è¿˜ä¸ç®—å¤ªç¡®å®šï¼Œï¼Œ`authorizer_access_token`å’Œ`authorizer_refresh_token`æ˜¯å¦ä¸`authorizer_appid`ç›¸å…³ã€‚æ¢å¥è¯è¯´ï¼Œï¼Œ`authorizer_appid`ä¸åŒï¼Œå…¶ä»–ä¸¤ä¸ªå€¼æ˜¯ä¸æ˜¯ä¹Ÿä¸ä¸€æ ·ï¼Ÿï¼Ÿæ ¹æ®å®˜æ–¹å¯¹`authorizer_refresh_token`çš„è§£é‡ŠğŸ‘‡&gt;æ¥å£è°ƒç”¨å‡­æ®åˆ·æ–°ä»¤ç‰Œï¼ˆåœ¨æˆæƒçš„å…¬ä¼—å·å…·å¤‡APIæƒé™æ—¶ï¼Œæ‰æœ‰æ­¤è¿”å›å€¼ï¼‰ï¼Œåˆ·æ–°ä»¤ç‰Œä¸»è¦**ç”¨äºç¬¬ä¸‰æ–¹å¹³å°è·å–å’Œåˆ·æ–°å·²æˆæƒç”¨æˆ·çš„ access_tokenï¼Œåªä¼šåœ¨æˆæƒæ—¶åˆ»æä¾›**ï¼Œè¯·å¦¥å–„ä¿å­˜ã€‚ ä¸€æ—¦ä¸¢å¤±ï¼Œåªèƒ½è®©ç”¨æˆ·é‡æ–°æˆæƒï¼Œæ‰èƒ½å†æ¬¡æ‹¿åˆ°æ–°çš„åˆ·æ–°ä»¤ç‰Œã€‚æˆ‘è§‰å¾—åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„ã€‚æ€»ä¸èƒ½æœ‰æ–°ç”¨æˆ·æˆæƒç»™ç¬¬ä¸‰æ–¹ä¹‹åï¼Œä¹‹å‰å·²ç»æˆæƒçš„ç”¨æˆ·çš„åˆ·æ–°ä»¤ç‰Œå°±å¤±æ•ˆäº†å§ã€‚ã€‚åæœŸå¯ä»¥åˆ†æä¸‹æ—¥å¿—ç¡®å®šä¸‹è¿™ä¸ªé—®é¢˜ã€‚åˆ°è¿™å„¿ï¼Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å›åˆ°æœ€åˆ[ä¸ºæˆæƒçš„å°ç¨‹åºå¸å·ä¸Šä¼ å°ç¨‹åºä»£ç ](#commitcode)çš„æ­¥éª¤äº†ï¼Œç°åœ¨ä¸Šä¼ åº”è¯¥å°±ä¸ä¼šæœ‰é—®é¢˜äº†~ä¸Šä¼ æˆåŠŸåï¼Œ[ã€å¾®ä¿¡ç™»é™†ã€](#wxminalogin)ä¹Ÿæ˜¯ä¸€éè¿‡~**å®Œç¾ï¼ï¼ï¼**---[^1]: è¿™å„¿å‘æ¯”è¾ƒå¤§ï¼Œï¼Œ(WeChat-ID:shangD)ï¼Œï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„!!!ğŸ‘‡**å…¬ä¼—å·æˆæƒï¼Œåªéœ€è¦è¿è¥è€…æƒé™å³å¯ï¼›ä½†å°ç¨‹åºæˆæƒï¼Œå¿…é¡»å¾—æ˜¯ç®¡ç†å‘˜ï¼ï¼ï¼**å¦å¤–ï¼Œï¼Œå¦‚æœåœ¨æ²¡æœ‰æˆæƒçš„æƒ…å†µä¸‹ï¼Œå»è°ƒç”¨ç›¸åº”å…¬ä¼—å·æˆ–å°ç¨‹åºçš„æ¥å£æ—¶ä¼šå¾—åˆ°`&#123;"errcode":48001,"errmsg":"api unauthorized&#125;`,æˆ–`&#123;"errcode":61003,"errmsg":"component is not authorized by this account&#125;`ã€‚æ­¤æ—¶åº”è¯¥å…ˆæ£€æŸ¥æ˜¯å¦æˆæƒï¼Œå¯ä»¥åˆ©ç”¨[å…¬ä¼—å·ç¬¬ä¸‰æ–¹å¹³å°çš„æƒé™è¯´æ˜](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419318459&amp;token=&amp;lang=zh_CN)æ¥å£ã€‚å¦‚æœï¼Œå·²ç»å…¬ä¼—å·æˆ–è€…å°ç¨‹åºæˆæƒç»™ç¬¬ä¸‰æ–¹ï¼Œï¼Œæ­¤æ—¶åº”è¯¥æ£€æŸ¥æˆæƒæ—¶çš„æƒé™ï¼›å¯ä»¥é‡æ–°èµ°ä¸€éæˆæƒæµç¨‹ï¼Œåœ¨æˆæƒé¡µæ£€æŸ¥æƒé™é›†ï¼›å¦‚æœæ˜¯å°ç¨‹åºçš„è¯ï¼Œå¯ä»¥å»å°ç¨‹åºåå° =&gt; è®¾ç½® =&gt; ç¬¬ä¸‰æ–¹æœåŠ¡æŸ¥çœ‹ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºè·å–å¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°çš„ component_verify_ticket å’Œ component_access_token]]></title>
    <url>%2F2018%2F05%2F31%2Fabout-wechat-authorize3rd-component_verify_ticket%26component_access_token%2F</url>
    <content type="text"><![CDATA[ç‹¬ç«‹çš„å°ç¨‹åºå·²ç»æ»¡è¶³ä¸äº†æˆ‘å¸çš„éœ€æ±‚äº†ï¼Œç»§è€Œå‡†å¤‡åšå¾®ä¿¡ç¬¬ä¸‰æ–¹å¹³å°ï¼Œï¼Œä»Šå¤©ä¸»è¦æƒ³æ€»ç»“ä¸‹è·å–å¾®ä¿¡æˆæƒç¬¬ä¸‰æ–¹å¹³å°æµç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œï¼Œä¸»è¦æ˜¯Javaä»£ç (ç”¨phpå¼€å‘çš„æœ‹å‹å¯ä»¥ Command + W äº†..)ã€‚ æ¨é€ component_verify_ticket åè®®è¿™ä¸€éƒ¨åˆ†ï¼Œå®˜æ–¹æ–‡æ¡£çœŸå¿ƒæƒœå¢¨ã€‚ã€‚å¯¹é¦–æ¬¡è¿›è¡Œå¼€å‘ç¬¬ä¸‰æ–¹æˆæƒå¼€å‘çš„ç¨‹åºå‘˜æ¥è¯´çœŸå¿ƒä¸å‹å¥½ï¼Œåœ¨æ­¤æå‡ºæ‰¹è¯„(ç™½å¤©å·²ç»éª‚è¿‡æ— æ•°æ¬¡å¨˜äº†ğŸ™‚)ï¼ å…³äº POST æ•°æ®ç¤ºä¾‹123456&lt;xml&gt; &lt;AppId&gt;&lt;/AppId&gt; &lt;CreateTime&gt;&lt;/CreateTime&gt; &lt;InfoType&gt;&lt;/InfoType&gt; &lt;ComponentVerifyTicket&gt;&lt;/ComponentVerifyTicket&gt;&lt;/xml&gt; ğŸ‘†ä¸Šè¾¹çš„ XML å…¶å®æ˜¯è§£å¯†ä¹‹åçš„æ ¼å¼ã€‚ã€‚æ¨é€è¿‡æ¥æ—¶å€™æˆ‘ä»¬è·å–åˆ°çš„æ•°æ®æ˜¯ç»è¿‡åŠ å¯†çš„ï¼Œï¼Œåƒè¿™æ ·ğŸ‘‡ 1234&lt;xml&gt; &lt;AppId&gt;&lt;![CDATA[wx5a062835463d1c61]]&gt;&lt;/AppId&gt; &lt;Encrypt&gt;&lt;![CDATA[3KAGFTaD32rFYsXMmjK/6Hk7nfJzrgIqQs4tqlFA5ORsuMhFvMM9P0cUKEoW9v+2oJztVFRI/OV09szzN7QqqxgapTGLYcyKnbViqs+uSnVkwc5YBM4YkAKGU2Yyp89/6tXU0FloSfUvM8bHZteed44Wo3B3diuhA3JIOK/viBfdfgODTZCe/q/JFt7yYc2Cr3ojtmR1n2M+PdQTfs3bf7tLlR4yURD5kXYrJkZPK7giNzE+uEgn52SUAAhLnAc68hWm0rnPhvPgVARSqL3sHK5xtxihoXcX0h15j8Al3KbZ3IqIdM/SIJrB0mnDx8hOnoI8UaBmChVWS8iz/Ygp/lr8mT37WK0bVeFKm2PkNBG91/icsxOacEJCuXdj/yD+rthlB2OQbmbdFPXw/8QPCNjHdj2RmEL78flwrRQeoNOHYvmMBtoU9jm0WAix6db8siyCA2CNFsC/QxD84p0N/Q==]]&gt;&lt;/Encrypt&gt;&lt;/xml&gt; é‚£ä¹ˆåŠ å¯†åçš„æ•°æ®æ˜¯æ€æ ·è·å–åˆ°çš„å‘¢ï¼Ÿï¼Ÿæœ€å¼€å§‹çš„æ—¶å€™ç™¾æ€ä¸å¾—å…¶è§£ï¼Œè¦å´©æºƒï¼Œéƒ½åšå™©æ¢¦äº†ã€‚ã€‚å…¶å®åœ¨åè¾¹çš„æ¶ˆæ¯åŠ è§£å¯†æ¥å…¥æŒ‡å¼•æåˆ°äº†ä¸€äº›ï¼Œï¼Œæ€»ä¹‹å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡request.getParameter(paraName)è·å–åˆ°å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ğŸ‘‡ æ—¶é—´æˆ³ timestamp éšæœºæ•° nonce åŠ å¯†ç±»å‹ encrypt_type(å€¼ä¸ºaes) æ¶ˆæ¯ä½“ç­¾å msg_signature(ç”¨äºéªŒè¯æ¶ˆæ¯ä½“çš„æ­£ç¡®æ€§) è¿™å››ä¸ªå‚æ•°å‘¢ä¸»è¦ç”¨æ¥è§£å¯† ç»è¿‡åŠ å¯†çš„ xml æ•°æ®ï¼Œå³æ‰€è°“çš„ postdataã€‚ // è¯´åˆ°è¿™å„¿ï¼Œï¼Œä¸å¾—ä¸æä¸‹å®˜æ–¹ç»™å‡ºçš„åŠ è§£å¯†ç¤ºä¾‹ä»£ç ã€‚å…¶å®ï¼Œè¿™5ç§è¯­è¨€çš„ç¤ºä¾‹ä»£ç çš„åœºæ™¯æ˜¯ç”¨æ¥åŠ è§£å¯†å¾®ä¿¡å…¬ä¼—å·ä¸ç”¨æˆ·äº’åŠ¨çš„æ¶ˆæ¯çš„ï¼Œæ‰€ä»¥xmlç»“æ„ä¸­æœ‰ToUserNameæ ‡ç­¾ã€‚è€Œå®é™…ä¸Šåœ¨æœ¬æ–‡çš„åœºæ™¯ä¸­ï¼Œæ˜¯ä¸å­˜åœ¨ToUserNameæ ‡ç­¾çš„ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯AppIdæ ‡ç­¾ï¼Œï¼Œè¿™ä¸€ç‚¹ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­çš„æ¶ˆæ¯åŠ è§£å¯†æ¥å…¥æŒ‡å¼•ä¹Ÿæœ‰æåˆ°ï¼Œåªä¸è¿‡æ¯”è¾ƒéšæ™¦ã€‚ã€‚ğŸ‘‡ å…¬ä¼—å·ç¬¬ä¸‰æ–¹å¹³å°å¯èƒ½ä¼šæ¥æ”¶åˆ°ä¸¤ç§ç±»å‹çš„æ¶ˆæ¯ï¼š ç”¨æˆ·å‘é€ç»™å…¬ä¼—å·çš„æ¶ˆæ¯ï¼ˆç”±å…¬ä¼—å·ç¬¬ä¸‰æ–¹å¹³å°ä»£æ”¶ï¼‰ã€‚æ­¤æ—¶ï¼Œæ¶ˆæ¯XMLä½“ä¸­ï¼ŒToUserNameï¼ˆå³æ¥æ”¶è€…ï¼‰ä¸ºå…¬ä¼—å·çš„åŸå§‹ IDï¼ˆå¯é€šè¿‡ã€Šæ¥å£è¯´æ˜ã€‹ä¸­çš„è·å–æˆæƒæ–¹ä¿¡æ¯æ¥å£æ¥è·å¾—ï¼‰ã€‚ å¾®ä¿¡æœåŠ¡å™¨å‘é€ç»™æœåŠ¡è‡ªèº«çš„äº‹ä»¶æ¨é€ï¼ˆå¦‚å–æ¶ˆæˆæƒé€šçŸ¥ï¼ŒTicket æ¨é€ç­‰ï¼‰ã€‚æ­¤æ—¶ï¼Œæ¶ˆæ¯XMLä½“ä¸­æ²¡æœ‰ ToUserName å­—æ®µï¼Œè€Œæ˜¯ AppId å­—æ®µï¼Œå³å…¬ä¼—å·æœåŠ¡çš„ AppIdã€‚è¿™ç§ç³»ç»Ÿäº‹ä»¶æ¨é€é€šçŸ¥ï¼ˆç°åœ¨åŒ…æ‹¬æ¨é€ component_verify_ticket åè®®å’Œæ¨é€å–æ¶ˆæˆæƒé€šçŸ¥ï¼‰ï¼ŒæœåŠ¡å¼€å‘è€…æ”¶åˆ°åä¹Ÿéœ€è¿›è¡Œè§£å¯†ï¼Œæ¥æ”¶åˆ°ååªéœ€ç›´æ¥è¿”å›å­—ç¬¦ä¸²â€œsuccessâ€ã€‚ (PS: è¿™ä¸ª postdata åœ¨å®˜æ–¹ç»™çš„è§£å¯†åŠ å¯†ç¤ºä¾‹ä»£ç ä¸­(Javaç‰ˆ)çš„ä½“ç°å³ replyMsg) OK, é‚£ä¹ˆé—®é¢˜æ¥äº† postdata åˆæ˜¯æ€ä¹ˆè·å–çš„å˜ï¼Ÿï¼Ÿï¼Ÿæ–‡æ¡£ä¸­å¥½åƒå¹¶æ²¡æœ‰æåˆ°(éš¾é“æ˜¯æˆ‘æ²¡çœ‹åˆ°ï¼Ÿï¼ï¼Ÿ) ğŸ˜¤ï¼Œï¼Œæ— åŠ›åæ§½ï¼Œç›´æ¥ç”©ä»£ç ğŸ‘‡ 1234567891011121314151617181920212223242526272829// è·å–åŠ å¯†åçš„ postdataString encodedPostdata = HttpKit.readData(getRequest());// readData()æ–¹æ³•å®ç°public static String readData(HttpServletRequest request) &#123; BufferedReader br = null; try &#123; StringBuilder ret; br = request.getReader(); String line = br.readLine(); if (line != null) &#123; ret = new StringBuilder(); ret.append(line); &#125; else &#123; return ""; &#125; while ((line = br.readLine()) != null) &#123; ret.append('\n').append(line); &#125; return ret.toString(); &#125; catch (IOException e) &#123; throw new RuntimeException(e); &#125; finally &#123; if (br != null) &#123; try &#123;br.close();&#125; catch (IOException e) &#123;LogKit.error(e.getMessage(), e);&#125; &#125; &#125;&#125; è‡³æ­¤ï¼Œï¼Œæˆ‘ä»¬å°±è·å¾—äº†åŠ å¯†åçš„ postdata æ•°æ®äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯è¿›è¡Œè§£å¯†äº†ï¼Œï¼Œè§£å¯†ä¹‹åï¼Œéœ€è¦æŠŠ xml æ ¼å¼çš„æ•°æ®è½¬ä¸º Mapï¼Œè¿™æ ·å°±å¯ä»¥æ„‰å¿«çš„get(&quot;ComponentVerifyTicket&quot;)äº†~ è´´ä¸‹æ ¸å¿ƒä»£ç  ğŸ‘‡ 1234567891011121314151617181920212223242526272829303132333435// éƒ¨åˆ†å¼•å…¥çš„åŒ…import javax.xml.parsers.DocumentBuilder;import javax.xml.parsers.DocumentBuilderFactory;import org.w3c.dom.Document;import org.w3c.dom.Element;import org.w3c.dom.Node;import org.w3c.dom.NodeList;try &#123; WXBizMsgCrypt pc = new WXBizMsgCrypt(String token, String encodingAesKey, String component_appid); String result = pc.decryptMsg(msg_signature, timestamp, nonce, encodedPostdata); Map&lt;String, String&gt; data = new HashMap&lt;String, String&gt;(); DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance(); DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder(); InputStream stream = new ByteArrayInputStream(result.getBytes("UTF-8")); Document doc = documentBuilder.parse(stream); doc.getDocumentElement().normalize(); NodeList nodeList = doc.getDocumentElement().getChildNodes(); for (int idx = 0; idx &lt; nodeList.getLength(); ++idx) &#123; Node node = nodeList.item(idx); if (node.getNodeType() == Node.ELEMENT_NODE) &#123; Element element = (Element) node; data.put(element.getNodeName(), element.getTextContent()); &#125; &#125; // è‡³æ­¤ é€šè¿‡ data.get("ComponentVerifyTicket") å°±å¯ä»¥è·å– component_verify_ticket äº†~ try &#123; stream.close(); &#125; catch (Exception ex) &#123; // do nothing &#125;&#125; catch (Exception e) &#123; e.printStackTrace();&#125; è·å–ç¬¬ä¸‰æ–¹å¹³å° component_access_tokenè¿™ä¸€æ­¥ç›¸å¯¹æ¥è¯´å°±æ²¡é‚£ä¹ˆå¤æ‚äº†ï¼Œï¼Œåªé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯appidå‚æ•°ç¼ºå¤±ï¼Œå¾®ä¿¡è¿”å›ä¿¡æ¯å¦‚ä¸‹ğŸ‘‡ 1&#123;"errcode":41002,"errmsg":"appid missing hint: [M07502974]"&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æ˜¯è¿™æ ·å†™çš„ POSTæ•°æ®ç¤ºä¾‹: {â€œcomponent_appidâ€:â€appid_valueâ€ ,â€œcomponent_appsecretâ€: â€œappsecret_valueâ€,â€œcomponent_verify_ticketâ€: â€œticket_valueâ€} è¯·æ±‚å‚æ•°è¯´æ˜| å‚æ•° | è¯´æ˜ ||:â€”â€”â€”â€”â€”â€”â€”-|:â€”â€”â€”â€”â€”â€”:||component_appid | ç¬¬ä¸‰æ–¹å¹³å°appid ||component_appsecret | ç¬¬ä¸‰æ–¹å¹³å°appsecret||component_verify_ticket| å¾®ä¿¡åå°æ¨é€çš„ticketï¼Œæ­¤ticketä¼šå®šæ—¶æ¨é€ï¼Œå…·ä½“è¯·è§æœ¬é¡µçš„æ¨é€è¯´æ˜| æ‰€ä»¥ï¼Œï¼Œpostè¯·æ±‚çš„æ•°æ®ä¸º json æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œf**kã€‚ã€‚ã€‚ä»£ç å®ç°æ¥ä¸Šæ–‡component_verify_ticketéƒ¨åˆ†ğŸ‘‡ 123456789101112131415161718192021222324252627282930313233if("component_verify_ticket".equals(data.get("InfoType"))) &#123; // ä»¥ä¸‹æ¶‰åŠåˆ°Rediséƒ¨åˆ†ï¼Œä¸ºä¼ªä»£ç ï¼Œï¼Œé¢†ä¼šç²¾ç¥å³å¯ // TODO æŠŠcomponent_verify_ticketä¿å­˜åˆ° Redis ä¸­ redis.set("component_verify_ticket", data.get("ComponentVerifyTicket")); // TODO æ£€æŸ¥ component_access_token æ˜¯å¦å­˜åœ¨(è¿‡æœŸ)(æœ‰æ•ˆæœŸä¸ºä¸¤å°æ—¶ï¼Œè¿‡æœŸå‰æå‰ç”³è¯·) ã€‚å¦‚æœè¿‡æœŸï¼Œåˆ™é‡æ–°å‘å¾®ä¿¡æœåŠ¡å™¨ç”³è¯·ã€‚ if(!redis.exists("component_access_token")) &#123; final String url = "https://api.weixin.qq.com/cgi-bin/component/api_component_token"; Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;(); params.put("component_appid", component_appid; params.put("component_appsecret", component_appsecret); params.put("component_verify_ticket", data.get("ComponentVerifyTicket")); // jsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œmmp String para = JsonKit.toJson(params); // ApiResult ä¸º JFinal-weixin æ¡†æ¶å·¥å…·ç±» ApiResult apiResult = new ApiResult(HttpUtils.post(url, para)); logger.debug(apiResult.getJson()); if (!apiResult.isSucceed()) &#123; logger.info("å¾®ä¿¡è¿”å›çš„é”™è¯¯ç  &gt;&gt;" + apiResult.getErrorMsg()); &#125; if(StrKit.notBlank(apiResult.get("component_access_token")+"")) &#123; // æå‰ååˆ†é’Ÿå¤±æ•ˆ(é»˜è®¤ä¸¤ä¸ªå°æ—¶(7200s)æœ‰æ•ˆ)ï¼Œç”³è¯·æ–°çš„~ redis.setex("component_access_token", (Integer.parseInt(apiResult.get("expires_in")+"")-600), apiResult.get("component_access_token")+""); logger.info("component_access_token åŠ å…¥ Redis æˆåŠŸ~"); &#125;else &#123; logger.debug('wtf?!'); // renderError(apiResult.getErrorMsg()); &#125; &#125;&#125;else &#123; // æœªçŸ¥é”™è¯¯.. // renderCommonError(9999);&#125;// è‡³æ­¤ï¼Œä»¥åéœ€è¦ component_access_token çš„æ—¶å€™ï¼Œç›´æ¥ä» Redis ä¸­å–å°±æ˜¯å•¦~ æ˜å¤©ä¿®æ”¹ä¸‹å°ç¨‹åºæ¨¡æ¿ä¸­ç™»é™†éƒ¨åˆ†çš„ä»£ç å°±å¥½å•¦ï¼Œï¼Œä»¥ä¸Šå¦‚æœæœ‰æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œæ¬¢è¿æŒ‡æ•™~]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºè¯­ç è½¬æ¢]]></title>
    <url>%2F2018%2F05%2F04%2Fabout_code_switch%2F</url>
    <content type="text"><![CDATA[å…³äºè¯­ç è½¬æ¢æœ€è¿‘å‘ç°è‡ªå·±æœ‰ä¸€ä¸ªä¹ æƒ¯ï¼Œå°±æ˜¯åœ¨èŠå¤©çš„æ—¶å€™æ€»æ˜¯ã€ä¸ç»æ„é—´ã€åœ¨æ™®é€šè¯ä¸­å¤¹æ‚ç€è‹±è¯­ã€è¡¨è¾¾å¼(expression)ã€æˆ–è€…å•è¯ä»€ä¹ˆçš„ã€‚å…¶å®ï¼Œä»¥å‰ä¹Ÿåœ¨åˆ«äººèº«ä¸Šé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œå½“æ—¶å¯èƒ½åªæ„Ÿè§‰åˆ°ã€æŒºè£…å“”ã€çš„å§ï¼Œæ²¡å¾€å¤šäº†æƒ³ã€‚ä½†æ˜¯ï¼Œå¦‚ä»Šè‡ªå·±èº«ä¸Šä¹Ÿå‡ºç°äº†è¿™ä¸ªç°è±¡ï¼Œä¸å…å¿ä¸ä½è‡ªçœï¼šã€æˆ‘çœŸçš„åªæ˜¯åœ¨è£…å“”ä¹ˆï¼Ÿã€ What.è¯­ç è½¬æ¢-ï¼ˆCode Switchingï¼‰æ˜¯æŒ‡è¯´è¯è€…åœ¨å¯¹è¯æˆ–äº¤è°ˆä¸­ï¼Œä»ä½¿ç”¨ä¸€ç§è¯­è¨€æˆ–æ–¹è¨€è½¬æ¢åˆ°ä½¿ç”¨å¦ä¸€ç§è¯­è¨€æˆ–æ–¹è¨€ã€‚ Whyï¼Ÿï¼Ÿï¼Ÿâ€“ ä»¥å‰ä¸ºä»€ä¹ˆæ²¡æœ‰è¿™ä¸ªä¹ æƒ¯ï¼Œä¸ºä»€ä¹ˆæ˜¯æœ€è¿‘ï¼Ÿ è®¤çœŸæƒ³äº†ä¸‹ï¼Œï¼Œå¯èƒ½æ˜¯ã€èŒä¸šç—…ã€ã€‚ç¨‹åºå‘˜ï¼Œå¹³æ—¶ç¼–ç æ—¶éƒ½æ˜¯ç”¨å„ç§é«˜çº§è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œç»å¤§éƒ¨åˆ†ä»¥è‹±è¯­ä¸ºä¸»(ç›®å‰æ‰€çŸ¥ï¼Œé™¤ã€æ˜“è¯­è¨€ã€ç”¨æ±‰è¯­ä¹‹å¤–)ã€‚æ‰€ä»¥å·¥ä½œä¸­æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨å†™è‹±è¯­å•è¯/è¡¨è¾¾å¼ï¼Œä¸å…‰æ˜¯å†™ï¼Œï¼Œç¼–ç¨‹ç¯å¢ƒä¹Ÿæ˜¯è‹±è¯­ã€‚æ¯”å¦‚ä¸»åŠ›å†™ Java ç”¨çš„ Eclipseï¼Œè¿˜æœ‰æœ€è¿‘å†™å¾®ä¿¡å°ç¨‹åºç”¨çš„ Sublime Textï¼Œï¼Œå½“ç„¶è¿™äº›ä¹Ÿæœ‰æ±‰åŒ–ç‰ˆçš„ï¼Œä½†æ€»æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œï¼Œæ‰€ä»¥é™¤äº†å†™è‹±æ–‡ï¼Œè¿˜å¥½è¯»(è¯†è®°)è‹±æ–‡ã€‚å› ä¸ºå¤§å®¶éƒ½åœ¨åŒæ ·çš„ç¯å¢ƒä¸‹å†™ä»£ç ï¼Œæ‰€ä»¥æ²Ÿé€šèµ·æ¥ç»å¸¸ä¼šè¿™æ ·ã€ä½ æŠŠ Tomcat clean ä¸€ä¸‹ã€ã€ã€æŠŠè¿™ä¸ª jar åŒ… build path ä¸€ä¸‹ã€ã€ã€æŠŠè¿™ä¸ª maven é¡¹ç›®é‡æ–° update project ä¸€ä¸‹ã€è¯¸å¦‚æ­¤ç±»ã€‚è¿˜æœ‰å„ç§å¼‚å¸¸ NullPointerExceptionã€ClassNotFoundException ç­‰ç­‰,,è¦æƒ³ debug åªèƒ½é€¼è‡ªå·±å»è¯†è®°è¿™äº› expression (åŒ…æ‹¬è‹±æ–‡å•è¯ã€çŸ­è¯­ã€çŸ­å¥..)ã€‚æ—¶é—´ä¹…äº†ï¼Œè‹±æ–‡å¤§å®¶éƒ½æ˜¯è¿™æ ·è¿‡æ¥çš„ï¼Œæ‰€ä»¥ç”¨è¿™äº›è‹±æ–‡ expression ä¸æ¯«ä¸å½±å“æ²Ÿé€šï¼Œè€Œä¸”æŸç§ç¨‹åº¦ä¸Šæ¯”(å¼ºè¡Œ)ç¿»è¯‘è¿‡æ¥çš„æ±‰è¯­è¡¨è¾¾æ›´ã€å‡†ç¡®ã€ã€‚ä»¥å‰ä¹Ÿå­¦è‹±è¯­ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¿™æ ·é«˜é¢‘çš„ä½¿ç”¨åœºæ™¯ï¼Œï¼Œé™¤äº†ä¸Šè‹±è¯­è¯¾ï¼Œè¿˜æœ‰è‹±è¯­è€ƒè¯•ã€‚ã€‚ã€‚è®ºè‹±è¯­è¯­å¢ƒçš„é‡è¦æ€§(æ•²é»‘æ¿ knock, knock..)ã€‚ And..æˆ‘è§‰å¾—ï¼Œï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¸€ç§è¯­è¨€è¢«ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€çš„æ—¶å€™ï¼Œå¤šå¤šå°‘å°‘ä¼šæœ‰äº›ä¿¡æ¯ä¸Šçš„æŸè€—ã€‚è¿™ä¹Ÿæ˜¯ã€è¯‘äº‹ä¸‰éš¾(ä¿¡è¾¾é›…-ä¸¥å¤ã€å¤©æ¼”è®ºã€‘:å†…å®¹å¿ å®äºåŸæ–‡è°“ä¿¡ï¼Œæ–‡è¾ç•…è¾¾è°“è¾¾ï¼Œæœ‰æ–‡é‡‡è°“é›…ã€‚)ã€ä¸­çš„ä¿¡ä¹‹éš¾ã€‚æ¯”å¦‚ï¼Œã€4ã€åœ¨æŸç§è¯­è¨€ä¸­å¯¹åº”çš„è¡¨è¾¾æ–¹å¼æ˜¯ã€1 + 3ã€ï¼ŒOKï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨éœ€è¦æŠŠã€4ã€è¿™æ ·ä¸€ç§ä¸œè¥¿ç¿»è¯‘æˆå¦å¤–ä¸€ç§è¯­è¨€ã€‚å€˜è‹¥ï¼Œè¿™ç§è¯­è¨€ä¸­åˆšå¥½ä¹Ÿå­˜åœ¨ã€1ã€å’Œã€3ã€è¿™æ ·çš„expressionï¼ŒOKï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥ç¿»è¯‘æˆå¯¹åº”è¯­è¨€ä¸­çš„ã€1 + 3ã€å°±å¥½ã€‚è‹¥æ˜¯ä¸å­˜åœ¨ã€1ã€å’Œã€3ã€ï¼Œåªå­˜åœ¨ã€2ã€è¿™ç§expressionï¼Œé‚£æˆ‘ä»¬åªèƒ½å…ˆä¿è¯ã€ä¿¡ã€ï¼ŒæŠŠã€4ã€ç¿»è¯‘æˆã€2 + 2ã€ã€‚æŠ‘æˆ–ï¼Œå¯¹åº”è¯­è¨€ä¸­ä¸å­˜åœ¨ã€+ã€è¿™ç§expressionï¼Œåªå­˜åœ¨ã€Ã—ã€ï¼Œé‚£åªå¥½ç¿»è¯‘æˆã€2 Ã— 2ã€å’¯ã€‚ä»¥è¿™ä¸ªä¾‹å­æ¥çœ‹ï¼Œè™½ç„¶æœ€åéƒ½è¡¨è¾¾äº†ã€4ã€ï¼Œä½†æ˜¾ç„¶è¾¾æˆã€4ã€çš„æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚ æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æœ‰é‚£ä¹ˆä¸€ç§åœºæ™¯ï¼Œå¯¹åº”è¯­è¨€ä¸­å¹¶æ²¡æœ‰å¾ˆåˆé€‚çš„expressionï¼Œï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå€˜è‹¥å¯¹æ–¹åˆšå¥½çŸ¥é“ä½ æƒ³è¡¨è¾¾çš„æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…è¯´èƒ½ get åˆ°ï¼Œæ€»æ„Ÿè§‰æ¯”ç¡¬ç”Ÿç”Ÿè§£é‡Šæ›´æœ‰è¶£ã€‚åƒæ˜¯è®²(å†·)ç¬‘è¯ï¼Œç›´æ¥å°†ç¬‘ç‚¹è®²å‡ºæ¥ï¼Œå¯èƒ½ä¼šéå¸¸æ— èŠï¼Œå®Œå…¨å¤±å»äº†ã€ç¬‘è¯ã€çš„æ„ä¹‰ã€‚ä½†å€˜è‹¥ï¼Œå°†ç¬‘ç‚¹åŒ…è£…åœ¨ã€ç¬‘è¯ã€ä¸­ï¼Œå¯¹æ–¹å¬äº†å¯ä»¥ get åˆ°é‚£ä¸ªç‚¹ï¼Œè¿™æ—¶å€™æ‰æœ‰ã€ä¼šå¿ƒä¸€ç¬‘ã€(æ§è…¹å¤§ç¬‘ï¼Œï¼Œæ€»ä¹‹æ˜¯ç¬‘äº†)ã€‚è¿™ä¸ªæ€è€ƒ translate/convert çš„è¿‡ç¨‹ï¼Œæˆ–è€…è¯´è½¬å¾—é‚£å¼¯å„¿æ‰æ˜¯æœ€æœ‰è¶£å„¿çš„~äº‹å®ä¸Šï¼Œæˆ‘éå¸¸å–œæ¬¢ enjoy è¿™ä¸ªå•è¯ï¼Œä½†æˆ‘çœŸçš„æƒ³ä¸åˆ°æ±‰è¯­è¯­å¢ƒä¸­ä¸ä¹‹å¯¹åº”çš„expressionã€‚ã€‚ æˆ–è€…ï¼Œï¼Œåƒä¸Šè¾¹æåˆ°è¿‡çš„ã€4ã€ä¸€æ ·ï¼Œæˆ‘ä»¬å†è°ˆè®ºçš„ã€4ã€çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ç›´æ¥è°ˆè®ºã€4ã€ï¼Œï¼Œè€Œæ˜¯ï¼Œæˆ‘è¯´ã€1 + 3ã€çš„æ—¶å€™ï¼Œä½ å¯ä»¥ get åˆ°æˆ‘åœ¨è°ˆã€4ã€ï¼Œä½ åœ¨è¯´ã€2 + 2ã€çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿå¯ä»¥ get åˆ°ã€‚è¿™ä¸ªã€4ã€å°±åƒç™½é©¬éé©¬ä¸­çš„é©¬ï¼Œåƒ Java ä¸­çš„æŠ½è±¡ç±»ï¼Œï¼Œè€Œã€1 + 3ã€å’Œã€2 + 2ã€å°±åƒç™½é©¬éé©¬ä¸­çš„ç™½é©¬ï¼ŒJava ä¸­çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚æ€»ä¹‹ï¼Œï¼Œæœ‰æ—¶å€™ï¼ŒæŠ½è±¡çš„ä¸œè¥¿çš„ç¡®æ¯”å…·è±¡çš„ä¸œè¥¿æ›´ç¾~ å¦å¤–ï¼Œï¼Œè¯­ç è½¬æ¢ä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦èŠ±é¢å¤–çš„æ—¶é—´å» translateï¼Œæ‰¾åˆ°å¯¹åº”è¯­è¨€ä¸­çš„ expressionã€‚è€Œä¸”ï¼Œè¿˜ä¸ä¸€å®šèƒ½æ‰¾åˆ°ã€‚ã€‚ Whatâ€™s more~å§‘ä¸”å†å‘æ•£ä¸€ä¸‹ï¼Œï¼Œæœ‰æ—¶å€™èŠå¤©ä¸­ä¼šå¤¹æ‚å¾ˆå¤šã€(ä¸“ä¸š)æœ¯è¯­ã€ã€‚çœ‹ä¸Šå»æ˜¯çº¯è£…å“”ï¼Œä½†å…¶å®æœ‰å¯èƒ½åªæ˜¯æƒ³é™ä½æ²Ÿé€šæˆæœ¬ã€‚ä¹Ÿå¯èƒ½æ˜¯å¯¹æ–¹è¿™æ ·è¡¨è¿°æƒ¯äº†ï¼Œä¸€æ—¶å¹¶æœª switch è¿‡æ¥ã€‚ä¸¾ä¸ªç¨å¾®æç«¯ä¸€ç‚¹çš„ä¾‹å­ï¼Œï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ¤…å­æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è°ˆåˆ°æ¤…å­çš„æ—¶å€™ï¼Œä¸éœ€è¦æŒ‰ç…§ç™¾åº¦ç™¾ç§‘ä¸­è¯æ¡è§£é‡Šé‚£æ ·å»è¯´ï¼šã€ä¸€ç§æ—¥å¸¸ç”Ÿæ´»å®¶å…·ï¼Œä¸€ç§æœ‰é èƒŒã€è¿˜æœ‰æ‰¶æ‰‹çš„åå…·ã€‚ã€ï¼Œï¼Œç›´æ¥è¯´æ¤…å­å°±å¥½ï¼Œå‡†ç¡®ã€é«˜æ•ˆ~ The endæœ‰ä¸€å¤©å’ŒåŒäº‹å»åƒé¥­ï¼Œåœ°ä¸‹çš„ç¾é£Ÿå¹¿åœºï¼Œå„ç§æ¡£å£çš„é‚£ç§ã€‚é¥­ç‚¹å„¿ï¼Œäººå·¨å¤šï¼Œæ¡Œå­é•¿å‡³å¯†å¯†éº»éº»ï¼Œæˆ‘ä»¬åœ¨é‡Œè¾¹æ‰¾åˆ°ä¸€ç©ºä½ã€‚â€¦åƒå®Œäº†ï¼Œèµ·èº«å‡†å¤‡ç¦»å¼€ï¼Œï¼Œæˆ‘åœ¨å‰ï¼ŒåŒäº‹åœ¨åã€‚æ²¡èµ°å‡ æ­¥ï¼Œæˆ‘æœ›ç€å‡ºå£çš„æ–¹å‘é¡¿äº†ä¸€ä¸‹ï¼Œï¼Œç„¶åç¦»å¼€ã€‚ä»ç¾é£Ÿå¹¿åœºå‡ºæ¥ä¹‹åï¼Œæˆ‘é—®åŒäº‹ï¼Œï¼ŒMe â€“ã€æ™“å¾—åˆšæ‰æˆ‘ä¸ºä»€ä¹ˆé¡¿ä¸€ä¸‹ä¹ˆï¼Ÿã€åŒäº‹ â€“ ã€ï¼Ÿï¼Ÿï¼Ÿã€Me â€“ ã€å› ä¸ºæˆ‘åˆšæ‰åœ¨ã€è§„åˆ’è·¯å¾„ã€‘ï¼Œå“ˆå“ˆã€åŒäº‹â€“ ã€å¥½å†·..ã€]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>æ²Ÿé€š</tag>
        <tag>æœ¯è¯­</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018_03-ç¬¬3å‘¨]]></title>
    <url>%2F2018%2F03%2F16%2F2018_03_week_3rd%2F</url>
    <content type="text"><![CDATA[2018-03-ç¬¬ä¸‰å‘¨åˆåˆ°å‘¨äº”äº†ï¼Œï¼Œä»Šå¤©æ‰‹å¤´çš„å·¥ä½œå·®ä¸å¤šå‘Šä¸€æ®µè½äº†ï¼Œè¶ç€çƒ­ä¹åŠ²å„¿èµ¶ç´§æŠŠè¿™ä¸¤å¤©é‡åˆ°çš„é—®é¢˜è®°å½•ä¸€ä¸‹~ jQueryä¸­$.load()åŠ¨æ€åŠ è½½é¡µé¢è„šæœ¬è°ƒè¯•you knowï¼Œæˆ‘æ˜¯ä¸€ä¸ªå†™å‰ç«¯çš„Javaç¨‹åºå‘˜ã€‚ã€‚æœ€è¿‘åœ¨åšåå°çš„æ•°æ®è¡¨æ ¼é¡µé¢æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œï¼Œå¤§å®¶åº”è¯¥éƒ½è§è¿‡ç±»ä¼¼çš„åå°ç‚¹å‡»ç™½è‰²æ¡†é€‰åœ°æ–¹çš„èœå•é¡¹ï¼Œå³ä¾§åŠ¨æ€åŠ è½½ç›¸åº”çš„å†…å®¹ï¼Œï¼Œæ¯ä¸€ä¸ªèœå•é¡¹æœ‰ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œåƒè¿™æ ·ğŸ‘‡ 1&lt;a href="javascript:clickMenu('#(menu.url)')"&gt; 12345// urlä¸ºç›¸å¯¹è·¯å¾„åœ°å€ï¼Œæœ€ç»ˆæŒ‡å‘æŸä¸ªhtmlé¡µé¢// #mainContentæŒ‡å‘å³ä¾§ä¸»é¡µé¢function clickMenu(url)&#123; $('#mainContent').load(url);&#125; æ­£å¸¸æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è°ƒè¯•é¡µé¢ä¸­çš„JavaScriptä»£ç ï¼Œåªéœ€è¦ Cmd+Alt+I è°ƒå‡ºChrome DevToolsï¼Œé€‰æ‹© sourceï¼Œæ‰¾åˆ°ç›¸åº”çš„ä»£ç æ®µï¼Œæ·»åŠ æ–­ç‚¹å³å¯ã€‚ä½†æ˜¯ï¼Œï¼Œä»¥$.load()çš„æ–¹å¼åŠ¨æ€åŠ è½½çš„é¡µé¢åœ¨Sourceä¸­æ ¹æœ¬æ— æ³•æ‰¾åˆ°ã€‚ã€‚è¿™ å°±å°´å°¬äº†ï¼ï¼ï¼éš¾é“åªèƒ½åœ¨é¡µé¢javaScriptä»£ç æ®µä¸­æ‰‹ç debuggerï¼Ÿï¼æƒ¨æ— äººé“ï¼ä¸€ç‚¹ä¹Ÿä¸ä¼˜é›…ï¼ï¼ ä¸€ç•ªæ±‚ç´¢ï¼Œç»ˆäºçœ‹åˆ°äº†å¸Œæœ›ï¼Œï¼Œåœ¨Stack Overflow[^1]æ‰¾åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œï¼Œé¡ºè—¤æ‘¸ç“œï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå”¤ä½œsourceURLçš„ä¸œä¸œï¼Œ,åªéœ€è¦åœ¨è¦è½½å…¥çš„é¡µé¢ä¸­javascriptä»£ç æ·»åŠ ä¸€å¥//# sourceURL=jsName.jså³å¯ï¼Œç„¶åå°±å¯ä»¥åœ¨ source ä¸­æ‰¾åˆ°äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«çš„æ‰“æ–­ç‚¹å•¦~ğŸ‘‡ å¦å¤–ï¼Œï¼Œæˆ‘ä»¬å¯ä»¥å†æ·±å…¥æŒ–æ˜ä¸€ä¸‹ä¸‹ï¼Œæ¯”å¦‚äº†è§£ä¸‹é˜®ä¸€å³°è€å¸ˆå†™çš„JavaScript Source Map è¯¦è§£ï¼Œçœ‹åˆ°æ—¥æœŸç€å®å°´å°¬äº†ä¸‹ï¼Œ2013å¹´å°±æœ‰äº†ï¼Œè€Œæˆ‘2018å¹´æ‰ç¬¬ä¸€æ¬¡è§åˆ°ï¼Œï¼Œä»‹ï¼Œä¹Ÿè®¸å°±æ˜¯ä¼ è¯´ä¸­çš„å·®è·ã€‚ã€‚ jqGridä¸­å°†å¯¼èˆªæ å¤åˆ¶åˆ°è¡¨æ ¼ä¸Šæ–¹åœ¨jQueryä¸­$.load()åŠ¨æ€åŠ è½½é¡µé¢è„šæœ¬è°ƒè¯•ä¸­çš„ç¬¬ä¸€å¼ åä¸­ï¼Œä¸»é¡µé¢è¡¨æ ¼å·¦ä¸‹è§’çš„å¯¼èˆªæ æ˜¯ä¸€äº›å¸¸è§çš„æ“ä½œï¼Œæ¯”å¦‚æ·»åŠ ã€åˆ é™¤ã€ç¼–è¾‘ã€æœç´¢å’Œåˆ·æ–°ï¼Œï¼Œä½†æ˜¯æ”¾åœ¨å·¦ä¸‹è§’çš„è¯ï¼Œç€å®ä¸å¤ªæ–¹ä¾¿ã€‚æ§åˆ¶å¥½è¡¨æ ¼çš„é«˜åº¦è¿˜å¥½ä¸€äº›ï¼Œä¸ç”¨åƒä¸‹æ»‘åŠ¨ç›´æ¥å°±èƒ½åœ¨å·¦ä¸‹è§’æ‰¾åˆ°è¿™äº›æ“ä½œå…¥å£ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ§åˆ¶ä¸å¥½é«˜åº¦çš„è¯ï¼Œè¿˜è¦å°†é¡µé¢æ»‘åˆ°åº•éƒ¨ï¼Œï¼Œè¿™ä½“éªŒï¼Œç›¸å½“ä¸å¥½ï¼Œï¼Œå¦‚æœç”¨æˆ·é¦–æ¬¡ç™»é™†åå°çš„è¯ï¼Œå¯èƒ½ä¼šæ‡µã€å§æ§½ï¼Œæ€ä¹ˆæ·»åŠ æ•°æ®ï¼Ÿï¼ï¼å’‹æ“ä½œï¼Ÿï¼Ÿï¼Ÿã€ã€‚æˆ‘ä¸€ç›´è§‰å¾—ä¸éœ€è¦äº§å“ä½¿ç”¨è¯´æ˜çš„è®¾è®¡æ‰æ˜¯å¥½è®¾è®¡ï¼Œï¼Œè¿™æ ·ï¼ŒæŠŠå¸¸ç”¨æ“ä½œæ”¾åœ¨è¡¨æ ¼å·¦ä¸Šè§’ï¼Œæ•ˆæœé©¬ä¸Šä¸ä¸€æ ·äº†~ åœ¨å¯¼èˆªæ çš„è®¾ç½®é¡¹ä¸­ï¼Œæ‰¾åˆ°äº†cloneToTopé€‰é¡¹ï¼Œä½†æ˜¯è®¾ç½®ä¸ºtrueåï¼Œå¯¼èˆªæ å¹¶æ²¡æœ‰cloneToTop..åœ¨åˆå§‹åŒ–è®¾ç½®é¡¹ä¸­æ‰¾åˆ°äº†toppagerï¼Œå°†å€¼æ”¹ä¸ºtrueä¹‹åï¼Œå‘¦ï¼Œçš„ç¡®ä¸Šå»äº†ï¼Œï¼Œåƒè¿™æ · å”¯ç‹¬å¯¼èˆªæ æ²¡æœ‰ä¸Šå»ï¼ï¼ï¼å¯æ¶ï¼Œï¼Œäºæ˜¯åˆæ˜¯ä¸€ç•ªæ±‚ç´¢ï¼Œæœ‰æˆæœ~åŸæ¥ï¼Œï¼Œè®¾ç½®cloneToTopçš„å‰ææ˜¯toppagerçš„å€¼ä¸ºtrueï¼Œï¼Œæ‰€ä»¥ï¼Œæ¥ä¸‹æ¥å˜æˆäº†è¿™æ ·ğŸ‘‡ ç„¶ååªéœ€å°†åˆ†é¡µå’Œç»Ÿè®¡ç›¸å…³çš„div remove()å°±å¯ä»¥äº†1234$("#merchantTable_toppager_center").remove();$("#merchantTable_toppager_right").remove();// æˆ‘å°†è¿™ä¸¤è¡Œä»£ç æ”¾åœ¨äº† loadComplete å›è°ƒå‡½æ•°ä¸­ã€‚ å®Œç¾~ å‚è€ƒé“¾æ¥ï¼š å…³äºSource MapåŠ¨æ€è°ƒè¯• https://stackoverflow.com/questions/9092125/how-to-debug-dynamically-loaded-javascript-with-jquery-in-the-browsers-debugg https://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html å…³äºjqGridå¯¼èˆªæ å¤åˆ¶åˆ°è¡¨æ ¼ä¸Šæ–¹ https://stackoverflow.com/questions/3929896/adding-jqgrid-custom-navigation-to-top-toolbar https://stackoverflow.com/questions/3552855/add-toolbar-in-the-bottom-of-the-header-using-jqgrid/3557663#3557663]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>Source Map</tag>
        <tag>jqGrid</tag>
        <tag>Chrome DevTools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-01 å°ç»“]]></title>
    <url>%2F2018%2F01%2F30%2Fsummary_of_2018_1st%2F</url>
    <content type="text"><![CDATA[2018å¹´1æœˆä»½å°ç»“æœ€è¿‘ä¸€ç›´åœ¨å¿™å°ç¨‹åºçš„äº‹æƒ…ï¼Œä¹Ÿæ˜¯å…¬å¸çš„æ–°é¡¹ç›®ã€‚å› ä¸ºä¹‹å‰å°ç¨‹åºçš„å…¥å£ä¸€ç›´å¾ˆæ·±ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥ä¹Ÿæ²¡é‡è§†èµ·æ¥ï¼Œï¼Œä½†æ˜¯ä»Šå¹´1æœˆä»½ï¼Œå¾®ä¿¡çªç„¶æ›´æ–°ä¹‹åï¼Œæœ‰äº†ã€ç¤¾äº¤ã€å°æ¸¸æˆâ€“è·³ä¸€è·³ï¼Œåœ¨æœ‹å‹åœˆå¥½ä¸€æ³¢åˆ·å±ã€‚ä½†å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œï¼Œæœ€æƒ¹çœ¼çƒçš„è«è¿‡äºå¾®ä¿¡é¦–é¡µä¸‹æ‹‰å‘¼å‡ºrecentå°ç¨‹åºã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå°ç¨‹åºçš„ä½¿ç”¨åœºæ™¯é¡¿æ—¶å¤šäº†èµ·æ¥ï¼Œå…¬å¸ä¹Ÿå¼€å§‹é‡è§†èµ·æ¥ã€‚ å…¶å®ä¹‹å‰è‡ªå·±ä¹Ÿä¸€ç›´æƒ³åšä¸€ä¸ªå°ç¨‹åºçš„ï¼Œç”¨æ¥æ”¶é›†è‡ªå·±çš„ä½ç½®ä¿¡æ¯ï¼Œï¼Œå½“ç„¶ä½ç½®æ•°æ®æ˜¯è‡ªå·±ä¸»åŠ¨æäº¤çš„ã€‚å¦‚æ­¤ï¼Œå°±å¯ä»¥åšé˜¶æ®µæ€§çš„æ€»ç»“äº†ï¼Œæ¯”å¦‚ç”Ÿæˆä¸ªå…¨å¹´èŒƒå›´å†…çš„çƒ­åŠ›å›¾ä»€ä¹ˆçš„ï¼Œçœ‹çœ‹è‡ªå·±è¿‡å»ä¸€å¹´ä¸­éƒ½åœ¨ä»€ä¹ˆåœ°æ–¹æ¶ˆè€—æ—¶é—´äº†~ å…¶å®ï¼Œè¿˜æƒ³ç”¨å°ç¨‹åºåšå¦å¤–ä¸€ä¸ªé¡¹ç›®çš„ï¼Œå…³äºLBSçš„ï¼Œï¼Œå·²ç»æŠŠåå°æ¡†æ¶æ­èµ·æ¥äº†ï¼Œä½¿ç”¨çš„Spring + Spring MVC + Mongodbï¼›Spring å’Œ Spring MVCå·²ç»å¥½ä¹…æ²¡ç”¨è¿‡(å¥½å§ï¼Œï¼ŒSpringå’ŒSpring MVCç¬¬ä¸€æ¬¡ç”¨ï¼Œåœ¨å­¦æ ¡æ—¶è€å¸ˆè¿˜æ²¡æ•™ï¼Œå°±å‡ºæ¥æ‰¾å·¥ä½œäº†)äº†ï¼ŒMongodbæ›´æ˜¯ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡ï¼Œæ‰€ä»¥ä¸€åˆ‡ä»å¤´å¼€å§‹ã€‚åšå®Œä¸Šä¸ªç”¨çº¯Servletæ­çš„é¡¹ç›®ï¼Œæ„Ÿè§‰æ€ç»´å·²ç»è¢«ç¦é”¢äº†ã€‚ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªæ¡†æ¶ä¹ŸæŒºæœ‰æ„æ€çš„ï¼Œå¥½åƒåšæ¸¸æˆå¼€å‘çš„éƒ½è¿™æ ·åšï¼Œï¼Œæ•´ä¸ªé¡¹ç›®åªæœ‰ä¸€ä¸ªServletï¼Œæ¯ä¸ªè¯·æ±‚éƒ½å¸¦æœ‰ä¸€ä¸ªmessageIdå‚æ•°ï¼Œä¸åŒçš„ messageId ä»£è¡¨ä¸åŒçš„ Controler (ä¸­çš„ä¸åŒçš„ä¸šåŠ¡)ï¼Œmessageä¸­åŒ…å«äº†æ‰€æœ‰çš„è¯·æ±‚ä¿¡æ¯å’Œç”¨æˆ·çš„sessionï¼Œç„¶åå°†messageå®ä¾‹æ³¨å…¥åˆ°ç›¸åº”messageIdå¯¹åº”çš„æ¥å£æ‰€åœ¨çš„Controlerä¸­è¿›è¡Œæ“ä½œã€‚ ç”¨æˆ·è¯·æ±‚ -ã€‹è£…é…message -ã€‹å°†messageä»¥åŠ¨æ€ä»£ç†çš„æ–¹å¼æ³¨å…¥ç›¸åº”çš„Controler -ã€‹æ ¹æ®messageä¸­çš„messageIdï¼Œæ‰¾åˆ°å¯¹åº”çš„æ¥å£ -ã€‹æ‰§è¡Œä¸šåŠ¡é€»è¾‘ä»£ç  ç¬¬ä¸€æ¬¡è§åˆ°è¿™ç§ã€æ¡†æ¶ã€ï¼Œè¿˜æ˜¯è›®å—å¯å‘çš„ã€‚å› ä¸ºæ˜¯æŸå‰è¾ˆç¨‹åºå‘˜è‡ªå·±æ­çš„ï¼Œå°±æ˜¯å‘å¤šäº†ç‚¹å„¿ï¼Œè€¦åˆä¹Ÿæ¯”è¾ƒä¸¥é‡ã€‚ã€‚ å…³äºMongodbï¼Œï¼Œå½“åˆå­¦ MySQL çš„æ—¶å€™ï¼Œè€å¸ˆæåˆ°è¿™æ˜¯ä¸€ç§å…³ç³»å‹æ•°æ®åº“ï¼Œä¸ä¹‹ç›¸å¯¹çš„è¿˜æœ‰ã€éå…³ç³»å‹æ•°æ®åº“ã€ï¼Œå³NoSQL(å…¨ç§°Not Only SQL)ã€‚å½“æ—¶æåˆ°äº†Mongodbï¼Œè§‰å¾—è¿™ä¸ªæ•°æ®åº“åå­—ç‰¹åˆ«å¥½å¬ï¼Œå°è±¡è¿˜æŒºæ·±åˆ»ã€‚ã€‚ä½†å…·ä½“å®ƒæ˜¯ä»€ä¹ˆï¼Œå®Œå…¨æ²¡æ¦‚å¿µã€‚æœ¬æ¥è®¡åˆ’ç»§ç»­ç”¨ MySQL çš„ï¼Œä½†æ˜¯ä¸­é—´æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œï¼Œæ€ä¹ˆç”¨ MySQL åœ¨ä¸€ä¸ªå­—æ®µä¸­å­˜å‚¨æœªçŸ¥æ•°é‡çš„ç»çº¬åº¦ä¿¡æ¯å‘¢ï¼Ÿï¼Ÿç›´æ¥ç”¨é€—å·æ‹¼æ¥ï¼Ÿè§‰å¾—ä¸å¤Ÿä¼˜é›…ã€‚ã€‚ç„¶ååœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰ç½‘å‹è¯´å¯ä»¥å°è¯• Mongodbï¼Œè€Œä¸” Mongodb ä¸­è¿˜æœ‰åŸç”Ÿçš„åœ°ç†ä½ç½®ç´¢å¼•ï¼Œç›¸å½“æ–¹ä¾¿ã€‚äºæ˜¯ï¼Œå°±æƒ³å°è¯•ä¸€ä¸‹ï¼Œï¼Œæ¬§è€¶ï¼æ–°çš„è®­ç»ƒé›†~åˆ·äº†ä¸€éMongodbçš„å…¥é—¨è§†é¢‘ï¼Œåˆåˆ·äº†ä¸€éSSM(Spring + Spring MVC + Mongodb)æ¡†æ¶æ•´åˆè§†é¢‘ï¼Œç„¶åå¼€å§‹ä¾æ ·ç”»è‘«èŠ¦ã€‚æœ‰å‡ ç‚¹è®°å½•ä¸‹ï¼š ç”¨@Autowriedæ³¨å…¥ï¼Œä½†åœ¨è°ƒç”¨ç›¸å…³å®ä¾‹çš„æ—¶å€™æ€»æ˜¯æŠ¥é”™ï¼Œå…·ä½“æŠ¥é”™ä¿¡æ¯è®°ä¸å¾—äº†ï¼Œç±»ä¼¼org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;locationController&#39;: Unsatisfied dependency expressed through field &#39;locationDao&#39;;ç½‘ä¸Šå‡ ä¹æ‰€æœ‰çš„æ–¹æ³•éƒ½è¯•äº†ï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œå„ç§å¿ƒç°æ„å†·ï¼Œï¼Œæœ€ååœ¨ä¸€ç¯‡åšå®¢ä¸­å¾—åˆ°å¯å‘ï¼Œï¼Œé‚£ç¯‡åšå®¢å¥½åƒåœ¨è®²æ³¨å…¥ä»€ä¹ˆçš„ï¼Œè¿˜é€šè¿‡æ§åˆ¶å°çš„æ—¥å¿—ä¿¡æ¯éªŒè¯è‡ªå·±çš„æƒ³æ³•ã€‚å™¢ï¼Ÿç„¶åæˆ‘ä¹Ÿå»ç›¯æ§åˆ¶å°ï¼Œå‘ç°é¡¹ç›®å¯åŠ¨çš„æ—¶å€™æ²¡æœ‰å…³äºBeansæ³¨å…¥æˆåŠŸçš„ä¿¡æ¯ï¼Œï¼Œä¸«ä¸«ï¼ç„¶åç»§ç»­å¾€ä¸Šæ£ï¼Œå‘ç°applicationContext.xmlæ²¡æœ‰è¢«æ­£ç¡®è½½å…¥ã€‚ã€‚ã€‚ã€‚ã€‚é‡æ–°ä¿®æ”¹web.xmlé…ç½®æ–‡ä»¶è·¯å¾„ï¼Œæå®šï¼Loading XML bean definitions from class path resource [applicationContext.xml]â€¦Root WebApplicationContext: initialization completed in 1684 ms é…ç½®æ–‡ä»¶ä¸­å…³äº Mongodb æ•°æ®åº“è¿æ¥çš„åœ°æ–¹ï¼ŒåŒæ ·ï¼Œï¼Œç½‘ä¸Šçš„æ–¹æ³•å‡ ä¹éƒ½è¯•äº†ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚ä¸»è¦æ˜¯é…ç½®æ–‡ä»¶ä¸­æç¤ºcvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &#39;mongo:mongo&#39;.æœ€åå®åœ¨æ²¡è¾™ï¼Œå» Mongodb å®˜ç½‘ç¿»docï¼Œï¼Œæ‰¾åˆ°ç›¸åº”jaråŒ…çš„ç‰ˆæœ¬ï¼Œå‘ç°äººå®¶ç”¨çš„&lt;mongo:mongo-client&gt;æ ‡ç­¾ï¼Œä¸æ˜¯&lt;mongo:mongo&gt;ã€‚ã€‚å› ä¸ºè¿™æ®µé…ç½®æ˜¯åœ¨ç½‘ä¸Šæ‰¾çš„ï¼Œè€Œä¸”éƒ½ç”¨çš„è¿™ä¸ªæ ‡ç­¾ã€‚ã€‚ä½†æˆ‘ä¸€èˆ¬éƒ½ä¼šç”¨æœ€æ–°ç‰ˆæœ¬çš„jaråŒ…ï¼Œï¼Œå¥½å§ã€‚ åˆ«çš„è¿˜ç®—é¡ºåˆ©ï¼Œï¼Œä»æ­ç¯å¢ƒåˆ°æˆ‘æŠŠç¬¬ä¸€æ¡ä½ç½®ä¿¡æ¯æŒä¹…åŒ–çš„Mongodbä¸­å·²ç»ä¸¤å¤©äº†ã€‚ã€‚ã€‚ä½†æ”¶è·ä¹Ÿæ˜¯æ»¡æ»¡~ å…³äºå¾®ä¿¡å°ç¨‹åºï¼Œï¼Œæœ€è¿‘å¥½åƒä¸€ç›´éƒ½åœ¨åšå…³äºå‰ç«¯çš„ä¸œè¥¿ï¼Œåšå®¢ä¸­æœ€è¿‘ä¹Ÿåˆ†äº«çš„å¤§å¤šä¹Ÿæ˜¯jsçš„å†…å®¹ï¼Œä½†æˆ‘æ˜æ˜æ˜¯Javaå·¥ç¨‹å¸ˆã€‚ã€‚ã€‚åœ¨ä¸Šé¢çš„é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œï¼Œå‡å¦‚æˆ‘æƒ³å®šæ—¶å‘æ•°æ®åº“ä¸­æ’å…¥ä½ç½®ä¿¡æ¯ï¼Œé‚£å¸¸è§„å®ç°èµ·æ¥å¯èƒ½æ˜¯è¿™æ ·ï¼š123456789101112131415161718setInterval(function()&#123; wx.getLocation(&#123; type: 'wgs84', success: function(res) &#123; wx.getLocation(&#123; url: '', data: &#123; ... &#125;, type: 'json', method: 'POST', success: res =&gt; &#123; console.log(res.data); &#125; &#125;); &#125; &#125;);&#125;,10000); è¿™æ ·çš„ä»£ç è¿˜æ˜¯å¾ˆå¯æ€•çš„ï¼Œå¾ˆå®¹æ˜“é™·å…¥å›è°ƒæ·±æ¸Šã€‚ã€‚æƒ³ç”¨Promiseæˆ–è€…asyncå’Œawaitï¼Œåˆæ€•æŸäº›æ‰‹æœºæ”¯æŒåˆ°äº†ES5ï¼Œäºæ˜¯æƒ³ç€æœ‰æ²¡æœ‰ä»€ä¹ˆå¾ˆå¥½çš„è§£å†³åŠæ³•ï¼Œæœ€å¥½å¾®ä¿¡å°ç¨‹åºä¹Ÿæœ‰ä¸ªæ¡†æ¶ä»€ä¹ˆçš„ã€‚åœ¨ç½‘ä¸Šåšäº†åšåŠŸè¯¾ï¼Œå‘ç°äº†è…¾è®¯å®˜æ–¹åœ¨Githubä¸Šå¼€æºçš„ä¸€ä¸ªæ¡†æ¶wepy(å¾®ä¿¡å°ç¨‹åºç»„ä»¶åŒ–å¼€å‘æ¡†æ¶WePYå®˜æ–¹æ–‡æ¡£)ã€‚ç„¶ååˆå¼€å§‹åšåŠŸè¯¾ï¼Œçœ‹åˆ°æ–‡æ¡£ä¸Šè¯´æ˜¯åŸºäºVue.jsæ¡†æ¶ï¼ŒOKï¼Œï¼Œåˆå»åˆ·Vueçš„è§†é¢‘ã€‚åœ¨è®²åˆ°Vueä¸­çš„v-modelçš„æ—¶å€™ï¼Œå¥½åƒæ˜ç™½ä¸€ç‚¹ä»€ä¹ˆæ˜¯MVVMæ¡†æ¶äº†ã€‚å›è¿‡å¤´å†å­¦wepyï¼Œï¼Œå®ƒåƒä¸€ä¸ªæ¡†æ¶ï¼Œåˆåƒä¸€ä¸ªç¿»è¯‘å™¨ã€‚è¯´åˆ°è¿™å„¿ï¼Œæ„Ÿè§‰åˆæœ‰ç‚¹åƒæœ¬ç«™æ‰€ç”¨Hexoï¼Œæ˜¯ä¸€ä¸ªåšå®¢æ¡†æ¶ã€‚å‰è€…å°†.wypæ–‡ä»¶ç¿»è¯‘æˆ[.wxml,.wxss,.js,.json]ï¼Œåè€…å°†.mdæ–‡ä»¶ç¿»è¯‘æˆ.htmlæ–‡ä»¶ã€‚è¿™ä¸¤è€…åº”è¯¥éƒ½æ˜¯åŸºäºnode.jsã€‚æƒ³æƒ³ä»¥å‰åšå‰ç«¯é¡¹ç›®æ—¶ï¼Œå®Œå…¨ä¸æ˜¯ä¸€æ ·çš„æ„Ÿè§‰ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå› ä¸ºä¸äº†è§£node.jsï¼Œï¼Œæˆ‘åªèƒ½è¯´ï¼Œå—¯ï¼Œæœ‰ç‚¹æ„æ€~ å¦å¤–ï¼Œï¼Œå› ä¸ºå°ç¨‹åºä»£ç åŒ…ä¸èƒ½è¶…è¿‡2Mï¼Œæ‰€ä»¥ä»Šå¤©å°è¯•å°†ç›®å½•ä¸­çš„é™æ€èµ„æºæ–‡ä»¶æ”¾åˆ°æœåŠ¡å™¨ä¸­ï¼Œä»¥èŠ‚çœç©ºé—´ã€‚é¦–å…ˆæƒ³åˆ°çš„æ˜¯nginxï¼Œå…¬å¸ç”¨çš„å‘çˆ¹windows server 2008ã€‚äº‹å®è¯æ˜çš„ç¡®å‘çˆ¹ï¼Œï¼Œå·²ç»å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®æœ¬åœ°å›¾ç‰‡åˆ—è¡¨äº†ï¼Œä½†æ˜¯ç‚¹åˆ°æŸä¸ªå…·ä½“çš„æ–‡ä»¶æ—¶å°±å¼€å§‹ç¼“æ…¢è¯·æ±‚ï¼Œæœ€åæŠ¥504é”™è¯¯ã€‚åœ¨è‡ªå·±Macä¸Šçš„nginxæ¨¡æ‹Ÿäº†ä¸‹ï¼Œè™½ç„¶ä¸­é—´å‡ºäº†äº›é—®é¢˜ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è§£å†³äº†ã€‚åªèƒ½å°†é™æ€èµ„æºæ”¾åˆ°äº†tomcatä¸­ï¼Œä¸å¤Ÿä¼˜é›…ã€‚ã€‚å¾—æ”¹ã€‚å…³äºåœ¨macä¸­é‡åˆ°é—®é¢˜ï¼Œlocationä¸­aliaså’Œrootçš„åŒºåˆ«ï¼Œï¼Œ alias syntax: alias file-path|directory-path;default: no // æ— é»˜è®¤å€¼context: location // ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¤„äºlocationé…ç½®é¡¹ä¸­This directive assigns a path to be used for the indicated location. Note that it may look similar to the root // è¿™æ¡å‘½ä»¤ä¸ºè¡¨æ˜çš„ä½ç½®åˆ†é…äº†ä¸€ä¸ªè·¯å¾„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œaliasçœ‹èµ·æ¥æœ‰äº›åƒrootdirective, but the document root doesnâ€™t change, just the file system path used for the request.// ï¼Ÿï¼Ÿï¼Ÿï¼Œä½†æ˜¯æ–‡æ¡£æ ¹è·¯å¾„ä¸ä¼šå˜ï¼Œä»…ä»…ç”¨æ¥å“åº”è¯·æ±‚è¦è®¿é—®çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„For example:location /i/ { alias /spool/w3/images/;}The request â€œ/i/top.gifâ€ will return the file â€œ/spool/w3/images/top.gifâ€.// â€œ/i/top.gifâ€çš„è¯·æ±‚å®é™…å¾—åˆ°çš„æ˜¯â€/spool/w3/images/top.gifâ€ root syntax: root pathdefault: root htmlcontext: http, server, location, if in locationroot specifies the document root for the requests. For example, with this configurationlocation /i/ { root /spool/w3;}A request for â€œ/i/top.gifâ€ will return the file â€œ/spool/w3/i/top.gifâ€. You can use variables in the argument.note: Keep in mind that the root will still append the directory to the request so that a request for â€œ/i/top.gifâ€ will not look in â€œ/spool/w3/top.gifâ€ like might happen in an Apache-like alias configuration where the location match itself is dropped. Use the alias directive to achieve the Apache-like functionality. // è®°ä½ï¼Œè¯·æ±‚è·¯å¾„ä»ç„¶ä¼šæ‹¼æ¥åœ¨rootæ‰€ä»£æŒ‡çš„è·¯å¾„åï¼Œæ‰€ä»¥è¯·æ±‚â€/i/top.gifâ€ä¸ä¼šåœ¨â€/spool/w3/top.gifâ€è·¯å¾„ä¸‹å¯»æ‰¾ï¼›ç±»ä¼¼çš„åƒç±»ApacheæœåŠ¡å™¨ä¸­çš„é…ç½®???ğŸ˜‚???,åœ¨ç±»ApacheæœåŠ¡å™¨ä¸­ä½¿ç”¨aliasæ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¯”å°”ç›–èŒ¨]]></title>
    <url>%2F2018%2F01%2F20%2Ftime_flies%2F</url>
    <content type="text"><![CDATA[æ—¶å…‰é£é€ä»æœªæ„Ÿè§‰æ—¶é—´çš„åŠ›é‡å¦‚æ­¤å¼ºå¤§ï¼Œï¼Œ ä»Šå¤©ä¸‹åˆï¼Œä¸€è¾¹å†™é¡¹ç›®æ–‡æ¡£ï¼Œä¸€è¾¹å¬æå®¢å…¬å›­åˆ›æ–°å¤§ä¼š IF2018ï¼Œï¼Œä¾ç„¶ï¼Œå¼ é¹çš„ä¸»æŒäººï¼Œåœ¨è®²åˆ°æœªæ¥äººå·¥æ™ºèƒ½å¯¹ç°æœ‰ä¼ ç»Ÿè¡Œä¸šçš„å†²å‡»æ—¶ï¼Œæåˆ°è®©ç§‘æŠ€å¸¦æœ‰äººæ–‡è‰²å½©ï¼Œç¼“å†²è¿™ç§å†²å‡»ã€‚å…¶ä¸­ï¼Œç”¨åˆ°äº†æ¯”å°”ç›–èŒ¨çš„ä¸€æ®µè§†é¢‘ï¼Œï¼Œè§†é¢‘ä¸­ Bill Gates é˜è¿°äº†ä¸€ç§è§‚ç‚¹ï¼š åŸæ–‡é“¾æ¥The robots that takes your job should pay taxes.åº”å½“å‘æ‹¿èµ°ä½ å·¥ä½œçš„æœºå™¨äººå¾ç¨ã€‚ è¿™æ ·ï¼Œï¼Œæœºå™¨äººç”¨æ¥åšé‚£äº›é‡å¤ä¸”æœºæ¢°åŒ–çš„å·¥ä½œï¼Œè€Œè¢«è§£æ”¾çš„åŠ³åŠ¨åŠ›å¯ä»¥ç”¨æ¥æ›´å¥½çš„ä»äº‹å…¶ä»–åªèƒ½ç”±äººç±»è¿›è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚ç…§é¡¾è€äººï¼Œå°ç­æˆè¯¾ç­‰ç­‰ã€‚ ä½†æ˜¯ï¼Œä»Šå¤©æˆ‘å¹¶ä¸æƒ³è®¨è®ºè¿™äº›ã€‚ã€‚åªæ˜¯ï¼Œçœ‹åˆ°è§†é¢‘çš„ä¸€ç¬é—´ï¼Œæœ‰äº›æ™¶è¹çš„å°ä¸œè¥¿åœ¨çœ¼çœ¶é‡Œæ‰“è½¬ï¼Œï¼Œæˆ‘çŸ¥é“æ¯”å°”ç›–èŒ¨è€äº†ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°è€æˆè¿™æ ·ã€‚ æˆ‘ä¹Ÿä¸çŸ¥é“è‡ªå·±ä¸ºä»€ä¹ˆä¼šå¦‚æ­¤æ¿€åŠ¨ï¼Œäº‹å®ä¸Šï¼Œï¼Œæˆ‘ä¸€ç›´ç”¨çš„éƒ½æ˜¯ Macbook Pro 15â€ 2013 earlyï¼Œè™½ç„¶æ˜¯ebayä¸Šæ·˜çš„äºŒæ‰‹çš„ï¼Œä½†è¿™çš„ç¡®æ˜¯æˆ‘ç¬¬ä¸€å°ä¸ªäººç”µè„‘ã€‚æˆ‘å¯¹Windowsç³»ç»Ÿå¹¶ä¸æ„Ÿå†’ï¼Œä¹Ÿä¸æ˜¯å¾®è½¯çš„æ‹¥è¶¸ï¼Œï¼Œç”šè‡³æœ‰äº›åŒæ¶ã€‚ä½†çœ‹åˆ°è§†é¢‘ä¸­çš„æ¯”å°”ç›–èŒ¨æ—¶ï¼Œï¼Œå°±åƒçœ‹åˆ°äº†ä¸€ä¸ªå¾ˆç†Ÿæ‚‰å¾ˆäº²è¿‘ä½†åˆè®¸ä¹…æœªè§çš„äº²äºº(Oræœ‹å‹)èººåœ¨åŒ»é™¢çš„ç—…åºŠä¸Šï¼Œèº«ä¸Šè¿æ»¡äº†ä»ªå™¨ï¼Œè¿˜æœ‰å„ç§ä¾µå…¥å¼çš„ç®¡å­ï¼Œï¼Œè§åˆ°ä»–é‚£ä¸€åˆ»è¦å¼ºå¿æ³ªæ°´ã€‚ã€‚æˆ‘æƒ³ä¸åˆ°æ›´å¥½çš„è¯­è¨€å»æè¿°è¿™ç§æ„Ÿè§‰ï¼Œä½†éœ‡æ’¼è‰¯ä¹…ï¼Œï¼Œå°¤å…¶æ˜¯çœ‹åˆ°ä»–çš„å³è§†å›¾é•œå¤´æ—¶ã€‚ æˆ‘å¼€å§‹æ€è€ƒè‡ªå·±ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„æƒ…ç»ªï¼Œï¼Œæƒ³åˆ°æ™®é²æ–¯ç‰¹é—®å·-2017ä¸­å…³äºã€ä½ æœ€ææƒ§çš„æ˜¯ä»€ä¹ˆï¼Ÿã€çš„å›ç­”ï¼Œï¼Œå¤§æ¦‚æ˜ç™½äº†ã€‚æˆ‘å®³æ€•çš„æ˜¯æ—¶å…‰é£é€ï¼Œè€Œæ—¶é—´åœ¨ Bill Gates çš„è„¸ä¸Šç•™ä¸‹äº†è®©äººæ— æ³•å¿½è§†çš„ç—•è¿¹ã€‚è€Œæˆ‘æ­¤æ—¶çœ‹åˆ°Billï¼Œå°±åƒæ”¶åˆ°ä¸€æ¡æ¥è‡ªæ—¶é—´çš„è­¦å‘Šï¼Œï¼Œè­¦å‘Šæˆ‘ï¼Œã€listen~ ti ke ta ke, ti ke ta keâ€¦The time is passing!ã€çœ‹åˆ°ã€æ—¶å…‰é£é€ã€å››ä¸ªå­—å¹¶ä¸å¯æ€•ï¼Œä½†æ˜¯çœ‹åˆ°ç†Ÿæ‚‰çš„äººã€çªç„¶ã€è¡°è€ï¼Œï¼Œè¿™å¾ˆå¯æ€•ï¼ï¼ï¼Bill å°†è¿™ç§å¯æ€•å…·è±¡åŒ–äº†ã€‚ã€‚çªç„¶æ„Ÿè§‰å’Œä»–æ›´åŠ äº²è¿‘ï¼Œä¹Ÿè®¸æˆ‘åŒæ¶çš„ä¸æ˜¯ Windowsï¼Œè€Œæ˜¯ Windows å¹³å°ä¸Šå„ç§å›½äº§æ€æ¯’è½¯ä»¶ï¼Œå®‰å…¨ç®¡å®¶ä¹‹ç±»çš„æµæ°“è¡Œä¸ºï¼Œè¿˜æœ‰å„ç§å¼¹æ¡†ã€‚æˆ‘å®‰è£…ä¸ªæœç‹—è¾“å…¥æ³•ï¼Œæœç‹æ–°é—»å¼¹ä¸ªæ¯›çº¿ï¼Ÿï¼Shit! ä¸æ™“å¾—å›½å¤–çš„ Windows ç”Ÿæ€æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™æ ·ã€‚ã€‚ä¸å¯å¦è®¤çš„æ˜¯ Bill Gates è®©è®¡ç®—æœºçœŸæ­£èµ°å…¥åƒå®¶ä¸‡æˆ·ï¼Œï¼Œæ­£æ‰€è°“ã€æ—§æ—¶ç‹è°¢å ‚å‰ç‡•ï¼Œé£å…¥å¯»å¸¸ç™¾å§“å®¶ã€ã€‚è®¡ç®—æœºæœ€åˆæœ¬æ˜¯ç”¨æ¥è®¡ç®—å¯¼å¼¹å¼¹é“ï¼Œä¹‹åå¼€å§‹æµè¡Œäºå•†ä¸šï¼Œæ’ç‰ˆå•Šï¼Œè®¡ç®—å•Šï¼Œï¼Œç›´åˆ°1995å¹´çš„ win95 å‡ºç°ï¼Œå›¾å½¢åŒ–é¡µé¢çš„æ“ä½œä½“éªŒå¯¹æ™®é€šç”¨æˆ·éå¸¸å‹å¥½ï¼ŒåŒæ—¶ä¹Ÿç‚¹äº®äº†è®¡ç®—æœºæŠ€èƒ½æ ‘ä¸­çš„å¨±ä¹åŠŸèƒ½ã€‚æ­£å› ä¸ºè¿™ä¸€ç‚¹ï¼ŒåŒ…æ‹¬å› ç‰¹ç½‘åœ¨å†…çš„ä¿¡æ¯æŠ€æœ¯æ‰ä¼šå¾—åˆ°å¦‚æ­¤è·¨è¶Šå¼çš„å‘å±•ï¼Œï¼Œå€˜è‹¥ï¼Œè®¡ç®—æœºä»…é™äºå†›äº‹ã€å•†ä¸šã€ç§‘å­¦ç ”ç©¶ï¼Œé‚£ä¹ˆç°åœ¨åœ°çƒè‚¯å®šä¸èƒ½è¢«ç§°ä½œã€åœ°çƒæ‘ã€ã€‚å•è¿™ä¸€ç‚¹æ¥è¯´ï¼Œï¼ŒBill Gates åŠŸä¸å¯æ²¡ã€‚é‡‡è®¿ä¸­ï¼Œè§†é¢‘ç»“å°¾ï¼Œï¼ŒBill Gates ä¸å¥½æ„æ€çš„æŒ å¤´äº†ï¼Œçœ¼ç¥ä¹Ÿæ²¡é‚£ä¹ˆä¸¥è‚ƒäº†ï¼Œç”šè‡³è¿˜é£˜å‘äº†å‘¨å›´ï¼Œç„¶åè¿…é€Ÿæ”¶å›ï¼Œï¼Œä¸å¾—ä¸è¯´ï¼Œç¬é—´è¢«å®åŠ›åœˆç²‰ã€‚åœ¨è¿™å„¿ï¼Œæˆ‘æƒ³è¯´ä»–å¾ˆå¯çˆ±ï¼Œåˆé€‚ä¹ˆï¼Ÿå“ˆå“ˆ é‚£ä¹ˆï¼Œï¼Œä¸ºä»€ä¹ˆå½“åˆé€‰ Mac å‘¢ï¼Ÿä¸€æ–¹é¢ï¼Œå› ä¸ºä»äº‹è¿‡è‹¹æœäº§å“é”€å”®çš„å·¥ä½œï¼Œå¯¹Macæ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¸å¤¸å¼ çš„è¯´ï¼Œï¼Œæˆ‘æ¥è§¦ Mac çš„æ—¶é—´æ¯”æ¥è§¦ Windows çš„æ—¶é—´è¦é•¿(æ‰¶é¢.jpg)ï¼Œï¼Œä¸æ˜¯å› ä¸ºæ¥è§¦ Mac æ—¶é—´é•¿ï¼Œè€Œæ˜¯å› ä¸ºæ¥è§¦ Wondows æ—¶é—´çŸ­ï¼Œè™½ç„¶ä»å°å­¦å°±å¼€å§‹æ¥è§¦ Windowsã€‚ã€‚è¿™ä¸ªå¯ä»¥ç®—ä½œ Contextï¼ŒçœŸæ­£åŸå› åªæœ‰ä¸¤ç‚¹ï¼Œï¼Œ Mac ä¸Šç©ä¸»æµæ¸¸æˆæˆæœ¬æ¯”è¾ƒé«˜ï¼Œï¼Œå°¤å…¶æ˜¯ LOLï¼Œè™½ç„¶æœ‰ä¹Ÿæœ‰ Mac ç‰ˆï¼Œä½†æ˜¯æ˜¯ç¾æœï¼Œç½‘ç»œå»¶è¿Ÿä¹Ÿä¸å¯æƒ³è±¡ï¼Œï¼Œå—¯ï¼ŒMac çš„æ˜¾å¡ä¹Ÿæ˜¯å¤Ÿå‘›ã€‚å…¶ä»–æ¸¸æˆå°±ä¸è¯´äº†ã€‚ã€‚ Macbook çš„è§¦æ§æ¿ç®€ç›´ä¸è¦å¤ªå¥½ç”¨ï¼ï¼ï¼ æ¯•ç«Ÿä¹°æ¥æ˜¯æƒ³å½“åšç”Ÿäº§åŠ›å·¥å…·æ¥ç”¨çš„ï¼Œä¸èƒ½ç©æ¸¸æˆæ˜¯åˆšéœ€ï¼Œï¼Œè™½ç„¶æˆ‘ä¹Ÿæ²¡é‚£ä¹ˆå¤§ç˜¾ï¼Œæ¯•ç«Ÿæ‰‹æ®‹(å†æ¬¡æ‰¶é¢..)ã€‚è€Œè§¦æ§æ¿å°±æ˜¯çº¯ç”¨æˆ·ä½“éªŒäº†ï¼Œ2880Ã—1800 çš„åˆ†è¾¨ç‡ä¹Ÿæ˜¯é€†å¤©ï¼Œåœ¨åŠ ä¸Šæµæ°“è½¯ä»¶å°‘ä¹‹åˆå°‘ï¼Œï¼Œå°±å®ƒäº†~]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>æ¯”å°”ç›–èŒ¨</tag>
        <tag>æ—¶é—´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLåˆ†ç»„å–å‰Næ¡è®°å½•]]></title>
    <url>%2F2018%2F01%2F17%2Ftop-n_after_sql_group%2F</url>
    <content type="text"><![CDATA[SQLåˆ†ç»„å–å‰Næ¡è®°å½•å®é™…ä¸šåŠ¡ä¸­æœ‰è¿™æ ·è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œï¼Œæœ‰6ç§ä¸åŒçš„æµ‹è¯•é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®å¯¹åº”å¾ˆå¤šå°æ¸¸æˆ(æ”¹å–„æ–¹æ¡ˆ)ï¼Œå®¢æˆ·è¦æ±‚æµ‹è¯•å®Œæˆåï¼Œæ¯å‘¨è¿›è¡Œå°æ¸¸æˆçš„å¾ªç¯æ¨é€ï¼Œæ¯ç§é¡¹ç›®æ¯æ¬¡æ¨é€5ä¸ªå°æ¸¸æˆã€‚ å‡å¦‚Aé¡¹ç›®å¯¹åº”çš„å°æ¸¸æˆæœ‰8ä¸ªï¼Œï¼Œé‚£ä¹ˆç¬¬ä¸€å‘¨åˆ™æ¨é€ç¬¬1-5ä¸ªï¼Œç¬¬äºŒå‘¨åˆ™æ¨é€6ã€7ã€8ã€1ã€2,ä»¥æ­¤æ–¹å¼è¿›è¡Œå¾ªç¯ã€‚ å•ä¸ªé¡¹ç›®è¿˜å¥½è¯´ï¼Œä½†æ˜¯6ç§é¡¹ç›®æ€ä¹ˆæï¼Ÿï¼æ‡µé€¼ã€‚ã€‚æƒ³ä¸å‡ºæ¥ï¼Œï¼Œå¥½å§ï¼Œç”¨å­˜å‚¨è¿‡ç¨‹æå®šäº†ã€‚ä½†æ˜¯ï¼Œåœ¨å‰æœŸæ‘¸ç´¢çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¥½å¤šçŒ¿çŒ¿ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œï¼Œåªä¸è¿‡ï¼Œæˆ‘çš„éœ€è¦å¾ªç¯ã€‚é‚£ä¹ˆï¼Œï¼Œå€˜è‹¥ä¸å¾ªç¯ï¼Œå€¼è¿›è¡Œä¸€æ¬¡æ¨é€å‘¢ï¼Ÿ6ä¸ªé¡¹ç›®ä¸€èµ·ï¼Œæ¯ç§é¡¹ç›®å–å‰5é¡¹ï¼Ÿå¯ä»¥å­¦ä¹ ä¸‹~ ä»¥ç½‘ä¸Šéƒ½èƒ½æ‰¾åˆ°çš„ä¾‹å­æ¥è¯´ï¼š[^1]123456789101112131415161718192021222324252627282930-- æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„å‰2åæˆç»©CREATE TABLE StudentGrade( stuId CHAR(4), --å­¦å· subId INT, --è¯¾ç¨‹å· grade INT, --æˆç»© PRIMARY KEY (stuId,subId))-- è¡¨ä¸­æ•°æ®å¦‚ä¸‹INSERT INTO StudentGrade(stuId,subId,grade) VALUES('001',1,97);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('001',2,50);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('001',3,70);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('002',1,92);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('002',2,80);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('002',3,30);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('003',1,93);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('003',2,95);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('003',3,85);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('004',1,73);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('004',2,78);INSERT INTO StudentGrade(stuId,subId,grade) VALUES('004',3,87);-- è¦æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„å‰2åæˆç»©ï¼Œå³001 1 97003 1 93003 2 95002 2 80004 3 87003 3 85-- å¦‚ä½•å®ç°ï¼Ÿ æŸ¥çœ‹è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼š1234567891011121314select * from StudentGrade ORDER BY subid asc,grade desc|å­¦å·|ç§‘ç›®|æˆç»©|001 1 97003 1 93002 1 92004 1 73003 2 95002 2 80004 2 78001 2 50004 3 87003 3 85001 3 70002 3 30 ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š123456789101112131415-- ç¬¬ä¸€ç§select * from StudentGrade a where (select count(1) from studentGrade b where b.subId=a.subId and b.grade&gt;a.grade)&lt;2 order by subId,grade desc-- ç¬¬äºŒç§SELECT a.* from StudentGrade a left join StudentGrade b on a.subid=b.subid and a.grade&lt;b.grade GROUP BY a.stuid,a.subid,a.grade having count(b.stuid)&lt;2 order by a.subid,a.grade desc å¯¹äºç¬¬ä¸€ç§æ–¹æ¡ˆæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼Œï¼Œå› ä¸ºb.subId=a.subId,aã€bä¸¤è¡¨ç›¸è¿ï¼Œä»¥subIdè¿›è¡ŒåŒºåˆ†ï¼Œç±»ä¼¼åˆ†ç»„ã€‚ä»¥ç§‘ç›®ä¸€ä¸ºä¾‹ï¼Œï¼Œ è‹¥a.grade=73ï¼Œåˆ™bè¡¨ä¸­çš„ç§‘ç›®ä¸€ä¸­&gt;73åˆ†çš„å…±æœ‰3é¡¹ï¼Œè€Œæ¡ä»¶è¦æ±‚count(1)&lt;2,è¿™æ ·æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œæ‰€ä»¥ç§‘ç›®ä¸€çš„73åˆ†ä¸è¡Œï¼› åŒç†92åˆ†ã€‚ è‹¥a.grade=93ï¼Œcount(1)=1 &lt; 2ï¼Œç¬¦åˆè¦æ±‚~ è‹¥a.grade=97ï¼Œcount(1)=0 &lt; 2ï¼Œç¬¦åˆè¦æ±‚~å®Œç¾~ æœ¬æ¥ä¹Ÿæ˜¯æœ‰ç‚¹æƒ³ä¸æ˜ç™½çš„ï¼Œä½†æ˜¯çœ‹åˆ°ä¸‹é¢è¿™å¥ï¼Œï¼Œè¯¶ï¼Œæœ‰ç‚¹æ„æ€ï¼Œï¼Œå™¢~äº†ç„¶ï¼ æ¯å–æ¯ä¸€æ¡è®°å½•ï¼Œåˆ¤æ–­åŒä¸€ä¸ªç­çº§ï¼Œå¤§äºå½“å‰æˆç»©çš„åŒå­¦æ˜¯ä¸æ˜¯å°äº2ä¸ªäºº[^2] å¯¹äºç¬¬äºŒç§æ–¹æ¡ˆï¼Œ,æœ‰ä¸€ç§å¥‡æŠ€æ·«å·§ï¼Œå°±æ˜¯æŠŠaã€bä¸¤è¡¨çš„æ•°æ®éƒ½æŸ¥è¯¢å‡ºæ¥12345678910111213141516SELECT a.*,b.* from StudentGrade a left join StudentGrade b on a.subid=b.subid and a.grade&lt;b.grade GROUP BY a.stuid,a.subid,a.grade having count(b.stuid)&lt;2 order by a.subid,a.grade desc -- ç»“æœå¦‚ä¸‹001 1 97 null null null 003 1 93 001 1 97003 2 95 null null null 002 2 80 003 2 95004 3 87 null null null 003 3 85 004 3 87-- å‰3åˆ—ä¸ºaè¡¨ï¼Œå3åˆ—ä¸ºbè¡¨ å¦‚æ­¤çœ‹æ¥ï¼Œæ¸…æ¥šæ˜äº†ï¼Œï¼Œå› ä¸ºa.subid=b.subid and a.grade&lt;b.gradeï¼Œæ‰€ä»¥ç¬¬2è¡Œaè¡¨çš„93åˆ†å’Œbè¡¨çš„97åˆ†ç›¸è¿äº†ï¼Œåˆå› ä¸ºcount(b.stuid)&lt;2ï¼Œæ‰€ä»¥åªå–äº†aè¡¨æ¯ä¸ªç§‘ç›®çš„å‰2é¡¹ã€‚è‹¥æˆ‘ä»¬åªå–aè¡¨çš„æ•°æ®ï¼Œå3åˆ—æ¶ˆå¤±ï¼Œï¼Œå®Œç¾~ è¿™ä¸ªï¼Œï¼Œå°±è¿™æ ·å§ï¼Œå‰©ä¸‹çš„å°±æ˜¯å®æ“äº†ï¼Œè¿˜æ˜¯è‡ªå·±äº²èº«command+Rè¿è¡Œä¸€ä¸‹ï¼Œä½“ä¼šæ›´æ·±~ [^1]: sql ç”¨Group byåˆ†ç»„å,å–æ¯ç»„çš„å‰å‡ æ¡è®°å½•(è½¬) [^2]: mysqlä½¿ç”¨GROUP BYåˆ†ç»„å®ç°å–å‰Næ¡è®°å½•çš„æ–¹æ³•]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºjavaä¸­çš„åºåˆ—åŒ–]]></title>
    <url>%2F2018%2F01%2F13%2Fserialization_and_deserialization_of_java%2F</url>
    <content type="text"><![CDATA[å…³äºjavaä¸­çš„åºåˆ—åŒ–Contextæœ€è¿‘åœ¨ç²¾ç®€é¡¹ç›®ä»£ç ï¼Œå»é™¤æ— ç”¨çš„ä¾èµ–ä»¥åŠæ²¡æœ‰æ²¡æœ‰ä½¿ç”¨çš„æ¨¡å—ã€‚è¿™å…¶ä¸­å…ä¸äº†åˆ é™¤å®ä½“ç±»ä¸­çš„æ— æ•ˆå­—æ®µã€‚äºæ˜¯ï¼Œï¼Œé—®é¢˜æ¥äº†ï¼š1java.io.InvalidClassException: entity.User; local class incompatible: stream classdesc serialVersionUID = 8550471390860600205, local class serialVersionUID = -7433272285406297333 ç”¨æˆ·æœªç™»å½•ï¼Ÿæ”¹å®Œä¹‹åï¼Œåœ¨æµ‹è¯•æŸæ¥å£çš„æ—¶å€™ï¼Œåªæ˜¯è¿”å›ç”¨æˆ·æœªç™»å½•çš„ä¿¡æ¯ï¼Œæ²¡æƒ³å¤ªå¤šï¼Œï¼Œäºæ˜¯è°ƒç”¨æ¨¡æ‹Ÿæµ‹è¯•è´¦å·ç™»å½•è¡Œä¸ºçš„æ¥å£ï¼Œç„¶åé‡æ–°æµ‹è¯•åˆšæ‰çš„æ¥å£ï¼Œä½†è¿˜æ˜¯è¿”å›ç”¨æˆ·æœªç™»å½•çš„ä¿¡æ¯ã€‚ã€‚ è¿™å°±æ€ªäº†ï¼Œï¼Œæ­£å¸¸æ¥è¯´ï¼Œç”¨æˆ·åœ¨æ­£å¸¸ç™»é™†æ—¶ï¼Œé€šè¿‡SQLæŸ¥åˆ°ç”¨æˆ·ä¿¡æ¯åï¼Œä¿å­˜éƒ¨åˆ†å­—æ®µåˆ°Redisä¸­ï¼Œä¹‹åæ¯æ¬¡ç”¨æˆ·å‘é€è¯·æ±‚æ—¶ç›´æ¥é€šè¿‡ç”¨æˆ·IDä»Redisä¸­è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œï¼Œé¦–å…ˆæ€€ç–‘çš„æ˜¯ç”¨æˆ·åœ¨ç™»é™†åå‘é€å…¶ä»–è¯·æ±‚æ—¶ï¼Œé€šè¿‡Redisè·å–ç”¨æˆ·ä¿¡æ¯æ—¶å‡ºé—®é¢˜äº†ï¼Œç„¶åä¸€ç‚¹ç‚¹çœ‹ä»£ç ã€‚è°ƒè¯•åˆ°è¿™å„¿çš„æ—¶å€™å‘ç”Ÿé—®é¢˜äº†ğŸ‘‡12345678910ByteArrayInputStream bais = null;try &#123; // ååºåˆ—åŒ– bais = new ByteArrayInputStream(bytes); ObjectInputStream ois = new ObjectInputStream(bais); return ois.readObject();&#125; catch (Exception e) &#123; //Tools.error(e);&#125;return null; ğŸ‘†è¿™æ˜¯ä»Redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯åçš„ååºåˆ—åŒ–æ—¶çš„éƒ¨åˆ†ä»£ç ï¼Œï¼Œæ­£å¸¸æ¥è¯´ï¼Œåº”è¯¥æ˜¯è¿”å›ä»æµä¸­ååºåˆ—åŒ–åå¾—åˆ°çš„Userå®ä¾‹ã€‚ä½†å®é™…è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè¿è¡Œåˆ°ç¬¬6è¡Œä¹‹åï¼Œåˆè·³åˆ°ç¬¬10è¡Œï¼Œï¼Œå’¦ï¼Œä»€ä¹ˆé¬¼ï¼Ÿï¼Ÿä¸¤ä¸ªreturnï¼Ÿï¼Ÿå—¯ï¼Œï¼Œå½“ç„¶ä¸æ˜¯ï¼Œè‚¯å®šæ˜¯åœ¨ois.readObject()æŠ¥é”™äº†ï¼Œå†çœ‹ç¬¬8è¡Œï¼Œå¦ˆè›‹ï¼Œï¼Œæ‰“å°æŠ¥é”™ä¿¡æ¯çš„ä»£ç è¢«æ³¨é‡Šäº†ï¼OKï¼Œåæ³¨é‡Šä¹‹åå°±å‡ºç°äº†Contextä¸­çš„æŠ¥é”™ä¿¡æ¯ã€‚ åºåˆ—åŒ–æŠ¥é”™ä¿¡æ¯å¤§æ„ä¸ºï¼Œï¼Œentity.Userä¸­æœ¬åœ°ç±»æ–‡ä»¶å†²çªï¼Œæµä¸­çš„ç±»æè¿°serialVersionUIDä¸æœ¬åœ°ç›¸åº”ç±»çš„æè¿°serialVersionUIDä¸ä¸€è‡´ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œååºåˆ—åŒ–å¤±è´¥ã€‚å…³äºåºåˆ—åŒ–ï¼Œä¹‹å‰ä¸ç”šäº†è§£ï¼Œï¼Œæ­£å¥½å€Ÿæ­¤æœºä¼šå¥½å¥½äº†è§£ä¸‹~ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åºåˆ—åŒ– æŠŠçš„å†…å­˜ä¸­çš„å¯¹è±¡æŒä¹…åŒ–åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶å€™ï¼› å¥—æ¥å­—åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„æ—¶å€™ï¼› serialVersionUIDé€‚ç”¨äºJavaçš„åºåˆ—åŒ–æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼ŒJava çš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­ç±»çš„serialVersionUIDæ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼ŒJVM ä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„serialVersionUIDä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„serialVersionUIDè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ï¼Œå³æ˜¯InvalidCastExceptionã€‚ serialVersionUIDæœ‰ä¸¤ç§æ˜¾ç¤ºçš„ç”Ÿæˆæ–¹å¼ï¼š é»˜è®¤çš„1Lï¼Œæ¯”å¦‚ï¼šprivate static final long serialVersionUID = 1L; æ ¹æ®ç±»åã€æ¥å£åã€æˆå‘˜æ–¹æ³•åŠå±æ€§ç­‰æ¥ç”Ÿæˆä¸€ä¸ª64ä½çš„å“ˆå¸Œå­—æ®µï¼Œæ¯”å¦‚ï¼šprivate static final long serialVersionUID = xxxxL; å½“ä¸€ä¸ªç±»å®ç°äº†Serializableæ¥å£ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰serialVersionUIDï¼ŒEclipse ä¼šæä¾›ç›¸åº”çš„æé†’ã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Eclipse ä¸­ç‚¹å‡»ç±»ä¸­ warning å›¾æ ‡ä¸€ä¸‹ï¼ŒEclipseå°±ä¼šè‡ªåŠ¨ç»™å®šä¸¤ç§ç”Ÿæˆçš„æ–¹å¼ã€‚ å½“å®ç° java.io.Serializable æ¥å£çš„ç±»æ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªserialVersionUIDå˜é‡æ—¶å€™ï¼ŒJavaåºåˆ—åŒ–æœºåˆ¶ä¼šæ ¹æ®ç¼–è¯‘çš„ Class è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªserialVersionUIDä½œåºåˆ—åŒ–ç‰ˆæœ¬æ¯”è¾ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ Class æ–‡ä»¶(ç±»åï¼Œæ–¹æ³•æ˜ç­‰)æ²¡æœ‰å‘ç”Ÿå˜åŒ–(å¢åŠ ç©ºæ ¼ï¼Œæ¢è¡Œï¼Œå¢åŠ æ³¨é‡Šç­‰ç­‰)ï¼Œå°±ç®—å†ç¼–è¯‘å¤šæ¬¡ï¼ŒserialVersionUIDä¹Ÿä¸ä¼šå˜åŒ–çš„ã€‚ æ‰€ä»¥ï¼Œåœ¨é¡¹ç›®ä¸­ User ç±»ä¸­å¹¶æ²¡æœ‰æ˜¾å¼çš„å®šä¹‰serialVersionUIDã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘ç²¾ç®€ä»£ç åï¼ŒserialVersionUIDå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´ååºåˆ—åŒ–å¤±è´¥ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œï¼Œæ˜¾å¼å£°æ˜ä¸æµä¸­ç›¸åŒçš„serialVersionUIDå³å¯ã€‚1private static final long serialVersionUID = 8550471390860600205L; é™æ€å˜é‡åºåˆ—åŒ–ä¸‹é¢ä»£ç ä¸­Testå®ä½“ç±»å®ç°äº†Serializableæ¥å£ï¼Œå¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªé™æ€å˜é‡staticVarã€‚å°†å¯¹è±¡åºåˆ—åŒ–åï¼Œä¿®æ”¹é™æ€å˜é‡çš„æ•°å€¼ï¼Œå†å°†åºåˆ—åŒ–å¯¹è±¡è¯»å–å‡ºæ¥ï¼Œç„¶åé€šè¿‡è¯»å–å‡ºæ¥çš„å¯¹è±¡è·å¾—é™æ€å˜é‡çš„æ•°å€¼å¹¶æ‰“å°å‡ºæ¥é‚£ä¹ˆç»“æœæ˜¯ 10 è¿˜æ˜¯ 5 å‘¢ï¼Ÿ123456789101112131415161718192021222324252627public class Test implements Serializable &#123; private static final long serialVersionUID = 1L; public static int staticVar = 5; public static void main(String[] args) &#123; try &#123; //åˆå§‹æ—¶staticVarä¸º5 ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("result.obj")); out.writeObject(new Test()); out.close(); //åºåˆ—åŒ–åä¿®æ”¹ä¸º10 Test.staticVar = 10; ObjectInputStream oin = new ObjectInputStream(new FileInputStream("result.obj")); Test t = (Test) oin.readObject(); oin.close(); //å†è¯»å–ï¼Œé€šè¿‡t.staticVaræ‰“å°æ–°çš„å€¼ System.out.println(t.staticVar); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125; æœ€åçš„è¾“å‡ºæ˜¯ 10ï¼Œå¯¹äºæ— æ³•ç†è§£çš„è¯»è€…è®¤ä¸ºï¼Œæ‰“å°çš„ staticVar æ˜¯ä»è¯»å–çš„å¯¹è±¡é‡Œè·å¾—çš„ï¼Œåº”è¯¥æ˜¯ä¿å­˜æ—¶çš„çŠ¶æ€æ‰å¯¹ã€‚ä¹‹æ‰€ä»¥æ‰“å° 10 çš„åŸå› åœ¨äºåºåˆ—åŒ–æ—¶ï¼Œå¹¶ä¸ä¿å­˜é™æ€å˜é‡ï¼Œè¿™å…¶å®æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œåºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œé™æ€å˜é‡å±äºç±»çš„çŠ¶æ€ï¼Œå› æ­¤åºåˆ—åŒ–å¹¶ä¸ä¿å­˜é™æ€å˜é‡ã€‚ ä½†æ˜¯ï¼ŒserialVersionUIDä¹Ÿæ˜¯staticçš„ï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆè¢«ä¿å­˜çš„å‘¢ï¼Ÿåœ¨jdk_7ä¸­ï¼Œï¼Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192java.io.ObjectOutputStream/** * Writes class descriptor representing a standard (i.e., not a dynamic * proxy) class to stream. */private void writeNonProxyDesc(ObjectStreamClass desc, boolean unshared) throws IOException&#123; bout.writeByte(TC_CLASSDESC); handles.assign(unshared ? null : desc); if (protocol == PROTOCOL_VERSION_1) &#123; // do not invoke class descriptor write hook with old protocol desc.writeNonProxy(this); &#125; else &#123; writeClassDescriptor(desc); &#125; Class cl = desc.forClass(); bout.setBlockDataMode(true); if (cl != null &amp;&amp; isCustomSubclass()) &#123; ReflectUtil.checkPackageAccess(cl); &#125; annotateClass(cl); bout.setBlockDataMode(false); bout.writeByte(TC_ENDBLOCKDATA); writeClassDesc(desc.getSuperDesc(), false);&#125;/*å°†æŒ‡å®šçš„ç±»æè¿°ç¬¦å†™å…¥ ObjectOutputStreamã€‚ç±»æè¿°ç¬¦ç”¨äºæ ‡è¯†å†™å…¥æµä¸­çš„å¯¹è±¡çš„ç±»ã€‚ObjectOutputStream çš„å­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•ï¼Œä»è€Œå®šåˆ¶å°†ç±»æè¿°ç¬¦å†™å…¥åºåˆ—åŒ–æµä¸­çš„æ–¹å¼ã€‚ç„¶åï¼Œåº”è¯¥é‡å†™ ObjectInputStream ä¸­çš„ç›¸åº”æ–¹æ³•ï¼ˆ readClassDescriptorï¼‰ï¼Œä»¥ä¾¿æ ¹æ®å…¶å®šåˆ¶çš„æµè¡¨ç¤ºå½¢å¼æ¥é‡æ„ç±»æè¿°ç¬¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•æ ¹æ® Object Serialization è§„èŒƒä¸­å®šä¹‰çš„æ ¼å¼å†™å…¥ç±»æè¿°ç¬¦ã€‚*//*æ³¨æ„ï¼Œä»…å½“ ObjectOutputStream æ²¡æœ‰ä½¿ç”¨æ—§çš„åºåˆ—åŒ–æµæ ¼å¼ï¼ˆé€šè¿‡è°ƒç”¨ ObjectOutputStream çš„ useProtocolVersion æ–¹æ³•è®¾ç½®ï¼‰æ—¶æ‰è°ƒç”¨æ­¤æ–¹æ³•ã€‚å¦‚æœæ­¤åºåˆ—åŒ–æµåœ¨ä½¿ç”¨æ—§çš„æ ¼å¼ï¼ˆå³ PROTOCOL_VERSION_1ï¼‰ï¼Œåˆ™ä»¥ä¸å¯é‡å†™æˆ–è‡ªå®šä¹‰çš„æ–¹å¼åœ¨å†…éƒ¨å†™å…¥ç±»æè¿°ç¬¦ã€‚*/java.io.ObjectStreamClass/** * Writes non-proxy class descriptor information to given output stream. */void writeNonProxy(ObjectOutputStream out) throws IOException &#123; out.writeUTF(name); out.writeLong(getSerialVersionUID());//å†™å…¥è·å–çš„serialVersionUID byte flags = 0; if (externalizable) &#123; flags |= ObjectStreamConstants.SC_EXTERNALIZABLE; int protocol = out.getProtocolVersion(); if (protocol != ObjectStreamConstants.PROTOCOL_VERSION_1) &#123; flags |= ObjectStreamConstants.SC_BLOCK_DATA; &#125; &#125; else if (serializable) &#123; flags |= ObjectStreamConstants.SC_SERIALIZABLE; &#125; if (hasWriteObjectData) &#123; flags |= ObjectStreamConstants.SC_WRITE_METHOD; &#125; if (isEnum) &#123; flags |= ObjectStreamConstants.SC_ENUM; &#125; out.writeByte(flags); out.writeShort(fields.length); for (int i = 0; i &lt; fields.length; i++) &#123; ObjectStreamField f = fields[i]; out.writeByte(f.getTypeCode()); out.writeUTF(f.getName()); if (!f.isPrimitive()) &#123; out.writeTypeString(f.getTypeString()); &#125; &#125;&#125;java.io.ObjectStreamClass/** * Return the serialVersionUID for this class. The serialVersionUID * defines a set of classes all with the same name that have evolved from a * common root class and agree to be serialized and deserialized using a * common format. NonSerializable classes have a serialVersionUID of 0L. * * @return the SUID of the class described by this descriptor * å›æ­¤ç±»çš„ serialVersionUIDã€‚serialVersionUID å®šä¹‰äº†ä¸€ç»„å…·æœ‰ç›¸åŒåç§°çš„ç±»ï¼Œå®ƒä»¬çš„åç§°éƒ½æ˜¯ä»å…¬å…±æ ¹ç±»æ¼”åŒ–è€Œæ¥çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨å…¬å…±æ ¼å¼è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚NonSerializable ç±»çš„ serialVersionUID ä¸º 0Lã€‚ */public long getSerialVersionUID() &#123; // REMIND: synchronize instead of relying on volatile? if (suid == null) &#123; suid = AccessController.doPrivileged( new PrivilegedAction&lt;Long&gt;() &#123; public Long run() &#123; return computeDefaultSUID(cl); &#125; &#125; ); &#125; return suid.longValue();&#125; é™¤æ­¤ä¹‹å¤–ï¼Œï¼Œtransientå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¹Ÿä¸ä¼šè¢«åºåˆ—åŒ–ã€‚ çˆ¶ç±»çš„åºåˆ—åŒ–contextï¼šä¸€ä¸ªå­ç±»å®ç°äº†Serializableæ¥å£ï¼Œå®ƒçš„çˆ¶ç±»éƒ½æ²¡æœ‰å®ç°Serializableæ¥å£ï¼Œåºåˆ—åŒ–è¯¥å­ç±»å¯¹è±¡ï¼Œç„¶åååºåˆ—åŒ–åè¾“å‡ºçˆ¶ç±»å®šä¹‰çš„æŸå˜é‡çš„æ•°å€¼ï¼Œè¯¥å˜é‡æ•°å€¼ä¸åºåˆ—åŒ–æ—¶çš„æ•°å€¼ä¸åŒã€‚ è§£å†³ï¼šè¦æƒ³å°†çˆ¶ç±»å¯¹è±¡ä¹Ÿåºåˆ—åŒ–ï¼Œå°±éœ€è¦è®©çˆ¶ç±»ä¹Ÿå®ç°Serializableæ¥å£ã€‚å¦‚æœçˆ¶ç±»ä¸å®ç°çš„è¯çš„ï¼Œå°±éœ€è¦æœ‰é»˜è®¤çš„æ— å‚çš„æ„é€ å‡½æ•°ã€‚åœ¨çˆ¶ç±»æ²¡æœ‰å®ç°Serializableæ¥å£æ—¶ï¼Œè™šæ‹Ÿæœºæ˜¯ä¸ä¼šåºåˆ—åŒ–çˆ¶å¯¹è±¡çš„ï¼Œè€Œä¸€ä¸ª Java å¯¹è±¡çš„æ„é€ å¿…é¡»å…ˆæœ‰çˆ¶å¯¹è±¡ï¼Œæ‰æœ‰å­å¯¹è±¡ï¼Œååºåˆ—åŒ–ä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€ä»¥ååºåˆ—åŒ–æ—¶ï¼Œä¸ºäº†æ„é€ çˆ¶å¯¹è±¡ï¼Œåªèƒ½è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°ä½œä¸ºé»˜è®¤çš„çˆ¶å¯¹è±¡ã€‚å› æ­¤å½“æˆ‘ä»¬å–çˆ¶å¯¹è±¡çš„å˜é‡å€¼æ—¶ï¼Œå®ƒçš„å€¼æ˜¯è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°åçš„å€¼ã€‚å¦‚æœä½ è€ƒè™‘åˆ°è¿™ç§åºåˆ—åŒ–çš„æƒ…å†µï¼Œåœ¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°ä¸­å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™çš„è¯ï¼Œçˆ¶ç±»å˜é‡å€¼éƒ½æ˜¯é»˜è®¤å£°æ˜çš„å€¼ï¼Œå¦‚ int å‹çš„é»˜è®¤æ˜¯ 0ï¼Œstring å‹çš„é»˜è®¤æ˜¯ nullã€‚ å¦å¤–ï¼Œï¼Œå¦‚æœçˆ¶ç±»å·²ç»å®ç°Serializableæ¥å£ï¼Œå…¶å­ç±»å°±æ— éœ€å†æ˜¾å¼çš„å®ç°Serializableæ¥å£äº†ã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://www.cnblogs.com/duanxz/p/3511695.html - å­¦æ— æ­¢å¢ƒ]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>åºåˆ—åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é«˜å¢™ä¸é¸¡è›‹]]></title>
    <url>%2F2018%2F01%2F13%2FHigh_walls_and_eggs%2F</url>
    <content type="text"><![CDATA[é«˜å¢™ä¸é¸¡è›‹ è½¬è½½è‡ª http://blog.sina.com.cn/s/blog_48f36ce00100e3qd.html - by æ—å°‘åçš„åšå®¢ [æŒ‰ï¼šæ­¤æ–‡æ˜¯ä¾æ®æ‘ä¸Šæ˜¥æ ‘åœ¨æ—¥æœ¬ã€Šæ–‡è‰ºæ˜¥ç§‹ã€‹æ‚å¿—ï¼ˆå››æœˆå·ï¼‰å‘è¡¨çš„æ—¥è¯­åŸæ–‡ç¿»è¯‘çš„] æˆ‘ä½œä¸ºä¸€ä¸ªå°è¯´å®¶ï¼Œæ¢å¥è¯è¯´ï¼Œä½œä¸ºä»¥å·§å¦™è¯´è°ä¸ºèŒä¸šçš„äººæ¥åˆ°è¿™é‡Œã€æ¥åˆ°è€¶è·¯æ’’å†·å¸‚ã€‚ å½“ç„¶ï¼Œè¯´è°çš„ä¸éƒ½æ˜¯å°è¯´å®¶ã€‚è¯¸ä½çŸ¥é“ï¼Œæ”¿æ²»å®¶å±¡å±¡è¯´è°ï¼Œå¤–äº¤å®˜å’Œå†›äººè¯´è°ï¼ŒäºŒæ‰‹è½¦æ¨é”€å‘˜å’Œè‚‰é“ºå’Œå»ºç­‘ä¸šè€…ä¹Ÿè¯´è°ã€‚ä½†å°è¯´å®¶è¯´è°å’Œä»–ä»¬è¯´è°çš„ä¸åŒä¹‹å¤„åœ¨äºï¼šå°è¯´å®¶è¯´è°ä¸å—é“ä¹‰ä¸Šçš„è°´è´£ã€‚è«å¦‚è¯´è°è¯´å¾—è¶Šå¤§è¶Šé«˜æ˜ï¼Œå°è¯´å®¶è¶Šèƒ½å¾—åˆ°äººä»¬çš„èµèµå’Œå¥½è¯„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è¿™æ˜¯å› ä¸ºï¼Œå°è¯´å®¶èƒ½å¤Ÿé€šè¿‡å·§å¦™è¯´è°ã€é€šè¿‡æ ©æ ©å¦‚ç”Ÿçš„è™šæ„è€Œå°†çœŸç›¸æ‹½åˆ°å¦ä¸€åœºæ‰€æŠ•ä»¥å¦ä¸€å…‰ç…§ã€‚ä»¥å…¶å›ºæœ‰çš„å½¢å¼æ•æ‰çœŸç›¸å¹¶äºˆä»¥å‡†ç¡®æè¿°åœ¨è®¸å¤šæƒ…å†µä¸‹æ˜¯ä¸å¯èƒ½çš„ã€‚æƒŸå…¶å¦‚æ­¤ï¼Œæˆ‘ä»¬æ‰è¦æŠŠçœŸç›¸å¼•è¯±å‡ºæ¥ç§»å»è™šæ„åœ°å¸¦ï¼Œé€šè¿‡å°†å…¶ç½®æ¢ä¸ºè™šæ„å½¢å¼æ¥æŠ“ä½çœŸç›¸çš„å°¾å·´ã€‚ä½†ä¸ºæ­¤å¿…é¡»é¦–å…ˆåœ¨è‡ªå·±å¿ƒåº•æ˜ç¡®çœŸç›¸çš„æ‰€åœ¨ï¼Œè¿™æ˜¯å·§å¦™è¯´è°æ‰€éœ€è¦çš„é‡è¦èµ„æ ¼ã€‚ å¯æ˜¯ä»Šå¤©æˆ‘ä¸å‡†å¤‡è¯´è°ï¼Œæ‰“ç®—å°½å¯èƒ½è¯´å®è¯ã€‚ä¸€å¹´ä¹‹ä¸­æˆ‘ä¹Ÿæœ‰å‡ å¤©ä¸è¯´è°ï¼Œä»Šå¤©æ°å¥½æ˜¯å…¶ä¸­çš„ä¸€å¤©ã€‚ å®è¯å®è¯´å¥½äº†ã€‚å…³äºæ­¤æ¬¡æ¥ä»¥è‰²åˆ—æ¥å—è€¶è·¯æ’’å†·æ–‡å­¦å¥–ï¼Œä¸å°‘äººåŠæˆ‘æœ€å¥½æ‹’ç»ã€‚ç”šè‡³è­¦å‘Šè¯´å¦‚æœå‰æ¥ï¼Œå°†å¼€å±•ä¸ä¹°æˆ‘çš„ä¹¦çš„è¿åŠ¨ã€‚æ— é¡»è¯´ï¼Œç†ç”±åœ¨äºåŠ æ²™åœ°åŒºçš„æ¿€æˆ˜ã€‚è¿„ä»Šä¸ºæ­¢ï¼Œå·²ä¸æ­¢ä¸€åƒäººåœ¨è¢«å°é”çš„åŸåŒºä¸§ç”Ÿï¼Œæ®è”åˆå›½æŠ¥å‘Šï¼Œå¤§å¤šæ•°æ˜¯å„¿ç«¥ã€è€äººç­‰æ‰‹æ— å¯¸é“çš„å¹³æ°‘ã€‚ æ¥åˆ°è·å¥–é€šçŸ¥ä»¥æ¥ï¼Œæˆ‘æœ¬äººä¹Ÿä¸€å†è‡ªé—®ï¼šè¿™ç§æ—¶å€™æ¥ä»¥è‰²åˆ—æ¥å—æ–‡å­¦å¥–æœçœŸæ˜¯å¦¥å½“çš„è¡Œä¸ºå—ï¼Ÿä¸ä¼šç»™äººä»¥æ”¯æŒä½œä¸ºçº·äº‰å½“äº‹è€…ä¸€æ–¹ã€æ‹¥æœ‰å ç»å¯¹ä¼˜åŠ¿çš„å†›äº‹åŠ›é‡å¹¶ç§¯æè¡Œä½¿çš„å›½å®¶åŠå…¶æ–¹é’ˆçš„å°è±¡å—ï¼Ÿé‚£å½“ç„¶ä¸æ˜¯æˆ‘æ‰€å¸Œæœ›çš„ã€‚æˆ‘ä¸è®¤å¯ä»»ä½•æˆ˜äº‰ï¼Œä¸æ”¯æŒä»»ä½•å›½å®¶ã€‚åŒæ—¶ï¼Œè‡ªä¸å¾…è¨€ï¼Œæˆ‘çš„ä¹¦åœ¨ä¹¦åº—è¢«äººæ‹’ä¹°ä¹Ÿä¸æ˜¯æˆ‘æ‰€å¸Œæ±‚çš„ã€‚ ç„¶è€Œï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œæˆ‘é‡æ–°åšå®šäº†æ¥è¿™é‡Œçš„å†³å¿ƒã€‚åŸå› ä¹‹ä¸€ï¼Œå°±åœ¨äºæœ‰é‚£ä¹ˆå¤šäººåŠæˆ‘æœ€å¥½åˆ«æ¥ã€‚æˆ–è®¸æˆ‘æœ‰ä¸€ç§å¤§éƒ¨åˆ†å°è¯´å®¶éƒ½æœ‰çš„â€œçŠŸè„¾æ°”â€â€”â€”åˆ«äººå«æˆ‘â€œåˆ«å»é‚£é‡Œâ€ã€â€œåˆ«å¹²é‚£ä¸ªâ€ã€å°¤å…¶é‚£æ ·è­¦å‘Šæˆ‘çš„æ—¶å€™ï¼Œæˆ‘å°±ååæƒ³å»æˆ–æƒ³å¹²ï¼Œæ­¤ä¹ƒå°è¯´å®¶çš„natureï¼ˆå¤©æ€§ï¼‰ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå°è¯´å®¶å±äºè¿™æ ·ä¸€ç§äººï¼šæ— è®ºåˆ®æ€æ ·çš„é€†é£ï¼Œä¹Ÿåªèƒ½ç›¸ä¿¡è‡ªå·±å®é™…ç›®ç¹ã€è‡ªå·±å®é™…æ‰‹æ‘¸çš„ä¸œè¥¿ã€‚ æ­£å› å¦‚æ­¤ï¼Œæˆ‘æ‰å‡ºç°åœ¨è¿™é‡Œã€‚è¾ƒä¹‹ä¸æ¥ï¼Œé€‰æ‹©äº†æ¥ï¼›è¾ƒä¹‹ä»€ä¹ˆä¹Ÿä¸çœ‹ï¼Œé€‰æ‹©äº†çœ‹ç‚¹å„¿ä»€ä¹ˆï¼›è¾ƒä¹‹ä»€ä¹ˆä¹Ÿä¸è¯´ï¼Œé€‰æ‹©äº†å‘è¯¸ä½è¯´ç‚¹å„¿ä»€ä¹ˆã€‚ æœ‰ä¸€å¥è¯ï¼ˆmessageï¼‰è¯·å…è®¸æˆ‘è¯´å‡ºæ¥ï¼Œä¸€å¥ä¸ªäººæ€§è´¨çš„è¯ã€‚è¿™å¥è¯åœ¨æˆ‘å†™å°è¯´æ—¶æ€»åœ¨æˆ‘è„‘è¢‹é‡ŒæŒ¥ä¹‹ä¸å»ã€‚å®ƒå¹¶éå†™åœ¨çº¸ä¸Šè´´åœ¨å¢™å£ï¼Œè€Œæ˜¯åˆ»äºæˆ‘çš„è„‘å£ã€‚é‚£æ˜¯è¿™æ ·ä¸€å¥è¯ï¼š å‡å¦‚è¿™é‡Œæœ‰åšå›ºçš„é«˜å¢™å’Œæ’å¢™ç ´ç¢çš„é¸¡è›‹ï¼Œæˆ‘æ€»æ˜¯ç«™åœ¨é¸¡è›‹ä¸€è¾¹ã€‚ æ˜¯çš„ï¼Œæ— è®ºé«˜å¢™å¤šä¹ˆæ­£ç¡®å’Œé¸¡è›‹å¤šä¹ˆé”™è¯¯ï¼Œæˆ‘ä¹Ÿè¿˜æ˜¯ç«™åœ¨é¸¡è›‹ä¸€è¾¹ã€‚æ­£ç¡®ä¸æ­£ç¡®æ˜¯ç”±åˆ«äººå†³å®šçš„ï¼Œæˆ–æ˜¯ç”±æ—¶é—´å’Œå†å²å†³å®šçš„ã€‚å‡å¦‚å°è¯´å®¶ç«™åœ¨é«˜å¢™ä¸€è¾¹å†™ä½œâ€”â€”ä¸ç®¡å‡ºäºä½•ç§ç†ç”±â€”â€”é‚£ä¸ªä½œå®¶åˆæœ‰å¤šå¤§ä»·å€¼å‘¢ï¼Ÿ é‚£ä¹ˆï¼Œè¿™ä¸€éšå–»åˆ°åº•æ„å‘³ä»€ä¹ˆå‘¢ï¼Ÿåœ¨æŸç§æƒ…å†µä¸‹å®ƒæ˜¯ç®€å•æ˜äº†çš„ã€‚è½°ç‚¸æœºã€å¦å…‹ã€ç«ç®­ã€ç™½ç‡å¼¹ã€æœºå…³æªæ˜¯åšç¡¬çš„é«˜å¢™ã€‚è¢«å…¶æ‘§æ¯ã€çƒ§æ¯ã€å‡»ç©¿çš„éæ­¦è£…å¹³æ°‘æ˜¯é¸¡è›‹ã€‚è¿™æ˜¯è¿™ä¸€éšå–»çš„ä¸€ä¸ªå«ä¹‰ã€‚ ä½†ä¸ä»…ä»…æ˜¯è¿™ä¸ªï¼Œè¿˜æœ‰æ›´æ·±çš„å«ä¹‰ã€‚è¯·è¿™æ ·è®¾æƒ³å¥½äº†ï¼šæˆ‘ä»¬æ¯ä¸€ä¸ªäººéƒ½æˆ–å¤šæˆ–å°‘åˆ†åˆ«æ˜¯ä¸€ä¸ªé¸¡è›‹ï¼Œæ˜¯å…·æœ‰æ— å¯æ›¿ä»£çš„çµé­‚å’ŒåŒ…æ‹¢å®ƒçš„è„†å¼±å¤–å£³çš„é¸¡è›‹ã€‚æˆ‘æ˜¯ï¼Œä½ ä»¬ä¹Ÿæ˜¯ã€‚å†å‡å¦‚æˆ‘ä»¬æˆ–å¤šæˆ–å°‘é¢å¯¹ä¹‹äºæ¯ä¸€ä¸ªäººçš„åšç¡¬çš„é«˜å¢™ã€‚é«˜å¢™æœ‰ä¸ªåç§°ï¼Œå«ä½œä½“åˆ¶ï¼ˆSystemï¼‰ã€‚ä½“åˆ¶æœ¬åº”æ˜¯ä¿æŠ¤æˆ‘ä»¬çš„ï¼Œè€Œå®ƒæœ‰æ—¶å€™å´è‡ªè¡Œå…¶æ˜¯åœ°æ€å®³æˆ‘ä»¬å’Œè®©æˆ‘ä»¬æ€äººï¼Œå†·é…·åœ°ã€é«˜æ•ˆåœ°ã€è€Œä¸”ç³»ç»Ÿæ€§åœ°ï¼ˆSystematicllyï¼‰ã€‚ æˆ‘å†™å°è¯´çš„ç†ç”±ï¼Œå½’æ ¹ç»“åº•åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ä¸ºäº†è®©ä¸ªäººçµé­‚çš„å°Šä¸¥æµ®ç°å‡ºæ¥ï¼Œå°†å…‰çº¿æŠ•åœ¨ä¸Šé¢ã€‚ç»å¸¸æŠ•ä»¥å…‰çº¿ï¼Œæ•²å“è­¦é’Ÿï¼Œä»¥å…æˆ‘ä»¬çš„çµé­‚è¢«ä½“åˆ¶çº ç¼ å’Œè´¬æŸã€‚è¿™æ­£æ˜¯æ•…äº‹çš„èŒè´£ï¼Œå¯¹æ­¤æˆ‘æ·±ä¿¡ä¸ç–‘ã€‚ä¸æ–­è¯•å›¾é€šè¿‡å†™ç”Ÿä¸æ­»çš„æ•…äº‹ã€å†™çˆ±çš„æ•…äº‹æ¥è®©äººå“­æ³£ã€è®©äººæƒ§æ€•ã€è®©äººæ¬¢ç¬‘ï¼Œä»¥æ­¤è¯æ˜æ¯ä¸ªçµé­‚çš„æ— å¯æ›¿ä»£æ€§â€”â€”è¿™å°±æ˜¯å°è¯´å®¶çš„å·¥ä½œã€‚æˆ‘ä»¬ä¸ºæ­¤è€Œæ—¥å¤ä¸€æ—¥åœ°è®¤çœŸç¼–é€ æ•…äº‹ã€‚ æˆ‘çš„çˆ¶äº²å»å¹´å¤å¤©å»ä¸–äº†ï¼Œæ´»äº†ä¹åå²ã€‚ä»–æ˜¯ä¸ªé€€ä¼‘æ•™å¸ˆï¼Œä¹Ÿæ˜¯ä¸ªå…¼èŒä½›æ•™åƒ§ä¾£ã€‚åœ¨ç ”ç©¶ç”Ÿé™¢å°±è¯»æœŸé—´è¢«å¾å¬å…¥ä¼ï¼Œå‚åŠ äº†ä¸­å›½å¤§é™†çš„æˆ˜æ–—ã€‚æˆ‘å°çš„æ—¶å€™ï¼Œä»–æ¯å¤©æ—©ä¸Šéƒ½åœ¨é¥­å‰å‘ä½›å›çŒ®ä¸Šé•¿é•¿çš„æ·±æ·±çš„ç¥ˆç¥·ã€‚ä¸€æ¬¡æˆ‘é—®çˆ¶äº²ä¸ºä»€ä¹ˆç¥ˆç¥·ï¼Œä»–å›ç­”ä¸ºäº†åœ¨æˆ˜åœºæ­»å»çš„äººï¼Œä¸ºäº†åœ¨é‚£é‡Œâ€”â€”æ— è®ºå‹æ–¹æ•Œæ–¹â€”â€”å¤±å»æ€§å‘½çš„äººã€‚æ¯æ¬¡çœ‹è§çˆ¶äº²ç¥ˆç¥·çš„èº«å§¿ï¼Œæˆ‘éƒ½è§‰å¾—é‚£é‡Œä¼¼ä¹æ¼‚æµ®ç€æ­»äº¡çš„é˜´å½±ã€‚ çˆ¶äº²å»ä¸–äº†ï¼Œå…¶è®°å¿†â€”â€”è¿˜æ²¡ç­‰æˆ‘ææ¸…æ˜¯æ€æ ·çš„è®°å¿†â€”â€”ä¹Ÿå½»åº•æ¶ˆå¤±äº†ã€‚ä½†æ˜¯ï¼Œé‚£é‡Œæ¼‚æµ®çš„æ­»äº¡æ°”æ¯ä»ç•™åœ¨æˆ‘çš„è®°å¿†ä¸­ã€‚é‚£æ˜¯æˆ‘ä»çˆ¶äº²èº«ä¸Šç»§æ‰¿çš„å°‘æ•°ç„¶è€Œå®è´µçš„äº‹é¡¹ä¹‹ä¸€ã€‚ æˆ‘åœ¨è¿™é‡Œæƒ³å‘è¯¸ä½ä¼ è¾¾çš„åªæœ‰ä¸€ç‚¹ï¼šæˆ‘ä»¬éƒ½æ˜¯è¶…è¶Šå›½ç±ã€ç§æ—å’Œå®—æ•™çš„ä¸€ä¸ªä¸€ä¸ªçš„äººï¼Œéƒ½æ˜¯é¢å¯¹ä½“åˆ¶è¿™å µé«˜å¢™çš„ä¸€ä¸ªä¸€ä¸ªçš„è›‹ã€‚çœ‹ä¸Šå»æˆ‘ä»¬æ¯«æ— è·èƒœçš„å¸Œæœ›ã€‚å¢™æ˜¯é‚£ä¹ˆé«˜é‚£ä¹ˆç¡¬ï¼Œé‚£ä¹ˆå†°å†·ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ç±»ä¼¼è·èƒœå¸Œæœ›é‚£æ ·çš„ä¸œè¥¿ï¼Œé‚£åªèƒ½æ¥è‡ªæˆ‘ä»¬ç›¸ä¿¡è‡ªå·±å’Œä»–äººçš„çµé­‚çš„æ— å¯æ›¿ä»£æ€§å¹¶å°†å…¶æ¸©ç…¦èšæ‹¢åœ¨ä¸€èµ·ã€‚ è¯·è¿™æ ·æƒ³æƒ³çœ‹ã€‚æˆ‘ä»¬æ¯ä¸€ä¸ªäººéƒ½æœ‰å¯ä»¥æ‹¿åœ¨æ‰‹ä¸­çš„æ´»çš„çµé­‚ï¼Œä½“åˆ¶åˆ™æ²¡æœ‰ã€‚ä¸èƒ½è®©ä½“åˆ¶åˆ©ç”¨æˆ‘ä»¬ï¼Œä¸èƒ½è®©ä½“åˆ¶è‡ªè¡Œå…¶æ˜¯ã€‚ä¸æ˜¯ä½“åˆ¶åˆ›é€ äº†æˆ‘ä»¬ï¼Œè€Œæ˜¯æˆ‘ä»¬åˆ›é€ äº†ä½“åˆ¶ã€‚ æˆ‘æƒ³å¯¹è¯¸ä½è¯´çš„ä»…æ­¤ä¸€ç‚¹ã€‚ è£è·è€¶è·¯æ’’å†·å¥–ï¼Œæˆ‘å¾ˆæ„Ÿè°¢ã€‚æ„Ÿè°¢ä¸–ç•Œå¾ˆå¤šåœ°æ–¹éƒ½æœ‰çœ‹æˆ‘ä¹¦çš„äººã€‚æˆ‘è¦å‘è€¶è·¯æ’’å†·çš„æ¯ä¸€ä½è¯»è€…è‡´ä»¥è°¢æ„ã€‚æ¯•ç«Ÿæ˜¯å› äº†ä½ ä»¬çš„åŠ›é‡æˆ‘æ‰å‡ºç°åœ¨è¿™é‡Œçš„ã€‚ä½†æ„¿æˆ‘ä»¬èƒ½å¤Ÿå…±åŒæ‹¥æœ‰ä»€ä¹ˆâ€”â€”éå¸¸æœ‰æ„ä¹‰çš„ä»€ä¹ˆã€‚æˆ‘å¾ˆé«˜å…´å¾—ä»¥æ¥æ­¤å‘è¯¸ä½è®²è¯ã€‚ è‹±è¯­å¯¹ç…§ï¼š è½¬è½½è‡ª http://blog.sina.com.cn/s/blog_65da5f5b0101doa2.html - by èƒŒåŒ…èµ°å¤©æ¶¯çš„åšå®¢ Good evening. I have come to Jerusalem today as a novelist, which is to say as a professional spinner of lies. Of course, novelists are not the only ones who tell lies. Politicians do it, too, as we all know. Diplomats and generals tell their own kinds of lies on occasion, as do used car salesmen, butchers and builders. The lies of novelists differ from others, however, in that no one criticizes the novelist as immoral for telling lies. Indeed, the bigger and better his lies and the more ingeniously he creates them, the more he is likely to be praised by the public and the critics. Why should that be? My answer would be this: namely, that by telling skilful liesâ€“which is to say, by making up fictions that appear to be trueâ€“the novelist can bring a truth out to a new place and shine a new light on it. In most cases, it is virtually impossible to grasp a truth in its original form and depict it accurately. This is why we try to grab its tail by luring the truth from its hiding place, transferring it to a fictional location, and replacing it with a fictional form. In order to accomplish this, however, we first have to clarify where the truth-lies within us, within ourselves. This is an important qualification for making up good lies. Today, however, I have no intention of lying. I will try to be as honest as I can. There are only a few days in the year when I do not engage in telling lies, and today happens to be one of them. So let me tell you the truth. In Japan a fair number of people advised me not to come here to accept the Jerusalem Prize. Some even warned me they would instigate a boycott of my books if I came. The reason for this, of course, was the fierce fighting that was raging in Gaza. The U.N. reported that more than a thousand people had lost their lives in the blockaded city of Gaza, many of them unarmed citizensâ€“children and old people. Any number of times after receiving notice of the award, I asked myself whether traveling to Israel at a time like this and accepting a literary prize was the proper thing to do, whether this would create the impression that I supported one side in the conflict, that I endorsed the policies of a nation that chose to unleash its overwhelming military power. Neither, of course, do I wish to see my books subjected to a boycott. Finally, however, after careful consideration, I made up my mind to come here. One reason for my decision was that all too many people advised me not to do it. Perhaps, like many other novelists, I tend to do the exact opposite of what I am told. If people are telling meâ€“ and especially if they are warning meâ€“ â€œDonâ€™t go there,â€ â€œDonâ€™t do that,â€ I tend to want to â€œgo thereâ€ and â€œdo thatâ€ã€‚ Itâ€™s in my nature, you might say, as a novelist. Novelists are a special breed. They cannot genuinely trust anything they have not seen with their own eyes or touched with their own hands. And that is why I am here. I chose to come here rather than stay away. I chose to see for myself rather than not to see. I chose to speak to you rather than to say nothing. Please do allow me to deliver a message, one very personal message. It is something that I always keep in mind while I am writing fiction. I have never gone so far as to write it on a piece of paper and paste it to the wall: rather, it is carved into the wall of my mind, and it goes something like this: â€œBetween a high, solid wall and an egg that breaks against it, I will always stand on the side of the egg.â€ Yes, no matter how right the wall may be and how wrong the egg, I will stand with the egg. Someone else will have to decide what is right and what is wrong; perhaps time or history will do it. But if there were a novelist who, for whatever reason, wrote works standing with the wall, of what value would such works be? What is the meaning of this metaphor? In some cases, it is all too simple and clear. Bombers and tanks and rockets and white phosphorus shells are that high wall. The eggs are the unarmed civilians who are crushed and burned and shot by them. This is one meaning of the metaphor. But this is not all. It carries a deeper meaning. Think of it this way. Each of us is, more or less, an egg. Each of us is a unique, irreplaceable soul enclosed in a fragile shell. This is true of me, and it is true of each of you. And each of us, to a greater or lesser degree, is confronting a high, solid wall. The wall has a name: it is â€œThe System.â€ The System is supposed to protect us, but sometimes it takes on a life of its own, and then it begins to kill us and cause us to kill othersâ€“coldly, efficiently, systematically. I have only one reason to write novels, and that is to bring the dignity of the individual soul to the surface and shine a light upon it. The purpose of a story is to sound an alarm, to keep a light trained on the System in order to prevent it from tangling our souls in its web and demeaning them. I truly believe it is the novelistâ€™s job to keep trying to clarify the uniqueness of each individual soul by writing storiesâ€“stories of life and death, stories of love, stories that make people cry and quake with fear and shake with laughter. This is why we go on, day after day, concocting fictions with utter seriousness. My father passed away last year at the age of ninety. He was a retired teacher and a part-time Buddhist priest. When he was in graduate school in Kyoto, he was drafted into the army and sent to fight in China. As a child born after the war, I used to see him every morning before breakfast offering up long, deeply-felt prayers at the small Buddhist altar in our house. One time I asked him why he did this, and he told me he was praying for the people who had died in the battlefield. He was praying for all the people who died, he said, both ally and enemy alike. Staring at his back as he knelt at the altar, I seemed to feel the shadow of death hovering around him. My father died, and with him he took his memories, memories that I can never know. But the presence of death that lurked about him remains in my own memory. It is one of the few things I carry on from him, and one of the most important. I have only one thing I hope to convey to you today. We are all human beings, individuals transcending nationality and race and religion, and we are all fragile eggs faced with a solid wall called The System. To all appearances, we have no hope of winning. The wall is too high, too strongâ€“and too cold. If we have any hope of victory at all, it will have to come from our believing in the utter uniqueness and irreplaceability of our own and othersâ€™ souls and from our believing in the warmth we gain by joining souls together. Take a moment to think about this. Each of us possesses a tangible, living soul. The System has no such thing. We must not allow the System to exploit us. We must not allow the System to take on a life of its own. The System did not make us: we made the System. That is all I have to say to you. I am grateful to have been awarded the Jerusalem Prize. I am grateful that my books are being read by people in many parts of the world. And I would like to express my gratitude to the readers in Israel. You are the biggest reason why I am here. And I hope we are sharing something, something very meaningful. And I am glad to have had the opportunity to speak to you here today. Thank you very much.]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>æ‘ä¸Šæ˜¥æ ‘</tag>
        <tag>é«˜å¢™ä¸é¸¡è›‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºæ­»äº¡ï¼Œå…³äºå®—æ•™]]></title>
    <url>%2F2018%2F01%2F10%2FDeath_and_religion%2F</url>
    <content type="text"><![CDATA[å…³äºæ­»äº¡ï¼Œå…³äºå®—æ•™2018-01-15 17:57:44ç§‘å­¦æ˜¯å·¥å…·ç±»ï¼Œå®—æ•™æ˜¯æŠ½è±¡ç±»ï¼Ÿï¼Ÿï¼Ÿä¸¤è€…ä¸å†²çªï¼Œå“ˆå“ˆ å¾ˆæ—©å°±æƒ³å†™è¿™ä¸ªé¢˜ç›®äº†ï¼Œï¼Œå¯æ˜¯ï¼Œè¿™ä¸ªé¢˜ç›®å¥½åƒç¦»è‡ªå·±åˆå¾ˆè¿œï¼Œå¹´çºªè½»è½»è¿™ä¸ªé¢˜ç›®åˆèƒ½å†™å¤šæ·±å‘¢ï¼Ÿä½†ï¼Œï¼Œ2017å¹´ï¼ŒçœŸçš„æœ‰å¾ˆå¤šäº‹æƒ…éƒ½è·Ÿæ­»æ‰¯ä¸Šäº†å…³ç³»ï¼Œåˆç•™ä¸‹å·¨æ·±çš„å°è±¡ã€‚ä»¥è‡³äºï¼Œ2017å¹´çš„å…³é”®è¯ä¸æ˜¯ç½‘æ˜“äº‘çš„ã€ç­‰å¾…ã€ï¼Œä¹Ÿä¸æ˜¯æ”¯ä»˜å®çš„ã€æ—ºã€ï¼Œï¼Œæ­»äº¡ã€‚ Chapter â… .å®Œæ•´çš„äººç”Ÿå¤§æ¦‚æ˜¯å¹´åˆçš„æ—¶å€™å§ï¼Œè·Ÿå‘¨å©¶å„¿ã€å§œè€å¸ˆå’Œé˜¿æ¾å»é¾™æ³‰å¯ºï¼Œï¼Œä¸‹å±±çš„æ—¶å€™ä¸çŸ¥æ€ä¹ˆå°±èŠåˆ°äº†äººç”Ÿå’Œç†æƒ³ï¼Œäº¦èŠåˆ°äº†æ­»äº¡ã€‚å©¶å„¿è¯´ï¼Œï¼Œäººè¿™ä¸€è¾ˆå­æ˜¯ä¸å®Œæ•´çš„ï¼Œåªç»å†äº†æ´»ç€ï¼Œæ²¡æœ‰ç»å†æ­»äº¡ã€‚å°±åƒå®Œæ•´çš„ä¸€å¤©æœ‰ç™½å¤©å’Œé»‘å¤œï¼Œä½†æ˜¯æˆ‘ä»¬å‡ºç”Ÿä¹‹ååªç»å†äº†é»æ˜ã€ç™½å¤©å’Œå‚æ™šï¼Œï¼Œé»æ˜å’Œå‚æ™šåˆä¼¼æ˜¯æ— æ„è¯†çš„ï¼Œé‚£ä¹ˆå‚æ™šä¹‹åçš„é»‘å¤œå‘¢ï¼Ÿï¼Ÿ æ·±ä»¥ä¸ºç„¶ï¼Œï¼Œå¦‚æ­¤ï¼Œåè€Œçªç„¶å¯¹æ­»äº¡å˜å¾—å¥½å¥‡èµ·æ¥ï¼Œç”šè‡³æœ‰äº›ã€ç›¼æœ›ã€ï¼Œè¿«åˆ‡åœ°æƒ³çŸ¥é“æ­»äº¡æ˜¯æ€æ ·ä¸€å›äº‹ã€‚æŠŠã€äººç”Ÿã€å’Œã€äººæ­»ã€ä¸¤å—å›¾æ‹¼èµ·æ¥ï¼Œå²‚ä¸æ˜¯åœ†æ»¡äº†ï¼Ÿå†ä¹Ÿä¸å®³æ€•æ­»äº¡äº†ï¼Œï¼Œç™½å¤©çš„å¤ªé˜³çœ‹è…»äº†ï¼Œæ™šä¸Šçš„æ˜Ÿæ˜Ÿæœˆäº®æ˜¯è›®ä¸é”™çš„~ Chapter â…¡.Nothing at allå†åæ¥ï¼Œï¼Œå›½åº†çš„æ—¶å€™ï¼Œæƒ³æ¥ä¸€å‘¨çš„æ—¶é—´è¯¥æ€ä¹ˆåœ¨å®¶æ¶ˆç£¨ï¼Ÿäºæ˜¯å¼€å§‹åˆ·ã€æƒåˆ©çš„æ¸¸æˆã€ï¼ŒåŠ ä¸ŠèŠ‚åä»¥åå‘¨æœ«çš„æ—¶é—´ï¼Œï¼Œä¸ƒå­£å…¨åˆ·å®Œäº†ã€‚å…¶å®ï¼Œå‰äº”å­£çš„ç¡®æ˜¯ã€æƒåˆ©çš„æ¸¸æˆã€ï¼Œä¹‹åä¾¿æ˜¯ã€å†°ä¸ç«ä¹‹æ­Œã€äº†ã€‚ç»™æˆ‘ç•™ä¸‹å°è±¡ææ·±çš„ä¾¿æ˜¯ç¬¬å…­å­£ç¬¬äºŒé›†ï¼Œé›ªè¯ºè¢«çº¢è¢å¥³å¤æ´»ï¼Œé›ªè¯ºé†’åï¼Œï¼Œ æƒæ¸¸-é›ªè¯ºå¤æ´» é›ªè¯º- I shouldnâ€™t be here. #æˆ‘ä¸è¯¥åœ¨è¿™é‡Œçš„ã€‚ æ´‹è‘±éª‘å£«-The lady brought you back. #è¿™ä½å¥³å£«å¤æ´»äº†ä½ ã€‚ çº¢è¢å¥³-Afterwards, after they stabbed you, after you died, where did you go? What did you see? #åœ¨ä»–ä»¬åˆºä¼¤ä½ ä¹‹åï¼Œåœ¨ä½ æ­»ä¹‹åï¼Œä½ å»äº†å“ªé‡Œï¼Ÿä½ çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ é›ªè¯º-Nothing. There was nothing at all. #ä»€ä¹ˆéƒ½æ²¡ï¼Œæ ¹æœ¬ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ çœ‹åˆ°è¿™å„¿çš„æ—¶å€™ï¼Œæˆ‘çš„å†…å¿ƒæ˜¯å¥”æºƒçš„ï¼Œï¼Œå®•æœºçš„é‚£ç§ï¼æˆ‘æ»¡å¿ƒæœŸå¾…çš„æ­»äº¡ï¼Œå±…ç„¶ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Ÿï¼Nothing at allï¼ï¼ï¼æˆ‘æƒ³è¦çš„æ˜¯æ­»äº¡ï¼Œä¸æ˜¯æš‚åœï¼æˆ‘çš„ä¸–ç•Œçªç„¶å˜æˆç°è‰²äº†ã€‚ã€‚åªå‰©å¤±æœ› Chapter â…¢.ç›¸äº²ç›¸çˆ±Sherryæ¨èå¼ è‰¾å˜‰çš„ã€ç›¸äº²ç›¸çˆ±ã€ï¼Œï¼Œå…‰å¬åå­—ï¼Œè¿™ç”µå½±ä¸æ‹›äººå¾…è§ï¼Œæœ€å–œæ¬¢çš„è¿˜æ˜¯ç§‘å¹»ç‰‡ã€‚ã€‚ä½†æ˜¯æœ‰Sherryçš„å£ç¢‘ï¼Œæˆ‘å¯¹å¥¹çš„tasteä¹Ÿæœ‰ä¿¡å¿ƒï¼Œä¹ŸçŸ¥é“è‡ªå·±ä»¥åå–å½±æ˜¯ç‹­éš˜çš„ã€‚â€¦..æ€»æ˜¯ç›¯ç€è¿›åº¦æ¡çœ‹ï¼Œï¼Œä¸è¿‡ç˜¾ï¼Œä¸ºä»€ä¹ˆä¸æ‹å¾—å†é•¿ä¸€ç‚¹ï¼Ÿï¼ä»é˜¿è¾¾å¾å¾—é˜¿ç¥–çš„åŒæ„åï¼Œèººè¿›æ£ºæï¼Œçªç„¶å°±å“½å’½äº†ï¼Œï¼Œè¿™ç§æƒ…ç»ªæ¥å¾—å¤ªçªç„¶ï¼Œå§‹æ–™æœªåŠã€‚æˆ‘ä¹Ÿç»·ä¸ä½äº†ï¼Œï¼Œå“­å¾—åƒå‚»å“”ä¸€æ ·ã€‚ å…¶å®ï¼Œè¿™éƒ¨ç”µå½±ï¼Œæ­»äº¡ä¸æ˜¯ä¸»é¢˜ï¼Œï¼Œåªä¸è¿‡è¿™ä¸ªé•œå¤´ï¼Œé˜¿è¾¾çªå¦‚å…¶æ¥çš„å“½å’½ï¼Œshockedã€‚ Chapter â…£.ä¸€å®šæœ‰å¦ä¸€ä¸ªä¸–ç•Œ12æœˆ30å·å…ƒæ—¦æ”¾å‡ï¼Œå›è€å®¶ï¼Œï¼Œçˆ·çˆ·è¿˜æ˜¯èººåœ¨åºŠä¸Šã€‚ æˆ‘å’Œå“¥å“¥ï¼Œè¿˜æœ‰è¡¨å¼Ÿä¸€å—ï¼Œï¼Œå…¶å®ï¼Œå¤§å®¶å¿ƒé‡Œéƒ½æ˜ç™½ï¼Œçˆ·çˆ·èº«ä½“æ¯å†µæ„ˆä¸‹ï¼Œæ€•æ˜¯æ—¶é—´ä¸å¤šäº†ã€‚å§‘å§‘ä¹Ÿåœ¨è€å®¶é™ªåºŠã€‚ä¸­åˆç‚’äº†å‡ ä¸ªå®¶å¸¸èœï¼Œæˆ‘ä¸å–œæ¬¢å–é…’ï¼Œå°¤å…¶æ˜¯ç™½é…’ï¼Œï¼Œä¾¿æ²¡æœ‰å‚ä¸ã€‚ç•™è€çˆ·å­è‡ªå·±åœ¨åºŠä¸Šï¼Œï¼Œä»¥å‰éƒ½æ˜¯ä¸€å—ï¼Œçœ‹ç€ä»–ï¼Œæˆ‘ä¹Ÿå¾ˆæ— åŠ©ã€‚æˆ‘å»æ‹¿äº†ä¸ªé¹Œé¹‘è›‹ï¼Œç»™ä»–å‰¥å¼€çš®ï¼Œï¼Œå–‚ä»–åƒäº†ã€‚é€’åˆ°å˜´è¾¹å°±å¼ å¼€å˜´äº†ï¼Œè¿˜æ˜¯è®¤é£Ÿå„¿ï¼Œï¼Œè¿™ç§çŠ¶æ€ï¼Œæ¬£æ…°ã€‚ä¸è¿‡ï¼Œï¼Œä¹Ÿå¯èƒ½æ˜¯è›‹é»„çš„åŸå› ï¼Œä¹Ÿå¯èƒ½æ˜¯å—“å­æ¯”è¾ƒå¹²ï¼Œä»–æœ‰ç‚¹å’³ã€‚æˆ‘èµ¶ç´§è°ƒçš„æ¸©æ°´ï¼Œç”¨å¾ˆæµ…çš„å‹ºå­å–‚ä»–ï¼Œï¼Œåˆä¸æ•¢ç›´æ¥å–‚åœ¨å˜´é‡Œï¼Œä¾¿ç”¨å‹ºå­è´´ç€ä¸‹å˜´å”‡ï¼Œä»¥ç‰™é½¿å¼•æµã€‚å–‚äº†å‡ å‹ºï¼Œï¼Œæˆ‘è§‰å¾—åº”è¯¥å¯ä»¥æŠŠè›‹é»„å†²ä¸‹å»äº†ã€‚ä½†è¿˜å’³ï¼Œï¼Œå’³å¾—çš„æ¬¡æ•°å¤šäº†ï¼Œå¤§æ¦‚æ˜ç™½äº†ï¼Œå‘¼å¸è‚Œæ— åŠ›ï¼Œå·²ç»æ²¡åŠ›æ°”å’³å—½äº†ã€‚ã€‚å¼€å§‹ç”¨åŠ›å‘¼å¸ï¼Œå£°éŸ³å¾ˆå¤§ï¼Œéš”å£æˆ¿é—´éƒ½å¯ä»¥å¬åˆ°ã€‚å¬å§‘å§‘è¯´äº†ï¼Œè¿™æ‰çŸ¥é“è€çˆ·å­ä»æ˜¨æ™šå¼€å§‹å°±ä¸æ€ä¹ˆåƒä¸œè¥¿äº†ï¼Œæ—©ä¸Šè¿˜åäº†ï¼Œï¼Œé¡¿æ—¶æˆ‘æ„Ÿè§‰è‡ªå·±é—¯ç¥¸äº†ã€‚è¿™æ—¶å€™ï¼Œè€çˆ·å­å‘¼å¸å¼€å§‹ç¼“ä¸‹æ¥äº†ï¼Œå¹³é™äº†å¾ˆå¤šï¼Œï¼Œå°±æ˜¯æ€»æ‰¯è¢«å­ã€‚æˆ‘æœ‰ç‚¹æ— æªï¼Œé—®å§‘å§‘ï¼Œï¼Œçˆ·çˆ·å·²ç»ä¸èƒ½è¯´è¯äº†ï¼Œï¼Œå§‘å§‘ä¹Ÿä¸çŸ¥é“è¯¥æ€ä¹ˆåŠäº†ï¼Œæ€å¼€è¢«å­ï¼Œæ‘¸æ‘¸çˆ·çˆ·èº«ä¸Šï¼Œï¼Œé™¤äº†å¾ˆå¤šæ±—ï¼Œä½†æ˜¯ä¸è‡³äºçƒ­æˆè¿™æ ·è¿™æ ·å•Šã€‚æˆ‘æ‘¸æ‘¸çˆ·çˆ·çš„é¢å¤´ï¼Œæ²¡æœ‰å‘çƒ§ã€‚å…¶å®ï¼Œçˆ·çˆ·çœ‹ä¸Šå»ï¼Œæ°”è‰²è¿˜æ˜¯ä¸é”™çš„ï¼Œå°±æ˜¯ç˜¦äº†ç‚¹ï¼Œå¤ªç˜¦äº†ã€‚ä¹‹å‰å¸®å§‘å§‘ç»™çˆ·çˆ·æ¢å°¿å¸ƒçš„æ—¶å€™ï¼Œæˆ‘æ— æ³•æè¿°æˆ‘çœ‹åˆ°äº†æ€æ ·ä¸€å‰¯èº¯ä½“ï¼Œï¼Œæ¢å¥½ä¹‹åï¼ŒèƒŒè¿‡å»ï¼Œç”¨åŠ›æ†‹ç€ï¼Œå°½é‡ä¸å“­å‡ºå£°éŸ³ã€‚ åƒè¿‡åˆé¥­åï¼Œï¼Œæˆ‘å›è¶Ÿå®¶ï¼Œæƒ³ç€å‡†å¤‡äº›å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘èµ„æ–™ï¼Œç„¶åå›çˆ·çˆ·è¿™è¾¹ï¼Œå®ˆç€ä»–ï¼Œæ— èŠçš„æ—¶å€™æ‰“å‘ä¸‹æ—¶é—´ã€‚æˆ‘ä»¥ä¸ºè¿™æ¬¡ä¼šåƒå¾€å¸¸ä¸€æ ·ï¼Œï¼Œä¸ä¼šæœ‰äº‹çš„ã€‚/**ä»¥ä¸‹å†…å®¹ï¼Œå¯èƒ½æ¶‰åŠæè¿°äººçš„ä¸´ç»ˆçŠ¶æ€ï¼Œï¼Œæ…è¯»é¢„è­¦**/ å†å›çˆ·çˆ·è¿™è¾¹çš„æ—¶å€™ï¼Œï¼Œå¥¶å¥¶ã€å§‘å§‘ã€å”å”éƒ½åœ¨æˆ¿é—´é‡Œï¼Œéƒ½åœ¨ç´§å¼ çš„ç›¯ç€çˆ·çˆ·ã€‚ç›¯ç€ï¼Œè®©äººæ„Ÿè§‰ä¸èˆ’æœçš„ç›¯ç€ï¼Œä½†æ­¤æ—¶é™¤äº†ç›¯ç€ï¼Œå¥½åƒå…¶ä½™ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚çˆ·çˆ·çš„å‘¼å¸å¾ˆæœ‰èŠ‚å¥ï¼Œï¼Œä½†æ˜¯åœ¨ç”¨å˜´å·´å‘¼å¸ï¼Œå¼ ç€å˜´ï¼Œçœ¼ç›åŠçåŠé—­ã€‚ä¸çŸ¥é“æ˜¯æƒ³çç€ï¼Œè¿˜æ˜¯æƒ³é—­ç€ã€‚ä»–çš„æ¯ä¸€æ¬¡å‘¼å¸ï¼Œéƒ½æ˜¯å‘¼æ°”é•¿ï¼Œå¸æ°”çŸ­ï¼Œï¼Œå‘¼æ°”å’Œå¸æ°”ä¹‹é—´è¿˜ä¼šæœ‰å¾ˆçŸ­çš„åœé¡¿ã€‚è¿™ä¸ªåœé¡¿ç€å®è®©äººæªå¿ƒï¼Œï¼Œæˆ‘ä¹Ÿå¼€å§‹ç›¯ç€ã€‚å©¶å©¶å¼€å§‹ç»™ä¸¤ä¸ªå ‚å¼Ÿæ‰“ç”µè¯ï¼Œè®©ä»–ä»¬å›å®¶ï¼Œï¼Œå¦ˆå¦ˆä¹Ÿæ‰“äº†ç”µè¯è®©çˆ¸çˆ¸å›æ¥ã€‚ä¸‰çˆ·å®¶çš„å§‘å§‘ä¹Ÿæ¥äº†ï¼Œå¼€å§‹ç»™æ—é‡Œè¯äº‹çš„ä¼¯ä¼¯æ‰“ç”µè¯ã€‚ã€‚æˆ‘ä»¬å‡ ä¸ªè¿˜åœ¨ç›¯ç€ï¼Œï¼Œçªç„¶ï¼Œçˆ·çˆ·çš„å‘¼å¸å¹…åº¦æ˜æ˜¾å°äº†ï¼Œï¼Œåƒè¿åŠ¨è¿‡åå–˜ç€çš„ç²—æ°”çªç„¶å¹³é™ä¸‹æ¥äº†ã€‚å‘¼æ°”å’Œå¸æ°”ä¹‹é—´çš„åœé¡¿ä¹Ÿå˜é•¿äº†ã€‚è¿™ç§æ„Ÿè§‰å¾ˆä¸å¥½ï¼Œï¼Œå§‘å§‘çœ‹çœ‹äº†çˆ·çˆ·çš„çœ¼ç›ï¼Œç³å­”æ˜æ˜¾æ•£äº†ï¼Œé¢œè‰²ä¹Ÿæµ…äº†ï¼Œæµ…ç°è‰²ã€‚ç”¨æ‰‹æŒ‡ä»¥å¾ˆè¿‘çš„è·ç¦»åœ¨çˆ·çˆ·çœ¼å‰æ™ƒä¹Ÿä¸çœ¨çœ¼äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå‘¼å¸å·²ç»å˜æˆçº¯ç”Ÿç†æ€§äº†ï¼Œå¤§æ¦‚å·²ç»æ²¡æœ‰æ„è¯†äº†ï¼Œï¼Œä¸çŸ¥é“æ­¤æ—¶å¯¹ çˆ·çˆ· æ¥è¯´ï¼Œè¿™åˆ°åº•æ˜¯æ€æ ·ä¸€ç§çŠ¶æ€ï¼Œæ¸¸ç¦»ä¹ˆï¼Ÿæ…¢æ…¢ï¼Œï¼Œåç¼©äº†ï¼Œçˆ·çˆ·ä¸å¼ å˜´äº†ï¼Œçœ¼ç›å‘ä¸Šç¿»äº†ä¸€ä¸‹ã€‚ã€‚æ­¤æ—¶ï¼Œæˆ‘å°±ç«™åœ¨åºŠè¾¹ï¼Œç”¨å¹³ç”Ÿæœ€å¤§çš„åŠ›æ°”æ†‹ç€ï¼ŒèƒŒè¿‡å»ï¼Œè¿˜æ˜¯å¤±å£°äº†ï¼ æˆ‘å¹»æƒ³è¿‡å¾ˆå¤šæ¬¡äº²äººå»ä¸–æ—¶çš„åœºæ™¯ï¼Œæ¯æ¬¡æƒ³éƒ½ä¼šæ€•ï¼Œï¼Œæˆ‘æ€•ä»–ä»¬ç¦»ä¸–åï¼Œæˆ‘ä¸æ•¢å†é è¿‘ä»–ä»¬ã€‚ä½†æ­¤æ—¶æ­¤åˆ»ï¼Œä¸€ç‚¹ç‚¹æ€•çš„æ„Ÿè§‰éƒ½æ²¡æœ‰ï¼Œï¼Œå¾ˆäº²ã€‚çˆ·çˆ·ç¦»ä¸–å‰ä¸€ç›´ç”¨å˜´å‘¼å¸ï¼Œç¦»ä¸–åå˜´å·´è¿˜æ˜¯å¼ ç€ï¼Œå¤§äººè¯´å¾—è¶çˆ·çˆ·çš„èº«ä½“è¿˜çƒ­ç€ï¼Œå§‘å§‘æ‰˜ç€çˆ·çˆ·çš„ä¸‹å·´ï¼Œå¸®ä»–æŠŠå˜´å·´åˆä¸Šã€‚å±‹é‡Œå¼€å§‹æœ‰äººå¿™æ´»äº†ï¼Œè’™é•œå­ï¼Œé—¨å£æ”¾ç¢—æ°´ï¼Œå‡†å¤‡ç»™çˆ·çˆ·æ“¦æ´—èº«å­ï¼Œç©¿å¯¿è¡£ã€‚çˆ·çˆ·çš„è„¸ä¸Šç›–ä¸Šäº†ç™½æ¯›å·¾ï¼Œå§‘å§‘å¿™ä¸è¿‡æ¥ï¼Œæˆ‘éš”ç€æ¯›å·¾æ‰˜ç€çˆ·çˆ·çš„ä¸‹å·´ï¼Œè·ªåœ¨åºŠå¤´ç—›å“­ã€‚ã€‚ æˆ‘åˆæƒ³åˆ°é›ªè¯ºè¯´çš„ Nothing at allï¼Œæˆ‘å¸Œæœ›ä»–è¯´çš„æ˜¯é”™çš„ã€‚æˆ‘å¸Œæœ›çœŸçš„æœ‰å¦å¤–ä¸€ä¸ªä¸–ç•Œï¼Œæˆ‘å¸Œæœ›æœ‰ä¸€å¤©æˆ‘å¯ä»¥åœ¨é‚£é‡Œå†è§åˆ°çˆ·çˆ·ã€‚çªç„¶é—´ï¼Œï¼Œæˆ‘å¥½åƒæ˜ç™½å®—æ•™ä¸ºä»€ä¹ˆå­˜åœ¨äº†ã€‚å—å”¯ç‰©ä¸»ä¹‰çš„å½±å“ï¼Œæˆ‘ä¸€ç›´è§‰å¾—å®—æ•™æ˜¯ç‹­éš˜çš„ï¼Œåæ™ºçš„ï¼Œè’è°¬çš„ã€‚ä½†æ˜¯ï¼Œå®—æ•™æè¿°äº†äººæ­»äº¡åçš„ä¸–ç•Œï¼Œè®©äººä»¬é¢å¯¹æ­»åˆ«æ—¶èƒ½å¤Ÿå¾—åˆ°å®½æ…°ï¼Œï¼Œè¿˜æœ‰å¤©å ‚ï¼Œè¿˜æœ‰æ¥ä¸–ï¼æˆ‘ä»¬è¿˜ä¼šå†è§ï¼æˆ‘ä»¬å¹¶æ²¡æœ‰æ°¸è¿œçš„åˆ†å¼€ã€‚ã€‚å®—æ•™å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥è§£ç­”äººä»¬å¯¹èº«åäº‹çš„ç–‘æƒ‘çš„ï¼Œç»™ç°ä¸–çš„äººé‡ç”Ÿé‡é€¢çš„å¸Œæœ›ï¼ç§‘å­¦ï¼Ÿç§‘å­¦ä¸å¯ä»¥ã€‚ã€‚ä»è¿™ä¸€æ–¹é¢è®²ï¼Œç§‘å­¦å¥½åƒè·Ÿå®—æ•™ä¸å†²çªï¼Œåè€Œäº’ç›¸è¡¥å……ã€‚ åœ¨é›ªè¯ºå¤æ´»ä»¥å‰ï¼Œï¼Œæˆ‘ä»æ²¡è®¤çœŸæƒ³è¿‡æœ‰æ²¡æœ‰ Nothing at all çš„æƒ…å†µï¼Œå› ä¸ºä¸‰å¤§å®—æ•™éƒ½æœ‰å¯¹èº«åäº‹çš„æè¿°ï¼Œä½›æ•™æœ‰å…­é“è½®å›ï¼ŒåŸºç£æœ‰å¤©å ‚åœ°ç‹±ï¼Œä¼Šæ–¯å…°æœ‰ä¿¡åä¸–ã€‚Nothing at all ä¸€å®šæ˜¯ä¸ªBUGã€‚]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>æ­»äº¡</tag>
        <tag>å®—æ•™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ™®é²æ–¯ç‰¹é—®å·-2017]]></title>
    <url>%2F2018%2F01%2F02%2FProustQA_2017%2F</url>
    <content type="text"><![CDATA[æ™®é²æ–¯ç‰¹é—®å·-2017è¿™ä»½é—®å·æœ¬åº”è¯¥åœ¨2017-12-31å®Œæˆï¼Œä½†èµ¶ä¸Šï¼Œï¼Œåˆ°åº•æœ‰æ²¡æœ‰å¦ä¸€ä¸ªä¸–ç•Œï¼Ÿå®‰å¥½ï¼Œï¼Œ ä½ è®¤ä¸ºæœ€å®Œç¾çš„å¿«ä¹æ˜¯æ€æ ·çš„ï¼Ÿè§åˆ°æœ€æƒ³è§çš„äººï¼Œå¦‚æœèƒ½æœ‰ä¸ªæ‹¥æŠ±å°±æ›´å¥½äº†~ ä½ æœ€å¸Œæœ›æ‹¥æœ‰å“ªç§æ‰åï¼ŸæŠŠé—®é¢˜æŠ½è±¡æˆæ•°å­¦æ¨¡å‹ï¼Œå†è½¬åŒ–ä¸ºç¼–ç¨‹è¯­è¨€~ ä½ æœ€ææƒ§çš„æ˜¯ä»€ä¹ˆï¼Ÿæ—¶å…‰é£é€.. ä½ ç›®å‰çš„å¿ƒå¢ƒæ€æ ·ï¼Ÿæœ‰ç‚¹å›°ï¼Œä¸æƒ³ç¡è§‰ï¼Œè¿˜æœ‰ç‚¹æµ®èºï¼Œï¼Œæƒ³èµ¶ç´§å­¦å¥½å¾®ä¿¡çš„å°ç¨‹åº è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é’¦ä½©çš„æ˜¯è°ï¼ŸåŸƒéš†é©¬æ–¯å…‹å§ï¼Œè™½ç„¶ä»–ä¸æ˜¯ç¨‹åºå‘˜ ä½ è®¤ä¸ºè‡ªå·±æœ€ä¼Ÿå¤§çš„æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä¹ˆï¼Ÿ ä½ è‡ªå·±çš„å“ªä¸ªç‰¹ç‚¹è®©ä½ æœ€è§‰å¾—ç—›æ¨ï¼Ÿæ€‚ï¼Ÿæˆ‘å¸Œæœ›è‡ªå·±èƒ½å¤Ÿåšå®šæ›´ä¸€ç‚¹ã€‚ ä½ æœ€å–œæ¬¢çš„æ—…è¡Œæ˜¯å“ªä¸€æ¬¡ï¼Ÿå¤§ä¸‰æš‘å‡ä»å“ˆå°”æ»¨æ­è½¦å»æ»¡æ´²é‡Œ ä½ æœ€ç—›æ¨åˆ«äººçš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç«™ç€è¯´è¯ä¸è…°ç–¼ï¼Œï¼Œ ä½ æœ€çæƒœçš„è´¢äº§æ˜¯ä»€ä¹ˆï¼Ÿã€ä¿¡ã€ï¼Œï¼Œè¨€è€Œæœ‰ä¿¡çš„ä¿¡ ä½ æœ€å¥¢ä¾ˆçš„æ˜¯ä»€ä¹ˆï¼Ÿç°åœ¨æ‹¥æœ‰çš„ä¸€åˆ‡éƒ½æŒºå¥¢ä¾ˆçš„ ä½ è®¤ä¸ºç¨‹åº¦æœ€æµ…çš„ç—›è‹¦æ˜¯ä»€ä¹ˆï¼Ÿå£è…”æºƒç–¡ï¼Ÿ ä½ è®¤ä¸ºå“ªç§ç¾å¾·æ˜¯è¢«è¿‡é«˜çš„è¯„ä¼°çš„ï¼Ÿã€ä¼ ç»Ÿç¾å¾·ã€ ä½ æœ€å–œæ¬¢çš„èŒä¸šæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ç°åœ¨åœ¨åšçš„å·¥ä½œâ€“ç¨‹åºå‘˜ ä½ å¯¹è‡ªå·±çš„å¤–è¡¨å“ªä¸€ç‚¹ä¸æ»¡æ„ï¼Ÿè„¸å·¦å³ä¸å¯¹ç§°ï¼ï¼ï¼ ä½ æœ€åæ‚”çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿå¤§å­¦ä»¥å‰å¯¹è®¡ç®—æœºçš„äº†è§£å¤ªç‹­éš˜ è¿˜åœ¨ä¸–çš„äººä¸­ä½ æœ€é„™è§†çš„æ˜¯è°ï¼Ÿæ ‡é¢˜æ¡£ï¼Œå‚»å“”æ ‡é¢˜æ¡£ï¼Œï¼Œä»¥åŠä¸€åˆ‡æ¶æ„å¸¦èŠ‚å¥çš„åª’ä½“å·¥ä½œè€…ï¼ï¼ï¼ ä½ æœ€å–œæ¬¢ç”·æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿæ…·æ…¨ ä½ ä½¿ç”¨è¿‡çš„æœ€å¤šçš„å•è¯æˆ–è€…æ˜¯è¯è¯­æ˜¯ä»€ä¹ˆï¼ŸEnjoy ä½ æœ€å–œæ¬¢å¥³æ€§èº«ä¸Šçš„ä»€ä¹ˆå“è´¨ï¼Ÿä¼˜é›… ä½ æœ€ä¼¤ç—›çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå¤±æ‹å§ï¼Œï¼Œç”±æœ€äº²çˆ±çš„äººå˜æˆæœ€ä¸è€çƒ¦çš„äºº ä½ æœ€çœ‹é‡æœ‹å‹çš„ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿã€ä¿¡ã€ ä½ è¿™ä¸€ç”Ÿä¸­æœ€çˆ±çš„äººæˆ–ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿåˆ°ç›®å‰ä¸ºæ­¢ï¼Œï¼Œåº”è¯¥æ˜¯è‹¹æœç”µè„‘å§ ä½ å¸Œæœ›ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ­»å»ï¼ŸçŒæ­»ï¼Ÿä¹Ÿå¯ä»¥æ˜¯å®‰ä¹æ­»ï¼Œï¼Œä¸è¦å¤ªç‹°ç‹ ä½•æ—¶ä½•åœ°è®©ä½ æ„Ÿè§‰åˆ°æœ€å¿«ä¹ï¼Ÿåˆåç¡é†’ï¼Œä¸€æ¯çƒ­å’–å•¡ï¼Œï¼Œå¬ç€ç½‘æ˜“äº‘æ•²ä»£ç  å¦‚æœä½ å¯ä»¥æ”¹å˜ä½ çš„å®¶åº­ä¸€ä»¶äº‹ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿä¸è¦è®©è´«ç©·é™åˆ¶æˆ‘ä»¬çš„æƒ³è±¡åŠ› å¦‚æœä½ èƒ½é€‰æ‹©çš„è¯ï¼Œä½ å¸Œæœ›è®©ä»€ä¹ˆé‡ç°ï¼Ÿå¸Œæœ›å§‘çˆ¶å’Œçˆ·çˆ·æ²¡æœ‰ç”Ÿç—…ï¼Œï¼Œå¥åº·é‡ç° ä½ çš„åº§å³é“­æ˜¯ä»€ä¹ˆï¼Ÿå¥‹åŠ›æ— æ‚”ï¼Œå°½åŠ›æ— æ„§ï¼Œï¼Œç»å†è¿‡å°±æ˜¯è´¢å¯Œï¼é«˜ä¸­æ—¶çš„]]></content>
      <categories>
        <category>ProustQA</category>
      </categories>
      <tags>
        <tag>æ™®é²æ–¯ç‰¹é—®å·</tag>
        <tag>2017</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹(ä¸‰):éæ„é€ å‡½æ•°çš„ç»§æ‰¿]]></title>
    <url>%2F2017%2F12%2F23%2Fjavascript_oop-inheritance_of_non-constructor%2F</url>
    <content type="text"><![CDATA[Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šéæ„é€ å‡½æ•°çš„ç»§æ‰¿è¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ä»‹ç»äº†â€å°è£…â€ï¼Œç¬¬äºŒéƒ¨åˆ†ä»‹ç»äº†ä½¿ç”¨æ„é€ å‡½æ•°å®ç°â€ç»§æ‰¿â€ã€‚ä»Šå¤©æ˜¯æœ€åä¸€ä¸ªéƒ¨åˆ†ï¼Œä»‹ç»ä¸ä½¿ç”¨æ„é€ å‡½æ•°å®ç°â€ç»§æ‰¿â€ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯â€éæ„é€ å‡½æ•°â€çš„ç»§æ‰¿ï¼Ÿæ¯”å¦‚ï¼Œç°åœ¨æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå«åšâ€ä¸­å›½äººâ€ï¼š123var Chinese = &#123; nation:'ä¸­å›½'&#125;; è¿˜æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå«åšâ€åŒ»ç”Ÿâ€ï¼š123var Doctor =&#123; career:'åŒ»ç”Ÿ'&#125; è¯·é—®æ€æ ·æ‰èƒ½è®©â€åŒ»ç”Ÿâ€å»ç»§æ‰¿â€ä¸­å›½äººâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘æ€æ ·æ‰èƒ½ç”Ÿæˆä¸€ä¸ªâ€ä¸­å›½åŒ»ç”Ÿâ€çš„å¯¹è±¡ï¼Ÿè¿™é‡Œè¦æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯æ™®é€šå¯¹è±¡ï¼Œä¸æ˜¯æ„é€ å‡½æ•°ï¼Œæ— æ³•ä½¿ç”¨æ„é€ å‡½æ•°æ–¹æ³•å®ç°â€ç»§æ‰¿â€ã€‚ äºŒã€object()æ–¹æ³•jsonæ ¼å¼çš„å‘æ˜äººDouglas Crockfordï¼Œæå‡ºäº†ä¸€ä¸ªobject()å‡½æ•°ï¼Œå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚12345function object(o) &#123; function F() &#123;&#125; F.prototype = o; return new F();&#125; è¿™ä¸ªobject()å‡½æ•°ï¼Œå…¶å®åªåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠå­å¯¹è±¡çš„prototypeå±æ€§ï¼ŒæŒ‡å‘çˆ¶å¯¹è±¡ï¼Œä»è€Œä½¿å¾—å­å¯¹è±¡ä¸çˆ¶å¯¹è±¡è¿åœ¨ä¸€èµ·ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œç¬¬ä¸€æ­¥å…ˆåœ¨çˆ¶å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œç”Ÿæˆå­å¯¹è±¡ï¼Œç„¶åï¼Œå†åŠ ä¸Šå­å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œè¿™æ—¶ï¼Œå­å¯¹è±¡å·²ç»ç»§æ‰¿äº†çˆ¶å¯¹è±¡çš„å±æ€§äº†ï¼šğŸ‘‡123var Doctor = object(Chinese);Doctor.career = 'åŒ»ç”Ÿ';alert(Doctor.nation); //ä¸­å›½ ä¸‰ã€æµ…æ‹·è´é™¤äº†ä½¿ç”¨â€prototypeé“¾â€ä»¥å¤–ï¼Œè¿˜æœ‰å¦ä¸€ç§æ€è·¯ï¼šæŠŠçˆ¶å¯¹è±¡çš„å±æ€§ï¼Œå…¨éƒ¨æ‹·è´ç»™å­å¯¹è±¡ï¼Œä¹Ÿèƒ½å®ç°ç»§æ‰¿ã€‚ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œå°±æ˜¯åœ¨åšæ‹·è´ï¼š12345678function extendCopy(p) &#123; var c = &#123;&#125;; for (var i in p) &#123; c[i] = p[i]; &#125; c.uber = p; return c;&#125; ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™æ ·å†™ï¼šğŸ‘‡123var Doctor = extendCopy(Chinese);Doctor.career = 'åŒ»ç”Ÿ';alert(Doctor.nation); // ä¸­å›½ ä½†æ˜¯ï¼Œè¿™æ ·çš„æ‹·è´æœ‰ä¸€ä¸ªé—®é¢˜ã€‚é‚£å°±æ˜¯ï¼Œå¦‚æœçˆ¶å¯¹è±¡çš„å±æ€§ç­‰äºæ•°ç»„æˆ–å¦ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®é™…ä¸Šï¼Œå­å¯¹è±¡è·å¾—çš„åªæ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯çœŸæ­£æ‹·è´ï¼Œå› æ­¤å­˜åœ¨çˆ¶å¯¹è±¡è¢«ç¯¡æ”¹çš„å¯èƒ½ã€‚è¯·çœ‹ï¼Œç°åœ¨ç»™Chineseæ·»åŠ ä¸€ä¸ªâ€å‡ºç”Ÿåœ°â€å±æ€§ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡extendCopy()å‡½æ•°ï¼ŒDoctorç»§æ‰¿äº†Chineseã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºDoctorçš„â€å‡ºç”Ÿåœ°â€æ·»åŠ ä¸€ä¸ªåŸå¸‚ï¼Œç„¶åï¼Œæˆ‘ä»¬ä¸ºDoctorçš„â€å‡ºç”Ÿåœ°â€æ·»åŠ ä¸€ä¸ªåŸå¸‚ï¼š123456Chinese.birthPlaces = ['åŒ—äº¬','ä¸Šæµ·','é¦™æ¸¯'];var Doctor = extendCopy(Chinese);Doctor.birthPlaces.push('å¦é—¨');alert(Doctor.birthPlaces); //åŒ—äº¬, ä¸Šæµ·, é¦™æ¸¯, å¦é—¨alert(Chinese.birthPlaces); //åŒ—äº¬, ä¸Šæµ·, é¦™æ¸¯, å¦é—¨ ğŸ‘†å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼ŸChineseçš„â€å‡ºç”Ÿåœ°â€ä¹Ÿè¢«æ”¹æ‰äº†ï¼ æ‰€ä»¥ï¼ŒextendCopy()åªæ˜¯æ‹·è´åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ‹·è´å«åšâ€æµ…æ‹·è´â€ã€‚è¿™æ˜¯æ—©æœŸjQueryå®ç°ç»§æ‰¿çš„æ–¹å¼ã€‚ å››ã€æ·±æ‹·è´æ‰€è°“â€æ·±æ‹·è´â€ï¼Œå°±æ˜¯èƒ½å¤Ÿå®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„æ•°ç»„å’Œå¯¹è±¡çš„æ‹·è´ã€‚å®ƒçš„å®ç°å¹¶ä¸éš¾ï¼Œåªè¦é€’å½’è°ƒç”¨â€æµ…æ‹·è´â€å°±è¡Œäº†ã€‚123456789101112function deepCopy(p, c) &#123; var c = c || &#123;&#125;; for (var i in p) &#123; if (typeof p[i] === 'object') &#123; c[i] = (p[i].constructor === Array) ? [] : &#123;&#125;; deepCopy(p[i], c[i]); &#125; else &#123; c[i] = p[i]; &#125; &#125; return c;&#125; ä½¿ç”¨çš„æ—¶å€™è¿™æ ·å†™ï¼Œç»™çˆ¶å¯¹è±¡åŠ ä¸€ä¸ªå±æ€§ï¼Œå€¼ä¸ºæ•°ç»„ã€‚ç„¶åï¼Œåœ¨å­å¯¹è±¡ä¸Šä¿®æ”¹è¿™ä¸ªå±æ€§ï¼Œè¿™æ—¶ï¼Œçˆ¶å¯¹è±¡å°±ä¸ä¼šå—åˆ°å½±å“äº†ã€‚12345var Doctor = deepCopy(Chinese);Chinese.birthPlaces = ['åŒ—äº¬','ä¸Šæµ·','é¦™æ¸¯'];Doctor.birthPlaces.push('å¦é—¨');alert(Doctor.birthPlaces); //åŒ—äº¬, ä¸Šæµ·, é¦™æ¸¯, å¦é—¨alert(Chinese.birthPlaces); //åŒ—äº¬, ä¸Šæµ·, é¦™æ¸¯ ç›®å‰ï¼ŒjQueryåº“ä½¿ç”¨çš„å°±æ˜¯è¿™ç§ç»§æ‰¿æ–¹æ³•ã€‚ï¼ˆå®Œï¼‰]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹(äºŒ):æ„é€ å‡½æ•°çš„ç»§æ‰¿]]></title>
    <url>%2F2017%2F12%2F23%2Fjavascript_oop-inheritance_of_constructor%2F</url>
    <content type="text"><![CDATA[Javascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿ è½¬è½½è‡ªJavascripté¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿ - by é˜®ä¸€å³° è¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ä»‹ç»äº†å¦‚ä½•â€œå°è£…â€æ•°æ®å’Œæ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•ä»åŸå‹å¯¹è±¡ç”Ÿæˆå®ä¾‹ã€‚ä»Šå¤©è¦ä»‹ç»çš„æ˜¯ï¼Œå¯¹è±¡ä¹‹é—´çš„â€œç»§æ‰¿â€çš„äº”ç§æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œç°åœ¨æœ‰ä¸€ä¸ªâ€œåŠ¨ç‰©â€ğŸ‘‡å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼š123function Animal()&#123; this.species = "åŠ¨ç‰©";&#125; è¿˜æœ‰ä¸€ä¸ªâ€œçŒ«â€ğŸ‘‡å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼š1234function Cat(name,color)&#123; this.name = name; this.color = color;&#125; æ€æ ·æ‰èƒ½ä½¿â€œçŒ«â€ç»§æ‰¿â€œåŠ¨ç‰©â€å‘¢ï¼Ÿ ä¸€ã€ æ„é€ å‡½æ•°ç»‘å®šç¬¬ä¸€ç§æ–¹æ³•ä¹Ÿæ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä½¿ç”¨callæˆ–applyæ–¹æ³•ï¼Œå°†çˆ¶å¯¹è±¡çš„æ„é€ å‡½æ•°ç»‘å®šåœ¨å­å¯¹è±¡ä¸Šï¼Œå³åœ¨å­å¯¹è±¡æ„é€ å‡½æ•°ä¸­åŠ ä¸€è¡Œï¼š1234567function Cat(name,color)&#123; Animal.apply(this, arguments); this.name = name; this.color = color;&#125;var cat1 = new Cat("å¤§æ¯›","é»„è‰²");alert(cat1.species); // åŠ¨ç‰© äºŒã€ prototypeæ¨¡å¼ç¬¬äºŒç§æ–¹æ³•æ›´å¸¸è§ï¼Œä½¿ç”¨prototypeå±æ€§ã€‚å¦‚æœâ€œçŒ«â€çš„prototypeå¯¹è±¡ï¼ŒæŒ‡å‘ä¸€ä¸ªAnimalçš„å®ä¾‹ï¼Œé‚£ä¹ˆæ‰€æœ‰â€çŒ«â€çš„å®ä¾‹ï¼Œå°±èƒ½ç»§æ‰¿Animaläº†ã€‚1234Cat.prototype = new Animal();Cat.prototype.constructor = Cat;var cat1 = new Cat("å¤§æ¯›","é»„è‰²");alert(cat1.species); // åŠ¨ç‰© ä»£ç çš„ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬å°†Catçš„prototypeå¯¹è±¡æŒ‡å‘ä¸€ä¸ªAnimalçš„å®ä¾‹ã€‚å®ƒç›¸å½“äºå®Œå…¨åˆ é™¤äº†prototypeå¯¹è±¡åŸå…ˆçš„å€¼ï¼Œç„¶åèµ‹äºˆä¸€ä¸ªæ–°å€¼ã€‚ä½†æ˜¯ï¼Œç¬¬äºŒè¡Œåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼ŸåŸæ¥ï¼Œä»»ä½•ä¸€ä¸ªprototypeå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰Cat.prototype = new Animal();è¿™ä¸€è¡Œï¼ŒCat.prototype.constructoræ˜¯æŒ‡å‘Catçš„ï¼›åŠ äº†è¿™ä¸€è¡Œä»¥åï¼ŒCat.prototype.constructoræŒ‡å‘Animalã€‚æ¯ä¸€ä¸ªå®ä¾‹ä¹Ÿæœ‰ä¸€ä¸ªconstructorå±æ€§ï¼Œé»˜è®¤è°ƒç”¨prototypeå¯¹è±¡çš„constructorå±æ€§ã€‚å› æ­¤ï¼Œåœ¨è¿è¡Œ&quot;Cat.prototype = new Animal();&quot;è¿™ä¸€è¡Œä¹‹åï¼Œcat1.constructorä¹ŸæŒ‡å‘Animal(å¦‚æœæ²¡æœ‰ç¬¬äºŒè¡Œä»£ç )ï¼è¿™æ˜¾ç„¶ä¼šå¯¼è‡´ç»§æ‰¿é“¾çš„ç´Šä¹±ï¼ˆcat1æ˜æ˜æ˜¯ç”¨æ„é€ å‡½æ•°Catç”Ÿæˆçš„ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨çº æ­£ï¼Œå°†Cat.prototypeå¯¹è±¡çš„constructorå€¼æ”¹ä¸ºCatã€‚è¿™å°±æ˜¯ç¬¬äºŒè¡Œçš„æ„æ€ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œç¼–ç¨‹æ—¶åŠ¡å¿…è¦éµå®ˆã€‚ä¸‹æ–‡éƒ½éµå¾ªè¿™ä¸€ç‚¹ï¼Œå³å¦‚æœæ›¿æ¢äº†prototypeå¯¹è±¡,é‚£ä¹ˆï¼Œä¸‹ä¸€æ­¥å¿…ç„¶æ˜¯ä¸ºæ–°çš„prototypeå¯¹è±¡åŠ ä¸Šconstructorå±æ€§ï¼Œå¹¶å°†è¿™ä¸ªå±æ€§æŒ‡å›åŸæ¥çš„æ„é€ å‡½æ•°ã€‚12o.prototype = &#123;&#125;;o.prototype.constructor = o; ä¸‰ã€ ç›´æ¥ç»§æ‰¿prototypeç¬¬ä¸‰ç§æ–¹æ³•æ˜¯å¯¹ç¬¬äºŒç§æ–¹æ³•çš„æ”¹è¿›ã€‚ç”±äºAnimalå¯¹è±¡ä¸­ï¼Œä¸å˜çš„å±æ€§éƒ½å¯ä»¥ç›´æ¥å†™å…¥Animal.prototypeã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©Cat()è·³è¿‡ Animal()ï¼Œç›´æ¥ç»§æ‰¿Animal.prototypeã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆå°†Animalå¯¹è±¡æ”¹å†™ï¼š12function Animal()&#123; &#125;Animal.prototype.species = "åŠ¨ç‰©"; ç„¶åï¼Œå°†Catçš„prototypeå¯¹è±¡ï¼Œç„¶åæŒ‡å‘Animalçš„prototypeå¯¹è±¡ï¼Œè¿™æ ·å°±å®Œæˆäº†ç»§æ‰¿ã€‚ğŸ‘‡1234Cat.prototype = Animal.prototype;Cat.prototype.constructor = Cat;var cat1 = new Cat("å¤§æ¯›","é»„è‰²");alert(cat1.species); // åŠ¨ç‰© ä¸å‰ä¸€ç§æ–¹æ³•ç›¸æ¯”ï¼Œè¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯æ•ˆç‡æ¯”è¾ƒé«˜ï¼ˆä¸ç”¨æ‰§è¡Œå’Œå»ºç«‹Animalçš„å®ä¾‹äº†ï¼‰ï¼Œæ¯”è¾ƒçœå†…å­˜ã€‚ç¼ºç‚¹æ˜¯ Cat.prototypeå’ŒAnimal.prototypeç°åœ¨æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä»»ä½•å¯¹Cat.prototypeçš„ä¿®æ”¹ï¼Œéƒ½ä¼šåæ˜ åˆ°Animal.prototypeã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™ä¸€æ®µä»£ç å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œï¼Œè¯·çœ‹ç¬¬äºŒè¡ŒğŸ‘†ã€‚è¿™ä¸€å¥å®é™…ä¸ŠæŠŠAnimal.prototypeå¯¹è±¡çš„constructorå±æ€§ä¹Ÿæ”¹æ‰äº†ï¼1alert(Animal.prototype.constructor); // Cat å››ã€ åˆ©ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ç”±äºâ€ç›´æ¥ç»§æ‰¿prototypeâ€å­˜åœ¨ä¸Šè¿°çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥å°±æœ‰ç¬¬å››ç§æ–¹æ³•ï¼Œåˆ©ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ï¼šğŸ‘‡1234var F = function()&#123;&#125;;F.prototype = Animal.prototype;Cat.prototype = new F();Cat.prototype.constructor = Cat; Fæ˜¯ç©ºå¯¹è±¡ï¼Œæ‰€ä»¥å‡ ä¹ä¸å å†…å­˜ã€‚è¿™æ—¶ï¼Œä¿®æ”¹Catçš„prototypeå¯¹è±¡ï¼Œå°±ä¸ä¼šå½±å“åˆ°Animalçš„prototypeå¯¹è±¡ã€‚1alert(Animal.prototype.constructor); // Animal æˆ‘ä»¬å°†ä¸Šé¢çš„æ–¹æ³•ï¼Œå°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œä¾¿äºä½¿ç”¨ã€‚1234567function extend(Child, Parent) &#123; var F = function()&#123;&#125;; F.prototype = Parent.prototype; Child.prototype = new F(); Child.prototype.constructor = Child; Child.uber = Parent.prototype;&#125; ä½¿ç”¨çš„æ—¶å€™ï¼Œæ–¹æ³•å¦‚ä¸‹:ğŸ‘‡123extend(Cat,Animal);var cat1 = new Cat("å¤§æ¯›","é»„è‰²");alert(cat1.species); // åŠ¨ç‰© è¿™ä¸ªextendå‡½æ•°ï¼Œå°±æ˜¯YUIåº“å¦‚ä½•å®ç°ç»§æ‰¿çš„æ–¹æ³•ã€‚ å¦å¤–ï¼Œè¯´æ˜ä¸€ç‚¹ï¼Œå‡½æ•°ä½“æœ€åä¸€è¡ŒChild.uber = Parent.prototype;æ„æ€æ˜¯ä¸ºå­å¯¹è±¡è®¾ä¸€ä¸ªuberå±æ€§ï¼Œè¿™ä¸ªå±æ€§ç›´æ¥æŒ‡å‘çˆ¶å¯¹è±¡çš„prototypeå±æ€§ã€‚ï¼ˆuberæ˜¯ä¸€ä¸ªå¾·è¯­è¯ï¼Œæ„æ€æ˜¯â€å‘ä¸Šâ€ã€â€ä¸Šä¸€å±‚â€ã€‚ï¼‰è¿™ç­‰äºåœ¨å­å¯¹è±¡ä¸Šæ‰“å¼€ä¸€æ¡é€šé“ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨çˆ¶å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™ä¸€è¡Œæ”¾åœ¨è¿™é‡Œï¼Œåªæ˜¯ä¸ºäº†å®ç°ç»§æ‰¿çš„å®Œå¤‡æ€§ï¼Œçº¯å±å¤‡ç”¨æ€§è´¨ã€‚ äº”ã€ æ‹·è´ç»§æ‰¿ä¸Šé¢æ˜¯é‡‡ç”¨prototypeå¯¹è±¡ï¼Œå®ç°ç»§æ‰¿ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¢ä¸€ç§æ€è·¯ï¼Œçº¯ç²¹é‡‡ç”¨â€æ‹·è´â€æ–¹æ³•å®ç°ç»§æ‰¿ã€‚ç®€å•è¯´ï¼Œå¦‚æœæŠŠçˆ¶å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œæ‹·è´è¿›å­å¯¹è±¡ï¼Œä¸ä¹Ÿèƒ½å¤Ÿå®ç°ç»§æ‰¿å—ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ç¬¬äº”ç§æ–¹æ³•ã€‚ é¦–å…ˆï¼Œè¿˜æ˜¯æŠŠAnimalçš„æ‰€æœ‰ä¸å˜å±æ€§ï¼Œéƒ½æ”¾åˆ°å®ƒçš„prototypeå¯¹è±¡ä¸Šã€‚12function Animal()&#123;&#125;Animal.prototype.species = "åŠ¨ç‰©"; ç„¶åï¼Œå†å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°å±æ€§æ‹·è´çš„ç›®çš„ï¼šğŸ‘‡12345678function extend2(Child, Parent) &#123; var p = Parent.prototype; var c = Child.prototype; for (var i in p) &#123; c[i] = p[i]; &#125; c.uber = p;&#125; è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œå°±æ˜¯å°†çˆ¶å¯¹è±¡çš„prototypeå¯¹è±¡ä¸­çš„å±æ€§ï¼Œä¸€ä¸€æ‹·è´ç»™Childå¯¹è±¡çš„prototypeå¯¹è±¡ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™æ ·å†™ï¼š123extend2(Cat, Animal);var cat1 = new Cat("å¤§æ¯›","é»„è‰²");alert(cat1.species); // åŠ¨ç‰© æœ¬ç³»åˆ—æœªå®Œï¼Œè¯·ç»§ç»­é˜…è¯»ç¬¬ä¸‰éƒ¨åˆ†ã€Šéæ„é€ å‡½æ•°çš„ç»§æ‰¿ã€‹ã€‚ï¼ˆå®Œï¼‰ åœ¨ äºŒã€ prototypeæ¨¡å¼ ç¬¬ä¸‰æ®µä¸­åˆ é™¤äº†ç¤ºä¾‹ä»£ç ï¼Œå½“åˆè¯»çš„æ—¶å€™ä¸Šä¸‹è¯­ä¹‰ä¹‹é—´æœ‰äº›å‰²è£‚ï¼Œç†è§£èµ·æ¥æœ‰ç‚¹éº»çƒ¦ã€‚ã€‚ åœ¨ äº”ã€ æ‹·è´ç»§æ‰¿ extend2å‡½æ•°ä¸­ï¼Œforå¾ªç¯ä¸­çš„ä»£ç c[i] = p[i];æ˜¯é‡‡ç”¨äº†jsonæ ¼å¼çš„è°ƒç”¨äº†å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸å¹³æ—¶æˆ‘ä»¬ä¸€èˆ¬ä¹ æƒ¯ä¸­çš„instance.methodæ•ˆæœä¸€æ ·ã€‚]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…æMySQLä¸­existsä¸inçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2F12%2F19%2Fexists-and-in_in_MySQL%2F</url>
    <content type="text"><![CDATA[æµ…æMySQLä¸­existsä¸inçš„ä½¿ç”¨ è½¬è½½è‡ª æµ…æMySQLä¸­existsä¸inçš„ä½¿ç”¨ - by Franklin existsexistså¯¹å¤–è¡¨ç”¨loopé€æ¡æŸ¥è¯¢ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½ä¼šæŸ¥çœ‹existsçš„æ¡ä»¶è¯­å¥ï¼Œå½“existsé‡Œçš„æ¡ä»¶è¯­å¥èƒ½å¤Ÿè¿”å›è®°å½•è¡Œæ—¶(æ— è®ºè®°å½•è¡Œæ˜¯çš„å¤šå°‘ï¼Œåªè¦èƒ½è¿”å›)ï¼Œæ¡ä»¶å°±ä¸ºçœŸï¼Œè¿”å›å½“å‰loopåˆ°çš„è¿™æ¡è®°å½•;åä¹‹å¦‚æœexistsé‡Œçš„æ¡ ä»¶è¯­å¥ä¸èƒ½è¿”å›è®°å½•è¡Œï¼Œåˆ™å½“å‰loopåˆ°çš„è¿™æ¡è®°å½•è¢«ä¸¢å¼ƒï¼Œexistsçš„æ¡ä»¶å°±åƒä¸€ä¸ªboolæ¡ä»¶ï¼Œå½“èƒ½è¿”å›ç»“æœé›†åˆ™ä¸ºtrueï¼Œä¸èƒ½è¿”å›ç»“æœé›†åˆ™ä¸º false å¦‚ä¸‹ï¼šğŸ‘‡1select * from user where exists (select 1); å¯¹userè¡¨çš„è®°å½•é€æ¡å–å‡ºï¼Œç”±äºå­æ¡ä»¶ä¸­çš„select 1æ°¸è¿œèƒ½è¿”å›è®°å½•è¡Œï¼Œé‚£ä¹ˆuserè¡¨çš„æ‰€æœ‰è®°å½•éƒ½å°†è¢«åŠ å…¥ç»“æœé›†ï¼Œæ‰€ä»¥ä¸ select * from user;æ˜¯ä¸€æ ·çš„ã€‚ åˆå¦‚ä¸‹ğŸ‘‡1select * from user where exists (select * from user where userId = 0); å¯ä»¥çŸ¥é“å¯¹userè¡¨è¿›è¡Œloopæ—¶ï¼Œæ£€æŸ¥æ¡ä»¶è¯­å¥(select * from user where userId = 0),ç”±äºuserIdæ°¸è¿œä¸ä¸º0[^1]ï¼Œæ‰€ä»¥æ¡ä»¶è¯­å¥æ°¸è¿œè¿”å›ç©ºé›†ï¼Œæ¡ä»¶æ°¸è¿œä¸ºfalseï¼Œé‚£ä¹ˆuserè¡¨çš„æ‰€æœ‰è®°å½•éƒ½å°†è¢«ä¸¢å¼ƒã€‚ not existsä¸existsç›¸åï¼Œä¹Ÿå°±æ˜¯å½“existsæ¡ä»¶æœ‰ç»“æœé›†è¿”å›æ—¶ï¼Œloopåˆ°çš„è®°å½•å°†è¢«ä¸¢å¼ƒï¼Œå¦åˆ™å°†loopåˆ°çš„è®°å½•åŠ å…¥ç»“æœé›†ã€‚ æ€»çš„æ¥è¯´ï¼Œå¦‚æœAè¡¨æœ‰næ¡è®°å½•ï¼Œé‚£ä¹ˆexistsæŸ¥è¯¢å°±æ˜¯å°†è¿™næ¡è®°å½•é€æ¡å–å‡ºï¼Œç„¶ååˆ¤æ–­néexistsæ¡ä»¶ã€‚ ininæŸ¥è¯¢ç›¸å½“äºå¤šä¸ªoræ¡ä»¶çš„å åŠ ï¼Œè¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯”å¦‚ä¸‹é¢çš„æŸ¥è¯¢ğŸ‘‡1234select * from user where userId in (1, 2, 3);ç­‰æ•ˆäºğŸ‘‡select * from user where userId = 1 or userId = 2 or userId = 3; not inä¸inç›¸åï¼Œå¦‚ä¸‹1234select * from user where userId not in (1, 2, 3);ç­‰æ•ˆäºğŸ‘‡select * from user where userId != 1 and userId != 2 and userId != 3; æ€»çš„æ¥è¯´ï¼ŒinæŸ¥è¯¢å°±æ˜¯å…ˆå°†å­æŸ¥è¯¢æ¡ä»¶çš„è®°å½•å…¨éƒ½æŸ¥å‡ºæ¥ï¼Œå‡è®¾ç»“æœé›†ä¸ºBï¼Œå…±æœ‰mæ¡è®°å½•ï¼Œç„¶ååœ¨å°†å­æŸ¥è¯¢æ¡ä»¶çš„ç»“æœé›†åˆ†è§£æˆmä¸ªï¼Œå†è¿›è¡Œmæ¬¡æŸ¥è¯¢ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒinæŸ¥è¯¢çš„å­æ¡ä»¶è¿”å›ç»“æœå¿…é¡»åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œä¾‹å¦‚1select * from user where userId in (select id from B); è€Œä¸èƒ½æ˜¯1select * from user where userId in (select id, age from B); è€Œexistså°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚ existså’Œinçš„æ€§èƒ½è€ƒè™‘å¦‚ä¸‹SQLè¯­å¥:ğŸ‘‡1231: select * from A where exists (select * from B where B.id = A.id);2: select * from A where A.id in (select id from B); æŸ¥è¯¢1.å¯ä»¥è½¬åŒ–ä»¥ä¸‹ä¼ªä»£ç ï¼Œä¾¿äºç†è§£ğŸ‘‡1234567for ($i = 0; $i &lt; count(A); $i++) &#123; $a = get_record(A, $i); #ä»Aè¡¨é€æ¡è·å–è®°å½• if (B.id = $a[id])&#123; #å¦‚æœå­æ¡ä»¶æˆç«‹ $result[] = $a; &#125;&#125;return $result; å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€ï¼Œå…¶å®å¯ä»¥çœ‹åˆ°,æŸ¥è¯¢1ä¸»è¦æ˜¯ç”¨åˆ°äº†Bè¡¨çš„ç´¢å¼•ï¼ŒAè¡¨å¦‚ä½•å¯¹æŸ¥è¯¢çš„æ•ˆç‡å½±å“åº”è¯¥ä¸å¤§ã€‚ å‡è®¾Bè¡¨çš„æ‰€æœ‰idä¸º1,2,3,æŸ¥è¯¢2å¯ä»¥è½¬æ¢ä¸ºğŸ‘‡1select * from A where A.id = 1 or A.id = 2 or A.id = 3; è¿™ä¸ªå¥½ç†è§£äº†ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨åˆ°äº†Açš„ç´¢å¼•ï¼ŒBè¡¨å¦‚ä½•å¯¹æŸ¥è¯¢å½±å“ä¸å¤§ã€‚ ä¸‹é¢å†çœ‹not exists å’Œ not in1231. select * from A where not exists (select * from B where B.id = A.id);2. select * from A where A.id not in (select id from B); çœ‹æŸ¥è¯¢1ï¼Œè¿˜æ˜¯å’Œä¸Šé¢ä¸€æ ·ï¼Œç”¨äº†Bçš„ç´¢å¼•ã€‚è€Œå¯¹äºæŸ¥è¯¢2ï¼Œå¯ä»¥è½¬åŒ–æˆå¦‚ä¸‹è¯­å¥ğŸ‘‡1select * from A where A.id != 1 and A.id != 2 and A.id != 3; å¯ä»¥çŸ¥é“not inæ˜¯ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œè¿™ç§!=çš„èŒƒå›´æŸ¥è¯¢æ— æ³•ä½¿ç”¨ä»»ä½•ç´¢å¼•,ç­‰äºè¯´Aè¡¨çš„æ¯æ¡è®°å½•ï¼Œéƒ½è¦åœ¨Bè¡¨é‡Œéå†ä¸€æ¬¡ï¼ŒæŸ¥çœ‹Bè¡¨é‡Œæ˜¯å¦å­˜åœ¨è¿™æ¡è®°å½•,æ•…not existsæ¯”not inæ•ˆç‡é«˜ã€‚ mysqlä¸­çš„inè¯­å¥æ˜¯æŠŠå¤–è¡¨å’Œå†…è¡¨ä½œhashè¿æ¥ï¼Œè€Œexistsè¯­å¥æ˜¯å¯¹å¤–è¡¨ä½œloopå¾ªç¯ï¼Œæ¯æ¬¡loopå¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚ä¸€ç›´å¤§å®¶éƒ½è®¤ä¸ºexistsæ¯”inè¯­å¥çš„æ•ˆç‡è¦é«˜ï¼Œè¿™ç§è¯´æ³•å…¶å®æ˜¯ä¸å‡†ç¡®çš„ã€‚è¿™ä¸ªæ˜¯è¦åŒºåˆ†ç¯å¢ƒçš„ã€‚ å¦‚æœæŸ¥è¯¢çš„ä¸¤ä¸ªè¡¨å¤§å°ç›¸å½“ï¼Œé‚£ä¹ˆç”¨inå’Œexistså·®åˆ«ä¸å¤§; å¦‚æœä¸¤ä¸ªè¡¨ä¸­ä¸€ä¸ªè¾ƒå°ï¼Œä¸€ä¸ªæ˜¯å¤§è¡¨ï¼Œåˆ™å­æŸ¥è¯¢è¡¨å¤§çš„ç”¨existsï¼Œå­æŸ¥è¯¢è¡¨å°çš„ç”¨in:ä¾‹å¦‚ï¼šè¡¨Aï¼ˆå°è¡¨ï¼‰ï¼Œè¡¨Bï¼ˆå¤§è¡¨ï¼‰1234567891011# æ•ˆç‡ä½ï¼Œç”¨åˆ°äº†Aè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ï¼›select * from A where cc in (select cc from B);# æ•ˆç‡é«˜ï¼Œç”¨åˆ°äº†Bè¡¨ä¸Šccåˆ—çš„ç´¢å¼•;select * from A where exists(select cc from B where cc=A.cc);# æ•ˆç‡é«˜ï¼Œç”¨åˆ°äº†Bè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ï¼› select * from B where cc in (select cc from A);# æ•ˆç‡ä½ï¼Œç”¨åˆ°äº†Aè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ã€‚select * from B where exists(select cc from A where cc=B.cc); not inå’Œnot existså¦‚æœæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†not iné‚£ä¹ˆå†…å¤–è¡¨éƒ½è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼›è€Œnot extstsçš„å­æŸ¥è¯¢ä¾ç„¶èƒ½ç”¨åˆ°è¡¨ä¸Šçš„ç´¢å¼•ã€‚æ‰€ä»¥æ— è®ºå“ªä¸ªè¡¨å¤§ï¼Œç”¨not existséƒ½æ¯”not inè¦å¿«ã€‚ inä¸=çš„åŒºåˆ«1234select name from student where name in ('zhang','wang','li','zhao');ç­‰æ•ˆäºğŸ‘‡select name from student where name='zhang' or name='li' or name='wang' or name='zhao'; [^1]: å…¶å®user_idæ˜¯å¯ä»¥ä¸º0çš„ã€‚åœ¨ Mysql sql_mode ä¸­ æ·»åŠ  NO_AUTO_VALUE_ON_ZEROã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>exist</tag>
        <tag>in</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLé€»è¾‘æŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº]]></title>
    <url>%2F2017%2F12%2F19%2Fexecution_sequence_of_sql%2F</url>
    <content type="text"><![CDATA[SQLé€»è¾‘æŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº è½¬è½½è‡ª SQLé€»è¾‘æŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº - by æœå†»æƒ³ æµ‹è¯•è¡¨ç»“æ„ï¼šğŸ‘‡12345678910111213CREATE TABLE table1 ( customer_id VARCHAR(10) NOT NULL, city VARCHAR(10) NOT NULL, PRIMARY KEY(customer_id) )ENGINE=INNODB DEFAULT CHARSET=UTF8; CREATE TABLE table2 ( order_id INT NOT NULL auto_increment, customer_id VARCHAR(10), PRIMARY KEY(order_id) )ENGINE=INNODB DEFAULT CHARSET=UTF8; æµ‹è¯•æ•°æ®ï¼šğŸ‘‡123456789101112INSERT INTO table1(customer_id,city) VALUES('163','hangzhou'); INSERT INTO table1(customer_id,city) VALUES('9you','shanghai'); INSERT INTO table1(customer_id,city) VALUES('tx','hangzhou'); INSERT INTO table1(customer_id,city) VALUES('baidu','hangzhou'); INSERT INTO table2(customer_id) VALUES('163'); INSERT INTO table2(customer_id) VALUES('163'); INSERT INTO table2(customer_id) VALUES('9you'); INSERT INTO table2(customer_id) VALUES('9you'); INSERT INTO table2(customer_id) VALUES('9you'); INSERT INTO table2(customer_id) VALUES('tx'); INSERT INTO table2(customer_id) VALUES(NULL); SQLé€»è¾‘æŸ¥è¯¢æµ‹è¯•è¯­å¥ğŸ‘‡123456789#ä½¿ç”¨ä¸Šè¿°SQLæŸ¥è¯¢è¯­å¥æ¥è·å¾—æ¥è‡ªæ­å·ï¼Œå¹¶ä¸”è®¢å•æ•°å°‘äº2çš„å®¢æˆ·ã€‚SELECT a.customer_id, COUNT(b.order_id) as total_orders FROM table1 AS a LEFT JOIN table2 AS b ON a.customer_id = b.customer_id WHERE a.city = 'hangzhou' GROUP BY a.customer_id HAVING count(b.order_id) &lt; 2 ORDER BY total_orders DESC; SQLé€»è¾‘æŸ¥è¯¢è¯­å¥æ‰§è¡Œé¡ºåº12345678910(7) SELECT (8) DISTINCT &lt;select_list&gt;(1) FROM &lt;left_table&gt;(3) &lt;join_type&gt; JOIN &lt;right_table&gt;(2) ON &lt;join_condition&gt;(4) WHERE &lt;where_condition&gt;(5) GROUP BY &lt;group_by_list&gt;(6) HAVING &lt;having_condition&gt;(9) ORDER BY &lt;order_by_condition&gt;(10) LIMIT &lt;limit_number&gt; ğŸ‘†ä¸Šé¢åœ¨æ¯æ¡è¯­å¥çš„å‰é¢éƒ½æ ‡æ˜äº†æ‰§è¡Œé¡ºåºå·ï¼Œä¸è¦é—®æˆ‘æ€ä¹ˆçŸ¥é“è¿™ä¸ªé¡ºåºçš„ã€‚æˆ‘ä¹Ÿæ˜¯è¯»å„ç§â€œæ­¦æ—ç§˜ç±â€æ‰å¾—çŸ¥çš„ï¼Œå¦‚æœä½ æœ‰åŠŸå¤«ï¼Œå»é˜…è¯»ä¸€ä¸‹MySQLçš„æºç ï¼Œä¹Ÿä¼šå¾—å‡ºè¿™ä¸ªç»“æœçš„ã€‚ å¥½äº†ï¼Œä¸Šé¢æˆ‘æ ‡å‡ºäº†å„æ¡æŸ¥è¯¢è§„åˆ™çš„æ‰§è¡Œå…ˆåé¡ºåºï¼Œé‚£ä¹ˆå„æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»Šå¤©è¿™ç¯‡åšæ–‡çš„é‡ç‚¹å†…å®¹ã€‚Go onâ€¦ æ‰§è¡ŒFROMè¯­å¥åœ¨è¿™äº›SQLè¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œç”¨æ¥ä¿å­˜SQLè¯­å¥çš„æ‰§è¡Œç»“æœï¼ˆè¿™æ˜¯é‡ç‚¹ï¼‰ï¼Œæˆ‘ç°åœ¨å°±æ¥è·Ÿè¸ªè¿™ä¸ªè™šæ‹Ÿè¡¨çš„å˜åŒ–ï¼Œå¾—åˆ°æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœçš„è¿‡ç¨‹ï¼Œæ¥åˆ†ææ•´ä¸ªSQLé€»è¾‘æŸ¥è¯¢çš„æ‰§è¡Œé¡ºåºå’Œè¿‡ç¨‹ã€‚ ç¬¬ä¸€æ­¥ï¼Œæ‰§è¡ŒFROMè¯­å¥ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“æœ€å¼€å§‹ä»å“ªä¸ªè¡¨å¼€å§‹çš„ï¼Œè¿™å°±æ˜¯FROMå‘Šè¯‰æˆ‘ä»¬çš„ã€‚ç°åœ¨æœ‰äº†&lt;left_table&gt;å’Œ&lt;right_table&gt;ä¸¤ä¸ªè¡¨ï¼Œæˆ‘ä»¬åˆ°åº•ä»å“ªä¸ªè¡¨å¼€å§‹ï¼Œè¿˜æ˜¯ä»ä¸¤ä¸ªè¡¨è¿›è¡ŒæŸç§è”ç³»ä»¥åå†å¼€å§‹å‘¢ï¼Ÿå®ƒä»¬ä¹‹é—´å¦‚ä½•äº§ç”Ÿè”ç³»å‘¢ï¼Ÿâ€”â€”ç¬›å¡å°”ç§¯ å…³äºä»€ä¹ˆæ˜¯ç¬›å¡å°”ç§¯ï¼Œè¯·è‡ªè¡ŒGoogleè¡¥è„‘ã€‚ç»è¿‡FROMè¯­å¥å¯¹ä¸¤ä¸ªè¡¨æ‰§è¡Œç¬›å¡å°”ç§¯ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œæš‚ä¸”å«VT1ï¼ˆvitual table 1ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼šğŸ‘‡1234567891011121314151617181920212223242526272829303132+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 9you | shanghai | 1 | 163 || baidu | hangzhou | 1 | 163 || tx | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 2 | 163 || baidu | hangzhou | 2 | 163 || tx | hangzhou | 2 | 163 || 163 | hangzhou | 3 | 9you || 9you | shanghai | 3 | 9you || baidu | hangzhou | 3 | 9you || tx | hangzhou | 3 | 9you || 163 | hangzhou | 4 | 9you || 9you | shanghai | 4 | 9you || baidu | hangzhou | 4 | 9you || tx | hangzhou | 4 | 9you || 163 | hangzhou | 5 | 9you || 9you | shanghai | 5 | 9you || baidu | hangzhou | 5 | 9you || tx | hangzhou | 5 | 9you || 163 | hangzhou | 6 | tx || 9you | shanghai | 6 | tx || baidu | hangzhou | 6 | tx || tx | hangzhou | 6 | tx || 163 | hangzhou | 7 | NULL || 9you | shanghai | 7 | NULL || baidu | hangzhou | 7 | NULL || tx | hangzhou | 7 | NULL |+-------------+----------+----------+-------------+ æ€»å…±æœ‰28ï¼ˆtable1çš„è®°å½•æ¡æ•° * table2çš„è®°å½•æ¡æ•°ï¼‰æ¡è®°å½•ã€‚è¿™å°±æ˜¯VT1ğŸ‘†çš„ç»“æœï¼Œæ¥ä¸‹æ¥çš„æ“ä½œå°±åœ¨VT1ğŸ‘†çš„åŸºç¡€ä¸Šè¿›è¡Œã€‚ æ‰§è¡ŒONè¿‡æ»¤æ‰§è¡Œå®Œç¬›å¡å°”ç§¯ä»¥åï¼Œæ¥ç€å°±è¿›è¡ŒON a.customer_id = b.customer_idæ¡ä»¶è¿‡æ»¤ï¼Œæ ¹æ®ONä¸­æŒ‡å®šçš„æ¡ä»¶ï¼Œå»æ‰é‚£äº›ä¸ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œå¾—åˆ°VT2è¡¨ğŸ‘‡ï¼Œå†…å®¹å¦‚ä¸‹ï¼š12345678910+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 3 | 9you || 9you | shanghai | 4 | 9you || 9you | shanghai | 5 | 9you || tx | hangzhou | 6 | tx |+-------------+----------+----------+-------------+ ğŸ‘†VT2å°±æ˜¯ç»è¿‡ONæ¡ä»¶ç­›é€‰ä»¥åå¾—åˆ°çš„æœ‰ç”¨æ•°æ®ï¼Œè€Œæ¥ä¸‹æ¥çš„æ“ä½œå°†åœ¨VT2ğŸ‘†çš„åŸºç¡€ä¸Šç»§ç»­è¿›è¡Œã€‚ æ·»åŠ å¤–éƒ¨è¡Œè¿™ä¸€æ­¥åªæœ‰åœ¨è¿æ¥ç±»å‹ä¸ºOUTER JOINæ—¶æ‰å‘ç”Ÿï¼Œå¦‚LEFT OUTER JOINã€RIGHT OUTER JOINå’ŒFULL OUTER JOINã€‚åœ¨å¤§å¤šæ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä¼šçœç•¥æ‰OUTERå…³é”®å­—çš„ï¼Œä½†OUTERè¡¨ç¤ºçš„å°±æ˜¯å¤–éƒ¨è¡Œçš„æ¦‚å¿µã€‚ LEFT OUTER JOINæŠŠå·¦è¡¨è®°ä¸ºä¿ç•™è¡¨ï¼Œå¾—åˆ°çš„ç»“æœä¸ºï¼šğŸ‘‡1234567891011+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 3 | 9you || 9you | shanghai | 4 | 9you || 9you | shanghai | 5 | 9you || tx | hangzhou | 6 | tx || baidu | hangzhou | NULL | NULL |+-------------+----------+----------+-------------+ RIGHT OUTER JOINæŠŠå³è¡¨è®°ä¸ºä¿ç•™è¡¨ï¼Œå¾—åˆ°çš„ç»“æœä¸ºï¼šğŸ‘‡1234567891011+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 3 | 9you || 9you | shanghai | 4 | 9you || 9you | shanghai | 5 | 9you || tx | hangzhou | 6 | tx || NULL | NULL | 7 | NULL |+-------------+----------+----------+-------------+ FULL OUTER JOINæŠŠå·¦å³è¡¨éƒ½ä½œä¸ºä¿ç•™è¡¨ï¼Œå¾—åˆ°çš„ç»“æœä¸ºï¼šğŸ‘‡123456789101112+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 3 | 9you || 9you | shanghai | 4 | 9you || 9you | shanghai | 5 | 9you || tx | hangzhou | 6 | tx || baidu | hangzhou | NULL | NULL || NULL | NULL | 7 | NULL |+-------------+----------+----------+-------------+ æ·»åŠ å¤–éƒ¨è¡Œçš„å·¥ä½œå°±æ˜¯åœ¨VT2è¡¨çš„åŸºç¡€ä¸Šæ·»åŠ ä¿ç•™è¡¨ä¸­è¢«è¿‡æ»¤æ¡ä»¶è¿‡æ»¤æ‰çš„æ•°æ®ï¼Œéä¿ç•™è¡¨ä¸­çš„æ•°æ®è¢«èµ‹äºˆNULLå€¼ï¼Œæœ€åç”Ÿæˆè™šæ‹Ÿè¡¨VT3ã€‚ ç”±äºæˆ‘åœ¨å‡†å¤‡çš„æµ‹è¯•SQLæŸ¥è¯¢é€»è¾‘è¯­å¥ä¸­ä½¿ç”¨çš„æ˜¯LEFT JOINï¼Œè¿‡æ»¤æ‰äº†ä»¥ä¸‹è¿™æ¡æ•°æ®ï¼šğŸ‘‡1| baidu | hangzhou | NULL | NULL | ç°åœ¨å°±æŠŠè¿™æ¡æ•°æ®æ·»åŠ åˆ°VT2è¡¨ä¸­ï¼Œå¾—åˆ°çš„VT3è¡¨å¦‚ä¸‹ï¼šğŸ‘‡1234567891011+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || 9you | shanghai | 3 | 9you || 9you | shanghai | 4 | 9you || 9you | shanghai | 5 | 9you || tx | hangzhou | 6 | tx || baidu | hangzhou | NULL | NULL |+-------------+----------+----------+-------------+ æ¥ä¸‹æ¥çš„æ“ä½œéƒ½ä¼šåœ¨è¯¥VT3è¡¨ä¸Šè¿›è¡Œã€‚ æ‰§è¡ŒWHEREè¿‡æ»¤å¯¹æ·»åŠ å¤–éƒ¨è¡Œå¾—åˆ°çš„VT3è¿›è¡ŒWHEREè¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆ&lt;where_condition&gt;çš„è®°å½•æ‰ä¼šè¾“å‡ºåˆ°è™šæ‹Ÿè¡¨VT4ä¸­ã€‚å½“æˆ‘ä»¬æ‰§è¡ŒWHERE a.city = &#39;hangzhou&#39;çš„æ—¶å€™ï¼Œå°±ä¼šå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼Œå¹¶å­˜åœ¨è™šæ‹Ÿè¡¨VT4ä¸­ï¼šğŸ‘‡12345678+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || 163 | hangzhou | 2 | 163 || tx | hangzhou | 6 | tx || baidu | hangzhou | NULL | NULL |+-------------+----------+----------+-------------+ ä½†æ˜¯åœ¨ä½¿ç”¨WHEREå­å¥æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š ç”±äºæ•°æ®è¿˜æ²¡æœ‰åˆ†ç»„ï¼Œå› æ­¤ç°åœ¨è¿˜ä¸èƒ½åœ¨WHEREè¿‡æ»¤å™¨ä¸­ä½¿ç”¨where_condition=MIN(col)è¿™ç±»å¯¹åˆ†ç»„ç»Ÿè®¡çš„è¿‡æ»¤ï¼› ç”±äºè¿˜æ²¡æœ‰è¿›è¡Œåˆ—çš„é€‰å–æ“ä½œï¼Œå› æ­¤åœ¨SELECTä¸­ä½¿ç”¨åˆ—çš„åˆ«åä¹Ÿæ˜¯ä¸è¢«å…è®¸çš„ï¼Œå¦‚ï¼šSELECT city as c FROM t WHERE c=&#39;shanghai&#39;;æ˜¯ä¸å…è®¸å‡ºç°çš„ã€‚ æ‰§è¡ŒGROUP BYåˆ†ç»„GROUP BYå­å¥ä¸»è¦æ˜¯å¯¹ä½¿ç”¨WHEREå­å¥å¾—åˆ°çš„è™šæ‹Ÿè¡¨è¿›è¡Œåˆ†ç»„æ“ä½œã€‚æˆ‘ä»¬æ‰§è¡Œæµ‹è¯•è¯­å¥ä¸­çš„GROUP BY a.customer_idï¼Œå°±ä¼šå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼šğŸ‘‡1234567+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| 163 | hangzhou | 1 | 163 || baidu | hangzhou | NULL | NULL || tx | hangzhou | 6 | tx |+-------------+----------+----------+-------------+ å¾—åˆ°çš„å†…å®¹ä¼šå­˜å…¥è™šæ‹Ÿè¡¨VT5ğŸ‘†ä¸­ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªVT5ğŸ‘†è™šæ‹Ÿè¡¨ï¼Œæ¥ä¸‹æ¥çš„æ“ä½œéƒ½ä¼šåœ¨è¯¥è¡¨ä¸Šå®Œæˆã€‚ æ‰§è¡ŒHAVINGè¿‡æ»¤HAVINGå­å¥ä¸»è¦å’ŒGROUP BYå­å¥é…åˆä½¿ç”¨ï¼Œå¯¹åˆ†ç»„å¾—åˆ°çš„VT5è™šæ‹Ÿè¡¨è¿›è¡Œæ¡ä»¶è¿‡æ»¤ã€‚å½“æˆ‘æ‰§è¡Œæµ‹è¯•è¯­å¥ä¸­çš„HAVING count(b.order_id) &lt; 2æ—¶ï¼Œå°†å¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š123456+-------------+----------+----------+-------------+| customer_id | city | order_id | customer_id |+-------------+----------+----------+-------------+| baidu | hangzhou | NULL | NULL || tx | hangzhou | 6 | tx |+-------------+----------+----------+-------------+ ğŸ‘†è¿™å°±æ˜¯è™šæ‹Ÿè¡¨VT6ã€‚ SELECTåˆ—è¡¨ç°åœ¨æ‰ä¼šæ‰§è¡Œåˆ°SELECTå­å¥ï¼Œä¸è¦ä»¥ä¸ºSELECTå­å¥è¢«å†™åœ¨ç¬¬ä¸€è¡Œï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œçš„ã€‚ æˆ‘ä»¬æ‰§è¡Œæµ‹è¯•è¯­å¥ä¸­çš„SELECT a.customer_id, COUNT(b.order_id) as total_ordersï¼Œä»è™šæ‹Ÿè¡¨VT6ä¸­é€‰æ‹©å‡ºæˆ‘ä»¬éœ€è¦çš„å†…å®¹ã€‚æˆ‘ä»¬å°†å¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š123456+-------------+--------------+| customer_id | total_orders |+-------------+--------------+| baidu | 0 || tx | 1 |+-------------+--------------+ ä¸ï¼Œè¿˜æ²¡æœ‰å®Œï¼ŒğŸ‘†è¿™åªæ˜¯è™šæ‹Ÿè¡¨VT7ã€‚ æ‰§è¡ŒDISTINCTå­å¥å¦‚æœåœ¨æŸ¥è¯¢ä¸­æŒ‡å®šäº†DISTINCTå­å¥ï¼Œåˆ™ä¼šåˆ›å»ºä¸€å¼ å†…å­˜ä¸´æ—¶è¡¨ï¼ˆå¦‚æœå†…å­˜æ”¾ä¸ä¸‹ï¼Œå°±éœ€è¦å­˜æ”¾åœ¨ç¡¬ç›˜äº†ï¼‰ã€‚è¿™å¼ ä¸´æ—¶è¡¨çš„è¡¨ç»“æ„å’Œä¸Šä¸€æ­¥äº§ç”Ÿçš„è™šæ‹Ÿè¡¨VT7æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯å¯¹è¿›è¡ŒDISTINCTæ“ä½œçš„åˆ—å¢åŠ äº†ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œä»¥æ­¤æ¥é™¤é‡å¤æ•°æ®ã€‚ç”±äºæˆ‘çš„æµ‹è¯•SQLè¯­å¥ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨DISTINCTï¼Œæ‰€ä»¥ï¼Œåœ¨è¯¥æŸ¥è¯¢ä¸­ï¼Œè¿™ä¸€æ­¥ä¸ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿè¡¨ã€‚ æ‰§è¡ŒORDER BYå­å¥å¯¹è™šæ‹Ÿè¡¨ä¸­çš„å†…å®¹æŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œæ’åºï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„è™šæ‹Ÿè¡¨ï¼Œæˆ‘ä»¬æ‰§è¡Œæµ‹è¯•SQLè¯­å¥ä¸­çš„ORDER BY total_orders DESCï¼Œå°±ä¼šå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š123456+-------------+--------------+| customer_id | total_orders |+-------------+--------------+| tx | 1 || baidu | 0 |+-------------+--------------+ å¯ä»¥çœ‹åˆ°è¿™æ˜¯å¯¹total_ordersåˆ—è¿›è¡Œé™åºæ’åˆ—çš„ã€‚ä¸Šè¿°ç»“æœä¼šå­˜å‚¨åœ¨VT8ğŸ‘†ä¸­ã€‚ æ‰§è¡ŒLIMITå­å¥LIMITå­å¥ä»ä¸Šä¸€æ­¥å¾—åˆ°çš„VT8è™šæ‹Ÿè¡¨ä¸­é€‰å‡ºä»æŒ‡å®šä½ç½®å¼€å§‹çš„æŒ‡å®šè¡Œæ•°æ®ã€‚å¯¹äºæ²¡æœ‰åº”ç”¨ORDER BYçš„LIMITå­å¥ï¼Œå¾—åˆ°çš„ç»“æœåŒæ ·æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šçœ‹åˆ°LIMITå­å¥ä¼šå’ŒORDER BYå­å¥ä¸€èµ·ä½¿ç”¨ã€‚ MySQLæ•°æ®åº“çš„LIMITæ”¯æŒå¦‚ä¸‹å½¢å¼çš„é€‰æ‹©ï¼šğŸ‘‡1LIMIT n, m è¡¨ç¤ºä»ç¬¬næ¡è®°å½•å¼€å§‹é€‰æ‹©mæ¡è®°å½•ã€‚è€Œå¾ˆå¤šå¼€å‘äººå‘˜å–œæ¬¢ä½¿ç”¨è¯¥è¯­å¥æ¥è§£å†³åˆ†é¡µé—®é¢˜ã€‚å¯¹äºå°æ•°æ®ï¼Œä½¿ç”¨LIMITå­å¥æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå½“æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œä½¿ç”¨LIMIT n, mæ˜¯éå¸¸ä½æ•ˆçš„ã€‚å› ä¸ºLIMITçš„æœºåˆ¶æ˜¯æ¯æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹æ‰«æï¼Œå¦‚æœéœ€è¦ä»ç¬¬60ä¸‡è¡Œå¼€å§‹ï¼Œè¯»å–3æ¡æ•°æ®ï¼Œå°±éœ€è¦å…ˆæ‰«æå®šä½åˆ°60ä¸‡è¡Œï¼Œç„¶åå†è¿›è¡Œè¯»å–ï¼Œè€Œæ‰«æçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªéå¸¸ä½æ•ˆçš„è¿‡ç¨‹ã€‚æ‰€ä»¥ï¼Œå¯¹äºå¤§æ•°æ®å¤„ç†æ—¶ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦åœ¨åº”ç”¨å±‚å»ºç«‹ä¸€å®šçš„ç¼“å­˜æœºåˆ¶ï¼ˆè²Œä¼¼ç°åœ¨çš„å¤§æ•°æ®å¤„ç†ï¼Œéƒ½æœ‰ç¼“å­˜å“¦ï¼‰ã€‚å„ä½ï¼Œè¯·æœŸå¾…æˆ‘çš„ç¼“å­˜æ–¹é¢çš„æ–‡ç« å“¦ã€‚]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017_12-ç¬¬ä¸‰å‘¨]]></title>
    <url>%2F2017%2F12%2F19%2F2017_12_week_3rd%2F</url>
    <content type="text"><![CDATA[2017_12-ç¬¬ä¸‰å‘¨constå…³é”®å­—const:æ­¤å£°æ˜åˆ›å»ºä¸€ä¸ªå¸¸é‡ï¼Œå…¶ä½œç”¨åŸŸå¯ä»¥æ˜¯å…¨å±€æˆ–æœ¬åœ°å£°æ˜çš„å—ã€‚ ä¸varå˜é‡ä¸åŒï¼Œå…¨å±€å¸¸é‡ä¸ä¼šå˜ä¸ºçª—å£å¯¹è±¡(widows)çš„å±æ€§ã€‚éœ€è¦ä¸€ä¸ªå¸¸æ•°çš„åˆå§‹åŒ–å™¨ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¿…é¡»åœ¨å£°æ˜çš„åŒä¸€è¯­å¥ä¸­æŒ‡å®šå®ƒçš„å€¼ï¼ˆè¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºä»¥åä¸èƒ½æ›´æ”¹ï¼‰ã€‚ constå£°æ˜åˆ›å»ºä¸€ä¸ªå€¼çš„åªè¯»å¼•ç”¨ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ‰€æŒæœ‰çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œåªæ˜¯å˜é‡æ ‡è¯†ç¬¦ä¸èƒ½é‡æ–°åˆ†é…ã€‚ä¾‹å¦‚ï¼Œåœ¨å¼•ç”¨å†…å®¹æ˜¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€å¯ä»¥æ”¹å˜å¯¹è±¡çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œå…¶å‚æ•°ï¼‰ã€‚^1 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// æ³¨æ„: å¸¸é‡åœ¨å£°æ˜çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å¤§å°å†™ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹å…¨éƒ¨ç”¨å¤§å†™å­—æ¯ã€‚ // å®šä¹‰å¸¸é‡MY_FAVå¹¶èµ‹å€¼7const MY_FAV = 7;// æŠ¥é”™MY_FAV = 20;// è¾“å‡º 7console.log("my favorite number is: " + MY_FAV);// å°è¯•é‡æ–°å£°æ˜ä¼šæŠ¥é”™ const MY_FAV = 20;// MY_FAV ä¿ç•™ç»™ä¸Šé¢çš„å¸¸é‡ï¼Œè¿™ä¸ªæ“ä½œä¼šå¤±è´¥var MY_FAV = 20; // ä¹Ÿä¼šæŠ¥é”™let MY_FAV = 20;// æ³¨æ„å—èŒƒå›´çš„æ€§è´¨å¾ˆé‡è¦if (MY_FAV === 7) &#123; // æ²¡é—®é¢˜ï¼Œå¹¶ä¸”åˆ›å»ºäº†ä¸€ä¸ªå—ä½œç”¨åŸŸå˜é‡ MY_FAV // (works equally well with let to declare a block scoped non const variable) let MY_FAV = 20; // MY_FAV ç°åœ¨ä¸º 20 console.log('my favorite number is ' + MY_FAV); // è¿™è¢«æå‡åˆ°å…¨å±€ä¸Šä¸‹æ–‡å¹¶å¼•å‘é”™è¯¯ var MY_FAV = 20;&#125;// MY_FAV ä¾æ—§ä¸º7console.log("my favorite number is " + MY_FAV);// å¸¸é‡è¦æ±‚ä¸€ä¸ªåˆå§‹å€¼const FOO; // SyntaxError: missing = in const declaration// å¸¸é‡å¯ä»¥å®šä¹‰æˆå¯¹è±¡const MY_OBJECT = &#123;"key": "value"&#125;;// é‡å†™å¯¹è±¡å’Œä¸Šé¢ä¸€æ ·ä¼šå¤±è´¥MY_OBJECT = &#123;"OTHER_KEY": "value"&#125;;// å¯¹è±¡å±æ€§å¹¶ä¸åœ¨ä¿æŠ¤çš„èŒƒå›´å†…ï¼Œä¸‹é¢è¿™ä¸ªå£°æ˜ä¼šæˆåŠŸæ‰§è¡ŒMY_OBJECT.key = "otherValue";// ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰æ•°ç»„const MY_ARRAY = [];// It's possible to push items into the array// å¯ä»¥å‘æ•°ç»„å¡«å……æ•°æ®MY_ARRAY.push('A'); // ["A"]// ä½†æ˜¯ï¼Œå°†ä¸€ä¸ªæ–°æ•°ç»„èµ‹ç»™å˜é‡ä¼šå¼•å‘é”™è¯¯MY_ARRAY = ['B'] letå…³é”®å­—letè¯­å¥å£°æ˜ä¸€ä¸ªå—çº§ä½œç”¨åŸŸçš„æœ¬åœ°å˜é‡ï¼Œå¹¶ä¸”å¯é€‰çš„å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªå€¼ã€‚^2 ä½œç”¨åŸŸè§„åˆ™letå£°æ˜çš„å˜é‡åªåœ¨å…¶å£°æ˜çš„å—æˆ–å­å—ä¸­å¯ç”¨ï¼Œè¿™ä¸€ç‚¹ï¼Œä¸varç›¸ä¼¼ã€‚äºŒè€…ä¹‹é—´æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºvarå£°æ˜çš„å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå°é—­å‡½æ•°ã€‚1234567891011121314151617function varTest() &#123; var x = 1; if (true) &#123; var x = 2; // åŒæ ·çš„å˜é‡! console.log(x); // 2 &#125; console.log(x); // 2&#125;function letTest() &#123; let x = 1; if (true) &#123; let x = 2; // ä¸åŒçš„å˜é‡ console.log(x); // 2 &#125; console.log(x); // 1&#125; ç®€åŒ–å†…éƒ¨å‡½æ•°ä»£ç å½“ç”¨åˆ°å†…éƒ¨å‡½æ•°çš„æ—¶å€™ï¼Œletä¼šè®©ä½ çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œï¼Œå¯¹æ¯”ä¹‹å‰[ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE)]ã€‚(https://someoneiscoding.github.io/2017/12/10/%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F%28IIFE%29/#iife)123456789101112131415161718192021222324252627var list = document.getElementById('list');for (let i = 1; i &lt;= 5; i++) &#123; let item = document.createElement('li'); item.appendChild(document.createTextNode('Item ' + i)); item.onclick = function(ev) &#123; console.log('Item ' + i + ' is clicked.'); &#125;; list.appendChild(item);&#125;// to achieve the same effect with 'var'// you have to create a different context// using a closure to preserve the value// è¦ç”¨varå…³é”®å­—å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨é—­åŒ…æ¥ç»´æŠ¤ä¸åŒçš„ä¸Šä¸‹æ–‡ç¯å¢ƒä»¥ä¿æŠ¤å€¼(ä¸è¢«æ”¹å˜)ã€‚for (var i = 1; i &lt;= 5; i++) &#123; var item = document.createElement('li'); item.appendChild(document.createTextNode('Item ' + i)); (function(i)&#123; item.onclick = function(ev) &#123; console.log('Item ' + i + ' is clicked.'); &#125;; &#125;)(i); list.appendChild(item);&#125; â†‘ ä»¥ä¸Šç¤ºä¾‹çš„å·¥ä½œåŸç†æ˜¯å› ä¸ºï¼ˆåŒ¿åï¼‰å†…éƒ¨å‡½æ•°çš„äº”ä¸ªå®ä¾‹å¼•ç”¨äº†å˜é‡içš„äº”ä¸ªä¸åŒå®ä¾‹ã€‚æ³¨æ„ï¼Œå¦‚æœä½ å°†letæ›¿æ¢ä¸ºvarï¼Œåˆ™å®ƒå°†æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºæ‰€æœ‰å†…éƒ¨å‡½æ•°éƒ½å°†è¿”å›ç›¸åŒçš„i=6çš„æœ€ç»ˆå€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†åˆ›å»ºæ–°å…ƒç´ çš„ä»£ç ç§»åŠ¨åˆ°æ¯ä¸ªå¾ªç¯çš„ä½œç”¨åŸŸæ¥ä¿æŒå¾ªç¯æ›´æ¸…æ™°ã€‚ åœ¨ç¨‹åºæˆ–è€…å‡½æ•°çš„é¡¶å±‚ï¼Œletå¹¶ä¸ä¼šåƒvarä¸€æ ·åœ¨å…¨å±€å¯¹è±¡ä¸Šåˆ›é€ ä¸€ä¸ªå±æ€§ï¼Œæ¯”å¦‚ï¼šğŸ‘‡1234var x = 'global';let y = 'global';console.log(this.x); // "global"console.log(this.y); // undefined letæš‚å­˜æ­»åŒºçš„é”™è¯¯åœ¨ ECMAScript 2015 ä¸­ï¼Œletç»‘å®šä¸å—å˜é‡æå‡çš„çº¦æŸï¼Œè¿™æ„å‘³ç€letå£°æ˜ä¸ä¼šè¢«æå‡åˆ°å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„é¡¶éƒ¨ã€‚åœ¨å—ä¸­çš„å˜é‡åˆå§‹åŒ–ä¹‹å‰ï¼Œå¼•ç”¨å®ƒå°†ä¼šå¯¼è‡´ReferenceErrorï¼ˆè€Œä½¿ç”¨varå£°æ˜å˜é‡åˆ™æ°æ°ç›¸åï¼Œè¯¥å˜é‡çš„å€¼æ˜¯undefinedï¼‰ã€‚è¯¥å˜é‡å¤„äºä»å—å¼€å§‹åˆ°åˆå§‹åŒ–å¤„ç†çš„â€œæš‚å­˜æ­»åŒºâ€ã€‚ğŸ‘‡123456function do_something() &#123; console.log(bar); // undefined console.log(foo); // ReferenceError: foo is not defined var bar = 1; let foo = 2;&#125; ç”±äºè¯æ³•ä½œç”¨åŸŸï¼Œè¡¨è¾¾å¼(foo + 55)å†…çš„æ ‡è¯†ç¬¦fooä¼šè§£æä¸ºifå—çš„fooï¼Œè€Œä¸æ˜¯è¦†ç›–å€¼ä¸º33çš„fooã€‚åœ¨è¿™ä¸€è¡Œä¸­ï¼Œifå—çš„fooå·²ç»åœ¨è¯æ³•ç¯å¢ƒä¸­åˆ›å»ºï¼Œä½†å°šæœªè¾¾åˆ°ï¼ˆå¹¶ç»ˆæ­¢ï¼‰å…¶åˆå§‹åŒ–ï¼ˆè¿™æ˜¯è¯­å¥æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼‰ï¼šå®ƒä»å¤„äºæš‚å­˜æ­»åŒºã€‚ğŸ‘‡1234567function test()&#123; var foo = 33; if (true) &#123; let foo = (foo + 55); // ReferenceError &#125;&#125;test(); å­—é¢é‡ (Literals)(è¯‘æ³¨ï¼šå­—é¢é‡æ˜¯ç”±è¯­æ³•è¡¨è¾¾å¼å®šä¹‰çš„å¸¸é‡ï¼›æˆ–ï¼Œé€šè¿‡ç”±ä¸€å®šå­—è¯ç»„æˆçš„è¯­è¯è¡¨è¾¾å¼å®šä¹‰çš„å¸¸é‡)^3 åœ¨JavaScriptä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å„ç§å­—é¢é‡ã€‚è¿™äº›å­—é¢é‡æ˜¯è„šæœ¬ä¸­æŒ‰å­—é¢æ„æ€ç»™å‡ºçš„å›ºå®šçš„å€¼ï¼Œè€Œä¸æ˜¯å˜é‡ã€‚ï¼ˆè¯‘æ³¨ï¼šå­—é¢é‡æ˜¯å¸¸é‡ï¼Œå…¶å€¼æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”åœ¨ç¨‹åºè„šæœ¬è¿è¡Œä¸­ä¸å¯æ›´æ”¹ï¼Œæ¯”å¦‚falseï¼Œ3.1415ï¼ŒthisIsStringOfHelloworld ï¼ŒinvokedFunction:myFunction(â€œmyArgumentâ€)ã€‚ 1var fish = ["Lion", , "Angel"]; ğŸ‘†åœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·²è¢«èµ‹å€¼çš„å…ƒç´ ï¼Œå’Œä¸€ä¸ªç©ºå…ƒç´ ï¼ˆfish[0]æ˜¯â€Lionâ€ï¼Œfish[1]æ˜¯undefinedï¼Œè€Œfish[2]æ˜¯â€Angelâ€ï¼›è¯‘æ³¨ï¼šæ­¤æ—¶æ•°ç»„çš„é•¿åº¦å±æ€§fish.lengthæ˜¯3)ã€‚ å¦‚æœä½ åœ¨å…ƒç´ åˆ—è¡¨çš„å°¾éƒ¨æ·»åŠ äº†ä¸€ä¸ªé€—å·ï¼Œå®ƒå°†ä¼šè¢«å¿½ç•¥ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯3ï¼Œå¹¶ä¸å­˜åœ¨myList[3]è¿™ä¸ªå…ƒç´ ï¼ˆè¯‘æ³¨ï¼šè¿™æ˜¯æŒ‡æ•°ç»„çš„ç¬¬4ä¸ªå…ƒç´ å™¢ï¼Œä½œè€…æ˜¯åœ¨å¸®å¤§å®¶å¤ä¹ æ•°ç»„å…ƒç´ çš„æ’åºå‘½åæ–¹æ³•ï¼‰ã€‚å…ƒç´ åˆ—è¡¨ä¸­å…¶å®ƒæ‰€æœ‰çš„é€—å·éƒ½è¡¨ç¤ºä¸€ä¸ªæ–°å…ƒç´ ï¼ˆçš„å¼€å§‹ï¼‰ã€‚ğŸ‘‡12var myList = ['home', , 'school', ];// å°¾éƒ¨çš„é€—å·åœ¨æ—©æœŸç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¼šäº§ç”Ÿé”™è¯¯ï¼Œå› è€Œç¼–ç¨‹æ—¶çš„æœ€ä½³å®è·µæ–¹å¼å°±æ˜¯ç§»é™¤å®ƒä»¬ã€‚ 2017-12-20ci:Case Insensitive, å³ â€œå¤§å°å†™ä¸æ•æ„Ÿâ€, a å’Œ A ä¼šåœ¨å­—ç¬¦åˆ¤æ–­ä¸­ä¼šè¢«å½“åšä¸€æ ·çš„ã€‚utf8_unicode_ciå’Œutf8_general_ciå¯¹ä¸­ã€è‹±æ–‡æ¥è¯´æ²¡æœ‰å®è´¨çš„å·®åˆ«ã€‚utf8_general_ciæ ¡å¯¹é€Ÿåº¦å¿«ï¼Œä½†å‡†ç¡®åº¦ç¨å·®ã€‚utf8_unicode_ciå‡†ç¡®åº¦é«˜ï¼Œä½†æ ¡å¯¹é€Ÿåº¦ç¨æ…¢ã€‚ å¦‚æœä½ çš„åº”ç”¨æœ‰å¾·è¯­ã€æ³•è¯­æˆ–è€…ä¿„è¯­ï¼Œè¯·ä¸€å®šä½¿ç”¨utf8_unicode_ciã€‚ä¸€èˆ¬ç”¨utf8_general_ciå°±å¤Ÿäº†ã€‚]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>var</tag>
        <tag>let</tag>
        <tag>const</tag>
        <tag>å­—é¢é‡</tag>
        <tag>literals</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptçš„å˜é‡æå‡åŠä½œç”¨åŸŸ]]></title>
    <url>%2F2017%2F12%2F14%2Fjavascript_coping_and_hoisting%2F</url>
    <content type="text"><![CDATA[JavaScriptçš„å˜é‡æå‡åŠä½œç”¨åŸŸJavaScriptçš„è¯­æ³•ç®€ç›´ä¸è¦å¤ªçµæ´»ï¼Œçµæ´»åˆ°å¯¼å‡ºæ˜¯å‘ï¼Œç”šè‡³æœ‰äººè¯´JavaScriptè¯­è¨€ä¸å¤Ÿæˆç†Ÿã€‚ã€‚ Code once,debug everywhere. ä¸‹é¢ç®€å•æ•´ç†ä¸‹å¸¸è§çš„å‘å‘ã€‚ å˜é‡æå‡(hoisting)javascriptçš„å˜é‡å£°æ˜å…·æœ‰hoistingæœºåˆ¶ï¼ŒJavaScriptå¼•æ“åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šæŠŠæ‰€æœ‰å˜é‡çš„å£°æ˜éƒ½æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€å‰é¢ï¼š12345var v = "hello";(function()&#123; console.log(v); var v = "world";&#125;)(); å€˜è‹¥è¿™æ˜¯ç½‘é¡µä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™ç¬¬ä¸‰è¡Œä»£ç è¾“å‡ºundefined,è‹¥æ˜¯åœ¨æµè§ˆå™¨DevToolsçš„consoleä¸­è¿è¡Œçš„è¯ï¼Œåˆ™æ˜¯ä¸¤æ¡undefinedç»“æœï¼Œç¬¬ä¸€æ¡æ˜¯console.log()è¾“å‡ºçš„ï¼Œç¬¬äºŒæ¡æ˜¯æ‰§è¡Œ(é—­åŒ…)å‡½æ•°æ—¶è¿”å›çš„é»˜è®¤å€¼(æ²¡æœ‰å®šä¹‰è¿”å›å€¼æ—¶)undefinedã€‚å…¶å®ä¸Šè¾¹ğŸ‘†çš„ä»£ç ç­‰ä»·äºï¼šğŸ‘‡1234567var v = "hello";(function()&#123; var v; //declaration hoisting å˜é‡å£°æ˜æå‡ console.log(v); v = "world";&#125;)();//ç¬¬ä¸‰è¡Œä¸­ï¼Œåªé‡æ–°å£°æ˜äº†vï¼Œæ²¡æœ‰å®šä¹‰(åˆå§‹åŒ–èµ‹å€¼),æ‰€ä»¥è¿”å›undefinedã€‚ ä¸‹é¢ç»™æˆ‘ä»¬ç¨åŠ æ”¹åŠ¨ä¸‹ï¼Œï¼ŒğŸ‘‡123456var v = "hello";if(true)&#123; console.log(v); var v = "world";&#125;// hello å¦‚æœJavaScriptæœ‰å—ä½œç”¨åŸŸçš„è¯ï¼Œåº”è¯¥ä¼šæŠ¥é”™å§ï¼Œï¼Œå†…å®¹å¤§æ¦‚æ˜¯ç¬¬4è¡Œå˜é‡vå·²ç»è¢«å®šä¹‰ä»€ä¹ˆçš„ã€‚è¿™æ ·è¯´ä¸å¤ªæ˜æ˜¾ï¼Œï¼Œçœ‹è¿™ä¸ªï¼šğŸ‘‡12345for(var i = 0;i &lt; 10; i++)&#123; console.log(i);&#125;console.log(i);//10console.log(window.i);//10 ä¸Šè¾¹åœ¨forå¾ªç¯ä¸­å£°æ˜çš„å˜é‡iåº”è¯¥åªå­˜åœ¨ä¸forå¾ªç¯çš„ä»£ç å—ä¸­ï¼Œä½†æ˜¯å´å¯ä»¥åœ¨ä»£ç å—å¤–è®¿é—®ï¼Œå¤–è¾¹å£°æ˜çš„å˜é‡é»˜è®¤æ˜¯windowå¯¹è±¡çš„å±æ€§ã€‚ç”±æ­¤å¯è§javascriptæ˜¯æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„ã€‚ä½†å‡½æ•°æ˜¯JavaScriptä¸­å”¯ä¸€æ‹¥æœ‰è‡ªèº«ä½œç”¨åŸŸçš„ç»“æ„ã€‚å°±åƒæ–‡ç« å¼€å¤´çš„ç¬¬ä¸€ä¸ªä»£ç å—ä¸€æ ·ï¼Œå†å°æ”¹ä¸‹ğŸ‘‡ï¼š123456789var v = "hello";(function()&#123; console.log("v inside:"+v); var v = "world";&#125;)();console.log("v outside:"+v);//v inside:undefined//v outside:hello æ­¤æ—¶ï¼Œé—­åŒ…å‡½æ•°å¤–æ˜¯è®¿é—®ä¸åˆ°å†…éƒ¨çš„å˜é‡v = &quot;world&quot;çš„ï¼Œï¼Œæ‰€ä»¥ï¼Œoutsideè¾“å‡ºçš„å€¼ä¸ºhelloã€‚è‹¥æ˜¯ä¸æ­»å¿ƒï¼Œï¼Œæˆ‘ä»¬å†æ”¹ï¼šğŸ‘‡12345678910var v = "hello";(function()&#123; var v = "world"; console.log("v inside:"+v);&#125;)();console.log("v outside:"+v);//v inside:world//v outside:hello//æ­¤å¤„ä¸è§£é‡Šã€‚ è¿˜æ˜¯å…³äºå‡½æ•°å†…çš„å—çº§ä½œç”¨åŸŸï¼Œï¼Œæˆ‘å†æ¢ç§æ–¹å¼ï¼šğŸ‘‡1234567var i = function()&#123; var h = 9; console.log("inside h:"+h);&#125;console.log("outside h:"+h)// ç¬¬5è¡Œç›´æ¥æŠ¥é”™ï¼šh is not definedã€‚ å…¶å®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†æ”¹ï¼Œï¼Œå…³äºéšå¼å£°æ˜çš„å…¨å±€å˜é‡^11234567891011var i = function()&#123; h = 9; //æ­¤å¤„å»æ‰å…³é”®å­—var console.log("inside h:"+h);&#125;i();console.log("outside h:"+h);// inside h:9// outside h:9// åœ¨å‡½æ•°å†…éƒ¨å£°æ˜å˜é‡æ—¶çœç•¥varå…³é”®å­—ï¼Œä¼šé»˜è®¤å½“åšå…¨å±€å˜é‡ã€‚// å¦å¤–ï¼Œå¦‚æœæ²¡æœ‰ç¬¬äº”è¡Œçš„i()ï¼›å‡½æ•°iè°ƒç”¨ï¼Œåˆ™ç¬¬å…­è¡Œè¿˜æ˜¯ä¼šæŠ¥é”™Uncaught ReferenceError: h is not defined ã€‹ã€‹ã€‹2017-12-19-è¡¥å……ã€Šã€Šã€Š1234567891011var x = 0;function f()&#123; var x = y = 1; // xåœ¨å‡½æ•°å†…éƒ¨å£°æ˜ï¼Œyä¸æ˜¯ï¼&#125;f();console.log(x, y); // 0, 1// xæ˜¯å…¨å±€å˜é‡ã€‚// yæ˜¯éšå¼å£°æ˜çš„å…¨å±€å˜é‡ã€‚// ç¬¬4è¡Œå¯ä»¥è¿‘ä¼¼ç†è§£ä¸º y = 1;var x = y; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæå‡çš„ä¸å…‰æœ‰å˜é‡ï¼Œå‡½æ•°å£°æ˜ä¹Ÿä¼šæå‡ï¼Œä½†æ˜¯é€šè¿‡å‡½æ•°å­—é¢é‡å®šä¹‰çš„å‡½æ•°ä¸ä¼šè¢«æå‡ï¼Œè¯¦è§[JavaScriptæ‰§è¡Œé¡ºåº]ã€‚(https://someoneiscoding.github.io/2017/12/02/JavaScript%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/) åå­—è§£æé¡ºåº javascriptä¸­ä¸€ä¸ªåå­—(name)ä»¥å››ç§æ–¹å¼è¿›å…¥ä½œç”¨åŸŸ(scope)ï¼Œå…¶ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š1ã€è¯­è¨€å†…ç½®ï¼šæ‰€æœ‰çš„ä½œç”¨åŸŸä¸­éƒ½æœ‰ this å’Œ arguments å…³é”®å­—2ã€å½¢å¼å‚æ•°ï¼šå‡½æ•°çš„å‚æ•°åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­éƒ½æ˜¯æœ‰æ•ˆçš„3ã€å‡½æ•°å£°æ˜ï¼šå½¢å¦‚function foo() {}4ã€å˜é‡å£°æ˜ï¼šå¦‚ var;åå­—å£°æ˜çš„ä¼˜å…ˆçº§å¦‚ä¸ŠğŸ‘†æ‰€ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªå˜é‡çš„åå­—ä¸å‡½æ•°çš„åå­—ç›¸åŒï¼Œé‚£ä¹ˆå‡½æ•°çš„åå­—ä¼šè¦†ç›–å˜é‡çš„åå­—ï¼Œæ— è®ºå…¶åœ¨ä»£ç ä¸­çš„é¡ºåºå¦‚ä½•ã€‚ä½†åå­—çš„åˆå§‹åŒ–å´æ˜¯æŒ‰å…¶åœ¨ä»£ç ä¸­ä¹¦å†™çš„é¡ºåºè¿›è¡Œçš„ï¼Œä¸å—ä»¥ä¸Šä¼˜å…ˆçº§çš„å½±å“ã€‚çœ‹ä»£ç ï¼š123456789(function()&#123; function foo()&#123;&#125; console.log(typeof foo); //function var foo; console.log(typeof foo); //function foo = "foo"; console.log(typeof foo); //string&#125;)();]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017_12-ç¬¬äºŒå‘¨]]></title>
    <url>%2F2017%2F12%2F13%2F2017_12_week_2nd%2F</url>
    <content type="text"><![CDATA[2017_12-ç¬¬äºŒå‘¨1var a = a || &#123;&#125; ğŸ‘†ç­‰ä»·äºğŸ‘‡1234var a;function(a)&#123; if(a === 0 || a === "" || a === false || a === null || a === undefined) a = &#123;&#125;&#125; åœ¨ä¹‹å‰å›ºæœ‰çš„å°è±¡ä¸­ï¼Œé€»è¾‘ä¸&amp;&amp;å’Œé€»è¾‘æˆ–||éƒ½æ˜¯å‡ºç°åœ¨ifæ¡ä»¶è¯­å¥ä¸­ï¼Œä¸€èˆ¬ç”¨æ¥åšåˆ¤æ–­æ¡ä»¶ä½¿ç”¨ï¼Œif()æ‹¬å·ä¸­ä¼šä¾æ®a==1 || b!=1è¡¨è¾¾å¼çš„è¿”å›å€¼trueorfalseæ¥åšåˆ¤æ–­ã€‚ğŸ‘‡123if(a==1 || b!=1)&#123; //do something;&#125; çŒ›ç„¶é—´çœ‹åˆ°var a = a || {}æœ‰äº›æ— æªï¼Œï¼Œåæ¥å¾—çŸ¥ï¼Œ||è¿”å›çš„ä¸æ˜¯booleanå€¼trueorfalseï¼Œè€Œæ˜¯ä¸¤è¾¹çš„è¡¨è¾¾å¼ï¼æ¯”å¦‚a==1å’Œb!=1,å› ä¸ºåŒç›®è¿ç®—ç¬¦çš„è¿ç®—ä¼˜å…ˆçº§é«˜äºé€»è¾‘æˆ–ï¼Œæ‰€ä»¥æœ€ç»ˆè¿”å›çš„æ˜¯è¡¨è¾¾çš„å€¼ã€‚ TTFB:Time To First Byte è¯·æ±‚å‘é€ï¼šæœ¬æœºâ€”â€”&gt;è¿è¥å•†è·¯ç”±â€”â€”&gt;æœåŠ¡å™¨æ”¶åˆ°å“åº”ï¼šæœåŠ¡å™¨â€”â€”&gt;è¿è¥å•†è·¯ç”±â€”â€”&gt;æœ¬æœº]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>é€»è¾‘æˆ–</tag>
        <tag>TTFB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹(ä¸€)ï¼šå°è£…]]></title>
    <url>%2F2017%2F12%2F11%2Fjavascript_oop-encapsulation%2F</url>
    <content type="text"><![CDATA[Javascript é¢å‘å¯¹è±¡ç¼–ç¨‹(ä¸€)ï¼šå°è£…æœ€è¿‘ä¸€ç›´åœ¨ç”¨ç™¾åº¦çš„echartsåšå›¾è¡¨ä»€ä¹ˆçš„ï¼Œåœ¨é…ç½®é¡¹ä¸­çš„optionæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œï¼Œlike this var option = {}ï¼Œï¼Œæœ‰æ—¶éœ€è¦å¤šä¸ªoptionå¯¹è±¡ï¼Œå¤åˆ¶æ¥å¤åˆ¶å»ï¼Œä¹Ÿåªæ˜¯å¤åˆ¶çš„å˜é‡ï¼ŒæŒ‡å‘çš„è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨ã€‚ã€‚å¾—å¥½å¥½å­¦ä¹ ä¸‹ï¼Œç¿»æ¥è¦†å»è¿˜æ˜¯é˜®ä¸€å³°è€å¸ˆçš„æ€»ç»“æœ€å‹å¥½~ åŸæ–‡é“¾æ¥ï¼šJavascript é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šå°è£… - by é˜®ä¸€å³° å­¦ä¹ Javascriptï¼Œæœ€éš¾çš„åœ°æ–¹æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è§‰å¾—ï¼ŒObjectï¼ˆå¯¹è±¡ï¼‰æœ€éš¾ã€‚å› ä¸ºJavascriptçš„Objectæ¨¡å‹å¾ˆç‹¬ç‰¹ï¼Œå’Œå…¶ä»–è¯­è¨€éƒ½ä¸ä¸€æ ·ï¼Œåˆå­¦è€…ä¸å®¹æ˜“æŒæ¡ã€‚ä¸‹é¢å°±æ˜¯æˆ‘çš„å­¦ä¹ ç¬”è®°ï¼Œå¸Œæœ›å¯¹å¤§å®¶å­¦ä¹ è¿™ä¸ªéƒ¨åˆ†æœ‰æ‰€å¸®åŠ©ã€‚æˆ‘ä¸»è¦å‚è€ƒäº†ä»¥ä¸‹ä¸¤æœ¬ä¹¦ç±ï¼š ã€Šé¢å‘å¯¹è±¡çš„Javascriptã€‹ï¼ˆObject-Oriented JavaScriptï¼‰ ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹ï¼ˆProfessional JavaScript for Web Developers, 2nd Edition) å®ƒä»¬éƒ½æ˜¯éå¸¸ä¼˜ç§€çš„Javascriptè¯»ç‰©ï¼Œæ¨èé˜…è¯»ã€‚ç¬”è®°åˆ†æˆä¸‰éƒ¨åˆ†ã€‚ä»Šå¤©çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯è®¨è®ºâ€å°è£…â€ï¼ˆEncapsulationï¼‰ï¼Œåé¢çš„ç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†è®¨è®ºâ€ç»§æ‰¿â€ï¼ˆInheritanceï¼‰ã€‚ ==== ==== ==== ==== ==== ==== ==== Javascriptæ˜¯ä¸€ç§åŸºäºå¯¹è±¡ï¼ˆobject-basedï¼‰çš„è¯­è¨€ï¼Œä½ é‡åˆ°çš„æ‰€æœ‰ä¸œè¥¿å‡ ä¹éƒ½æ˜¯å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå®ƒåˆä¸æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰è¯­è¨€ï¼Œå› ä¸ºå®ƒçš„è¯­æ³•ä¸­æ²¡æœ‰classï¼ˆç±»ï¼‰ã€‚ é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬è¦æŠŠâ€å±æ€§â€ï¼ˆpropertyï¼‰å’Œâ€æ–¹æ³•â€ï¼ˆmethodï¼‰ï¼Œå°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œç”šè‡³è¦ä»åŸå‹å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ ä¸€ã€ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„åŸå§‹æ¨¡å¼å‡å®šæˆ‘ä»¬æŠŠçŒ«çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰â€åå­—â€å’Œâ€é¢œè‰²â€ä¸¤ä¸ªå±æ€§ã€‚1234var Cat = &#123; name : '', color : ''&#125; ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿™ä¸ªåŸå‹å¯¹è±¡çš„è§„æ ¼ï¼ˆschemaï¼‰ï¼Œç”Ÿæˆä¸¤ä¸ªå®ä¾‹å¯¹è±¡ã€‚1234567var cat1 = &#123;&#125;; // åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡cat1.name = "å¤§æ¯›"; // æŒ‰ç…§åŸå‹å¯¹è±¡çš„å±æ€§èµ‹å€¼cat1.color = "é»„è‰²";var cat2 = &#123;&#125;;cat2.name = "äºŒæ¯›";cat2.color = "é»‘è‰²"; å¥½äº†ï¼Œè¿™å°±æ˜¯æœ€ç®€å•çš„å°è£…äº†ï¼ŒæŠŠä¸¤ä¸ªå±æ€§å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„å†™æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯å¦‚æœå¤šç”Ÿæˆå‡ ä¸ªå®ä¾‹ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ï¼›äºŒæ˜¯å®ä¾‹ä¸åŸå‹ä¹‹é—´ï¼Œæ²¡æœ‰ä»»ä½•åŠæ³•ï¼Œå¯ä»¥çœ‹å‡ºæœ‰ä»€ä¹ˆè”ç³»ã€‚ äºŒã€åŸå§‹æ¨¡å¼çš„æ”¹è¿›æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚123456function Cat(name,color) &#123; return &#123; name:name, color:color &#125;&#125; ç„¶åç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œå°±ç­‰äºæ˜¯åœ¨è°ƒç”¨å‡½æ•°ï¼š12var cat1 = Cat("å¤§æ¯›","é»„è‰²");var cat2 = Cat("äºŒæ¯›","é»‘è‰²"); è¿™ç§æ–¹æ³•çš„é—®é¢˜ä¾ç„¶æ˜¯ï¼Œcat1å’Œcat2ä¹‹é—´æ²¡æœ‰å†…åœ¨çš„è”ç³»ï¼Œä¸èƒ½åæ˜ å‡ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡çš„å®ä¾‹ã€‚ ä¸‰ã€æ„é€ å‡½æ•°æ¨¡å¼ä¸ºäº†è§£å†³ä»åŸå‹å¯¹è±¡ç”Ÿæˆå®ä¾‹çš„é—®é¢˜ï¼ŒJavascriptæä¾›äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆConstructorï¼‰æ¨¡å¼ã€‚ æ‰€è°“â€æ„é€ å‡½æ•°â€ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨ä½¿ç”¨äº†thiså˜é‡ã€‚å¯¹æ„é€ å‡½æ•°ä½¿ç”¨newè¿ç®—ç¬¦ï¼Œå°±èƒ½ç”Ÿæˆå®ä¾‹ï¼Œå¹¶ä¸”thiså˜é‡ä¼šç»‘å®šåœ¨å®ä¾‹å¯¹è±¡ä¸Šã€‚æ¯”å¦‚ï¼ŒçŒ«çš„åŸå‹å¯¹è±¡ç°åœ¨å¯ä»¥è¿™æ ·å†™:1234function Cat(name,color)&#123; this.name=name; this.color=color;&#125; æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ç”Ÿæˆå®ä¾‹å¯¹è±¡äº†ã€‚1234var cat1 = new Cat("å¤§æ¯›","é»„è‰²");var cat2 = new Cat("äºŒæ¯›","é»‘è‰²");alert(cat1.name); // å¤§æ¯›alert(cat1.color); // é»„è‰² è¿™æ—¶cat1å’Œcat2ä¼šè‡ªåŠ¨å«æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚12alert(cat1.constructor == Cat); //truealert(cat2.constructor == Cat); //true Javascriptè¿˜æä¾›äº†ä¸€ä¸ªinstanceofè¿ç®—ç¬¦ï¼ŒéªŒè¯åŸå‹å¯¹è±¡ä¸å®ä¾‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚12alert(cat1 instanceof Cat); //truealert(cat2 instanceof Cat); //true instanceofä¸æ˜¯é©¼å³°å‘½åï¼Œï¼Œç±»ä¼¼çš„è¿˜æœ‰typeof â€”â€”æ¥è‡ªsomeone å››ã€æ„é€ å‡½æ•°æ¨¡å¼çš„é—®é¢˜æ„é€ å‡½æ•°æ–¹æ³•å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªæµªè´¹å†…å­˜çš„é—®é¢˜ã€‚è¯·çœ‹ï¼Œæˆ‘ä»¬ç°åœ¨ä¸ºCatå¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸å˜çš„å±æ€§typeï¼ˆç§ç±»ï¼‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ–¹æ³•eatï¼ˆåƒï¼‰ã€‚é‚£ä¹ˆï¼ŒåŸå‹å¯¹è±¡Catå°±å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š123456function Cat(name,color)&#123; this.name = name; this.color = color; this.type = "çŒ«ç§‘åŠ¨ç‰©"; this.eat = function()&#123;alert("åƒè€é¼ ");&#125;;&#125; è¿˜æ˜¯é‡‡ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œç”Ÿæˆå®ä¾‹ï¼š1234var cat1 = new Cat("å¤§æ¯›","é»„è‰²");var cat2 = new Cat ("äºŒæ¯›","é»‘è‰²");alert(cat1.type); // çŒ«ç§‘åŠ¨ç‰©cat1.eat(); // åƒè€é¼  è¡¨é¢ä¸Šå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™æ ·åšï¼Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ã€‚é‚£å°±æ˜¯å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œtypeå±æ€§å’Œeat()æ–¹æ³•éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæ¯ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œéƒ½å¿…é¡»ä¸ºé‡å¤çš„å†…å®¹ï¼Œå¤šå ç”¨ä¸€äº›å†…å­˜ã€‚è¿™æ ·æ—¢ä¸ç¯ä¿ï¼Œä¹Ÿç¼ºä¹æ•ˆç‡ã€‚1alert(cat1.eat == cat2.eat); //false äº”ã€Prototypeæ¨¡å¼Javascriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé‚£äº›ä¸å˜çš„å±æ€§å’Œæ–¹æ³•ï¼Œç›´æ¥å®šä¹‰åœ¨prototypeå¯¹è±¡ä¸Šã€‚12345678function Cat(name,color)&#123; this.name = name; this.color = color;&#125;//å­˜å‚¨å…¬å…±çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¾¾åˆ°æ‰€æœ‰å®ä¾‹å…±äº«çš„ç›®çš„ï¼Œæ°¸ä¹…ä¸å˜ï¼›Cat.prototype.type = "çŒ«ç§‘åŠ¨ç‰©";Cat.prototype.eat = function()&#123;alert("åƒè€é¼ ")&#125;; ç„¶åï¼Œç”Ÿæˆå®ä¾‹ï¼š1234var cat1 = new Cat("å¤§æ¯›","é»„è‰²");var cat2 = new Cat("äºŒæ¯›","é»‘è‰²");alert(cat1.type); // çŒ«ç§‘åŠ¨ç‰©cat1.eat(); // åƒè€é¼  è¿™æ—¶æ‰€æœ‰å®ä¾‹çš„typeå±æ€§å’Œeat()æ–¹æ³•ï¼Œå…¶å®éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘prototypeå¯¹è±¡ï¼Œå› æ­¤å°±æé«˜äº†è¿è¡Œæ•ˆç‡ã€‚1alert(cat1.eat == cat2.eat); //true å…­ã€Prototypeæ¨¡å¼çš„éªŒè¯æ–¹æ³•ä¸ºäº†é…åˆprototypeå±æ€§ï¼ŒJavascriptå®šä¹‰äº†ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚ 6.1 isPrototypeOf()è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªproptotypeå¯¹è±¡å’ŒæŸä¸ªå®ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚12alert(Cat.prototype.isPrototypeOf(cat1)); //truealert(Cat.prototype.isPrototypeOf(cat2)); //true 6.2 hasOwnProperty()æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªhasOwnProperty()æ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­æŸä¸€ä¸ªå±æ€§åˆ°åº•æ˜¯æœ¬åœ°å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿è‡ªprototypeå¯¹è±¡çš„å±æ€§ã€‚12alert(cat1.hasOwnProperty("name")); // truealert(cat1.hasOwnProperty("type")); // false 6.3 inè¿ç®—ç¬¦inè¿ç®—ç¬¦å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªå®ä¾‹æ˜¯å¦å«æœ‰æŸä¸ªå±æ€§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æœ¬åœ°å±æ€§ã€‚12alert("name" in cat1); // truealert("type" in cat1); // true inè¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨æ¥éå†æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚1for(var prop in cat1) &#123; alert("cat1["+prop+"]="+cat1[prop]); &#125; æœªå®Œï¼Œè¯·ç»§ç»­é˜…è¯»è¿™ä¸ªç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†ã€Šæ„é€ å‡½æ•°çš„ç»§æ‰¿ã€‹å’Œç¬¬ä¸‰éƒ¨åˆ†ã€Šéæ„é€ å‡½æ•°çš„ç»§æ‰¿ã€‹ã€‚ï¼ˆå®Œï¼‰ è¡¥å……ï¼š å‡½æ•°å£°æ˜ä¸å‡½æ•°å­—é¢é‡1234function Cat(name,color)&#123; this.name = name; this.color = color;&#125; ä¸1234var Cat = function (name,color)&#123; this.name = name; this.color = color;&#125; åœ¨å®ä¾‹åŒ–åŠä½¿ç”¨æ—¶ï¼Œç”¨æ³•ç›¸åŒã€‚ Jsonæ–¹å¼è®¿é—®å¯¹è±¡å±æ€§ 12345var cat = new Cat('Command','black');//ä¸‹é¢ä¸¤ç§ä½¿ç”¨æ–¹å¼æ•ˆæœç›¸åŒalert(cat.name);alert(cat['name']); åœ¨ç¬¬ä¸€ç§æ–¹å¼å®ä¾‹å¯¹è±¡åŸå§‹æ¨¡å¼ä¸­ï¼Œå…¶å®å®ä¾‹ä¸åŸå‹ä¹‹é—´æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå¦‚æœéè¦æ‰¯ä¸Šå…³ç³»çš„è¯ï¼Œï¼Œåªèƒ½è¯´ã€åŸå‹ã€å’Œã€å®ä¾‹ã€ä¹‹é—´çš„æ ¼å¼æ¯”è¾ƒç›¸åƒã€‚ã€å®ä¾‹ã€ä¹‹é—´ä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ã€‚ã€‚è¿™ç§æ–¹å¼ç”Ÿæˆçš„å¯¹è±¡æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ— æ³•å¤ç”¨ï¼Œï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œã€åŸå‹ã€ä¹Ÿæ˜¯ä¸€ä¸ªã€å®ä¾‹ã€ã€‚ æœ‰çš„åšå®¢ä¸Šè¯´newå…³é”®å­—å¯ä»¥çœç•¥ï¼Œåæ¥åˆæŸ¥é˜…äº†äº›èµ„æ–™æ‰çŸ¥é“ï¼Œï¼ŒåŸæ¥çœŸçš„æ˜¯å¯ä»¥çœç•¥çš„:1234var cat = Cat('cmd','black');console.log(cat); //undefinedconsole.log(cat.name); //Cannot read property 'name' of undefinedconsole.log(window.name); //cmd å¯¹äºjsçš„newå…³é”®å­—ï¼Œå¤§å®¶å¯ä»¥è¿™æ ·ç†è§£ï¼šnewå°±æ˜¯å°†å‡½æ•°å†…éƒ¨çš„thisçš„å€¼ï¼Œèµ‹å€¼ç»™å½“å‰å¯¹è±¡çš„thisï¼Œå¦‚ï¼šthis.nameï¼ˆå®ä¾‹å¯¹è±¡ï¼‰ = this.nameï¼ˆæ„é€ å‡½æ•°ï¼‰å½“æ²¡æœ‰newçš„æ—¶å€™ï¼Œthiså°±å˜ä¸ºäº†windowï¼Œä¹Ÿå°±è§£é‡Šäº†ã€‚ â€”â€” jsåˆ›å»ºå¯¹è±¡ä¹‹è®¾è®¡æ¨¡å¼]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017_12â€”ç¬¬ä¸€å‘¨]]></title>
    <url>%2F2017%2F12%2F10%2F2017_12_week_1st%2F</url>
    <content type="text"><![CDATA[2017-12-04 å¹‚ç­‰ï¼šidempotent idempotence æ˜¯ä¸€ä¸ªæ•°å­¦ä¸è®¡ç®—æœºå­¦æ¦‚å¿µï¼Œå¸¸è§äºæŠ½è±¡ä»£æ•°ä¸­ã€‚åœ¨ç¼–ç¨‹ä¸­ä¸€ä¸ªå¹‚ç­‰æ“ä½œçš„ç‰¹ç‚¹æ˜¯å…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œæ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚å¹‚ç­‰å‡½æ•°ï¼Œæˆ–å¹‚ç­‰æ–¹æ³•ï¼Œæ˜¯æŒ‡å¯ä»¥ä½¿ç”¨ç›¸åŒå‚æ•°é‡å¤æ‰§è¡Œï¼Œå¹¶èƒ½è·å¾—ç›¸åŒç»“æœçš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°ä¸ä¼šå½±å“ç³»ç»ŸçŠ¶æ€ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒé‡å¤æ‰§è¡Œä¼šå¯¹ç³»ç»Ÿé€ æˆæ”¹å˜ã€‚ä¾‹å¦‚ï¼Œâ€œsetTrue()â€å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¹‚ç­‰å‡½æ•°,æ— è®ºå¤šæ¬¡æ‰§è¡Œï¼Œå…¶ç»“æœéƒ½æ˜¯ä¸€æ ·çš„.æ›´å¤æ‚çš„æ“ä½œå¹‚ç­‰ä¿è¯æ˜¯åˆ©ç”¨å”¯ä¸€äº¤æ˜“å·(æµæ°´å·)å®ç°. scaffold è‹±[ËˆskÃ¦fÉ™ÊŠld] ç¾[ËˆskÃ¦foÊŠld]n. è„šæ‰‹æ¶; &lt;å²&gt;æ–­å¤´å°;[ä¾‹å¥]Moore ascended the scaffold and addressed the executioner.ç©†å°”èµ°ä¸Šæ–­å¤´å°ï¼Œå’Œåˆ½å­æ‰‹è¯´è¯ã€‚ 2017-12-05 stumbled è‹± [ËˆstÊŒmbl] ç¾ [ËˆstÊŒmbÉ™l]v. ï¼ˆä¸é¡ºç•…åœ°ï¼‰ è¯´( stumbleçš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ ); è·Œè·Œæ’æ’åœ°èµ°; ç»Šè„š; ï¼ˆè¯´è¯ã€æ¼”å¥ç­‰ï¼‰ å‡ºé”™;[ä¾‹å¥]She stumbled and fell, scraping her palms and knees.å¥¹ç»Šäº†ä¸€ä¸‹æ‘”å€’äº†ï¼Œæ‰‹æŒå’Œè†ç›–éƒ½è¹­ç ´äº†ã€‚ *reserved è‹±[rÉªËˆzÉœ:vd] ç¾[rÉªËˆzÉœ:rvd]adj. é¢„è®¢çš„; çŸœæŒçš„; å‚¨è—ç€çš„;v. ä¿ç•™[å‚¨å¤‡]æŸç‰©( reserveçš„è¿‡å»å¼);[ä¾‹å¥]He was unemotional, quite quiet, and reservedä»–æ„Ÿæƒ…æ·¡æ¼ ï¼Œæ²‰é»˜å¯¡è¨€ï¼Œæ€§æ ¼å†…æ•›ã€‚ keyword å…³é”®å­—reserved word ä¿ç•™å­— literal è‹±[ËˆlÉªtÉ™rÉ™l] ç¾[ËˆlÉªtÉ™rÉ™l]adj. ç…§å­—é¢çš„; åŸä¹‰çš„; é€å­—çš„; å¹³å®çš„ï¼Œé¿å…å¤¸å¼ ;n. [å°] é”™æ’ï¼Œæ–‡å­—ä¸Šçš„é”™è¯¯;[ä¾‹å¥]In many cases, the people there are fighting, in a literal sense, for their homes.å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé‚£é‡Œçš„äººä»¬æ˜¯çœŸåˆ€çœŸæªåœ°åœ¨ä¸ºå®¶å›­è€ŒæŠ—äº‰ã€‚ anonymous è‹±[É™ËˆnÉ’nÉªmÉ™s] ç¾[É™ËˆnÉ‘:nÉªmÉ™s]adj. åŒ¿åçš„; æ— åçš„; å‡åçš„; æ²¡æœ‰ç‰¹è‰²çš„;[ä¾‹å¥]You can remain anonymous if you wishä½ æ„¿æ„çš„è¯å¯ä»¥ä¸é€éœ²å§“åã€‚ 2017-12-07 categories è‹±[â€˜kÃ¦tÉªÉ¡É™rÉªz] ç¾[â€˜kÃ¦tÉªÉ¡É™rÉªz]n. ç§ç±»ï¼Œç±»åˆ«( categoryçš„åè¯å¤æ•° ); æ´¾åˆ«;[ä¾‹å¥]The verbs were subdivided into transitive and intransitive categories.åŠ¨è¯å¯ç»†åˆ†ä¸ºåŠç‰©åŠ¨è¯å’Œä¸åŠç‰©åŠ¨è¯ã€‚ 2017-12-08 favicon è‹±[â€˜fÃ¦vÉªkÉ™n] ç¾[â€˜fÃ¦vÉªkÉ™n]abbr. åçˆ±å›¾æ ‡; ç½‘ç«™å›¾æ ‡(favorites icon); 2017-12-10 anchor è‹±[ËˆÃ¦Å‹kÉ™(r)] ç¾[ËˆÃ¦Å‹kÉš]n. é”š; é”šçŠ¶ç‰©; é å±±; å‹é˜µé˜Ÿå‘˜;vt. æŠ›é”šï¼ŒæŠ›é”šæ³Šèˆ¹; ä½¿å›ºå®šï¼Œä½¿ç¨³å›º; ä½¿ç¨³å®š; åœ¨â€¦ä»»èŠ‚ç›®ä¸»æŒäºº;vi. å›ºå®š; æŠ›é”šï¼Œåœæ³Š; [ä½“] ä»»ä¸»è¦è¿åŠ¨å‘˜; ä¸»æŒèŠ‚ç›®;[ä¾‹å¥]We could anchor off the pieræˆ‘ä»¬å¯ä»¥åœ¨ç å¤´é™„è¿‘ä¸‹é”šåœæ³Šã€‚ stickler è‹±[ËˆstÉªklÉ™(r)] ç¾[â€˜stÉªklÉ™r]n. åšæŒâ€¦çš„äºº;[ä¾‹å¥]Iâ€™m a bit of a stickler for accuracyæˆ‘æ€»æ˜¯è¦æ±‚ç²¾ç¡®ã€‚]]></content>
      <categories>
        <category>å‘¨è®°</category>
      </categories>
      <tags>
        <tag>å¹‚ç­‰</tag>
        <tag>å•è¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE)]]></title>
    <url>%2F2017%2F12%2F10%2Fimmediately-invoked_function_expression(IIFE)%2F</url>
    <content type="text"><![CDATA[ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE) åŸæ–‡ï¼šImmediately-Invoked Function Expression (IIFE) by Ben Alman ä»¥é˜²ä½ æ²¡æœ‰æ³¨æ„åˆ°ï¼Œ(äº‹å…ˆå£°æ˜)æˆ‘æ˜¯ä¸€ä¸ªå¯¹äºä¸“ä¸šæœ¯è¯­æœ‰äº›åšæŒçš„äººã€‚æ‰€ä»¥ï¼Œå½“æˆ‘å¤šæ¬¡å¬åˆ°æµè¡Œå´æ˜“äº§ç”Ÿè¯¯è§£çš„æœ¯è¯­ã€Œè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ã€ï¼Œæœ€ç»ˆå†³å®šå°†çš„æƒ³æ³•æ€»ç»“åˆ°è¿™ç¯‡æ–‡ç« ä¸­ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œä¸ºäº†æä¾›ä¸€äº›æ›´æ·±å…¥æ›´å½»åº•çš„å…³äºè¿™ç§æ¨¡å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œäº‹å®ä¸Šæˆ‘è¿˜å»ºè®®äº†æˆ‘ä»¬åº”è¯¥æ€æ ·ç§°å‘¼è¿™ç§æ¨¡å¼ã€‚å¦å¤–ï¼Œå¦‚æœä½ æƒ³è·³è¿‡è¿™é‡Œï¼Œä½ å¯ä»¥ç›´æ¥é˜…è¯»ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œä½†æ˜¯æˆ‘å»ºè®®ä½ è¯»å®Œæ•´ç¯‡æ–‡ç« ã€‚ ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œè¿™ç¯‡æ–‡ç« ä¸æ˜¯æƒ³è¯´ã€Œæˆ‘æ˜¯å¯¹äº†ï¼Œä½ æ˜¯é”™çš„ã€ä¹‹ç±»çš„ã€‚æˆ‘å‘è‡ªçœŸå¿ƒåœ°æƒ³å¸®åŠ©äººä»¬ç†è§£è¿™æœ‰ç‚¹å„¿å¤æ‚çš„æ¦‚å¿µï¼Œå¹¶ä¸”æˆ‘è®¤ä¸ºä½¿ç”¨å‰åä¸€è‡´çš„ç²¾ç¡®æœ¯è¯­æ˜¯æœ‰åŠ©äºäººä»¬ç†è§£çš„æœ€ç®€å•çš„æ–¹å¼ä¹‹ä¸€ã€‚ æ‰€ä»¥ï¼Œå®ƒåˆ°åº•æ˜¯ä»€ä¹ˆåœ¨JavaScripté‡Œï¼Œæ¯ä¸ªå‡½æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œç¯å¢ƒã€‚å› ä¸ºåœ¨å‡½æ•°é‡Œå®šä¹‰çš„å˜é‡å’Œå‡½æ•°åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¢«è®¿é—®ï¼Œå¤–éƒ¨æ— æ³•è·å–ï¼›è¿™ç§æƒ…å†µä¸‹ï¼Œè°ƒç”¨å‡½æ•°æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•åˆ›å»ºç§æœ‰å˜é‡ã€‚123456789101112131415161718// å› ä¸ºè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯å¦ä¸€ä¸ªèƒ½é€šè¿‡iè®¿é—®ç§æœ‰å˜é‡çš„å‡½æ•°ï¼Œ(privileged)ï¼Ÿfunction makeCounter() &#123; //iåªèƒ½ä»`makeConuter`å†…éƒ¨è®¿é—® var i = 0; return function()&#123; console.log(++i); &#125;; &#125;// `counter`å’Œ`counter2`éƒ½æœ‰è‡ªå·±ä½œç”¨åŸŸä¸­çš„å˜é‡ `i`var counter = makeCounter();counter(); //1counter(); //2var counter2 = makeCounter();counter2(); //1counter2(); //2// ReferenceError: i is not defined(å®ƒåªå­˜åœ¨äºmakeCounteré‡Œ) åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¹¶ä¸éœ€è¦ç”±makeWhateverè¿”å›çš„å¤šä¸ªå®ä¾‹ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å°±å¯ä»¥å®ç°ã€‚æˆ–è€…åœ¨å…¶ä»–æƒ…å†µä¸­ï¼Œä½ ç”šè‡³ä¸éœ€è¦è¿”å›å€¼ã€‚ æ ¸å¿ƒé—®é¢˜ç°åœ¨ï¼Œæ— è®ºä½ ä»¥function foo(){}çš„æ–¹å¼ï¼Œè¿˜æ˜¯var foo = function(){}çš„æ–¹å¼å£°æ˜å‡½æ•°ï¼Œä½ éƒ½å¯ä»¥åœ¨åè¾¹åŠ ä¸Šæ‹¬å·(åœ†æ‹¬å·,())æ¥è°ƒç”¨å®ƒä»¬ï¼Œï¼Œæ¯”å¦‚foo();ã€‚12345// åƒä¸‹é¢è¿™æ ·å®šä¹‰çš„å‡½æ•°å¯ä»¥é€šè¿‡åœ¨å‡½æ•°åååŠ ä¸€å¯¹æ‹¬å·è¿›è¡Œè°ƒç”¨ï¼Œåƒè¿™æ ·`foo()`ï¼Œå› ä¸ºfooåªæ˜¯å‡½æ•°è¡¨è¾¾å¼`function()&#123;/* code */&#125;`çš„ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼›var foo = function()&#123;/* code */&#125;//é‚£è¿™è¯´æ˜å‡½æ•°è¡¨è¾¾å¼å¯ä»¥é€šè¿‡åœ¨å®ƒè‡ªå·±åé¢åŠ ä¸Šä¸€å¯¹æ‹¬å·å°±å¯ä»¥è‡ªå·±è°ƒç”¨è‡ªå·±äº†å—ï¼Ÿfunction()&#123; /* code */&#125;();//SyntaxError: Unexpected token ( æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™é‡Œæ•è·äº†ä¸€ä¸ªå¼‚å¸¸ã€‚å½“åœ†æ‹¬å·åœ¨å…¨å±€ç¯å¢ƒæˆ–å‡½æ•°å†…éƒ¨é‡åˆ°functionå…³é”®å­—ï¼Œå®ƒä¼šè¢«é»˜è®¤å½“ä½œä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œè€Œä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œå¦‚æœä½ ä¸æ˜ç¡®çš„å‘Šè¯‰åœ†æ‹¬å·å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒä¼šå°†å…¶å½“ä½œæ²¡æœ‰åå­—çš„å‡½æ•°å£°æ˜å¹¶ä¸”æŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼Œå› ä¸ºå‡½æ•°å£°æ˜éœ€è¦ä¸€ä¸ªåå­—ã€‚ é¢˜å¤–è¯ï¼šå‡½æ•°ã€åœ†æ‹¬å·å’Œé”™è¯¯æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœä½ ä¸ºä¸€ä¸ªå‡½æ•°æŒ‡å®šä¸€ä¸ªåå­—å¹¶åœ¨å®ƒåé¢æ”¾ä¸€å¯¹åœ†æ‹¬å·ï¼ŒåŒæ ·çš„ä¹Ÿä¼šæŠ›å‡ºé”™è¯¯ï¼Œä½†è¿™æ¬¡æ˜¯å› ä¸ºå¦å¤–ä¸€ä¸ªåŸå› ã€‚å½“åœ†æ‹¬å·æ”¾åœ¨ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼åé¢æŒ‡æ˜äº†è¿™æ˜¯ä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œåœ†æ‹¬å·æ”¾åœ¨ä¸€ä¸ªå£°æ˜åé¢ä¾¿æ„å‘³ç€å®Œå…¨çš„å’Œå‰é¢çš„å‡½æ•°å£°æ˜åˆ†å¼€äº†ï¼Œæ­¤æ—¶åœ†æ‹¬å·åªæ˜¯ä¸€ä¸ªç®€å•çš„ä»£è¡¨ä¸€ä¸ª(ç»„?)è¿ç®—ç¬¦(ç”¨æ¥æ§åˆ¶è¿ç®—ä¼˜å…ˆçº§)ã€‚12345678910// ç„¶è€Œå‡½æ•°å£°æ˜è¯­æ³•ä¸Šæ˜¯æ— æ•ˆçš„ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªå£°æ˜ï¼Œç´§è·Ÿç€çš„åœ†æ‹¬å·æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºåœ†æ‹¬å·é‡Œéœ€è¦åŒ…å«è¡¨è¾¾å¼function foo()&#123; /* code */ &#125;();//ğŸ‘†SyntaxError: Unexpected token// ç°åœ¨ï¼Œä½ æŠŠä¸€ä¸ªè¡¨è¾¾å¼æ”¾åœ¨åœ†æ‹¬å·é‡Œï¼Œæ²¡æœ‰æŠ›å‡ºé”™è¯¯...ä½†æ˜¯å‡½æ•°ä¹Ÿå¹¶æ²¡æœ‰æ‰§è¡Œï¼Œå› ä¸ºï¼šfunction foo()&#123;/* code */&#125;(1)// å®ƒç­‰åŒäºå¦‚ä¸‹ï¼Œä¸€ä¸ªå‡½æ•°å£°æ˜è·Ÿç€ä¸€ä¸ªå®Œå…¨æ²¡æœ‰å…³ç³»çš„è¡¨è¾¾å¼:function foo()&#123;/* code */&#125;(1); å…³äºè¿™ä¸ªç»†èŠ‚ï¼Œä½ å¯ä»¥é˜…è¯»Dmitry A. Soshnikovçš„æ–‡ç« ï¼šECMA-262-3 in detail. Chapter 5. Functions ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE)å¹¸è¿çš„æ˜¯ï¼Œä¿®æ­£è¯­æ³•é”™è¯¯å¾ˆç®€å•ã€‚æœ€æµè¡Œçš„ä¹Ÿæœ€è¢«æ¥å—çš„æ–¹æ³•æ˜¯å°†å‡½æ•°å£°æ˜åŒ…è£¹åœ¨åœ†æ‹¬å·é‡Œæ¥å‘Šè¯‰è¯­æ³•åˆ†æå™¨å»è¡¨è¾¾ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œå› ä¸ºåœ¨JavaScripté‡Œï¼Œåœ†æ‹¬å·ä¸èƒ½åŒ…å«å£°æ˜ã€‚å› ä¸ºè¿™ç‚¹ï¼Œå½“åœ†æ‹¬å·ä¸ºäº†åŒ…è£¹å‡½æ•°ç¢°ä¸Šäº† functionå…³é”®è¯ï¼Œå®ƒä¾¿çŸ¥é“å°†å®ƒä½œä¸ºä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å»è§£æè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚æ³¨æ„ç†è§£è¿™é‡Œçš„åœ†æ‹¬å·å’Œä¸Šé¢çš„åœ†æ‹¬å·é‡åˆ°å‡½æ•°æ—¶çš„è¡¨ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ã€‚ å½“åœ†æ‹¬å·å‡ºç°åœ¨åŒ¿åå‡½æ•°çš„æœ«å°¾æƒ³è¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®ƒä¼šé»˜è®¤å°†å‡½æ•°å½“æˆæ˜¯å‡½æ•°å£°æ˜ã€‚ å½“åœ†æ‹¬å·åŒ…è£¹å‡½æ•°æ—¶ï¼Œå®ƒä¼šé»˜è®¤å°†å‡½æ•°ä½œä¸ºè¡¨è¾¾å¼å»è§£æï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚123456789101112131415161718192021222324252627// è¿™ä¸¤ç§æ¨¡å¼éƒ½å¯ä»¥è¢«ç”¨æ¥ç«‹å³è°ƒç”¨ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ©ç”¨å‡½æ•°çš„æ‰§è¡Œæ¥åˆ›é€ ç§æœ‰å˜é‡(function()&#123;/* code */&#125;());//ğŸ‘†Crockford recommends this one(function()&#123;/* code */&#125;)();//ğŸ‘†But this one works just as well// å› ä¸ºæ‹¬å·çš„ä½œç”¨å°±æ˜¯ä¸ºäº†æ¶ˆé™¤å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜ä¹‹é—´çš„å·®å¼‚// å¦‚æœè§£é‡Šå™¨èƒ½é¢„æ–™åˆ°è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‹¬å·å¯ä»¥è¢«çœç•¥// ä¸è¿‡è¯·å‚è§ä¸‹é¢çš„ã€Œé‡è¦ç¬”è®°ã€var i = function()&#123;return 10;&#125;();true &amp;&amp; function()&#123;/*code*/&#125;();0,function()&#123;&#125;();//å¦‚æœä½ å¹¶ä¸å…³å¿ƒè¿”å›å€¼ï¼Œæˆ–è€…è®©ä½ çš„ä»£ç å°½å¯èƒ½çš„æ˜“è¯»ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„å‡½æ•°å‰é¢å¸¦ä¸Šä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦æ¥å­˜å‚¨å­—èŠ‚!function()&#123;/* code */&#125;();~function()&#123;/* code */&#125;();-function()&#123;/* code */&#125;();+function()&#123;/* code */&#125;();// è¿™é‡Œæ˜¯å¦å¤–ä¸€ç§æ–¹æ³•// æˆ‘ï¼ˆåŸæ–‡ä½œè€…ï¼‰ä¸æ¸…æ¥šnewæ–¹æ³•æ˜¯å¦ä¼šå½±å“æ€§èƒ½// ä½†å®ƒå´æ˜¯å¥æ•ˆï¼Œå‚è§http://twitter.com/kuvos/status/18209252090847232new function()&#123; /* code */ &#125;new function()&#123; /* code */ &#125;() // ğŸ‘†åªæœ‰å½“ä¼ å…¥å‚æ•°æ—¶æ‰éœ€è¦åŠ æ‹¬å· å…³äºæ‹¬å·çš„é‡è¦é¡»çŸ¥åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå½“å›´ç»•åœ¨å‡½æ•°è¡¨è¾¾å¼å‘¨å›´çš„é¢å¤–ç”¨æ¥æ¶ˆé™¤æ­§ä¹‰çš„æ‹¬å·æ˜¯æ²¡å¿…è¦çš„ï¼ˆå› ä¸ºè¿™æ—¶å€™çš„æ‹¬å·å·²ç»å°†å…¶ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼å»è¡¨è¾¾äº†ï¼‰ï¼Œä½†å®ƒè¢«å½“åšçº¦å®šä¿—æˆä¹ æƒ¯æ—¶ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ è¿™æ ·çš„æ‹¬å·æŒ‡æ˜å‡½æ•°è¡¨è¾¾å¼å°†ä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œå¹¶ä¸”å˜é‡å°†ä¼šå‚¨å­˜å‡½æ•°çš„ç»“æœï¼Œè€Œä¸æ˜¯å‡½æ•°æœ¬èº«ã€‚å½“è¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¿™å¯ä»¥èŠ‚çº¦å…¶ä»–äººé˜…è¯»ä½ ä»£ç çš„æ—¶é—´ï¼Œä¸ç”¨æ»šåˆ°é¡µé¢åº•éƒ¨å»çœ‹è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚ ä½œä¸ºè§„åˆ™ï¼Œå½“ä½ ä¹¦å†™æ²¡æœ‰æ­§ä¹‰çš„ä»£ç æ—¶å€™ï¼Œæœ‰å¿…è¦é˜»æ­¢JavaScriptè§£é‡Šå™¨æŠ›å‡ºé”™è¯¯ï¼›è¿™åŒæ ·å¾ˆå…¬å¹³ï¼Œå¯ä»¥é¿å…è®©å…¶ä»–å¼€å‘è€…å†™å‡ºæŠ›å‡ºå¼‚å¸¸WTFErrorçš„ä»£ç å½±å“åˆ°ä½ ! ä¿å­˜é—­åŒ…çš„çŠ¶æ€å°±åƒå½“å‡½æ•°é€šè¿‡ä»–ä»¬çš„åå­—è¢«è°ƒç”¨æ—¶ï¼Œå‚æ•°ä¼šè¢«ä¼ é€’ï¼Œè€Œå½“å‡½æ•°è¡¨è¾¾å¼è¢«ç«‹å³è°ƒç”¨æ—¶ï¼Œå‚æ•°ä¹Ÿä¼šè¢«ä¼ é€’ã€‚ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥é”å®šå€¼å¹¶ä¸”æœ‰æ•ˆçš„ä¿å­˜æ­¤æ—¶çš„çŠ¶æ€ï¼Œå› ä¸ºä»»ä½•å®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…çš„å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨å¤–é¢å‡½æ•°ä¼ é€’è¿›æ¥çš„å‚æ•°å’Œå˜é‡ï¼ˆè¿™ç§å…³ç³»è¢«å«åšé—­åŒ…ï¼‰ã€‚ å…³äºé—­åŒ…çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è§ Closures explained with JavaScript 12345678910111213141516171819202122232425262728293031323334/ /å®ƒçš„è¿è¡ŒåŸç†å¯èƒ½å¹¶ä¸åƒä½ æƒ³çš„é‚£æ ·ï¼Œå› ä¸º`i`çš„å€¼ä»æ¥æ²¡æœ‰è¢«é”å®šã€‚ç›¸åçš„ï¼Œæ¯ä¸ªé“¾æ¥ï¼Œå½“è¢«ç‚¹å‡»æ—¶(forå¾ªç»æ‰§è¡Œå®Œæ¯•ä¹‹å)ï¼Œå› æ­¤ä¼šå¼¹å‡ºæ‰€æœ‰å…ƒç´ çš„æ€»æ•°(elems.length)ï¼Œå› ä¸ºè¿™æ˜¯`i`æ­¤æ—¶çš„çœŸå®å€¼ã€‚var elems = document.getElementsByTagName('a');for(var i = 0;i &lt; elems.length; i++ ) &#123; elems[i].addEventListener('click',function(e)&#123; e.preventDefault(); alert('I am link #' + i) &#125;,false);&#125;// 2018-01-27 æ›´ï¼Œç¼–è€…æŒ‰ï¼Œï¼Œç®€å•ç‚¹è¯´ï¼Œå› ä¸ºåœ¨ES5ä¸­ï¼Œåªæœ‰(ç”¨varå£°æ˜çš„å˜é‡)åœ¨å‡½æ•°ä¸­æ‰æœ‰ä½œç”¨åŸŸã€‚æ‰€ä»¥åœ¨forå¾ªç¯ä¸­ç”¨å˜é‡iå±äºforå¾ªç¯å¤–ï¼Œè€Œä¸æ˜¯forå¾ªç¯çš„&#123;&#125;ä¸­ã€‚åŒæ—¶ï¼Œforå¾ªç¯åˆæ˜¯ä¸€ä¸ªåŒæ­¥äº‹ä»¶ï¼Œå¾ªç¯ä½“ä¸­çš„ç›‘å¬äº‹ä»¶æ˜¯å¼‚æ­¥äº‹ä»¶ï¼Œå¼‚æ­¥äº‹ä»¶å¤„äº event loop ä¸­ï¼Œè¦ç­‰åˆ°æ‰€æœ‰åŒæ­¥äº‹ä»¶æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œevent loop ä¸­çš„äº‹ä»¶ï¼Œï¼Œè€Œé‚£ä¸ªæ—¶å€™ï¼Œi å·²ç„¶ç­‰äºelems.lengthäº†ã€‚// è€Œåƒä¸‹é¢è¿™æ ·æ”¹å†™å°±å¯ä»¥äº†ï¼Œï¼Œå› ä¸ºåœ¨IIFEé‡Œï¼Œ`i`å€¼è¢«é”å®šåœ¨äº†`lockedInIndex`é‡Œã€‚åœ¨å¾ªç¯æ‰§è¡Œç»“æŸåï¼Œå°½ç®¡`i`å€¼çš„æ•°å€¼æ˜¯æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ(elems.length)ï¼Œä½†æ¯ä¸€æ¬¡å‡½æ•°è¡¨è¾¾å¼è¢«è°ƒç”¨æ—¶ï¼ŒIIFEé‡Œçš„`lockedInIndex`å€¼éƒ½æ˜¯`i`ä¼ ç»™å®ƒçš„å€¼,æ‰€ä»¥å½“é“¾æ¥è¢«ç‚¹å‡»æ—¶ï¼Œæ­£ç¡®çš„å€¼è¢«å¼¹å‡ºã€‚var elems = document.getElementsByTagName('a');for(var i = 0;i &lt; elems.length;i++) &#123; (function(lockedInIndex)&#123; elems[i].addEventListener('click',function(e)&#123; e.preventDefault(); alert('I am link #' + lockedInIndex); &#125;,false) &#125;)(i); // 2018-01-27 æ›´ï¼Œç¼–è€…æŒ‰ï¼Œï¼Œåœ¨ä¸Šè¾¹æˆ‘ä»¬è¯´äº†ï¼Œåœ¨javascriptä¸­åªæœ‰å‡½æ•°æ‰æœ‰ä½œç”¨åŸŸï¼Œæ‰€ä»¥ï¼Œï¼Œè¦æƒ³æŠŠ i çš„ä½œç”¨äºç‹¬ç«‹å‡ºæ¥ï¼Œéœ€è¦ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ‰€ä»¥ï¼Œç”¨é—­åŒ…ã€‚&#125;//ä½ åŒæ ·å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨IIFEï¼Œä»…ä»…åªç”¨æ‹¬å·åŒ…è£¹ç‚¹å‡»å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸åŒ…å«æ•´ä¸ª`addEventListener`ã€‚æ— è®ºç”¨å“ªç§æ–¹å¼ï¼Œè¿™ä¸¤ä¸ªä¾‹å­éƒ½å¯ä»¥ç”¨IIFEå°†å€¼é”å®šï¼Œä¸è¿‡æˆ‘å‘ç°å‰é¢ä¸€ä¸ªä¾‹å­å¯è¯»æ€§æ›´å¥½äº›var elems = document.getElementsByTagName( 'a' );for ( var i = 0; i &lt; elems.length; i++ ) &#123; elems[ i ].addEventListener( 'click', (function( lockedInIndex )&#123; return function(e)&#123; e.preventDefault(); alert( 'I am link #' + lockedInIndex ); &#125;; &#125;)( i ),false);&#125;// 2018-01-27 æ›´ï¼Œç¼–è€…æŒ‰ï¼Œï¼Œå¦å¤–ï¼Œåœ¨ES5 ä¸­åªæœ‰ä¸€ç§å£°æ˜å˜é‡çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ var å…³é”®å­—ï¼Œç„¶è€Œç”¨å®ƒå£°æ˜çš„å­—é¢é‡åªæœ‰åœ¨å‡½æ•°ä¸­æ‰æœ‰ä½œç”¨åŸŸæ¦‚å¿µã€‚ç„¶è€Œåœ¨ ES6 ä¸­ï¼Œæœ‰äº† let å…³é”®å­—ï¼Œï¼Œlet å…³é”®å­—å£°æ˜çš„å˜é‡æ²¡æœ‰å˜é‡æå‡ï¼Œä¸èƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­ç”¨letå…³é”®å­—å£°æ˜åŒæ„ä¸ªå˜é‡ä¸¤æ¬¡ï¼Œè€Œä¸”æœ‰äº†æ˜ç¡®çš„ä½œç”¨åŸŸæ¦‚å¿µï¼ï¼ï¼æ‰€ä»¥ï¼Œåœ¨ä¸Šè¾¹çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ for å¾ªç¯ä¸­çš„ var å…³é”®å­—ç›´æ¥æ”¹ä¸º letï¼Œé—­åŒ…ä»€ä¹ˆçš„ä¸éœ€è¦ï¼å®Œç¾è§£å†³ã€‚ è®°ä½ï¼Œåœ¨è¿™æœ€åä¸¤ä¸ªä¾‹å­é‡Œï¼ŒlockedInIndexå¯ä»¥æ²¡æœ‰ä»»ä½•é—®é¢˜çš„è®¿é—®i,ä½†æ˜¯ä½œä¸ºå‡½æ•°çš„å‚æ•°ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„å‘½åæ ‡è¯†ç¬¦å¯ä»¥ä½¿æ¦‚å¿µæ›´åŠ å®¹æ˜“çš„è¢«è§£é‡Šã€‚ ç«‹å³æ‰§è¡Œå‡½æ•°ä¸€ä¸ªæœ€æ˜¾è‘—çš„ä¼˜åŠ¿æ˜¯å°±ç®—å®ƒæ²¡æœ‰å‘½åæˆ–è€…è¯´æ˜¯åŒ¿åï¼Œå‡½æ•°è¡¨è¾¾å¼ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰ä½¿ç”¨æ ‡è¯†ç¬¦çš„æƒ…å†µä¸‹è¢«ç«‹å³è°ƒç”¨ï¼Œä¸€ä¸ªé—­åŒ…ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰å½“å‰å˜é‡æ±¡æŸ“çš„æƒ…å†µä¸‹è¢«ä½¿ç”¨ã€‚ ã€Œè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°(Self-executing anonymous function)ã€æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä½ çœ‹åˆ°å®ƒå·²ç»è¢«æåˆ°å¥½å‡ æ¬¡äº†ï¼Œä½†å®ƒä»æœªè¢«æ¸…æ¥šåœ°è§£é‡Šï¼Œæˆ‘æè®®å°†æœ¯è¯­æ”¹æˆâ€Immediately-Invoked Function Expressionâ€œï¼Œæˆ–è€…ï¼ŒIIFEï¼Œå¦‚æœä½ å–œæ¬¢ç¼©å†™çš„è¯ï¼ˆå‘éŸ³ç±»ä¼¼â€œiffyâ€ï¼‰ã€‚The pronunciation â€œiffyâ€œ was suggested to me, and I like it, so letâ€™s go with that. ä»€ä¹ˆæ˜¯Immediately-Invoked Function Expressionå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªè¢«ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ã€‚Just like the name would lead you to believe. æˆ‘æƒ³JavaScriptç¤¾åŒºçš„æˆå‘˜åº”è¯¥å¯ä»¥åœ¨ä»–ä»¬çš„æ–‡ç« é‡Œæˆ–è€…é™ˆè¿°é‡Œæ¥å—æœ¯è¯­Immediately-Invoked Function Expressionå’ŒIIFEï¼Œå› ä¸ºæˆ‘æ„Ÿè§‰è¿™æ ·æ›´å®¹æ˜“è®©è¿™ä¸ªæ¦‚å¿µè¢«ç†è§£ï¼Œå¹¶ä¸”self-executing anonymous functionçœŸçš„ä¹Ÿçš„ç¡®ä¸å¤Ÿå‡†ç¡®ã€‚123456789101112131415161718192021// ä¸‹é¢æ˜¯ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼Œé€’å½’è°ƒç”¨è‡ªå·±æœ¬èº«function foo()&#123;foo();&#125;;// è¿™æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ã€‚å› ä¸ºå®ƒæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œå®ƒå¿…é¡»æ˜¯ä½¿ç”¨`arguments.callee`(which specifies the currently executing function ç‰¹æŒ‡åˆšåˆšæ‰§è¡Œè¿‡çš„å‡½æ•°)å±æ€§æ¥è°ƒç”¨å®ƒè‡ªå·±var foo = function()&#123;arguments.callee();&#125;;// è¿™ä¹Ÿè®¸ç®—æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œä½†æ˜¯ä»…ä»…å½“`foo`æ ‡è¯†ç¬¦ä½œä¸ºå®ƒçš„å¼•ç”¨æ—¶ï¼Œå¦‚æœä½ å°†fooæ¢æˆç”¨å…¶ä»–çš„ä»€ä¹ˆåå­—(something else),ä½ ä¼šè·å¾—ä¸€ä¸ª "used-to-self-execute" åŒ¿åå‡½æ•°.var foo = function()&#123;foo();&#125;;// æœ‰äº›äººåƒè¿™æ ·å«'self-executing anonymous function'ä¸‹é¢çš„å‡½æ•°,å³ä½¿å®ƒä¸æ˜¯è‡ªæ‰§è¡Œçš„ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰è°ƒç”¨å®ƒè‡ªå·±ã€‚ç„¶åï¼Œå®ƒåªæ˜¯è¢«ç«‹å³è°ƒç”¨äº†è€Œå·²ã€‚(function()&#123; /*code*/ &#125;());// ä¸ºå‡½æ•°è¡¨è¾¾å¼å¢åŠ æ ‡è¯†ç¬¦(ä¹Ÿå°±æ˜¯è¯´åˆ›é€ ä¸€ä¸ªå‘½åå‡½æ•°)å¯¹æˆ‘ä»¬çš„è°ƒè¯•ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸€æ—¦å‘½åï¼Œå‡½æ•°å°†ä¸å†åŒ¿åã€‚(function foo()&#123;/* code */&#125;());// IIFEsåŒæ ·ä¹Ÿå¯ä»¥è‡ªæ‰§è¡Œï¼Œå°½ç®¡ï¼Œä¹Ÿè®¸ä»–ä¸æ˜¯æœ€æœ‰ç”¨çš„æ¨¡å¼(function()&#123;arguments.callee();&#125;())(function foo()&#123;foo();&#125;())// å¦å¤–ï¼Œä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼ç«Ÿä¼šåœ¨é»‘è“5ä¸ŠæŠ›å‡ºé”™è¯¯ï¼Œåœ¨ä¸€ä¸ªè¢«å‘½åçš„å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°åæ˜¯undefinedã€‚Awesome, huh?(function foo()&#123; foo(); &#125;()); å¸Œæœ›ä¸Šé¢çš„ä¾‹å­å¯ä»¥è®©ä½ æ›´åŠ æ¸…æ¥šçš„çŸ¥é“â€™self-executingâ€™è¿™ä¸ªè¯´æ³•æ˜¯æœ‰äº›è¯¯å¯¼æ€§çš„ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯æ‰§è¡Œè‡ªå·±çš„å‡½æ•°ï¼Œå³ä½¿å‡½æ•°å·²ç»è¢«æ‰§è¡Œã€‚åŒæ ·çš„ï¼ŒåŒ¿åå±æ€§ä¹Ÿæ²¡ç”¨å¿…è¦ç‰¹åˆ«æŒ‡å‡ºï¼Œå› ä¸ºï¼ŒImmediately Invoked FunctionExpressionï¼Œæ—¢å¯ä»¥æ˜¯å‘½åå‡½æ•°ä¹Ÿå¯ä»¥åŒ¿åå‡½æ•°ã€‚ æœ‰è¶£çš„æ˜¯ï¼šå› ä¸ºarguments.calleeåœ¨ECMAScript 5 strict modeä¸­è¢«deprecatedäº†ï¼Œæ‰€ä»¥åœ¨ES5çš„strict modeä¸­å®é™…ä¸Šä¸å¯èƒ½åˆ›å»ºä¸€ä¸ªself-executing anonymous function æœ€å:æ¨¡å—æ¨¡å¼å½“æˆ‘è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œå¦‚æœæˆ‘ä¸è‡³å°‘æé†’è‡ªå·±ä¸€æ¬¡å…³äºæ¨¡å—æ¨¡å¼ï¼Œæˆ‘å¾ˆå¯èƒ½ä¼šå¿½ç•¥å®ƒã€‚å¦‚æœä½ å¹¶ä¸ç†Ÿæ‚‰JavaScripté‡Œçš„æ„å»ºæ¨¡å¼ï¼Œå®ƒå’Œæˆ‘ç¬¬ä¸€ä¸ªä¾‹å­å¾ˆåƒï¼Œä½†æ˜¯è¿”å›å€¼ç”¨å¯¹è±¡ä»£æ›¿äº†å‡½æ•°ã€‚1234567891011121314151617181920212223242526// Create an anonymous function expression that gets invoked immediately,and assign its *return value* to a variable. This approach "cuts out the middleman" of the named `makeWhatever` function reference.// As explained in the above "important note," even though parens are not required around this function expression, they should still be used as a matter of convention to help clarify that the variable is being set to the function's *result* and not the function itself.//æ­£å¦‚ä¸Šé¢çš„ã€é‡è¦é¡»çŸ¥ã€è§£é‡Šçš„ä¸€æ ·ï¼Œï¼Œï¼Œå³ä½¿åŒ…å›´å‡½æ•°è¡¨è¾¾å¼çš„æ‹¬å·ä¸æ˜¯å¿…é¡»æ—¶ï¼Œå®ƒä»¬ä¹Ÿåº”è¯¥è¢«å¾ˆå½“å›äº‹çš„å½“åšçº¦å®šä¿—æˆçš„ä¹ æƒ¯ä¿ç•™ç€ï¼Œç”¨æ¥æ¸…æ™°çš„è¡¨æ˜å˜é‡æ˜¯å‡½æ•°çš„ç»“æœï¼Œè€Œä¸æ˜¯å˜é‡æœ¬èº«ã€‚var counter = (function()&#123; var i = 0; return &#123; get: function()&#123; return i; &#125;, set: function(val)&#123; i = val; &#125;, increment: function()&#123; return ++i; &#125; &#125; &#125;()); counter.get();//0 counter.set(3); counter.increment();//4 counter.increment();//5 conuter.i;//undefined (`i` is not a property of the returned object) i;//ReferenceError: i is not defined (it only exists inside the closure) æ¨¡å—æ¨¡å¼æ–¹æ³•ä¸ä»…ç›¸å½“çš„å‰å®³è€Œä¸”ç®€å•ã€‚éå¸¸å°‘çš„ä»£ç ï¼Œä½ å¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨ä¸æ–¹æ³•å’Œå±æ€§ç›¸å…³çš„å‘½åï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œç»„ç»‡å…¨éƒ¨çš„æ¨¡å—ä»£ç å³æœ€å°åŒ–äº†å…¨å±€å˜é‡çš„æ±¡æŸ“ä¹Ÿåˆ›é€ äº†ç§äººå˜é‡ã€‚ å»¶ä¼¸é˜…è¯»å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿä¸ºä½ æä¾›äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è§£ç­”äº†ä¸€äº›é—®é¢˜ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ç°åœ¨æ¯”ä¹‹å‰çš„é—®é¢˜æ›´å¤šäº†ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»ä»¥ä¸‹æ–‡ç« æ¥æ›´æ·±å…¥çš„äº†è§£å‡½æ•°å’Œæ„å»ºæ¨¡å¼ã€‚ 2018-01-27 æ›´ï¼Œç¼–è€…æŒ‰ï¼Œï¼Œæœ€åå¸Œæœ›å¤§å®¶äº†è§£ä¸‹ES6ï¼Œè¿˜æ˜¯é˜®ä¸€å³°è€å¸ˆ =&gt; ECMAScript 6 ç®€ä»‹ ECMA-262-3 in detail. Chapter 5. Functions. - Dmitry A. Soshnikov Functions and function scope - Mozilla Developer Network Named function expressions - Juriy â€œkangaxâ€ Zaytsev JavaScript Module Pattern: In-Depth - Ben Cherry Closures explained with JavaScript - Nick Morgan]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†è§£ä¸ä½¿ç”¨Javascriptä¸­çš„å›è°ƒå‡½æ•°]]></title>
    <url>%2F2017%2F12%2F07%2Fcallback_function_in_javascript%2F</url>
    <content type="text"><![CDATA[ç†è§£ä¸ä½¿ç”¨Javascriptä¸­çš„å›è°ƒå‡½æ•°æœ‰ç‚¹å°æ„Ÿæ…¨åœ¨è¿™ä¸å¾—ä¸æä¸€ä¸‹Pythonï¼Œåœ¨äººå·¥æ™ºèƒ½ç«èµ·æ¥ä¹‹å‰å°±åœ¨æ–­æ–­ç»­ç»­çš„çœ‹æ•™ç¨‹ã€‚ç°åœ¨å› ä¸ºäººå·¥æ™ºèƒ½çš„åŸå› ï¼Œæ›´è¦å¥½å¥½å­¦ä¹ ä¸€ä¸‹ï¼Œï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­äº†ï¼Œç¬¬ä¸€æ¬¡å¥½åƒæ˜ç™½ã€å‡½æ•°å¼ç¼–ç¨‹ã€åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å„¿äº†ã€‚æ”¾å¼ å›¾ï¼Œå„ä½ä½“ä¼šä¸‹ï¼Œï¼ŒğŸ‘‡å› ä¸ºæœ€è¿‘å·¥ä½œçš„åŸå› ï¼Œå…ˆåé‡åˆ°äº†å‡ ä¸ªå…³äºjsçš„é—®é¢˜ï¼Œæ²¡æƒ³åˆ°éœ€è¦é˜…è¯»çš„Tabé¡µè¶Šæ¥è¶Šå¤šï¼Œéœ€è¦æ€»ç»“çš„é¡µæ˜¯è¶Šæ¥è¶Šå¤šã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ²¡æƒ³åˆ°æœå¤•ç›¸å¤„çš„jsä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ç‰¹æ€§ï¼Œï¼Œæ¯”å¦‚é—­åŒ…ï¼Œä¹‹å‰ç‰¹åœ°å»äº†è§£ï¼Œå¯è¿˜æ˜¯åŠçŸ¥åŠè§£ï¼Œï¼Œå¦‚ä»Šä»Pythonåè§‚jsï¼Œä¸€ä¸‹å­é€šé€äº†~å“ˆå“ˆï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ Javascriptä¸­ï¼Œå‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥åƒå¯¹è±¡ä¸€æ ·æŒ‰ç…§ç¬¬ä¸€ç±»ç®¡ç†è¢«ä½¿ç”¨ã€‚æ—¢ç„¶å‡½æ•°å®é™…ä¸Šæ˜¯å¯¹è±¡ï¼šå®ƒä»¬èƒ½è¢«â€œå­˜å‚¨â€åœ¨å˜é‡ä¸­ï¼Œèƒ½ä½œä¸ºå‡½æ•°å‚æ•°è¢«ä¼ é€’ï¼Œèƒ½åœ¨å‡½æ•°ä¸­è¢«åˆ›å»ºï¼Œèƒ½ä»å‡½æ•°ä¸­è¿”å›ã€‚ å› ä¸ºå‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Javascriptä½¿ç”¨å›è°ƒå‡½æ•°ã€‚åœ¨ä¸‹é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦åˆ°å…³äºå›è°ƒå‡½æ•°çš„æ–¹æ–¹é¢é¢ã€‚å›è°ƒå‡½æ•°å¯èƒ½æ˜¯åœ¨Javascriptä¸­ä½¿ç”¨æœ€å¤šçš„å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ï¼Œè™½ç„¶åœ¨å­—é¢ä¸Šçœ‹èµ·æ¥å®ƒä»¬ä¸€ç›´ä¸€å°æ®µJavascriptæˆ–è€…jQueryä»£ç ï¼Œä½†æ˜¯å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´å®ƒä»»ç„¶æ˜¯ä¸€ä¸ªè°œã€‚åœ¨é˜…è¯»æœ¬æ–‡ä¹‹åä½ èƒ½äº†è§£æ€æ ·ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚ å›è°ƒå‡½æ•°æ˜¯ä»ä¸€ä¸ªå«å‡½æ•°å¼ç¼–ç¨‹çš„ç¼–ç¨‹èŒƒå¼ä¸­è¡ç”Ÿå‡ºæ¥çš„æ¦‚å¿µã€‚ç®€å•æ¥è¯´ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä½¿ç”¨å‡½æ•°ä½œä¸ºå˜é‡ã€‚å‡½æ•°å¼ç¼–ç¨‹è¿‡å» - ç”šè‡³æ˜¯ç°åœ¨ï¼Œä¾æ—§æ²¡æœ‰è¢«å¹¿æ³›ä½¿ç”¨ - å®ƒè¿‡å»å¸¸è¢«çœ‹åšæ˜¯é‚£äº›å—è¿‡ç‰¹è®¸è®­ç»ƒçš„ï¼Œå¤§å¸ˆçº§åˆ«çš„ç¨‹åºå‘˜çš„ç§˜ä¼ æŠ€å·§ã€‚ å¹¸è¿çš„æ˜¯ï¼Œå‡½æ•°æ˜¯ç¼–ç¨‹çš„æŠ€å·§ç°åœ¨å·²ç»è¢«å……åˆ†é˜æ˜å› æ­¤åƒæˆ‘å’Œä½ è¿™æ ·çš„æ™®é€šäººä¹Ÿèƒ½å»è½»æ¾ä½¿ç”¨å®ƒã€‚å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªä¸»è¦æŠ€å·§å°±æ˜¯å›è°ƒå‡½æ•°ã€‚åœ¨åé¢å†…å®¹ä¸­ä½ ä¼šå‘ç°å®ç°å›è°ƒå‡½æ•°å…¶å®å°±å’Œæ™®é€šå‡½æ•°ä¼ å‚ä¸€æ ·ç®€å•ã€‚è¿™ä¸ªæŠ€å·§æ˜¯å¦‚æ­¤çš„ç®€å•ä»¥è‡´äºæˆ‘å¸¸å¸¸æ„Ÿåˆ°å¾ˆå¥‡æ€ªä¸ºä»€ä¹ˆå®ƒç»å¸¸è¢«åŒ…å«åœ¨è®²è¿°Javascripté«˜çº§æŠ€å·§çš„ç« èŠ‚ä¸­ã€‚ ä»€ä¹ˆæ˜¯å›è°ƒæˆ–è€…é«˜é˜¶å‡½æ•°ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¹Ÿè¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼ˆåœ¨è¿™é‡Œæˆ‘ä»¬æŠŠå¦ä¸€ä¸ªå‡½æ•°å«åšâ€œotherFunctionâ€ï¼‰çš„å‡½æ•°ï¼Œå›è°ƒå‡½æ•°åœ¨otherFunctionä¸­è¢«è°ƒç”¨ã€‚ä¸€ä¸ªå›è°ƒå‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å¼ï¼ˆä¸ºä¸€ä¸ªå¸¸è§é—®é¢˜åˆ›å»ºçš„è§£å†³æ–¹æ¡ˆï¼‰ï¼Œå› æ­¤ï¼Œä½¿ç”¨å›è°ƒå‡½æ•°ä¹Ÿå«åšå›è°ƒæ¨¡å¼ã€‚ å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•° å‡½æ•°çš„å‚æ•°å¯ä»¥æ¥æ”¶å˜é‡ ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°åšå‚æ•° èƒ½æ¥æ”¶å‡½æ•°åšå‚æ•°çš„å‡½æ•°å°±æ˜¯é«˜é˜¶å‡½æ•° ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨jQueryä¸­ä½¿ç”¨å›è°ƒå‡½æ•°ç®€å•æ™®éçš„ä¾‹å­ï¼šğŸ‘‡12345//æ³¨æ„åˆ°clickæ–¹æ³•ä¸­æ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå˜é‡//å®ƒå°±æ˜¯å›è°ƒå‡½æ•°$("#btn_1").click(function() &#123; alert("Btn 1 Clicked");&#125;); æ­£å¦‚ä½ åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº†clickæ–¹æ³•ã€‚clickæ–¹æ³•ä¼šè°ƒç”¨ï¼ˆæˆ–è€…æ‰§è¡Œï¼‰æˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„å‡½æ•°ã€‚è¿™æ˜¯Javascriptä¸­å›è°ƒå‡½æ•°çš„å…¸å‹ç”¨æ³•ï¼Œå®ƒåœ¨jQueryä¸­å¹¿æ³›è¢«ä½¿ç”¨ã€‚ å…³äºå›è°ƒå‡½æ•°çš„è¿ä½œæ–¹å¼ï¼Œè¯¦è§å¼‚æ­¥æœºåˆ¶ é™¤äº†åœ¨å‚æ•°ä½ç½®å®šä¹‰åŒ¿åå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°ä¹‹å¤–ï¼Œå¦ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯å®šä¹‰ä¸€ä¸ªå‘½åå‡½æ•°å¹¶å°†å‡½æ•°åä½œä¸ºå˜é‡ä¼ é€’ç»™å‡½æ•°ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼šğŸ‘‡12345678910111213141516171819202122232425262728//å…¨å±€å˜é‡var allUserData = [];//æ™®é€šçš„logStuffå‡½æ•°ï¼Œå°†å†…å®¹æ‰“å°åˆ°æ§åˆ¶å° function logStuff (userData)&#123; if ( typeof userData === "string")&#123; console.log(userData); &#125;else if ( typeof userData === "object")&#123; for(var item in userData)&#123; console.log(item + ": " + userData[item]); &#125; &#125;&#125; //ä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œåé¢ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•° function getInput (options, callback)&#123; allUserData.push(options); //ç¡®ä¿callbackæ˜¯ä¸€ä¸ªå‡½æ•° if(typeof callback === "function")&#123; callback(options); &#125;&#125;//å½“æˆ‘ä»¬è°ƒç”¨getInputå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°†logStuffä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å®ƒ //å› æ­¤logStuffå°†ä¼šåœ¨getInputå‡½æ•°å†…è¢«å›è°ƒï¼ˆæˆ–è€…æ‰§è¡Œï¼‰ getInput(&#123;name:"Rich",speciality:"Javascript"&#125;, logStuff);//name:Rich//speciality:Javascript ä½¿ç”¨thiså¯¹è±¡çš„æ–¹æ³•ä½œä¸ºå›è°ƒå‡½æ•°æ—¶çš„é—®é¢˜å½“å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªthiså¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ”¹å˜æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ–¹æ³•æ¥ä¿è¯thiså¯¹è±¡çš„ä¸Šä¸‹æ–‡ã€‚å¦åˆ™å¦‚æœå›è°ƒå‡½æ•°è¢«ä¼ é€’ç»™ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œthiså¯¹è±¡è¦ä¹ˆæŒ‡å‘å…¨å±€windowå¯¹è±¡ï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰,è¦ä¹ˆæŒ‡å‘åŒ…å«æ–¹æ³•çš„å¯¹è±¡ã€‚ æˆ‘ä»¬åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¯´æ˜ï¼šğŸ‘‡123456789101112131415161718192021222324var clientData = &#123; id: 094545, fullName: "Not Set", //setUsrNameæ˜¯ä¸€ä¸ªåœ¨clientDataå¯¹è±¡ä¸­çš„æ–¹æ³• setUserName: function (firstName, lastName)&#123; //è¿™æŒ‡å‘äº†å¯¹è±¡ä¸­çš„fullNameå±æ€§ this.fullName = firstName + " " + lastName; &#125;&#125;function getUserInput(firstName, lastName, callback)&#123; //åœ¨è¿™åšäº›ä»€ä¹ˆæ¥ç¡®è®¤firstName/lastName //ç°åœ¨å­˜å‚¨names callback(firstName, lastName);&#125;//å½“clientData.setUsernameè¢«æ‰§è¡Œæ—¶ï¼Œthis.fullNameå¹¶æ²¡æœ‰è®¾ç½®clientDataå¯¹è±¡ä¸­çš„fullNameå±æ€§ã€‚//ç›¸åï¼Œå®ƒå°†è®¾ç½®windowå¯¹è±¡ä¸­çš„fullNameå±æ€§ï¼Œå› ä¸ºgetUserInputæ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºå…¨å±€å‡½æ•°ä¸­çš„thiså¯¹è±¡æŒ‡å‘windowå¯¹è±¡ã€‚getUserInput("Barack","Obama",clientData.setUserName);console.log(clientData,fullName); //Not Set//fullNameå±æ€§å°†åœ¨windowå¯¹è±¡ä¸­è¢«åˆå§‹åŒ– console.log(window.fullName); //Barack Obama ä½¿ç”¨Callå’ŒApplyå‡½æ•°æ¥ä¿å­˜thisæˆ‘ä»¬çŸ¥é“æ¯ä¸ªJavascriptä¸­çš„å‡½æ•°éƒ½æœ‰ä¸¤ä¸ªæ–¹æ³•:Callå’ŒApplyã€‚è¿™äº›æ–¹æ³•è¢«ç”¨æ¥è®¾ç½®å‡½æ•°å†…éƒ¨çš„thiså¯¹è±¡ä»¥åŠç»™æ­¤å‡½æ•°ä¼ é€’å˜é‡ã€‚ callæ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¢«ç”¨æ¥åœ¨å‡½æ•°å†…éƒ¨å½“åšthisçš„å¯¹è±¡ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°è¢«æŒ¨ä¸ªä¼ é€’ï¼ˆå½“ç„¶ä½¿ç”¨é€—å·åˆ†å¼€ï¼‰ã€‚Applyå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯åœ¨å‡½æ•°å†…éƒ¨ä½œä¸ºthisçš„å¯¹è±¡ï¼Œç„¶è€Œæœ€åä¸€ä¸ªå‚æ•°ç¡®æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å€¼çš„æ•°ç»„ã€‚ å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨Applyå’ŒCallæœ‰å¤šä¹ˆçš„ç®€å•ã€‚ä¸ºäº†ä¿®å¤å‰é¢ä¾‹å­çš„é—®é¢˜ï¼Œæˆ‘å°†åœ¨ğŸ‘‡ä¸‹é¢ä½ çš„ä¾‹å­ä¸­ä½¿ç”¨Applyå‡½æ•°123456789101112131415//æ³¨æ„åˆ°æˆ‘ä»¬å¢åŠ äº†æ–°çš„å‚æ•°ä½œä¸ºå›è°ƒå¯¹è±¡ï¼Œå«åšâ€œcallbackObjâ€function getUserInput(firstName, lastName, callback, callbackObj)&#123; //åœ¨è¿™é‡Œåšäº›ä»€ä¹ˆæ¥ç¡®è®¤åå­— //apply callback.apply(callbackObj, [firstName, lastName]); //ç­‰ä»·call //callback.call(callbackObj, firstName, lastName);&#125;//æˆ‘ä»¬å°†clientData.setUserNameæ–¹æ³•å’ŒclientDataå¯¹è±¡ä½œä¸ºå‚æ•°ï¼ŒclientDataå¯¹è±¡ä¼šè¢«Applyæ–¹æ³•ä½¿ç”¨æ¥è®¾ç½®thiså¯¹è±¡ getUserInput("Barack", "Obama", clientData.setUserName, clientData);//clientDataä¸­çš„fullNameå±æ€§è¢«æ­£ç¡®çš„è®¾ç½®console.log(clientUser.fullName); //Barack Obama å›è°ƒåœ°ç‹±é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆåœ¨æ‰§è¡Œå¼‚æ­¥ä»£ç æ—¶ï¼Œæ— è®ºä»¥ä»€ä¹ˆé¡ºåºç®€å•çš„æ‰§è¡Œä»£ç ï¼Œç»å¸¸æƒ…å†µä¼šå˜æˆè®¸å¤šå±‚çº§çš„å›è°ƒå‡½æ•°å †ç§¯ä»¥è‡´ä»£ç å˜æˆä¸‹é¢çš„æƒ…å½¢ã€‚è¿™äº›æ‚ä¹±æ— ç« çš„ä»£ç å«åšå›è°ƒåœ°ç‹±å› ä¸ºå›è°ƒå¤ªå¤šè€Œä½¿çœ‹æ‡‚ä»£ç å˜å¾—éå¸¸å›°éš¾ã€‚æˆ‘ä»node-mongodb-nativeï¼Œä¸€ä¸ªé€‚ç”¨äºNode.jsçš„MongoDBé©±åŠ¨ä¸­æ‹¿æ¥äº†ä¸€ä¸ªä¾‹å­ã€‚è¿™æ®µä½äºä¸‹æ–¹çš„ä»£ç å°†ä¼šå……åˆ†è¯´æ˜å›è°ƒåœ°ç‹±ï¼šğŸ‘‡1234567891011121314151617var p_client = new Db('integration_tests_20', new Server("127.0.0.1", 27017, &#123;&#125;), &#123;'pk':CustomPKFactory&#125;); p_client.open(function(err, p_client) &#123; p_client.dropDatabase(function(err, done) &#123; p_client.createCollection('test_custom_key', function(err, collection) &#123; collection.insert(&#123;'a':1&#125;, function(err, docs) &#123; collection.find(&#123;'_id':new ObjectID("aaaaaaaaaaaa")&#125;, function(err, cursor) &#123; cursor.toArray(function(err, items) &#123; test.assertEquals(1, items.length); // Let's close the db p_client.close(); &#125;); &#125;); &#125;); &#125;); &#125;); &#125;); ä½ åº”è¯¥ä¸æƒ³åœ¨ä½ çš„ä»£ç ä¸­é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå½“ä½ é‡åˆ°äº†â€“ä½ å°†ä¼šæ—¶ä¸æ—¶çš„é‡åˆ°è¿™ç§æƒ…å†µâ€“è¿™é‡Œæœ‰å…³äºè¿™ä¸ªé—®é¢˜çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚ ç»™ä½ çš„å‡½æ•°å‘½åå¹¶ä¼ é€’å®ƒä»¬çš„åå­—ä½œä¸ºå›è°ƒå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸»å‡½æ•°çš„å‚æ•°ä¸­å®šä¹‰åŒ¿åå‡½æ•°ã€‚ æ¨¡å—åŒ–Lå°†ä½ çš„ä»£ç åˆ†éš”åˆ°æ¨¡å—ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åˆ°å¤„ä¸€å—ä»£ç æ¥å®Œæˆç‰¹å®šçš„å·¥ä½œã€‚ç„¶åä½ å¯ä»¥åœ¨ä½ çš„å·¨å‹åº”ç”¨ä¸­å¯¼å…¥æ¨¡å—ã€‚ Javascriptå›è°ƒå‡½æ•°éå¸¸ç¾å¦™ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œå®ƒä¸ºwebåº”ç”¨å’Œä»£ç æä¾›äº†è¯¸å¤šå¥½å¤„ã€‚æˆ‘ä»¬åº”è¯¥åœ¨æœ‰éœ€æ±‚æ—¶ä½¿ç”¨å®ƒï¼Œæˆ–è€…ä¸ºäº†ä»£ç çš„æŠ½è±¡æ€§ã€å¯ç»´æŠ¤æ€§ä»¥åŠå¯è¯»æ€§è€Œä½¿ç”¨å›è°ƒå‡½æ•°æ¥é‡æ„ä½ çš„ä»£ç ã€‚ æœ¬æ–‡è¯‘è‡ªunderstand Javascript callback functions and use themï¼Œæœ‰åˆ æ”¹ã€‚ èŠ‚é€‰è‡ªï¼šå‰ç«¯ä¹±ç‚–-http://www.html-js.com/article/1592 æœ‰åˆ æ”¹]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­”é›€ä¸ºä»€ä¹ˆå¼€å±å‘¢?]]></title>
    <url>%2F2017%2F12%2F07%2Fwhy_does_the_peacock_spread_its_tail%2F</url>
    <content type="text"><![CDATA[å­”é›€ä¸ºä»€ä¹ˆå¼€å±å‘¢ï¼Ÿå¥½åƒçªç„¶æ˜ç™½äº†è€ç¥–å®—å¼ºè°ƒçš„ã€æˆå®¶ç«‹ä¸šã€ï¼Œæˆå®¶åœ¨å‰ï¼Œç«‹ä¸šåœ¨åã€‚ç¨³å®šçš„ä¼´ä¾£å¯¹äººç±»è¿™ç§æœ‰æ€§ç”Ÿæ®–çš„åŠ¨ç‰©æ¥è¯´ï¼Œæ— ç–‘æ˜¯é‡ä¸­ä¹‹é‡ã€‚å®è§‚ä¸€ç‚¹è®²ï¼Œäººçš„ä¸€ç”Ÿå¯ä»¥åˆ†ä¸ºè¿™å‡ ä¸ªé˜¶æ®µï¼š ç”Ÿé•¿å‘è‚²è‡³æ€§æˆç†Ÿ å¯»æ‰¾é…å¶ äº¤é…äº§å­ æŠšå…»åä»£è‡³æ€§æˆç†Ÿ æ„Ÿæƒ…ç¨³å®šçš„äººå„¿å¯ä»¥å°†æ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨å®¶åº­å’Œäº‹ä¸šä¸Šã€‚è€Œé‚£äº›ï¼Œé‚£äº›å•èº«ç‹—å‘¢ï¼Ÿï¼Ÿä¸ä»…éœ€è¦å…¨å±€tiggerå»ç›‘å¬æ„ä¸­äººçš„å‡ºç°äº‹ä»¶ï¼Œè¿˜è¦è½®è¯¢è¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯ä¸æ˜¯æ„ä¸­äººã€‚å‰è€…æ˜¯å ç”¨çš„èµ„æºæ˜¯éšæ€§çš„ï¼Œæ˜¯ç”Ÿç†é©±åŠ¨çš„ï¼Œï¼Œåè€…æ˜¯æ˜¾æ€§çš„ï¼Œç”šè‡³åœ¨æŸä¸€æ—¶é—´æ®µæ˜¯åŒæ­¥ä¸”é˜»å¡çš„ã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œï¼Œä½ æ­£åœ¨å·¥ä½œï¼Œå¿½ç„¶åå®¢äººæ¥è®¿ï¼Œä½™å…‰æ‰«åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œï¼Œ å¦‚æœæ˜¯ç”·æ€§ï¼Œtiggerç›´æ¥æ— è§†ï¼Œå¤´éƒ½ä¸å¸¦æŠ¬çš„ï¼› å¦‚æœæ˜¯å¥³æ€§ï¼Œæ³¨æ„åŠ›ã€ä¸è‡ªè§‰ã€è¢«åˆ†æ•£ï¼ŒæŠ¬å¤´ï¼Œï¼Œè‚¤ç™½è²Œç¾ï¼Ÿï¼Ÿå·¥ä½œäº‹ä»¶è¢«ä¸­æ–­ï¼Œå„ç§åˆ†æï¼Œåœ¨æœ‰é™çš„ä¸Šä¸‹æ–‡ä¸­å°½å¯èƒ½è·å–è¯¥å¼‚æ€§çš„ä¿¡æ¯ã€‚ å†è¯•æƒ³ä¸‹ï¼Œï¼Œå‡ºç°è¿™æ ·ä¸€ä¸ªã€æ„ä¸­äººã€ï¼Œä½ åœ¨TAçš„æœ‹å‹åœˆä¸­æ·»åŠ äº†è¯„è®ºã€‚æ¥ä¸‹æ¥ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ç§æƒ…å†µï¼Œï¼Œå°±æ˜¯ä¸åœçš„è§£é”æ‰‹æœºï¼Œæ‰“å¼€å¾®ä¿¡ï¼Œåˆ·æ–°æœ‹å‹åœˆã€‚ å•èº«å¯èƒ½çœŸçš„æ˜¯ä¸€ç§éå¸¸è§„çš„ç”Ÿæ´»çŠ¶æ€å§ï¼Œè‡³å°‘ä¸æ˜¯ç¨³æ€ã€‚å®ƒåƒè´«ç©·ä¸€æ ·å ç”¨ç€æˆ‘ä»¬æœ‰é™çš„æ³¨æ„åŠ›èµ„æºï¼Œï¼Œéƒ½æ˜¯ç”Ÿç†é¥¥æ¸´ï¼Œæ— æš‡é¡¾åŠè¯—å’Œè¿œæ–¹ï¼Œå–‚é¥±äº†å†è¯´ã€‚]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>æˆå®¶ç«‹ä¸š</tag>
        <tag>å•èº«</tag>
        <tag>æ³¨æ„åŠ›èµ„æº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½»åº•ç†è§£JavaScriptåŒæ­¥|å¼‚æ­¥|äº‹ä»¶å¾ªç¯(EventLoop)]]></title>
    <url>%2F2017%2F12%2F06%2Fjavascript_sync_async_event-loop%2F</url>
    <content type="text"><![CDATA[JavaScriptï¼šå½»åº•ç†è§£åŒæ­¥ã€å¼‚æ­¥å’Œäº‹ä»¶å¾ªç¯(Event Loop)ä¸ºä»€ä¹ˆJavaScriptæ˜¯å•çº¿ç¨‹ï¼ŸJavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆJavaScriptä¸èƒ½æœ‰å¤šä¸ªçº¿ç¨‹å‘¢ï¼Ÿ JavaScriptçš„å•çº¿ç¨‹ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå‡å®šJavaScriptåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿæ‰€ä»¥ï¼Œæ¸²æŸ“DOMçš„çº¿ç¨‹å’ŒJavaScriptæ‰§è¡Œçš„çº¿ç¨‹ä¸€å®šæ˜¯äº’æ–¥çš„ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼ŒJavaScriptå°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ï¼Œå°†æ¥ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUçš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5æå‡ºWeb Workeræ ‡å‡†ï¼Œå…è®¸JavaScriptè„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜JavaScriptå•çº¿ç¨‹çš„æœ¬è´¨ã€‚ è™½ç„¶JSæ˜¯å•çº¿ç¨‹çš„ä½†æ˜¯æµè§ˆå™¨çš„å†…æ ¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œåœ¨æµè§ˆå™¨çš„å†…æ ¸ä¸­ä¸åŒçš„å¼‚æ­¥æ“ä½œç”±ä¸åŒçš„æµè§ˆå™¨å†…æ ¸æ¨¡å—è°ƒåº¦æ‰§è¡Œï¼Œå¼‚æ­¥æ“ä½œä¼šå°†ç›¸å…³å›è°ƒæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚è€Œä¸åŒçš„å¼‚æ­¥æ“ä½œæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ—¶æœºä¹Ÿä¸åŒï¼Œå¦‚ onclick, setTimeout, ajax å¤„ç†çš„æ–¹å¼éƒ½ä¸åŒï¼Œè¿™äº›å¼‚æ­¥æ“ä½œæ˜¯ç”±æµè§ˆå™¨å†…æ ¸çš„ webcore æ¥æ‰§è¡Œçš„ï¼Œwebcore åŒ…å«ä¸Šå›¾ä¸­çš„3ç§ webAPIï¼Œåˆ†åˆ«æ˜¯ DOM Bindingã€networkã€timeræ¨¡å—ã€‚ onclickç”±æµè§ˆå™¨å†…æ ¸çš„DOM Bindingæ¨¡å—æ¥å¤„ç†ï¼Œå½“äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°ä¼šç«‹å³æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ setTimeoutä¼šç”±æµè§ˆå™¨å†…æ ¸çš„timeræ¨¡å—æ¥è¿›è¡Œå»¶æ—¶å¤„ç†ï¼Œå½“æ—¶é—´åˆ°è¾¾çš„æ—¶å€™ï¼Œæ‰ä¼šå°†å›è°ƒå‡½æ•°æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ ajaxåˆ™ä¼šç”±æµè§ˆå™¨å†…æ ¸çš„networkæ¨¡å—æ¥å¤„ç†ï¼Œåœ¨ç½‘ç»œè¯·æ±‚å®Œæˆè¿”å›ä¹‹åï¼Œæ‰å°†å›è°ƒæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ åŒæ­¥å’Œå¼‚æ­¥å‡è®¾å­˜åœ¨ä¸€ä¸ªå‡½æ•°Aï¼šA(args...);åŒæ­¥ï¼šå¦‚æœåœ¨å‡½æ•°Aè¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è€…å°±èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æœ(å³æ‹¿åˆ°äº†é¢„æœŸçš„è¿”å›å€¼æˆ–è€…çœ‹åˆ°äº†é¢„æœŸçš„æ•ˆæœ)ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯åŒæ­¥çš„ã€‚ä¾‹å¦‚ï¼šğŸ‘‡12Math.sqrt(2);console.log('Hi'); ç¬¬ä¸€ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œå°±æ‹¿åˆ°äº†é¢„æœŸçš„è¿”å›å€¼ï¼š2çš„å¹³æ–¹æ ¹ã€‚ ç¬¬äºŒä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œå°±çœ‹åˆ°äº†é¢„æœŸçš„æ•ˆæœï¼šåœ¨æ§åˆ¶å°æ‰“å°äº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ æ‰€ä»¥è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯åŒæ­¥çš„ã€‚ å¼‚æ­¥ï¼šå¦‚æœåœ¨å‡½æ•°Aè¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è€…è¿˜ä¸èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æœï¼Œè€Œæ˜¯éœ€è¦åœ¨å°†æ¥é€šè¿‡ä¸€å®šçš„æ‰‹æ®µå¾—åˆ°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯å¼‚æ­¥çš„ã€‚ä¾‹å¦‚ï¼šğŸ‘‡123fs.readFile('foo.txt', 'utf8', function(err, data) &#123; console.log(data);&#125;); åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡fs.readFileå‡½æ•°è¯»å–æ–‡ä»¶foo.txtä¸­çš„å†…å®¹ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚ä½†æ˜¯åœ¨fs.readFileå‡½æ•°è¿”å›æ—¶ï¼Œæˆ‘ä»¬æœŸæœ›çš„ç»“æœå¹¶ä¸ä¼šå‘ç”Ÿï¼Œè€Œæ˜¯è¦ç­‰åˆ°æ–‡ä»¶å…¨éƒ¨è¯»å–å®Œæˆä¹‹åã€‚å¦‚æœæ–‡ä»¶å¾ˆå¤§çš„è¯å¯èƒ½è¦å¾ˆé•¿æ—¶é—´ã€‚ ä¸‹é¢ä»¥AJAXè¯·æ±‚ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸€ä¸‹åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼š å¼‚æ­¥AJAXï¼š ä¸»çº¿ç¨‹ï¼šâ€œä½ å¥½ï¼ŒAJAXçº¿ç¨‹ã€‚è¯·ä½ å¸®æˆ‘å‘ä¸ªHTTPè¯·æ±‚å§ï¼Œæˆ‘æŠŠè¯·æ±‚åœ°å€å’Œå‚æ•°éƒ½ç»™ä½ äº†ã€‚â€ AJAXçº¿ç¨‹ï¼šâ€œå¥½çš„ï¼Œä¸»çº¿ç¨‹ã€‚æˆ‘é©¬ä¸Šå»å‘ï¼Œä½†å¯èƒ½è¦èŠ±ç‚¹å„¿æ—¶é—´å‘¢ï¼Œä½ å¯ä»¥å…ˆå»å¿™åˆ«çš„ã€‚â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œè°¢è°¢ï¼Œä½ æ‹¿åˆ°å“åº”åå‘Šè¯‰æˆ‘ä¸€å£°å•Šã€‚â€(æ¥ç€ï¼Œä¸»çº¿ç¨‹åšå…¶ä»–äº‹æƒ…å»äº†ã€‚ä¸€é¡¿é¥­çš„æ—¶é—´åï¼Œå®ƒæ”¶åˆ°äº†å“åº”åˆ°è¾¾çš„é€šçŸ¥ã€‚) åŒæ­¥AJAXï¼š ä¸»çº¿ç¨‹ï¼šâ€œä½ å¥½ï¼ŒAJAXçº¿ç¨‹ã€‚è¯·ä½ å¸®æˆ‘å‘ä¸ªHTTPè¯·æ±‚å§ï¼Œæˆ‘æŠŠè¯·æ±‚åœ°å€å’Œå‚æ•°éƒ½ç»™ä½ äº†ã€‚â€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼ŒAJAXçº¿ç¨‹ï¼Œä½ æ€ä¹ˆä¸è¯´è¯ï¼Ÿâ€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼å–‚å–‚å–‚ï¼â€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ (ä¸€ç‚·é¦™çš„æ—¶é—´åâ€¦) ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼æ±‚ä½ è¯´å¥è¯å§ï¼â€ AJAXçº¿ç¨‹ï¼šâ€œä¸»çº¿ç¨‹ï¼Œä¸å¥½æ„æ€ï¼Œæˆ‘åœ¨å·¥ä½œçš„æ—¶å€™ä¸èƒ½è¯´è¯ã€‚ä½ çš„è¯·æ±‚å·²ç»å‘å®Œäº†ï¼Œæ‹¿åˆ°å“åº”æ•°æ®äº†ï¼Œç»™ä½ ã€‚â€ æ­£æ˜¯ç”±äºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œå¼‚æ­¥å®¹æ˜“å®ç°éé˜»å¡ï¼Œæ‰€ä»¥åœ¨JavaScriptä¸­å¯¹äºè€—æ—¶çš„æ“ä½œæˆ–è€…æ—¶é—´ä¸ç¡®å®šçš„æ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥å°±æˆäº†å¿…ç„¶çš„é€‰æ‹©ã€‚ å¼‚æ­¥è¿‡ç¨‹çš„æ„æˆè¦ç´ ä»ä¸Šæ–‡å¯ä»¥çœ‹å‡ºï¼Œå¼‚æ­¥å‡½æ•°å®é™…ä¸Šå¾ˆå¿«å°±è°ƒç”¨å®Œæˆäº†ã€‚ä½†æ˜¯åé¢è¿˜æœ‰å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€é€šçŸ¥ä¸»çº¿ç¨‹ã€ä¸»çº¿ç¨‹è°ƒç”¨å›è°ƒå‡½æ•°ç­‰å¾ˆå¤šæ­¥éª¤ã€‚æˆ‘ä»¬æŠŠæ•´ä¸ªè¿‡ç¨‹å«åšå¼‚æ­¥è¿‡ç¨‹ã€‚å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨åœ¨æ•´ä¸ªå¼‚æ­¥è¿‡ç¨‹ä¸­ï¼Œåªæ˜¯ä¸€å°éƒ¨åˆ†ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š ä¸»çº¿ç¨‹å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œç›¸åº”çš„å·¥ä½œçº¿ç¨‹æ¥æ”¶è¯·æ±‚å¹¶å‘ŠçŸ¥ä¸»çº¿ç¨‹å·²æ”¶åˆ°(å¼‚æ­¥å‡½æ•°è¿”å›)ï¼›ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼ŒåŒæ—¶å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼›å·¥ä½œçº¿ç¨‹å®Œæˆå·¥ä½œåï¼Œé€šçŸ¥ä¸»çº¿ç¨‹ï¼›ä¸»çº¿ç¨‹æ”¶åˆ°é€šçŸ¥åï¼Œæ‰§è¡Œä¸€å®šçš„åŠ¨ä½œ(è°ƒç”¨å›è°ƒå‡½æ•°)ã€‚ å¼‚æ­¥å‡½æ•°é€šå¸¸æ˜¯è¿™æ ·çš„å½¢å¼ï¼šA(args..., callbackFn)ã€‚å®ƒå¯ä»¥å«åšå¼‚æ­¥è¿‡ç¨‹çš„å‘èµ·å‡½æ•°ï¼Œæˆ–è€…å«åšå¼‚æ­¥ä»»åŠ¡æ³¨å†Œå‡½æ•°ã€‚argsæ˜¯è¿™ä¸ªå‡½æ•°éœ€è¦çš„å‚æ•°ã€‚callbackFnä¹Ÿæ˜¯è¿™ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œä½†æ˜¯å®ƒæ¯”è¾ƒç‰¹æ®Šæ‰€ä»¥å•ç‹¬åˆ—å‡ºæ¥ã€‚ æ‰€ä»¥ï¼Œä»ä¸»çº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹åŒ…æ‹¬ä¸‹é¢ä¸¤ä¸ªè¦ç´ ï¼š å‘èµ·å‡½æ•°(æˆ–å«æ³¨å†Œå‡½æ•°)A å›è°ƒå‡½æ•°callbackFn å®ƒä»¬éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè°ƒç”¨çš„ï¼Œå…¶ä¸­æ³¨å†Œå‡½æ•°ç”¨æ¥å‘èµ·å¼‚æ­¥è¿‡ç¨‹ï¼Œå›è°ƒå‡½æ•°ç”¨æ¥å¤„ç†ç»“æœã€‚ ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼š1setTimeout(fn, 1000); å…¶ä¸­çš„setTimeoutå°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„å‘èµ·å‡½æ•°ï¼Œfnæ˜¯å›è°ƒå‡½æ•°ã€‚æ³¨æ„ï¼šå‰é¢è¯´çš„å½¢å¼A(args..., callbackFn)åªæ˜¯ä¸€ç§æŠ½è±¡çš„è¡¨ç¤ºï¼Œå¹¶ä¸ä»£è¡¨å›è°ƒå‡½æ•°ä¸€å®šè¦ä½œä¸ºå‘èµ·å‡½æ•°çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼šğŸ‘‡12345var xhr = new XMLHttpRequest();xhr.open('GET', url);xhr.onload = xxx; // æ·»åŠ å›è°ƒå‡½æ•°xhr.onerror = xxx; // æ·»åŠ å›è°ƒå‡½æ•°xhr.send(); // å‘èµ·å‡½æ•° å‘èµ·å‡½æ•°å’Œå›è°ƒå‡½æ•°å°±æ˜¯åˆ†ç¦»çš„ï¼Œå‘èµ·å‡½æ•°å’Œå›è°ƒå‡½æ•°ä½ç½®äº’æ¢ä¹Ÿæ˜¯ä¸å½±å“çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡å®šå›è°ƒå‡½æ•°çš„éƒ¨åˆ†ï¼ˆonloadå’Œonerrorï¼‰ï¼Œåœ¨send()æ–¹æ³•çš„å‰é¢æˆ–åé¢æ— å…³ç´§è¦ï¼Œå› ä¸ºå®ƒä»¬å±äºæ‰§è¡Œæ ˆçš„ä¸€éƒ¨åˆ†ï¼Œç³»ç»Ÿæ€»æ˜¯æ‰§è¡Œå®Œå®ƒä»¬ï¼Œæ‰ä¼šå»è¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ã€‚ æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯ä¸Šæ–‡è®²åˆ°ï¼Œå¼‚æ­¥è¿‡ç¨‹ä¸­ï¼Œå·¥ä½œçº¿ç¨‹åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåéœ€è¦é€šçŸ¥ä¸»çº¿ç¨‹ã€‚é‚£ä¹ˆè¿™ä¸ªé€šçŸ¥æœºåˆ¶æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯ã€‚ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š å·¥ä½œçº¿ç¨‹å°†æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹é€šè¿‡äº‹ä»¶å¾ªç¯è¿‡ç¨‹å»å–æ¶ˆæ¯ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œå®ƒé‡Œé¢å­˜æ”¾ç€å„ç§æ¶ˆæ¯ã€‚ äº‹ä»¶å¾ªç¯ï¼šäº‹ä»¶å¾ªç¯æ˜¯æŒ‡ä¸»çº¿ç¨‹é‡å¤ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ¶ˆæ¯ã€æ‰§è¡Œçš„è¿‡ç¨‹ã€‚ å®é™…ä¸Šï¼Œä¸»çº¿ç¨‹åªä¼šåšä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯ä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢å–æ¶ˆæ¯ã€æ‰§è¡Œæ¶ˆæ¯ï¼Œå†å–æ¶ˆæ¯ã€å†æ‰§è¡Œã€‚å½“æ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œå°±ä¼šç­‰å¾…ç›´åˆ°æ¶ˆæ¯é˜Ÿåˆ—å˜æˆéç©ºã€‚è€Œä¸”ä¸»çº¿ç¨‹åªæœ‰åœ¨å°†å½“å‰çš„æ¶ˆæ¯æ‰§è¡Œå®Œæˆåï¼Œæ‰ä¼šå»å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯ã€‚è¿™ç§æœºåˆ¶å°±å«åšäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå–ä¸€ä¸ªæ¶ˆæ¯å¹¶æ‰§è¡Œçš„è¿‡ç¨‹å«åšä¸€æ¬¡å¾ªç¯ã€‚ä¼ªä»£ç è¡¨ç¤ºç±»ä¼¼123while (queue.waitForMessage()) &#123; queue.processNextMessage();&#125; å¦‚æœå½“å‰æ²¡æœ‰ä»»ä½•æ¶ˆæ¯queue.waitForMessage ä¼šç­‰å¾…åŒæ­¥æ¶ˆæ¯åˆ°è¾¾ã€‚æ‰§è¡Œæœºåˆ¶å¦‚ä¸‹ï¼š æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚ ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€œä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚ ä¸€æ—¦â€œæ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚ ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚ æ‰§è¡Œè‡³å®Œæˆæ¯ä¸€ä¸ªæ¶ˆæ¯å®Œæ•´çš„æ‰§è¡Œåï¼Œå…¶å®ƒæ¶ˆæ¯æ‰ä¼šè¢«æ‰§è¡Œã€‚å½“ä½ åˆ†æä½ çš„ç¨‹åºæ—¶ï¼Œè¿™ç‚¹æä¾›äº†ä¸€äº›ä¼˜ç§€çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ¯å½“ä¸€ä¸ªå‡½æ•°è¿è¡Œæ—¶ï¼Œè¯¥å‡½æ•°å ç”¨çš„(çº¿ç¨‹)èµ„æºä¸èƒ½è¢«æŠ¢å ï¼Œå¹¶ä¸”åœ¨å…¶ä»–ä»£ç è¿è¡Œä¹‹å‰å®Œå…¨è¿è¡Œï¼ˆä¸”å¯ä»¥ä¿®æ”¹æ­¤å‡½æ•°æ“ä½œçš„æ•°æ®ï¼‰ã€‚è¿™ä¸Cè¯­è¨€ä¸åŒï¼Œä¾‹å¦‚ï¼Œå¦‚æœå‡½æ•°åœ¨çº¿ç¨‹ä¸­è¿è¡Œï¼Œåˆ™å¯ä»¥åœ¨ä»»ä½•ä½ç½®ç»ˆæ­¢ç„¶ååœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œå…¶ä»–ä»£ç ã€‚ è¿™ä¸ªæ¨¡å‹çš„ä¸€ä¸ªç¼ºç‚¹åœ¨äºå½“ä¸€ä¸ªæ¶ˆæ¯éœ€è¦å¤ªé•¿æ—¶é—´æ‰èƒ½å®Œæˆï¼ŒWebåº”ç”¨æ— æ³•å¤„ç†ç”¨æˆ·çš„äº¤äº’ï¼Œä¾‹å¦‚ç‚¹å‡»æˆ–æ»šåŠ¨ã€‚ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•æ˜¯ä½¿æ¶ˆæ¯å¤„ç†ç¼©çŸ­ï¼Œå¦‚æœå¯èƒ½ï¼Œå°†ä¸€ä¸ªæ¶ˆæ¯è£å‰ªæˆå‡ ä¸ªæ¶ˆæ¯ã€‚ æ·»åŠ æ¶ˆæ¯åœ¨æµè§ˆå™¨é‡Œï¼Œå½“ä¸€ä¸ªäº‹ä»¶å‡ºç°ä¸”è¯¥å¯¹è±¡(this)ç»‘å®šäº†äº‹ä»¶ç›‘å¬å™¨ï¼Œæ¶ˆæ¯å¯èƒ½éšæ—¶è¢«æ·»åŠ ã€‚å¦‚æœæ²¡æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œäº‹ä»¶è¯¥ä¼šä¸¢å¤±ã€‚æ‰€ä»¥ç‚¹å‡»ä¸€ä¸ªé™„å¸¦ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°çš„å…ƒç´ ä¼šæ·»åŠ ä¸€ä¸ªæ¶ˆæ¯ã€‚å…¶å®ƒäº‹ä»¶äº¦ç„¶ã€‚ 1234var button = document.getElement('#btn');button.addEventListener('click', function(e) &#123; console.log();&#125;); ä»äº‹ä»¶çš„è§’åº¦æ¥çœ‹ï¼Œä¸Šè¿°ä»£ç è¡¨ç¤ºï¼šåœ¨æŒ‰é’®ä¸Šæ·»åŠ äº†ä¸€ä¸ªé¼ æ ‡å•å‡»äº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨ï¼›å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œé¼ æ ‡å•å‡»äº‹ä»¶è§¦å‘ï¼Œäº‹ä»¶ç›‘å¬å™¨å‡½æ•°è¢«è°ƒç”¨ã€‚ ä»å¼‚æ­¥è¿‡ç¨‹çš„è§’åº¦çœ‹ï¼ŒaddEventListenerå‡½æ•°å°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„å‘èµ·å‡½æ•°ï¼Œäº‹ä»¶ç›‘å¬å™¨å‡½æ•°å°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„å›è°ƒå‡½æ•°ã€‚äº‹ä»¶è§¦å‘æ—¶ï¼Œè¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œä¼šå°†äº‹ä»¶ç›‘å¬å™¨å‡½æ•°å°è£…æˆä¸€æ¡æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä»ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„è§’åº¦çœ‹ï¼Œå¼‚æ­¥è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šå·¥ä½œçº¿ç¨‹æ˜¯ç”Ÿäº§è€…ï¼Œä¸»çº¿ç¨‹æ˜¯æ¶ˆè´¹è€…(åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…)ã€‚å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ‰§è¡Œå®ŒæˆåæŠŠå¯¹åº”çš„å›è°ƒå‡½æ•°å°è£…æˆä¸€æ¡æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›ä¸»çº¿ç¨‹ä¸æ–­åœ°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ¶ˆæ¯å¹¶æ‰§è¡Œï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ç©ºæ—¶ä¸»çº¿ç¨‹é˜»å¡ï¼Œç›´åˆ°æ¶ˆæ¯é˜Ÿåˆ—å†æ¬¡éç©ºã€‚ äº‹ä»¶çš„æ¦‚å¿µå®é™…ä¸Šå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œäº‹ä»¶æœºåˆ¶å®é™…ä¸Šå°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„é€šçŸ¥æœºåˆ¶ã€‚æˆ‘è§‰å¾—å®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†ç¼–ç¨‹æ¥å£å¯¹å¼€å‘è€…æ›´å‹å¥½ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰çš„å¼‚æ­¥è¿‡ç¨‹ä¹Ÿéƒ½å¯ä»¥ç”¨äº‹ä»¶æ¥æè¿°ã€‚ä¾‹å¦‚ï¼šsetTimeoutå¯ä»¥çœ‹æˆå¯¹åº”ä¸€ä¸ªæ—¶é—´åˆ°äº†ï¼çš„äº‹ä»¶ã€‚å‰æ–‡çš„setTimeout(fn, 1000);å¯ä»¥çœ‹æˆï¼š1timer.addEventListener('timeout', 1000, fn); è°ƒç”¨ setTimeout å‡½æ•°ä¼šåœ¨ä¸€ä¸ªæ—¶é—´æ®µè¿‡å»ååœ¨é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªæ¶ˆæ¯ã€‚è¿™ä¸ªæ—¶é—´æ®µä½œä¸ºå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è¢«ä¼ å…¥ã€‚å¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰å…¶å®ƒæ¶ˆæ¯ï¼Œæ¶ˆæ¯ä¼šè¢«é©¬ä¸Šå¤„ç†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰å…¶å®ƒæ¶ˆæ¯ï¼ŒsetTimeoutæ¶ˆæ¯å¿…é¡»ç­‰å¾…å…¶å®ƒæ¶ˆæ¯å¤„ç†å®Œã€‚å› æ­¤ç¬¬äºŒä¸ªå‚æ•°ä»…ä»…è¡¨ç¤ºéœ€è¦ç­‰å¾…çš„æœ€å°æ—¶é—´,è€Œéç¡®åˆ‡çš„æ—¶é—´ã€‚ é›¶å»¶è¿Ÿé›¶å»¶è¿Ÿå¹¶ä¸æ˜¯æ„å‘³ç€å›è°ƒä¼šç«‹å³æ‰§è¡Œã€‚åœ¨é›¶å»¶è¿Ÿè°ƒç”¨ setTimeout æ—¶ï¼Œå¹¶ä¸æ˜¯è¿‡äº†ç»™å®šçš„æ—¶é—´é—´éš”åå°±é©¬ä¸Šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å…¶ç­‰å¾…çš„æ—¶é—´åŸºäºé˜Ÿåˆ—é‡Œæ­£åœ¨ç­‰å¾…çš„æ¶ˆæ¯æ•°é‡ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œâ€this is just a messageâ€ å°†ä¼šåœ¨å›è°ƒ (callback) è·å¾—å¤„ç†ä¹‹å‰è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œè¿™æ˜¯å› ä¸ºå»¶è¿Ÿæ˜¯è¦æ±‚è¿è¡Œæ—¶ (runtime) å¤„ç†è¯·æ±‚æ‰€éœ€çš„æœ€å°æ—¶é—´ï¼Œä½†ä¸æ˜¯æœ‰æ‰€ä¿è¯çš„æ—¶é—´ã€‚ğŸ‘‡12345678910111213141516171819(function () &#123; console.log('this is the start'); setTimeout(function cb() &#123; console.log('this is a msg from call back'); &#125;); console.log('this is just a message'); setTimeout(function cb1() &#123; console.log('this is a msg from call back1'); &#125;, 0); console.log('this is the end');&#125;)();// "this is the start"// "this is just a message"// "this is the end"// "this is a msg from call back"// "this is a msg from call back1" â€¦æ‰¯è¿œäº†ï¼Œï¼Œé‚£ä¹ˆï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­æ”¾çš„æ¶ˆæ¯å…·ä½“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ¶ˆæ¯çš„å…·ä½“ç»“æ„å½“ç„¶è·Ÿå…·ä½“çš„å®ç°æœ‰å…³ï¼Œä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼š æ¶ˆæ¯å°±æ˜¯æ³¨å†Œå¼‚æ­¥ä»»åŠ¡æ—¶æ·»åŠ çš„å›è°ƒå‡½æ•°ã€‚ å†æ¬¡ä»¥å¼‚æ­¥AJAXä¸ºä¾‹ï¼Œå‡è®¾å­˜åœ¨å¦‚ä¸‹çš„ä»£ç ï¼š12345678$.ajax('http://segmentfault.com', function(resp) &#123; console.log('æˆ‘æ˜¯å“åº”ï¼š', resp);&#125;);// å…¶ä»–ä»£ç ......... ä¸»çº¿ç¨‹åœ¨å‘èµ·AJAXè¯·æ±‚åï¼Œä¼šç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ã€‚AJAXçº¿ç¨‹è´Ÿè´£è¯·æ±‚segmentfault.comï¼Œæ‹¿åˆ°å“åº”åï¼Œå®ƒä¼šæŠŠå“åº”å°è£…æˆä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œç„¶åæ„é€ ä¸€æ¡æ¶ˆæ¯ï¼š1234// æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å°±é•¿è¿™ä¸ªæ ·å­var message = function () &#123; callbackFn(response);&#125; å…¶ä¸­çš„callbackFnå°±æ˜¯å‰é¢ä»£ç ä¸­å¾—åˆ°æˆåŠŸå“åº”æ—¶çš„å›è°ƒå‡½æ•°ã€‚ ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œå®Œå½“å‰å¾ªç¯ä¸­çš„æ‰€æœ‰ä»£ç åï¼Œå°±ä¼šåˆ°æ¶ˆæ¯é˜Ÿåˆ—å–å‡ºè¿™æ¡æ¶ˆæ¯(ä¹Ÿå°±æ˜¯messageå‡½æ•°)ï¼Œå¹¶æ‰§è¡Œå®ƒã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œå°±å®Œæˆäº†å·¥ä½œçº¿ç¨‹å¯¹ä¸»çº¿ç¨‹çš„é€šçŸ¥ï¼Œå›è°ƒå‡½æ•°ä¹Ÿå°±å¾—åˆ°äº†æ‰§è¡Œã€‚å¦‚æœä¸€å¼€å§‹ä¸»çº¿ç¨‹å°±æ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼ŒAJAXçº¿ç¨‹åœ¨æ”¶åˆ°HTTPå“åº”åï¼Œä¹Ÿå°±æ²¡å¿…è¦é€šçŸ¥ä¸»çº¿ç¨‹ï¼Œä»è€Œä¹Ÿæ²¡å¿…è¦å¾€æ¶ˆæ¯é˜Ÿåˆ—æ”¾æ¶ˆæ¯ã€‚å¦‚å›¾ğŸ‘‡ ä¸»çº¿ç¨‹ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£Event Loopï¼Œè¯·çœ‹ä¸‹å›¾ï¼ˆè½¬å¼•è‡ªPhilip Robertsçš„æ¼”è®²ã€ŠHelp, Iâ€™m stuck in an event-loopã€‹ï¼‰ã€‚ä¸Šå›¾ä¸­ï¼Œä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œäº§ç”Ÿå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰ï¼Œæ ˆä¸­çš„ä»£ç è°ƒç”¨å„ç§å¤–éƒ¨APIï¼Œå®ƒä»¬åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­åŠ å…¥å„ç§äº‹ä»¶ï¼ˆclickï¼Œloadï¼Œdoneï¼‰ã€‚åªè¦æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹å°±ä¼šå»è¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¾æ¬¡æ‰§è¡Œé‚£äº›äº‹ä»¶æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ æ°¸ä¸é˜»å¡äº‹ä»¶å¾ªç¯æ¨¡å‹çš„ä¸€ä¸ªéå¸¸æœ‰è¶£çš„ç‰¹æ€§æ˜¯ JavaScriptï¼Œä¸è®¸å¤šå…¶ä»–è¯­è¨€ä¸åŒï¼Œå®ƒæ°¸ä¸é˜»å¡ã€‚ å¤„ç† I/O é€šå¸¸é€šè¿‡äº‹ä»¶å’Œå›è°ƒæ¥æ‰§è¡Œï¼Œæ‰€ä»¥å½“ä¸€ä¸ªåº”ç”¨æ­£ç­‰å¾…IndexedDBæŸ¥è¯¢è¿”å›æˆ–è€…ä¸€ä¸ª XHR è¯·æ±‚è¿”å›æ—¶ï¼Œå®ƒä»ç„¶å¯ä»¥å¤„ç†å…¶å®ƒäº‹æƒ…ï¼Œå¦‚ç”¨æˆ·è¾“å…¥ã€‚ Rimeä¾‹å¤–æ˜¯å­˜åœ¨çš„ï¼Œå¦‚ alertæˆ–è€…åŒæ­¥ XHRï¼Œä½†åº”è¯¥å°½é‡é¿å…ä½¿ç”¨å®ƒä»¬ã€‚æ³¨æ„ï¼Œä¾‹å¤–çš„ä¾‹å¤–ä¹Ÿæ˜¯å­˜åœ¨çš„ï¼ˆä½†é€šå¸¸æ˜¯å®ç°é”™è¯¯è€Œéå…¶å®ƒåŸå› ï¼‰ã€‚ æ–‡ç« å¼•è‡ªï¼š https://segmentfault.com/a/1190000004322358 http://www.ruanyifeng.com/blog/2014/10/event-loop.html https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptæ‰§è¡Œé¡ºåº]]></title>
    <url>%2F2017%2F12%2F02%2Fexecution_sequence_of_javascript%2F</url>
    <content type="text"><![CDATA[JavaScriptæ‰§è¡Œé¡ºåºJavaScript(ä»¥ä¸‹ç®€ç§°js) æ˜¯ä¸€ç§æè¿°å‹è„šæœ¬è¯­è¨€ï¼Œç”±æµè§ˆå™¨è¿›è¡ŒåŠ¨æ€çš„è§£æä¸æ‰§è¡Œã€‚ç”±äºjsç¼–å†™ä½ç½®æ¯”è¾ƒçµæ´»ï¼Œæ‰€ä»¥å¤„åœ¨ä¸åŒä½ç½®çš„jsä»£ç æ‰§è¡Œé¡ºåºä¹Ÿæ˜¯ä¸åŒçš„ã€‚jså’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ç›¸æ¯”æ¯”è¾ƒéšæ„ï¼Œæ‰€ä»¥jsä»£ç ä¸­å……æ»¡å„ç§å¥‡è‘©çš„å†™æ³•ã€‚è‹¦é€¼çš„å…¬å¸é€ å°±è‹¦é€¼ç¨‹åºå‘˜å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œå·¥ä½œä¸­æ€»æ˜¯ç»å¸¸è‡ªå·±å†™äº›ç®€å•çš„å‰ç«¯é¡µé¢ï¼Œç»å¸¸è¢«jsçš„æ‰§è¡Œé¡ºåºè¢­æ‰°ï¼Œç´¢æ€§æ‰¾ä¸ªå¤§å—å„¿æ—¶é—´å¥½å¥½å­¦ä¹ æ€»ç»“ä¸‹ï¼Œç†è§£å„å‹å„è‰²çš„å†™æ³•ï¼Œå¸Œæœ›èƒ½å¯¹jsçš„è¯­è¨€ç‰¹æ€§æœ‰æ·±å…¥çš„ç†è§£ã€‚ å‡½æ•°çš„å£°æ˜å’Œè°ƒç”¨å‡½æ•°çš„å®šä¹‰æ–¹å¼å¤§ä½“æœ‰ä»¥ä¸‹ä¸¤ç§ï¼Œæµè§ˆå™¨å¯¹äºä¸åŒçš„æ–¹å¼æœ‰ä¸åŒçš„è§£æé¡ºåºã€‚ ä½¿ç”¨functionå…³é”®å­—å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œå†æŒ‡å®šä¸€ä¸ªå‡½æ•°åï¼Œå«å‡½æ•°å£°æ˜ã€‚ 123function Fn1()&#123; alert("Hello World!"); &#125; ä½¿ç”¨functionå…³é”®å­—å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œä½†æœªç»™å‡½æ•°å‘½åï¼Œæœ€åå°†åŒ¿åå‡½æ•°èµ‹äºˆä¸€ä¸ªå˜é‡ï¼Œå«å‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„å‡½æ•°è¡¨è¾¾å¼è¯­æ³•å½¢å¼ã€‚ 123var Fn2 = function()&#123; alert("Hello World!"); &#125; å¦‚æœé‡åˆ°å‡½æ•°å£°æ˜ï¼Œåˆ™è¿›è¡Œé¢„å¤„ç†(ç±»ä¼¼Cè¯­è¨€çš„ç¼–è¯‘)ï¼›å¦‚æœé‡åˆ°å‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™åªæ˜¯å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¸è¿›è¡Œé¢„å¤„ç†ï¼Œå¾…è°ƒç”¨çš„æ—¶å€™å†è¿›è¡Œå¤„ç†ã€‚@(#å‡½æ•°å£°æ˜)1234Fn1();function Fn1()&#123; alert("Hello World!");&#125; ğŸ‘†â†‘ è¿™æ®µä»£ç ()å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¼¹å‡ºâ€Hello World!â€è­¦å‘Šå¯¹è¯æ¡†ã€‚æµè§ˆå™¨å¯¹Fn1()è¿›è¡Œäº†é¢„å¤„ç†ï¼Œå†ä»Fn1()ï¼›å¼€å§‹è¿è¡Œã€‚ å†å¦‚ï¼š@(#å‡½æ•°è¡¨è¾¾å¼)1234Fn2();var Fn2 = function()&#123; alert("Hello World!");&#125; ğŸ‘†â†‘ è¿™æ®µä»£ç ä¼šåœ¨Chromeæµè§ˆå™¨æŠ¥é”™ï¼ŒDevToolsä¼šæç¤ºUncaught TypeError: Fn2 is not a functionã€‚æµè§ˆå™¨æœªå¯¹Fn2è¿›è¡Œé¢„å¤„ç†ï¼Œä¾åºæ‰§è¡Œï¼Œæ‰€ä»¥æŠ¥é”™Fn2ä¸æ˜¯å‡½æ•°ã€‚ jsä»£ç å—åŠå¼•ç”¨çš„å¤–éƒ¨jsæ–‡ä»¶çš„å¤„ç†è¿™é‡Œjsä»£ç å—æŒ‡çš„æ˜¯ä¸€å¯¹&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;some js code&lt;/script&gt;æ ‡ç­¾ä¸­é—´åŒ…è£¹ç€çš„jsä»£ç ï¼›å¤–éƒ¨å¼•ç”¨çš„æ–‡ä»¶æŒ‡çš„æ˜¯&lt;script src=&quot;/javascripts/application.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; async defer&gt;&lt;/script&gt;ä¸­srcå±æ€§ä¸­è·¯å¾„ä¸‹çš„jsæ–‡ä»¶ä¸­çš„ä»£ç ã€‚ é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå¯¹æ¯ä¸ªjsä»£ç å—æˆ–æ–‡ä»¶è¿›è¡Œç‹¬ç«‹æ‰«æã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªå—æˆ–æ–‡ä»¶ä¸­ï¼Œå‡½æ•°å¯ä»¥å…ˆè°ƒç”¨ï¼Œå†è¿›è¡Œå‡½æ•°å£°æ˜(#å‡½æ•°å£°æ˜)ï¼›ä½†ä¸¤ä¸ªå—ä¸­ï¼Œå‡½æ•°å£°æ˜æ‰€åœ¨çš„å—å¿…é¡»åœ¨å‡½æ•°è°ƒç”¨æ‰€åœ¨çš„å—ä¹‹å‰ã€‚ç•¥ç»•ï¼Œï¼Œçœ‹ä¾‹å­ğŸ‘‡â†“1234567891011121314&lt;script type="text/javascript"&gt; Fn();&lt;/script&gt;&lt;script type="text/javascript"&gt;function Fn()&#123; alert('Hello World!');&#125;&lt;/script&gt;---------------------//Uncaught ReferenceError: Fn is not defined//æŠ¥é”™ Fn æœªè¢«å®šä¹‰//ä¸¤ä¸ªscriptä»£ç å—æ¢ä¸‹ä½ç½®å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†~--------------------- éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤–éƒ¨å¼•ç”¨çš„jsæ–‡ä»¶ä¹Ÿå­˜åœ¨è¿™ç§æƒ…å†µï¼Œï¼Œjsæ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°åªèƒ½åœ¨ä¹‹åå¼•ç”¨ã€‚å³js.jsæ–‡ä»¶ä¸­ä»¥å‡½æ•°å£°æ˜çš„æ–¹å¼å®šä¹‰äº†fn..ğŸ‘‡â†“123456789&lt;script type='text/javascript'&gt; fn();&lt;/script&gt;&lt;script scr='tesTjs.js' type='text/javascript'&gt;&lt;/script&gt;---------------------//Uncaught ReferenceError: fn is not defined//æŠ¥é”™ fn æœªè¢«å®šä¹‰//ä¸¤ä¸ªscriptä»£ç å—æ¢ä¸‹ä½ç½®å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†--------------------- é‡å¤å®šä¹‰å‡½æ•°ä¼šè¦†ç›–å‰é¢çš„å®šä¹‰è¿™å’Œå˜é‡çš„é‡å¤å®šä¹‰æ˜¯ä¸€æ ·çš„ï¼Œï¼ŒğŸ‘‡â†“12345678function fn()&#123; alert(1); &#125; function fn()&#123; alert(2); &#125; fn(); // å¼¹å‡ºï¼šâ€œ2â€ ä½†å¦‚æœæ˜¯è¿™æ ·å‘¢ï¼Œï¼ŒğŸ‘‡â†“12345678fn(); function fn()&#123; alert(1); &#125; function fn()&#123; alert(2); &#125; // è¿˜æ˜¯å¼¹å‡ºï¼šâ€œ2â€ bodyæ ‡ç­¾å†…çš„onloadå±æ€§ä¸bodyæ ‡ç­¾ä¹‹é—´å‡½æ•°çš„æ‰§è¡Œbodyå†…éƒ¨çš„å‡½æ•°ä¼šå…ˆäºonloadçš„å‡½æ•°æ‰§è¡Œï¼Œæµ‹è¯•ä»£ç ï¼šğŸ‘‡â†“12345678910111213//html head... &lt;script type="text/javascript"&gt; function fnOnLoad()&#123; alert("I am outside the Wall!"); &#125; &lt;/script&gt; &lt;body onload="fnOnLoad();"&gt; &lt;script type="text/javascript"&gt; alert("I am inside the Wall.."); &lt;/script&gt; &lt;/body&gt; //å…ˆå¼¹å‡ºâ€œI am inside the Wall..â€; //åå¼¹å‡ºâ€œI am outside the Wall!â€ bodyçš„onloadäº‹ä»¶è§¦å‘æ¡ä»¶æ˜¯bodyå†…å®¹åŠ è½½å®Œæˆï¼Œï¼Œæ‰€ä»¥åœ¨åŠ è½½bodyå†…å®¹çš„è¿‡ç¨‹ä¸­æ‰§è¡Œäº†&lt;script&gt;æ ‡ç­¾ä¸­çš„alert(&quot;I am inside the Wall..&quot;);ã€‚è‡³æ­¤bodyæ ‡ç­¾ä¸­çš„å†…å®¹åŠ è½½å®Œæˆï¼Œè§¦å‘bodyæ ‡ç­¾ä¸­onloadå‡½æ•°ï¼Œæ‰§è¡ŒfnOnLoadæ–¹æ³•ã€‚ scriptæ ‡ç­¾æ”¾åœ¨ä»€ä¹ˆä½ç½®scriptsä¼šå¼•å‘é˜»å¡å¹¶è¡Œä¸‹è½½çš„é—®é¢˜ã€‚HTTP/1.1 specificationå»ºè®®æ¯æ¬¡ä¸è¦åŒæ—¶ä»ä¸€ä¸ªhostnameä¸‹è½½è¶…è¿‡ä¸¤ä¸ªçš„ç»„ä»¶ã€‚å¦‚æœä½ æŠŠç½‘ç«™ä¸Šå¼•ç”¨çš„å›¾ç‰‡æ”¾åœ¨ä¸åŒhostnameä¸Šï¼Œé‚£ä¹ˆæ¯æ¬¡åŠ è½½è¯¥ç½‘é¡µæ—¶ï¼Œå¯ä»¥ä¸‹è½½åŒæ—¶ä¸¤ä¸ªä»¥ä¸Šçš„å›¾ç‰‡èµ„æºã€‚ç„¶è€Œï¼Œå½“å¼•ç”¨çš„å¤–éƒ¨jsæ–‡ä»¶æ­£åœ¨ä¸‹è½½æ—¶ï¼Œæ— è®ºå…¶ä»–èµ„æºæ˜¯å¦ä¸è¯¥jsæ–‡ä»¶å¤„äºåŒä¸€hostnammeï¼Œéƒ½ä¸èƒ½(å¹¶è¡Œ)ä¸‹è½½ã€‚æ‰€ä»¥yahooå»ºè®®å°†scriptæ”¾åœ¨å°¾éƒ¨ï¼Œè¿™æ ·èƒ½åŠ é€Ÿç½‘é¡µåŠ è½½ã€‚^1 å°†scriptæ”¾åœ¨å°¾éƒ¨çš„ç¼ºç‚¹ï¼Œæ˜¯æµè§ˆå™¨åªèƒ½å…ˆè§£æå®Œæ•´ä¸ªHTMLé¡µé¢ï¼Œå†ä¸‹è½½JSã€‚è€Œå¯¹äºä¸€äº›é«˜åº¦ä¾èµ–äºJSçš„ç½‘é¡µï¼Œå°±ä¼šæ˜¾å¾—æ…¢äº†ã€‚æ‰€ä»¥å°†scriptæ”¾åœ¨å°¾éƒ¨ä¹Ÿä¸æ˜¯æœ€ä¼˜è§£ï¼Œæœ€ä¼˜è§£æ˜¯ä¸€è¾¹è§£æé¡µé¢ï¼Œä¸€è¾¹ä¸‹è½½JSã€‚æ‰€ä»¥ï¼Œå‡ºç°äº†ä¸€ç§æ›´modernçš„æ–¹å¼ï¼šä½¿ç”¨asyncå’Œdeferã€‚80%çš„ç°ä»£æµè§ˆå™¨éƒ½è®¤è¯†asyncå’Œdeferå±æ€§[3]ï¼Œè¿™ä¸¤ä¸ªå±æ€§èƒ½è®©æµè§ˆå™¨åšåˆ°ä¸€è¾¹ä¸‹è½½JS(è¿˜æ˜¯åªèƒ½åŒæ—¶ä¸‹è½½ä¸¤ä¸ªJS)ï¼Œä¸€è¾¹è§£æHTMLã€‚ä»–çš„ä¼˜ç‚¹ä¸æ˜¯å¢åŠ JSçš„å¹¶å‘ä¸‹è½½æ•°é‡ï¼Œè€Œæ˜¯åšåˆ°ä¸‹è½½æ—¶ä¸blockè§£æHTMLã€‚^212&lt;script type="text/javascript" src="path/to/script1.js" async&gt;&lt;/script&gt; &lt;script type="text/javascript" src="path/to/script2.js" async&gt;&lt;/script&gt; å¸¦asyncå±æ€§çš„scriptä¼šå¼‚æ­¥æ‰§è¡Œï¼Œåªè¦ä¸‹è½½å®Œå°±æ‰§è¡Œï¼Œè¿™ä¼šå¯¼è‡´script2.jså¯èƒ½å…ˆäºscript1.jsæ‰§è¡Œï¼ˆå¦‚æœscript2.jsæ¯”è¾ƒå¤§ï¼Œä¸‹è½½æ…¢ï¼‰ã€‚deferå°±èƒ½ä¿è¯scriptæœ‰åºæ‰§è¡Œï¼Œscript1.jså…ˆæ‰§è¡Œï¼Œscript2.jsåæ‰§è¡Œã€‚ å‚è€ƒé“¾æ¥ï¼šhttp://www.jb51.net/article/36755.htmhttps://developers.google.com/speed/docs/insights/BlockingJShttps://developers.google.com/speed/docs/insights/OptimizeCSSDeliveryhttps://developers.google.com/speed/docs/insights/PrioritizeVisibleContent]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPé‡ä¼ æœºåˆ¶]]></title>
    <url>%2F2017%2F11%2F14%2Ftcp_retransmission_mechanism%2F</url>
    <content type="text"><![CDATA[TCPé‡ä¼ æœºåˆ¶TCPè¦ä¿è¯æ‰€æœ‰çš„æ•°æ®åŒ…éƒ½å¯ä»¥åˆ°è¾¾ï¼Œæ‰€ä»¥ï¼Œå¿…éœ€è¦æœ‰é‡ä¼ æœºåˆ¶ã€‚ æ³¨æ„ï¼Œæ¥æ”¶ç«¯ç»™å‘é€ç«¯çš„ACKåªä¼šç¡®è®¤æœ€åä¸€ä¸ªè¿ç»­çš„åŒ…ã€‚æ¯”å¦‚ï¼Œå‘é€ç«¯å‘äº†#1,#2,#3,#4,#5ä¸€å…±äº”ä»½æ•°æ®ï¼Œæ¥æ”¶ç«¯æ”¶åˆ°äº†#1ï¼Œ#2ï¼Œäºæ˜¯è¿”å›ACK=3ï¼Œç„¶åæ”¶åˆ°äº†#4ï¼ˆ#3æœªæ”¶åˆ°ï¼‰ï¼Œæ­¤æ—¶çš„TCPä¼šæ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬è¦çŸ¥é“ï¼Œseqå’ŒACKæ˜¯ä»¥å­—èŠ‚æ•°ä¸ºå•ä½ï¼Œæ‰€ä»¥è¿”å›ackçš„æ—¶å€™ï¼Œä¸èƒ½è·³ç€ç¡®è®¤ï¼Œåªèƒ½ç¡®è®¤æœ€å¤§çš„è¿ç»­æ”¶åˆ°çš„åŒ…ï¼Œä¸ç„¶ï¼Œå‘é€ç«¯å°±ä»¥ä¸ºä¹‹å‰çš„éƒ½æ”¶åˆ°äº†ã€‚ è¶…æ—¶é‡ä¼ æœºåˆ¶ä¸€ç§æ˜¯ä¸è¿”å›ackï¼Œæ­»ç­‰#3ï¼Œå½“å‘é€æ–¹å‘ç°æ”¶ä¸åˆ°#3çš„ackè¶…æ—¶åï¼Œä¼šé‡ä¼ #3ã€‚ä¸€æ—¦æ¥æ”¶æ–¹æ”¶åˆ°#3åï¼Œä¼šackè¿”å›4â€”â€”æ„å‘³ç€#3å’Œ#4éƒ½æ”¶åˆ°äº†ã€‚ ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¼šæœ‰æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å› ä¸ºè¦æ­»ç­‰#3ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´#4å’Œ#5å³ä¾¿å·²ç»æ”¶åˆ°äº†ï¼Œè€Œå‘é€æ–¹ä¹Ÿå®Œå…¨ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Œå› ä¸ºæ²¡æœ‰æ”¶åˆ°ACKï¼Œæ‰€ä»¥ï¼Œå‘é€æ–¹å¯èƒ½ä¼šæ‚²è§‚åœ°è®¤ä¸ºä¹Ÿä¸¢äº†ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¹Ÿä¼šå¯¼è‡´4#å’Œ#5çš„é‡ä¼ ã€‚ å¯¹æ­¤æœ‰ä¸¤ç§é€‰æ‹©ï¼š ä»…é‡ä¼  timeout çš„åŒ…ã€‚ä¹Ÿå°±æ˜¯ç¬¬3ä»½æ•°æ®ã€‚ é‡ä¼  timeout åæ‰€æœ‰çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯#3ï¼Œ#4ï¼Œ#5è¿™ä¸‰ä»½æ•°æ®ã€‚ ç¬¬ä¸€ç§ä¼šèŠ‚çœå¸¦å®½ï¼Œä½†æ˜¯æ…¢ï¼›ç¬¬äºŒç§ä¼šå¿«ä¸€ç‚¹ï¼Œä½†æ˜¯ä¼šæµªè´¹å¸¦å®½ï¼Œä¹Ÿå¯èƒ½ä¼šåšæ— ç”¨åŠŸã€‚ä½†æ€»ä½“æ¥è¯´éƒ½ä¸å¥½ã€‚å› ä¸ºéƒ½åœ¨ç­‰ timeoutï¼Œtimeout å¯èƒ½ä¼šå¾ˆé•¿ã€‚ å¿«é€Ÿé‡ä¼ æœºåˆ¶äºæ˜¯ï¼ŒTCPå¼•å…¥äº†ä¸€ç§å« Fast Retransmit çš„ç®—æ³•ï¼Œä¸ä»¥æ—¶é—´é©±åŠ¨ï¼Œè€Œä»¥æ•°æ®é©±åŠ¨é‡ä¼ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåŒ…æ²¡æœ‰è¿ç»­åˆ°è¾¾ï¼Œå°±ackæœ€åé‚£ä¸ªå¯èƒ½è¢«ä¸¢äº†çš„åŒ…ï¼Œå¦‚æœå‘é€æ–¹è¿ç»­æ”¶åˆ°3æ¬¡ç›¸åŒçš„ackï¼Œå°±é‡ä¼ ã€‚Fast Retransmit çš„å¥½å¤„æ˜¯ä¸ç”¨ç­‰ timeout äº†å†é‡ä¼ ã€‚ æ¯”å¦‚ï¼šå¦‚æœå‘é€æ–¹å‘å‡ºäº†#1ï¼Œ#2ï¼Œ#3ï¼Œ#4ï¼Œ#5ä»½æ•°æ®ï¼Œç¬¬ä¸€ä»½å…ˆåˆ°é€äº†ï¼Œäºæ˜¯å°±ackå›2ï¼Œç»“æœ#2å› ä¸ºæŸäº›åŸå› æ²¡æ”¶åˆ°ï¼Œ3åˆ°è¾¾äº†ï¼Œäºæ˜¯è¿˜æ˜¯ackå›2ï¼Œåé¢çš„#4å’Œ#5éƒ½åˆ°äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ackå›#2ï¼Œå› ä¸º2è¿˜æ˜¯æ²¡æœ‰æ”¶åˆ°ï¼Œäºæ˜¯å‘é€ç«¯æ”¶åˆ°äº†ä¸‰ä¸ªack=2çš„ç¡®è®¤ï¼ŒçŸ¥é“äº†#2è¿˜æ²¡æœ‰åˆ°ï¼Œäºæ˜¯å°±é©¬ä¸Šé‡ä¼ #2ã€‚ç„¶åï¼Œæ¥æ”¶ç«¯æ”¶åˆ°äº†#2ï¼Œæ­¤æ—¶å› ä¸º#3ï¼Œ#4ï¼Œ#5éƒ½æ”¶åˆ°äº†ï¼Œäºæ˜¯ackå›6ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š Fast Retransmit åªè§£å†³äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯timeout çš„é—®é¢˜ï¼Œå®ƒä¾ç„¶é¢ä¸´ä¸€ä¸ªè‰°éš¾çš„é€‰æ‹©ï¼Œå°±æ˜¯é‡ä¼ ä¹‹å‰çš„ä¸€ä¸ªï¼Œè¿˜æ˜¯é‡ä¼ æ‰€æœ‰çš„é—®é¢˜ã€‚å¯¹äºä¸Šé¢çš„ç¤ºä¾‹æ¥è¯´ï¼Œæ˜¯é‡ä¼ #2å‘¢,è¿˜æ˜¯é‡ä¼ #2ï¼Œ#3ï¼Œ#4ï¼Œ#5å‘¢ï¼Ÿå› ä¸ºå‘é€ç«¯å¹¶ä¸æ¸…æ¥šè¿™è¿ç»­çš„3ä¸ªack(#2)æ˜¯è°ä¼ å›æ¥çš„ï¼Ÿä¹Ÿè®¸å‘é€ç«¯å‘äº†20ä»½æ•°æ®ï¼Œæ˜¯#6ï¼Œ#10ï¼Œ#20ä¼ æ¥çš„å‘¢ã€‚è¿™æ ·ï¼Œå‘é€ç«¯å¾ˆæœ‰å¯èƒ½è¦é‡ä¼ ä»#2åˆ°#20çš„è¿™å †æ•°æ®ï¼ˆè¿™å°±æ˜¯æŸäº›TCPçš„å®é™…çš„å®ç°ï¼‰ã€‚å¯è§ï¼Œè¿™æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚ SACK æ–¹æ³•å¦å¤–ä¸€ç§æ›´å¥½çš„æ–¹å¼å«ï¼šSelective Acknowledgment (SACK)ï¼ˆå‚çœ‹RFC 2018ï¼‰ï¼Œè¿™ç§æ–¹å¼éœ€è¦åœ¨TCPå¤´é‡ŒåŠ ä¸€ä¸ªSACKçš„ä¸œè¥¿ï¼ŒACKè¿˜æ˜¯Fast Retransmitçš„ ACKï¼ŒSACKåˆ™æ˜¯æ±‡æŠ¥æ”¶åˆ°çš„æ•°æ®ç¢ç‰ˆã€‚å‚çœ‹ä¸‹å›¾ï¼š è¿™æ ·ï¼Œåœ¨å‘é€ç«¯å°±å¯ä»¥æ ¹æ®å›ä¼ çš„SACKæ¥çŸ¥é“å“ªäº›æ•°æ®åˆ°äº†ï¼Œå“ªäº›æ²¡æœ‰åˆ°ã€‚äºæ˜¯å°±ä¼˜åŒ–äº†Fast Retransmit çš„ç®—æ³•ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåè®®éœ€è¦ä¸¤è¾¹éƒ½æ”¯æŒã€‚åœ¨ Linuxä¸‹ï¼Œå¯ä»¥é€šè¿‡tcp_sackå‚æ•°æ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼ˆLinux 2.4åé»˜è®¤æ‰“å¼€ï¼‰ã€‚ è¿™é‡Œè¿˜éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜â€”â€”æ¥æ”¶æ–¹Renegingï¼Œæ‰€è°“Renegingçš„æ„æ€å°±æ˜¯æ¥æ”¶æ–¹æœ‰æƒæŠŠå·²ç»æŠ¥ç»™å‘é€ç«¯SACKé‡Œçš„æ•°æ®ç»™ä¸¢äº†ã€‚è¿™æ ·å¹²æ˜¯ä¸è¢«é¼“åŠ±çš„ï¼Œå› ä¸ºè¿™ä¸ªäº‹ä¼šæŠŠé—®é¢˜å¤æ‚åŒ–äº†ï¼Œä½†æ˜¯ï¼Œæ¥æ”¶æ–¹è¿™ä¹ˆåšå¯èƒ½ä¼šæœ‰äº›æç«¯æƒ…å†µï¼Œæ¯”å¦‚è¦æŠŠå†…å­˜ç»™åˆ«çš„æ›´é‡è¦çš„ä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œå‘é€æ–¹ä¹Ÿä¸èƒ½å®Œå…¨ä¾èµ–SACKï¼Œè¿˜æ˜¯è¦ä¾èµ–ACKï¼Œå¹¶ç»´æŠ¤Timeoutï¼Œå¦‚æœåç»­çš„ackæ²¡æœ‰å¢é•¿ï¼Œé‚£ä¹ˆè¿˜æ˜¯è¦æŠŠSACKçš„ä¸œè¥¿é‡ä¼ ï¼Œå¦å¤–ï¼Œæ¥æ”¶ç«¯è¿™è¾¹æ°¸è¿œä¸èƒ½æŠŠSACKçš„åŒ…æ ‡è®°ä¸ºACKã€‚ æ³¨æ„ï¼šSACKä¼šæ¶ˆè´¹å‘é€æ–¹çš„èµ„æºï¼Œ,è¯•æƒ³ï¼Œå¦‚æœä¸€ä¸ªæ”»å‡»è€…ç»™æ•°æ®å‘é€æ–¹å‘ä¸€å †SACKçš„é€‰é¡¹ï¼Œè¿™ä¼šå¯¼è‡´å‘é€æ–¹å¼€å§‹è¦é‡ä¼ ç”šè‡³éå†å·²ç»å‘å‡ºçš„æ•°æ®ï¼Œè¿™ä¼šæ¶ˆè€—å¾ˆå¤šå‘é€ç«¯çš„èµ„æºã€‚è¯¦ç»†çš„ä¸œè¥¿è¯·å‚çœ‹ã€ŠTCP SACKçš„æ€§èƒ½æƒè¡¡ã€‹ Duplicate SACK â€“ é‡å¤æ”¶åˆ°æ•°æ®çš„é—®é¢˜Duplicate SACKåˆç§°D-SACKï¼Œå…¶ä¸»è¦ä½¿ç”¨äº† SACKæ¥å‘Šè¯‰å‘é€æ–¹æœ‰å“ªäº›æ•°æ®è¢«é‡å¤æ¥æ”¶äº†ã€‚RFC-2833 é‡Œæœ‰è¯¦ç»†æè¿°å’Œç¤ºä¾‹ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­ï¼ˆæ¥æºäºRFC-2833ï¼‰ D-SACKä½¿ç”¨äº†SACKçš„ç¬¬ä¸€ä¸ªæ®µæ¥åšæ ‡å¿—ï¼Œå¦‚æœSACKçš„ç¬¬ä¸€ä¸ªæ®µçš„èŒƒå›´è¢«ACKæ‰€è¦†ç›–ï¼Œé‚£ä¹ˆå°±æ˜¯D-SACK;å¦‚æœSACKçš„ç¬¬ä¸€ä¸ªæ®µçš„èŒƒå›´è¢«SACKçš„ç¬¬äºŒä¸ªæ®µè¦†ç›–ï¼Œé‚£ä¹ˆå°±æ˜¯D-SACKã€‚ ç¤ºä¾‹ä¸€ï¼šACKä¸¢åŒ…ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸¢äº†ä¸¤ä¸ªACKï¼Œæ‰€ä»¥ï¼Œå‘é€ç«¯é‡ä¼ äº†ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ï¼ˆ3000-3499ï¼‰ï¼Œäºæ˜¯æ¥æ”¶ç«¯å‘ç°é‡å¤æ”¶åˆ°ï¼Œäºæ˜¯å›äº†ä¸€ä¸ªSACK=3000-3500ï¼Œå› ä¸ºACKéƒ½åˆ°äº†#4000æ„å‘³ç€æ”¶åˆ°äº†#4000ä¹‹å‰çš„æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªSACKå°±æ˜¯D-SACKâ€”â€”æ—¨åœ¨å‘Šè¯‰å‘é€ç«¯æˆ‘æ”¶åˆ°äº†é‡å¤çš„æ•°æ®ï¼Œè€Œä¸”æˆ‘ä»¬çš„å‘é€ç«¯è¿˜çŸ¥é“ï¼Œæ•°æ®åŒ…æ²¡æœ‰ä¸¢ï¼Œä¸¢çš„æ˜¯ACKåŒ…ã€‚ Transmitted Received ACK Sent Segment Segment (Including SACK Blocks) 3000-3499 3000-3499 3500 (ACK dropped) 3500-3999 3500-3999 4000 (ACK dropped) 3000-3499 3000-3499 4000, SACK=3000-3500 ç¤ºä¾‹äºŒï¼šç½‘ç»œå»¶è¯¯ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œç½‘ç»œåŒ…ï¼ˆ1000-1499ï¼‰è¢«ç½‘ç»œç»™å»¶è¯¯äº†ï¼Œå¯¼è‡´å‘é€æ–¹æ²¡æœ‰æ”¶åˆ°ACKï¼Œè€Œåé¢åˆ°è¾¾çš„ä¸‰ä¸ªåŒ…è§¦å‘äº†Fast Retransmit ç®—æ³•ï¼Œæ‰€ä»¥é‡ä¼ ï¼Œä½†é‡ä¼ æ—¶ï¼Œè¢«å»¶è¯¯çš„åŒ…åˆåˆ°äº†ï¼Œæ‰€ä»¥ï¼Œå›äº†ä¸€ä¸ªSACK=1000-1500ï¼Œå› ä¸ºACKå·²åˆ°äº†#3000ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªSACKæ˜¯D-SACKâ€”â€”æ ‡è¯†æ”¶åˆ°äº†é‡å¤çš„åŒ…ã€‚ è¿™ä¸ªæ¡ˆä¾‹ä¸‹ï¼Œå‘é€ç«¯çŸ¥é“ä¹‹å‰å› ä¸ºâ€œFast Retransmitç®—æ³•â€è§¦å‘çš„é‡ä¼ ä¸æ˜¯å› ä¸ºå‘å‡ºå»çš„åŒ…ä¸¢äº†ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºå›åº”çš„ACKåŒ…ä¸¢äº†ï¼Œè€Œæ˜¯å› ä¸ºç½‘ç»œå»¶æ—¶äº†ã€‚ Transmitted Received ACK Sent Segment Segment (Including SACK Blocks) 500-999 500-999 1000 1000-1499 (delayed) 1500-1999 1500-1999 1000, SACK=1500-2000 2000-2499 2000-2499 1000, SACK=1500-2500 2500-2999 2500-2999 1000, SACK=1500-3000 1000-1499 1000-1499 3000 1000-1499 3000, SACK=1000-1500 å¯è§ï¼Œå¼•å…¥äº†D-SACKï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªå¥½å¤„ï¼š å¯ä»¥è®©å‘é€æ–¹çŸ¥é“ï¼Œæ˜¯å‘å‡ºå»çš„åŒ…ä¸¢äº†ï¼Œè¿˜æ˜¯å›æ¥çš„ACKåŒ…ä¸¢äº†ã€‚ æ˜¯ä¸æ˜¯è‡ªå·±çš„ timeoutå¤ªå°äº†ï¼Œå¯¼è‡´é‡ä¼ ã€‚ ç½‘ç»œä¸Šå‡ºç°äº†å…ˆå‘çš„åŒ…ååˆ°çš„æƒ…å†µï¼ˆåˆç§°reorderingï¼‰ ç½‘ç»œä¸Šæ˜¯ä¸æ˜¯æŠŠæˆ‘çš„æ•°æ®åŒ…ç»™å¤åˆ¶äº†ã€‚ çŸ¥é“è¿™äº›ä¸œè¥¿å¯ä»¥å¾ˆå¥½å¾—å¸®åŠ©TCPäº†è§£ç½‘ç»œæƒ…å†µï¼Œä»è€Œå¯ä»¥æ›´å¥½çš„åšç½‘ç»œä¸Šçš„æµæ§ã€‚Linuxä¸‹çš„tcp_dsackå‚æ•°ç”¨äºå¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼ˆLinux 2.4åé»˜è®¤æ‰“å¼€ï¼‰ è½¬è½½è‡ªï¼šhttp://www.uml.org.cn/safe/201407041.asp?artid=2511 ä½œè€…ï¼šç«é¾™æœè½¯ä»¶]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>TCP</tag>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPè¿æ¥çš„å»ºç«‹ä¸é‡Šæ”¾]]></title>
    <url>%2F2017%2F10%2F19%2Festablishment_release_of_tcp-connections%2F</url>
    <content type="text"><![CDATA[TCP è¿æ¥çš„å»ºç«‹ä¸é‡Šæ”¾TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œæ— è®ºå“ªä¸€æ–¹å‘å¦ä¸€æ–¹å‘é€æ•°æ®ä¹‹å‰ï¼Œéƒ½å¿…é¡»å…ˆåœ¨åŒæ–¹ä¹‹é—´å»ºç«‹ä¸€æ¡è¿æ¥ã€‚åœ¨TCP/IPåè®®ä¸­ï¼ŒTCPåè®®æä¾›å¯é çš„è¿æ¥æœåŠ¡ï¼Œè¿æ¥æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹è¿›è¡Œåˆå§‹åŒ–çš„ã€‚ TCP è¿æ¥çš„ä¸‰ä¸ªé˜¶æ®µï¼š è¿æ¥å»ºç«‹ã€‚ æ•°æ®ä¼ é€ã€‚ è¿æ¥é‡Šæ”¾ã€‚ TCP è¿æ¥å»ºç«‹è¿‡ç¨‹ä¸­è¦è§£å†³çš„é—®é¢˜ï¼š æ¯ä¸€æ–¹èƒ½å¤Ÿç¡®çŸ¥å¯¹æ–¹çš„å­˜åœ¨ã€‚ å…è®¸åŒæ–¹åå•†å‚æ•°ã€‚å¦‚ï¼šSequence Numberåˆå§‹å€¼ï¼Œæœ€å¤§çª—å£å€¼ï¼Œæ˜¯å¦ä½¿ç”¨çª—å£æ‰©å¤§é€‰é¡¹ï¼Œæ˜¯å¦ä½¿ç”¨æ—¶é—´æˆ³é€‰é¡¹ï¼ŒæœåŠ¡è´¨é‡â€¦ èƒ½å¤Ÿå¯¹è¿è¾“å®ä½“èµ„æºè¿›è¡Œåˆ†é…ã€‚å¦‚ï¼šç¼“å­˜å¤§å°ï¼Œè¿æ¥è¡¨ä¸­çš„é¡¹ç›®â€¦ å»ºç«‹TCPè¿æ¥-ä¸‰æ¬¡æ¡æ‰‹ æœ€åˆä¸¤ç«¯çš„ TCP éƒ½å¤„åœ¨ CLOSEDçŠ¶æ€ã€‚ Bçš„ TCP æœåŠ¡å™¨è¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å— TCBï¼ŒæœåŠ¡å™¨è¿›ç¨‹è¿›å…¥LISTENï¼ˆæ”¶å¬ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·çš„è¿æ¥è¯·æ±‚ã€‚ä¼ è¾“æ§åˆ¶å—ï¼šTransmission Control Block,TCBï¼Œå­˜å‚¨è¿æ¥ä¸­çš„ä¿¡æ¯ã€‚å¦‚ï¼šTCP è¿æ¥è¡¨ï¼Œåˆ°å‘é€å’Œæ¥æ”¶ç¼“å­˜çš„æŒ‡é’ˆï¼Œåˆ°é‡ä¼ é˜Ÿåˆ—çš„æŒ‡é’ˆï¼Œå½“å‰å‘é€å’Œæ¥æ”¶åºå·â€¦ Açš„ TCP å®¢æˆ·è¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å— TCB ï¼Œå‘Bå‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚è¿™æ—¶ï¼Œé¦–éƒ¨ä¸­åŒæ­¥ä½SYN=1ï¼Œåˆå§‹åºå·seq=xã€‚SYNæŠ¥æ–‡æ®µä¸æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚TCP å®¢æˆ·è¿›ç¨‹è¿›å…¥SYN-SENTï¼ˆåŒæ­¥å·²å‘é€ï¼‰çŠ¶æ€ã€‚ Bæ”¶åˆ°è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå¦‚æœåŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™å‘Aå‘é€ç¡®è®¤ã€‚ç¡®è®¤æŠ¥æ–‡æ®µä¸­ï¼ŒSYNå’ŒACKéƒ½ä¸º1ï¼Œç¡®è®¤å·ack=x+1ï¼Œå¹¶é€‰æ‹©è‡ªå·±çš„åˆå§‹åºå·seq=yã€‚æ­¤æŠ¥æ–‡æ®µåŒæ ·ä¸æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚TCPæœåŠ¡å™¨è¿›ç¨‹è¿›å…¥SYN-RCVD(åŒæ­¥æ¥æ”¶)çŠ¶æ€ã€‚ TCP å®¢æˆ·è¿›ç¨‹æ”¶åˆ°Bçš„ç¡®è®¤åï¼Œå‘Bå‘å‡ºç¡®è®¤ã€‚ç¡®è®¤æŠ¥æ–‡æ®µçš„ACK=1ï¼Œç¡®è®¤å·ack=y+1ï¼Œè‡ªå·±çš„seq=x+1ã€‚ACKæŠ¥æ–‡æ®µå¯æºå¸¦æ•°æ®ï¼Œä¸æºå¸¦æ•°æ®åˆ™ä¸æ¶ˆè€—åºå·ã€‚TCP è¿æ¥å·²å»ºç«‹ï¼ŒAè¿›å…¥ESTABLISHED(å·²è¿æ¥)çŠ¶æ€ã€‚ Bæ”¶åˆ°Açš„ç¡®è®¤ï¼Œä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚ A æ”¶åˆ° B çš„ç¡®è®¤ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†æ¬¡å‘ B å‘é€ç¡®è®¤ï¼Ÿä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œè€Œäº§ç”Ÿé”™è¯¯ã€‚ ä¸¾ä¸ªæ —å­: A å‘ B å‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå¦‚æœ client å‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾ server ã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µï¼Œä½† server æ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±è¯¯è®¤ä¸ºæ˜¯ client å†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚ã€‚äºæ˜¯å°±å‘ client å‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚å‡è®¾ä¸é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦ server å‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ç”±äºç°åœ¨ client å¹¶æ²¡æœ‰è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œå› æ­¤ä¸ä¼šç†ç¬ server çš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘ server å‘é€æ•°æ®ã€‚ä½† server å´ä»¥ä¸ºæ–°çš„è¿è¾“è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾… client å‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserver çš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚é‡‡ç”¨ã€ä¸‰æ¬¡æ¡æ‰‹ã€çš„åŠæ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°ç°è±¡å‘ç”Ÿã€‚ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œ client ä¸ä¼šå‘ server çš„ç¡®è®¤å‘å‡ºç¡®è®¤ã€‚server ç”±äºæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“ client å¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿æ¥ã€‚ â€”â€” è°¢å¸Œä»çš„ã€Šè®¡ç®—æœºç½‘ç»œã€‹ é‡Šæ”¾TCPè¿æ¥-å››æ¬¡æŒ¥æ‰‹ å¼€å§‹æ—¶ï¼ŒAå’ŒBéƒ½å¤„åœ¨ESTABLISHEDçŠ¶æ€ã€‚ Açš„åº”ç”¨è¿›ç¨‹å‘ TCP å‘å‡ºè¿æ¥é‡Šæ”¾è¿æ¥æŠ¥æ–‡æ®µï¼Œåœæ­¢å‘é€æ•°æ®ï¼Œå…³é—­ TCP è¿æ¥ã€‚AæŠŠæŠ¥æ–‡æ®µå¤´éƒ¨ä¸­FINç½®ä¸º1ï¼Œåºå·seq=uï¼Œuæ˜¯å·²ä¼ é€çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚åºå·åŠ 1ã€‚Aè¿›å…¥FIN-WAIT-1çŠ¶æ€ï¼Œç­‰å¾…Bçš„ç¡®è®¤ã€‚FINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ Bæ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µå‘Aå‘å‡ºç¡®è®¤ï¼Œç¡®è®¤å·ack=u+1ï¼ŒBè‡ªå·±çš„åºå·æ˜¯vï¼Œvæ˜¯å·²ä¼ é€è¿‡çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚åŠ 1ã€‚Bè¿›å…¥CLOSE-WAITçŠ¶æ€ã€‚TCP æœåŠ¡å™¨è¿›ç¨‹é€šçŸ¥é«˜å±‚åº”ç”¨è¿›ç¨‹ï¼Œä»Aåˆ°Bçš„è¿æ¥è¢«é‡Šæ”¾ã€‚TCP è¿›å…¥half-closeçŠ¶æ€ã€‚ Aæ”¶åˆ°Bçš„ç¡®è®¤ï¼Œè¿›å…¥FIN-WAIT-2çŠ¶æ€ï¼Œç­‰å¾…Bå‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µã€‚ Båº”ç”¨è¿›ç¨‹é€šçŸ¥ TCP é‡Šæ”¾è¿æ¥ï¼ŒæŠ¥æ–‡æ®µé¦–éƒ¨FIN=1ï¼Œåºå·ä¸ºwï¼ˆåŠå…³é—­çŠ¶æ€æ—¶Bå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼‰ï¼ŒBé‡å¤ä¸Šæ¬¡å‘é€çš„ç¡®è®¤å·ack=u+1ã€‚Bè¿›å…¥LAST-ACK(æœ€åç¡®è®¤)çŠ¶æ€ï¼Œç­‰å¾…Açš„ç¡®è®¤ã€‚ Aæ”¶åˆ°Bçš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå‘Bå‘å‡ºç¡®è®¤ã€‚ç¡®è®¤æŠ¥æ–‡æ®µä¸­ACK=1ï¼Œç¡®è®¤å·ack=w+1ï¼ŒAè‡ªå·±çš„åºå·seq=u+1(å‘é€çš„FINæŠ¥æ–‡æ®µä½¿ç”¨ä¸€ä¸ªåºå·)ã€‚Aè¿›å…¥TIME-WAIT(æ—¶é—´ç­‰å¾…)çŠ¶æ€ã€‚ ç»è¿‡æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨ï¼ˆTIME-WAIT timerï¼‰è®¾ç½®çš„æ—¶é—´2 MSL åï¼ŒAè¿›å…¥CLOSEDçŠ¶æ€ã€‚æœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼šMaximum Segment Lifetime,MSLï¼ŒTCP å…è®¸æ ¹æ®ä¸åŒæƒ…å†µè°ƒæ•´æ­¤å€¼ï¼ŒRFC 793å»ºè®®æ—¶é—´2åˆ†é’Ÿã€‚ Bæ”¶åˆ°Açš„ç¡®è®¤ï¼Œè¿›å…¥CLOSEDçŠ¶æ€ï¼Œæ’¤é”€ä¼ è¾“æ§åˆ¶å— TCBï¼ŒTCP è¿æ¥é‡Šæ”¾æˆåŠŸã€‚ å¯¹äº4æ¬¡æŒ¥æ‰‹ï¼Œå…¶å®æ˜¯2æ¬¡ï¼Œå› ä¸º TCP æ˜¯å…¨åŒå·¥çš„ã€‚æ‰€ä»¥ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½éœ€è¦FINå’ŒACKã€‚åªä¸è¿‡ï¼Œæœ‰ä¸€æ–¹æ˜¯è¢«åŠ¨çš„ï¼Œæ‰€ä»¥çœ‹ä¸Šå»å°±æˆäº†æ‰€è°“çš„4æ¬¡æŒ¥æ‰‹ã€‚å¦‚æœä¸¤è¾¹åŒæ—¶æ–­è¿æ¥ï¼Œé‚£å°±ä¼šå°±è¿›å…¥åˆ°CLOSINGçŠ¶æ€ï¼Œç„¶ååˆ°è¾¾TIME_WAITçŠ¶æ€ã€‚@(TCPä¸¤ç«¯åŒæ—¶æ–­å¼€è¿æ¥) A ä¸ºä»€ä¹ˆåœ¨ TIME-WAIT çŠ¶æ€ç­‰å¾…2 MSL æ—¶é—´?ä¿è¯Aå‘é€çš„æœ€åä¸€ä¸ªACKæŠ¥æ–‡æ®µèƒ½å¤Ÿåˆ°è¾¾Bã€‚è‹¥æ­¤æŠ¥æ–‡æ®µä¸¢å¤±ï¼Œå¤„åœ¨LAST-ACKçŠ¶æ€çš„Bæ”¶ä¸åˆ°FIN+ACKæŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼ŒBå°†è¶…æ—¶é‡ä¼ FIN+ACKæŠ¥æ–‡æ®µï¼ŒAå¯åœ¨2 MSL æ—¶é—´å†…æ”¶åˆ°é‡ä¼ çš„FIN+ACKæŠ¥æ–‡æ®µã€‚Aé‡ä¼ ç¡®è®¤ï¼Œé‡æ–°å¯åŠ¨2MSLè®¡æ—¶å™¨ï¼Œä¿è¯Aå’ŒBé¡ºåˆ©è¿›å…¥CLOSEDçŠ¶æ€ï¼Œé˜²æ­¢â€œå·²å¤±æ•ˆè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€ã€‚Aç­‰å¾…2 MSLï¼Œå¯ä½¿æœ¬è¿æ¥æŒç»­æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡æ®µå…¨éƒ¨ä»ç½‘ç»œä¸­æ¶ˆå¤±ã€‚** ä»€ä¹ˆæ˜¯æ—¶é—´ä¿æ´»è®¡æ—¶å™¨ï¼Ÿä¸ºä»€ä¹ˆè®¾ç½®æ—¶é—´ä¿æ´»è®¡æ—¶å™¨ï¼Ÿæ—¶é—´ä¿æ´»è®¡æ—¶å™¨(keepalive timer)ï¼šæœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡æ•°æ®ï¼Œå°±é‡æ–°è®¾ç½®ä¿æ´»è®¡æ—¶å™¨ï¼Œæ—¶é—´2å°æ—¶ã€‚è¶…æ—¶åè¿˜æœªæ”¶åˆ°å®¢æˆ·æ•°æ®ï¼ŒæœåŠ¡å™¨å‘é€æ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥åæ¯éš”75åˆ†é’Ÿå‘é€ä¸€æ¬¡ã€‚è¿ç»­å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µå®¢æˆ·ä»æ— å“åº”ï¼ŒæœåŠ¡å™¨å…³é—­ TCP è¿æ¥ã€‚è®¾ç½®ä¿æ´»è®¡æ—¶å™¨çš„åŸå› ï¼šå¤„åœ¨ TCP è¿æ¥çŠ¶æ€æ—¶ï¼Œè‹¥Aå‡ºç°æ•…éšœï¼Œé˜²æ­¢Bä¸€ç›´ç­‰å¾…ä¸‹å»ã€‚ æ–¹æ¡†ï¼šTCPçŠ¶æ€ã€‚ç®­å¤´ï¼šçŠ¶æ€å˜è¿ã€‚ç®­å¤´æ—è¾¹çš„å­—ï¼š1.å¼•èµ·çŠ¶æ€å˜è¿çš„åŸå› ã€‚2.å‘ç”ŸçŠ¶æ€å˜è¿åå‡ºç°çš„åŠ¨ä½œã€‚ç²—å®çº¿ç®­å¤´ï¼šå®¢æˆ·è¿›ç¨‹çš„æ­£å¸¸å˜è¿ã€‚ç²—è™šçº¿ç®­å¤´ï¼šæœåŠ¡å™¨è¿›ç¨‹çš„æ­£å¸¸å˜è¿ã€‚ç»†çº¿ç®­å¤´ï¼šå¼‚å¸¸å˜è¿ã€‚ å¦å¤–â€¦ å…³äºå»ºè¿æ¥æ—¶SYNè¶…æ—¶ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ serve rç«¯æ¥åˆ°äº† clien å‘çš„SYNåå›äº†SYN-ACKå client æ‰çº¿äº†ï¼Œserver ç«¯æ²¡æœ‰æ”¶åˆ° client å›æ¥çš„ACKï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªè¿æ¥å¤„äºä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼Œå³æ²¡æˆåŠŸï¼Œä¹Ÿæ²¡å¤±è´¥ã€‚äºæ˜¯ï¼Œserver ç«¯å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°çš„ TCP ä¼šé‡å‘SYN-ACKã€‚åœ¨ Linux ä¸‹ï¼Œé»˜è®¤é‡è¯•æ¬¡æ•°ä¸º5æ¬¡ï¼Œé‡è¯•çš„é—´éš”æ—¶é—´ä»1så¼€å§‹æ¯æ¬¡éƒ½ç¿»å”®ï¼Œ5æ¬¡çš„é‡è¯•æ—¶é—´é—´éš”ä¸º1s, 2s, 4s, 8s, 16sï¼Œæ€»å…±31sï¼Œç¬¬5æ¬¡å‘å‡ºåè¿˜è¦ç­‰32séƒ½çŸ¥é“ç¬¬5æ¬¡ä¹Ÿè¶…æ—¶äº†ï¼Œæ‰€ä»¥ï¼Œæ€»å…±éœ€è¦ 1s + 2s + 4s+ 8s+ 16s + 32s = 2^6 -1 = 63sï¼ŒTCP æ‰ä¼šæŠŠæ–­å¼€è¿™ä¸ªè¿æ¥ã€‚ å…³äºSYN Flood æ”»å‡»ã€‚ä¸€äº›æ¶æ„çš„äººå°±ä¸ºæ­¤åˆ¶é€ äº† SYN Floodæ”»å‡»â€”â€”ç»™æœåŠ¡å™¨å‘äº†ä¸€ä¸ªSYNåï¼Œå°±ä¸‹çº¿äº†ï¼Œäºæ˜¯æœåŠ¡å™¨éœ€è¦é»˜è®¤ç­‰63sæ‰ä¼šæ–­å¼€è¿æ¥ï¼Œè¿™æ ·ï¼Œæ”»å‡»è€…å°±å¯ä»¥æŠŠæœåŠ¡å™¨çš„SYNè¿æ¥çš„é˜Ÿåˆ—è€—å°½ï¼Œè®©æ­£å¸¸çš„è¿æ¥è¯·æ±‚ä¸èƒ½å¤„ç†ã€‚äºæ˜¯ï¼ŒLinux ä¸‹ç»™äº†ä¸€ä¸ªå« tcp_syncookies çš„å‚æ•°æ¥åº”å¯¹è¿™ä¸ªäº‹â€”â€”å½“SYNé˜Ÿåˆ—æ»¡äº†åï¼ŒTCP ä¼šé€šè¿‡æºåœ°å€ç«¯å£ã€ç›®æ ‡åœ°å€ç«¯å£å’Œæ—¶é—´æˆ³æ‰“é€ å‡ºä¸€ä¸ªç‰¹åˆ«çš„ Sequence Number å‘å›å»ï¼ˆåˆå«cookieï¼‰ï¼Œå¦‚æœæ˜¯æ”»å‡»è€…åˆ™ä¸ä¼šæœ‰å“åº”ï¼Œå¦‚æœæ˜¯æ­£å¸¸è¿æ¥ï¼Œåˆ™ä¼šæŠŠè¿™ä¸ª SYN Cookieå‘å›æ¥ï¼Œç„¶åæœåŠ¡ç«¯å¯ä»¥é€šè¿‡ cookie å»ºè¿æ¥ï¼ˆå³ä½¿ä½ ä¸åœ¨SYNé˜Ÿåˆ—ä¸­ï¼‰ã€‚è¯·æ³¨æ„ï¼Œè¯·å…ˆåƒä¸‡åˆ«ç”¨ tcp_syncookiesæ¥å¤„ç†æ­£å¸¸çš„å¤§è´Ÿè½½çš„è¿æ¥çš„æƒ…å†µã€‚å› ä¸ºï¼ŒSYN Cookiesæ˜¯å¦¥åç‰ˆçš„ TCP åè®®ï¼Œå¹¶ä¸ä¸¥è°¨ã€‚å¯¹äºæ­£å¸¸çš„è¯·æ±‚ï¼Œä½ åº”è¯¥è°ƒæ•´ä¸‰ä¸ª TCP å‚æ•°å¯ä¾›ä½ é€‰æ‹©: tcp_synack_retries å¯ä»¥ç”¨ä»–æ¥å‡å°‘é‡è¯•æ¬¡æ•°ï¼› tcp_max_syn_backlogï¼Œå¯ä»¥å¢å¤§SYNè¿æ¥æ•°ï¼› tcp_abort_on_overflow å¤„ç†ä¸è¿‡æ¥å¹²è„†å°±ç›´æ¥æ‹’ç»è¿æ¥äº†ã€‚ å…³äºISNçš„åˆå§‹åŒ–ã€‚ISNæ˜¯ä¸èƒ½ hard code(ç¡¬ç¼–ç )ï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜çš„â€”â€”æ¯”å¦‚ï¼šå¦‚æœè¿æ¥å»ºå¥½åå§‹ç»ˆç”¨1æ¥åšISNï¼Œå¦‚æœ client å‘äº†30ä¸ª segment è¿‡å»ï¼Œä½†æ˜¯ç½‘ç»œæ–­äº†ï¼Œäºæ˜¯ client é‡è¿ï¼Œåˆç”¨äº†1åšISNï¼Œä½†æ˜¯ä¹‹å‰è¿æ¥çš„é‚£äº›åŒ…åˆ°äº†ï¼Œäºæ˜¯å°±è¢«å½“æˆäº†æ–°è¿æ¥çš„åŒ…ï¼Œæ­¤æ—¶ï¼Œclient çš„Sequence Number å¯èƒ½æ˜¯3ï¼Œè€Œ Server ç«¯è®¤ä¸ºclient ç«¯çš„è¿™ä¸ªå·æ˜¯30äº†ã€‚å…¨ä¹±äº†ã€‚RFC793ä¸­è¯´ï¼ŒISNä¼šå’Œä¸€ä¸ªå‡çš„æ—¶é’Ÿç»‘åœ¨ä¸€èµ·ï¼Œè¿™ä¸ªæ—¶é’Ÿä¼šåœ¨æ¯4å¾®ç§’å¯¹ISNåšåŠ ä¸€æ“ä½œï¼Œç›´åˆ°è¶…è¿‡2^32ï¼Œåˆä»0å¼€å§‹ã€‚è¿™æ ·ï¼Œä¸€ä¸ªISNçš„å‘¨æœŸå¤§çº¦æ˜¯4.55ä¸ªå°æ—¶ã€‚å› ä¸ºï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„ TCP Segment åœ¨ç½‘ç»œä¸Šçš„å­˜æ´»æ—¶é—´ä¸ä¼šè¶…è¿‡Maximum Segment Lifetimeï¼ˆç¼©å†™ä¸ºMSL - Wikipediaè¯­æ¡ï¼‰ï¼Œæ‰€ä»¥ï¼Œåªè¦MSLçš„å€¼å°äº4.55å°æ—¶ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ä¸ä¼šé‡ç”¨åˆ°ISNã€‚ å…³äºMSLå’ŒTIME_WAITã€‚é€šè¿‡ä¸Šé¢çš„ISNçš„æè¿°ï¼Œç›¸ä¿¡ä½ ä¹ŸçŸ¥é“MSLæ˜¯æ€ä¹ˆæ¥çš„äº†ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨ TCP çš„çŠ¶æ€å›¾ä¸­ï¼Œä»TIME_WAITçŠ¶æ€åˆ°CLOSEDçŠ¶æ€ï¼Œæœ‰ä¸€ä¸ªè¶…æ—¶è®¾ç½®ï¼Œè¿™ä¸ªè¶…æ—¶è®¾ç½®æ˜¯ 2*MSLï¼ˆRFC793å®šä¹‰äº†MSLä¸º2åˆ†é’Ÿï¼ŒLinux è®¾ç½®æˆäº†30sï¼‰ä¸ºä»€ä¹ˆè¦è¿™æœ‰TIME_WAITï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ç»™è½¬æˆCLOSEDçŠ¶æ€å‘¢ï¼Ÿä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š TIME_WAITç¡®ä¿æœ‰è¶³å¤Ÿçš„æ—¶é—´è®©å¯¹ç«¯æ”¶åˆ°äº†ACKï¼Œå¦‚æœè¢«åŠ¨å…³é—­çš„é‚£æ–¹æ²¡æœ‰æ”¶åˆ°ACKï¼Œå°±ä¼šè§¦å‘è¢«åŠ¨ç«¯é‡å‘FINï¼Œä¸€æ¥ä¸€å»æ­£å¥½2ä¸ªMSL; æœ‰è¶³å¤Ÿçš„æ—¶é—´è®©è¿™ä¸ªè¿æ¥ä¸ä¼šè·Ÿåé¢çš„è¿æ¥æ··åœ¨ä¸€èµ·ï¼ˆä½ è¦çŸ¥é“ï¼Œæœ‰äº›è‡ªåšä¸»å¼ çš„è·¯ç”±å™¨ä¼šç¼“å­˜IPæ•°æ®åŒ…ï¼Œå¦‚æœè¿æ¥è¢«é‡ç”¨äº†ï¼Œé‚£ä¹ˆè¿™äº›å»¶è¿Ÿæ”¶åˆ°çš„åŒ…å°±æœ‰å¯èƒ½ä¼šè·Ÿæ–°è¿æ¥æ··åœ¨ä¸€èµ·ï¼‰ã€‚ä½ å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ã€ŠTIME_WAIT and its design implications for protocols and scalable client server systemsã€‹ å‚è€ƒé“¾æ¥ï¼šhttp://www.imooc.com/article/17411 ä½œè€…ï¼šæ±Ÿæˆ·å·ç§‹é£http://www.jellythink.com/archives/705 ä½œè€…ï¼šæœå†»æƒ³http://www.cnblogs.com/lshs/p/6038458.html ä½œè€…ï¼šlshs]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>TCP</tag>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºTCPåè®®]]></title>
    <url>%2F2017%2F10%2F18%2Fabout_tcp%2F</url>
    <content type="text"><![CDATA[å…³äºTCPTCP ç®€ä»‹TCPåè®®å…·ä½“æ˜¯ä»€ä¹ˆï¼Œä¸èµ˜è¿°ï¼Œç™¾åº¦ä¹‹ã€‚ æˆ‘ä»¬ç»å¸¸å¬äººè¯´ TCP æ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„(connection-oriented)ã€å¯é çš„(reliable)ã€å­—èŠ‚æµå¼(byte stream)ä¼ è¾“åè®®ï¼ŒTCP çš„è¿™ä¸‰ä¸ªç‰¹æ€§è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ é¢å‘è¿æ¥ï¼šåœ¨åº”ç”¨ TCP åè®®è¿›è¡Œé€šä¿¡ä¹‹å‰åŒæ–¹é€šå¸¸éœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹ TCP è¿æ¥ï¼Œè¿æ¥å»ºç«‹åæ‰èƒ½è¿›è¡Œæ­£å¸¸çš„æ•°æ®ä¼ è¾“ï¼Œå› æ­¤å¹¿æ’­å’Œå¤šæ’­ä¸ä¼šæ‰¿è½½åœ¨ TCP åè®®ä¸Šã€‚(è°·æ­Œæäº¤äº†ä¸€ä¸ª RFC æ–‡æ¡£ï¼Œå»ºè®®åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å…è®¸ SYN æ•°æ®åŒ…ä¸­å¸¦æ•°æ®ï¼Œå³ TFO(TCP Fast Open)ï¼Œç›®å‰ ubuntu 14.04å·²ç»æ”¯æŒè¯¥ TFO åŠŸèƒ½)ã€‚ä½†æ˜¯åŒæ—¶é¢å‘è¿æ¥çš„ç‰¹æ€§ç»™ TCP å¸¦æ¥äº†å¤æ‚çš„è¿æ¥ç®¡ç†ä»¥åŠç”¨äºæ£€æµ‹è¿æ¥çŠ¶æ€çš„å­˜æ´»æ£€æµ‹æœºåˆ¶ã€‚ å¯é æ€§ï¼šç”±äº TCP å¤„äºå¤šè·³é€šä¿¡çš„ IP å±‚ä¹‹ä¸Šï¼Œè€Œ IP å±‚å¹¶ä¸æä¾›å¯é çš„ä¼ è¾“ï¼Œå› æ­¤åœ¨TCPå±‚çœ‹æ¥å°±æœ‰å››ç§å¸¸è§ä¼ è¾“é”™è¯¯é—®é¢˜ï¼Œåˆ†åˆ«æ˜¯æ¯”ç‰¹é”™è¯¯(packet bit errors)ã€åŒ…ä¹±åº(packet reordering)ã€åŒ…é‡å¤(packet duplication)ã€ä¸¢åŒ…(packet erasureæˆ–ç§°ä¸ºpacket drops)ï¼ŒTCP è¦æå¯é çš„ä¼ è¾“ï¼Œå°±éœ€è¦æœ‰é¢å¤–çš„æœºåˆ¶å¤„ç†è¿™å‡ ç§é”™è¯¯ã€‚å› æ­¤å¯é æ€§ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š TCP é€šè¿‡è¶…æ—¶é‡ä¼ å’Œå¿«é€Ÿé‡ä¼ ä¸¤ä¸ªå¸¸è§æ‰‹æ®µæ¥ä¿è¯æ•°æ®åŒ…çš„æ­£ç¡®ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯è¯´æ¥æ”¶ç«¯åœ¨æ²¡æœ‰æ”¶åˆ°æ•°æ®åŒ…æˆ–è€…æ”¶åˆ°é”™è¯¯çš„æ•°æ®åŒ…çš„æ—¶å€™ä¼šè§¦å‘å‘é€ç«¯çš„æ•°æ®åŒ…é‡ä¼ (å¤„ç†æ¯”ç‰¹é”™è¯¯å’Œä¸¢åŒ…)ã€‚ TCP æ¥æ”¶ç«¯ä¼šç¼“å­˜æ¥æ”¶åˆ°çš„ä¹±åºåˆ°è¾¾æ•°æ®ï¼Œé‡æ–°æ’åºåå†å‘åº”ç”¨å±‚æä¾›æœ‰åºçš„æ•°æ®(å¤„ç†åŒ…ä¹±åº)ã€‚ TCP å‘é€ç«¯ä¼šç»´æŒä¸€ä¸ªå‘é€ã€çª—å£ã€åŠ¨æ€çš„è°ƒæ•´å‘é€é€Ÿç‡ä»¥é€‚ç”¨æ¥æ”¶ç«¯ç¼“å­˜é™åˆ¶å’Œç½‘ç»œæ‹¥å¡æƒ…å†µï¼Œé¿å…äº†ç½‘ç»œæ‹¥å¡æˆ–è€…æ¥æ”¶ç«¯ç¼“å­˜æ»¡è€Œå¤§é‡ä¸¢åŒ…çš„é—®é¢˜(é™ä½ä¸¢åŒ…ç‡)ã€‚å› æ­¤å¯é æ€§éœ€è¦ TCP åè®®å…·æœ‰è¶…æ—¶ä¸é‡ä¼ ç®¡ç†ã€çª—å£ç®¡ç†ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ç­‰åŠŸèƒ½ã€‚å¦å¤– TFO ä¸‹ TCP æœ‰å¯èƒ½å‘åº”ç”¨å±‚æä¾›é‡å¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸å¯é ä¼ è¾“ï¼Œä½†æ˜¯åªä¼šå‘ç”Ÿåœ¨è¿æ¥å»ºç«‹é˜¶æ®µã€‚ å­—èŠ‚æµå¼ï¼šåº”ç”¨å±‚å‘é€çš„æ•°æ®ä¼šåœ¨ TCP çš„å‘é€ç«¯ç¼“å­˜èµ·æ¥ï¼Œç»Ÿä¸€åˆ†ç‰‡(ä¾‹å¦‚ä¸€ä¸ªåº”ç”¨å±‚çš„æ•°æ®åŒ…åˆ†æˆä¸¤ä¸ª TCP åŒ…)æˆ–è€…æ‰“åŒ…(ä¾‹å¦‚ä¸¤ä¸ªæˆ–è€…å¤šä¸ªåº”ç”¨å±‚çš„æ•°æ®åŒ…æ‰“åŒ…æˆä¸€ä¸ª TCP æ•°æ®åŒ…)å‘é€ï¼Œåˆ°æ¥æ”¶ç«¯çš„æ—¶å€™æ¥æ”¶ç«¯ä¹Ÿæ˜¯ç›´æ¥æŒ‰ç…§å­—èŠ‚æµå°†æ•°æ®ä¼ é€’ç»™åº”ç”¨å±‚ã€‚ä½œä¸ºå¯¹æ¯”ï¼ŒåŒæ ·æ˜¯ä¼ è¾“å±‚çš„åè®®ï¼ŒUDP å¹¶ä¸ä¼šå¯¹åº”ç”¨å±‚çš„æ•°æ®åŒ…è¿›è¡Œæ‰“åŒ…å’Œåˆ†ç‰‡çš„æ“ä½œï¼Œä¸€èˆ¬ä¸€ä¸ªåº”ç”¨å±‚çš„æ•°æ®åŒ…å°±å¯¹åº”ä¸€ä¸ª UDP åŒ…ã€‚è¿™ä¸ªä¹Ÿæ˜¯ä¼´éš TCP çª—å£ç®¡ç†ã€æ‹¥å¡æ§åˆ¶ç­‰ã€‚ TCP çš„å°è£…å’Œåè®®å¤´æ ¼å¼TCP å°è£…åœ¨IPæŠ¥æ–‡ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º TCP çš„åè®®å¤´æ ¼å¼ Source Port(æºç«¯å£å·)å’ŒDestination Port(ç›®æ ‡ç«¯å£å·):å„2å­—èŠ‚ç”¨äºåŒºåˆ«ä¸»æœºä¸­çš„ä¸åŒè¿›ç¨‹ã€‚IP åœ°å€ç”¨æ¥åŒºåˆ†ä¸åŒçš„ä¸»æœºã€‚å¦‚æ­¤ï¼Œæº IP åœ°å€+æºç«¯å£å·ä¸ç›®æ ‡ IP åœ°å€+ç›®æ ‡ç«¯å£å·å°±èƒ½ç¡®å®šå”¯ä¸€çš„ TCP è¿æ¥ï¼› Sequence Number(åºåˆ—å·&amp;å°åŒ…åºå·):4å­—èŠ‚å®šä¹‰äº†æŒ‡æ´¾ç»™æœ¬æŠ¥æ–‡æ®µç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„ç¼–å·ã€‚ç”¨æ¥æ ‡è¯†ä»TCPå‘é€ç«¯å‘TCPæ¥æ”¶ç«¯å‘é€çš„æ•°æ®å­—èŠ‚æµï¼Œå®ƒè¡¨ç¤ºåœ¨è¿™ä¸ªæŠ¥æ–‡æ®µä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚åœ¨æ•°æ®æµä¸­çš„åºå·ã€‚ç”±äº TCP å°åŒ…å¿…é¡»è¦å¸¦å…¥ IP å°åŒ…å½“ä¸­ï¼Œæ‰€ä»¥å¦‚æœ TCP æ•°æ®å¤ªå¤§æ—¶(å¤§äº IP å°åŒ…çš„å®¹è®¸ç¨‹åº¦)ï¼Œå°±å¾—è¦è¿›è¡Œåˆ†æ®µã€‚è¿™ä¸ª Sequence Number å°±æ˜¯è®°å½•æ¯ä¸ªå°åŒ…çš„åºå·ï¼Œå¯ä»¥è®©æ”¶æ”¶ç«¯é‡æ–°å°† TCP çš„æ•°æ®ç»„åˆèµ·æ¥ã€‚å»ºç«‹è¿æ¥æ—¶ï¼ŒåŒæ–¹ä½¿ç”¨å„è‡ªçš„éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿäº§ä¸€ä¸ªåˆå§‹åºå·(inital squence numberï¼ŒISN)ï¼Œé€šå¸¸ä¸¤ä¸ªæ–¹å‘ä¸Šçš„ ISN æ˜¯ä¸åŒçš„ã€‚ä¸»è¦ç”¨æ¥è§£å†³ç½‘ç»œæŠ¥ä¹±åº(reordering)çš„é—®é¢˜ã€‚ Acknowledgment Number(ç¡®è®¤å·):4å­—èŠ‚ç¡®è®¤å·åŒ…å«å‘é€ç¡®è®¤ä¸€ç«¯æ‰€æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚å³å¦‚æœæŠ¥æ–‡æ®µçš„æ¥æ”¶æ–¹æˆåŠŸåœ°æ¥æ”¶äº†å¯¹æ–¹å‘æ¥çš„ç¼–å·ä¸ºxçš„å­—èŠ‚ï¼Œé‚£ä¹ˆå®ƒå°±è¿”å› x+1 ä½œä¸ºç¡®è®¤å·ã€‚ä¸è¿‡ï¼Œåªæœ‰å½“ç¼–ç ä½ä¸­çš„ACKä¸º1æ—¶ï¼Œè¯¥ç¡®è®¤åºåˆ—å·çš„å­—æ®µæ‰æœ‰æ•ˆã€‚æ‰€ä»¥ï¼Œå½“ client ç«¯æ”¶åˆ°æœåŠ¡ç«¯å“åº”çš„è¿™ä¸ªç¡®è®¤ç æ—¶ï¼Œå°±èƒ½ç¡®å®šä¹‹å‰å‘å‡ºçš„å°åŒ…æ•°æ®å·²ç»è¢«å®Œæ•´çš„æ”¶åˆ°äº†ã€‚ Data Offset(æ•°æ®åç§»):4æ¯”ç‰¹å’ŒIPæ•°æ®åŒ…å¤´éƒ¨ä¸€æ ·ï¼ŒTCPå¤´éƒ¨ä¹Ÿæœ‰ä¸ªOptionså­—æ®µï¼Œé•¿åº¦å¯å˜ã€‚ä¸ºäº†ç¡®è®¤æ•´ä¸ªTCPåŒ…å¤§å°ï¼Œå°±éœ€è¦è¿™ä¸ªæ ‡å¿—æ¥è¯´æ˜æ•´ä¸ªå°åŒ…åŒºæ®µçš„èµ·å§‹ä½ç½®ã€‚åç§»é‡æ¯å¢åŠ 1ï¼ŒæŠ¥å¤´é•¿åº¦å°±å¢åŠ 4å­—èŠ‚ï¼Œæœ€å°ä¸º5ï¼Œæœ€å¤§15ï¼Œå³4*15=60ä¸ªå­—èŠ‚çš„å¤´éƒ¨é•¿åº¦ã€‚æ²¡æœ‰ä»»ä½•é€‰é¡¹å­—æ®µ(TCP option)çš„TCPå¤´éƒ¨é•¿åº¦ä¸º20å­—èŠ‚ã€‚ reserved(ä¿ç•™å­—æ®µ):4æ¯”ç‰¹ä¾›å°†æ¥ä½¿ç”¨ã€‚ Code Bits(ç¼–ç ä½):8æ¯”ç‰¹ CWR(Congestion Window Reduce):æ‹¥å¡çª—å£å‡å°‘æ ‡å¿—,ç”±å‘é€ä¸»æœºè®¾ç½®ï¼Œç”¨æ¥è¡¨æ˜å®ƒæ¥æ”¶åˆ°äº†è®¾ç½®ECEæ ‡å¿—çš„TCPåŒ…ï¼Œå‘é€ç«¯é€šè¿‡é™ä½å‘é€çª—å£çš„å¤§å°æ¥é™ä½å‘é€é€Ÿç‡ï¼› ECE(ECN Echo)ï¼šè¢«ç”¨æ¥åœ¨TCP3æ¬¡æ¡æ‰‹æ—¶è¡¨æ˜ä¸€ä¸ªTCPç«¯æ˜¯å…·å¤‡ECNåŠŸèƒ½çš„ï¼Œå¹¶ä¸”è¡¨æ˜æ¥æ”¶åˆ°çš„TCPåŒ…çš„IPå¤´éƒ¨çš„ECNè¢«è®¾ç½®ä¸º11ï¼› URG(urgent):å–å€¼1æ—¶ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µ(Urgent Pointer)æœ‰æ•ˆ,ä»£è¡¨è¯¥å°åŒ…ä¸ºç´§æ€¥å°åŒ…ã€‚ç”¨æ¥ä¿è¯TCPè¿æ¥ä¸è¢«ä¸­æ–­ï¼Œå¹¶ä¸”ç£ä¿ƒä¸­é—´å±‚è®¾å¤‡è¦å°½å¿«å¤„ç†è¿™äº›æ•°æ®ï¼› ACK(Acknowledge):å–å€¼1ä»£è¡¨Acknowledgment Numberå­—æ®µæœ‰æ•ˆï¼Œè¿™æ˜¯ä¸€ä¸ªç¡®è®¤çš„TCPåŒ…ï¼Œå–å€¼0åˆ™ä¸æ˜¯ç¡®è®¤åŒ…ã€‚åç»­æ–‡ç« ä»‹ç»ä¸­å½“ACKæ ‡å¿—ä½æœ‰æ•ˆçš„æ—¶å€™æˆ‘ä»¬ç§°å‘¼è¿™ä¸ªåŒ…ä¸ºACKåŒ…ï¼Œä½¿ç”¨å¤§å†™çš„ACKç§°å‘¼ã€‚ PSH:(Push):å–å€¼1æ—¶ï¼Œä»£è¡¨è¦æ±‚å¯¹æ–¹ç«‹å³ä¼ é€ç¼“å†²åŒºå†…çš„å…¶ä»–å¯¹åº”å°åŒ…è½¬ç”±åº”ç”¨å¤„ç†ï¼Œè€Œä¸ç”¨è¿›è¡Œé˜Ÿåˆ—å¤„ç†ï¼Œæ— éœ€ç­‰ç¼“å†²æ»¡äº†å†ä¼ é€ã€‚ RST(Reset)ï¼šç”¨äºå¤ä½ç›¸åº”çš„TCPè¿æ¥ã€‚é€šå¸¸åœ¨å‘ç”Ÿå¼‚å¸¸æˆ–è€…é”™è¯¯çš„æ—¶å€™ä¼šè§¦å‘å¤ä½TCPè¿æ¥,ä¹Ÿè¢«ç”¨æ¥æ‹’ç»é”™è¯¯å’Œéæ³•çš„æ•°æ®åŒ…ã€‚å¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿è¾“è¿æ¥ã€‚ SYN(Synchronize)ï¼šè¡¨ç¤ºåŒæ­¥åºå·ï¼Œä»…åœ¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹TCPè¿æ¥æ—¶æœ‰æ•ˆï¼Œç”¨æ¥å»ºç«‹è¿æ¥(SYNç½®ä¸º1ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥å—æŠ¥æ–‡)ã€‚SYNæ ‡å¿—ä½å’ŒACKæ ‡å¿—ä½æ­é…ä½¿ç”¨ã€‚å½“è¿æ¥è¯·æ±‚çš„æ—¶å€™ï¼ŒSYN=1ï¼ŒACK=0ï¼›è¿æ¥è¢«å“åº”çš„æ—¶å€™ï¼ŒSYN=1ï¼ŒACK=1ï¼›è¿™ä¸ªæ ‡å¿—çš„æ•°æ®åŒ…ç»å¸¸è¢«ç”¨æ¥è¿›è¡Œç«¯å£æ‰«æã€‚æ‰«æè€…å‘é€ä¸€ä¸ªåªæœ‰SYNçš„æ•°æ®åŒ…ï¼Œå¦‚æœå¯¹æ–¹ä¸»æœºå“åº”äº†ä¸€ä¸ªæ•°æ®åŒ…å›æ¥ï¼Œå°±è¡¨æ˜è¿™å°ä¸»æœºå­˜åœ¨è¿™ä¸ªç«¯å£ï¼›ä½†æ˜¯ç”±äºè¿™ç§æ‰«ææ–¹å¼åªæ˜¯è¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå› æ­¤è¿™ç§æ‰«æçš„æˆåŠŸè¡¨ç¤ºè¢«æ‰«æçš„æœºå™¨ä¸å¾ˆå®‰å…¨ï¼Œä¸€å°å®‰å…¨çš„ä¸»æœºå°†ä¼šå¼ºåˆ¶è¦æ±‚ä¸€ä¸ªè¿æ¥ä¸¥æ ¼çš„è¿›è¡ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼›å½“è¿™ä¸ªSYNæ ‡å¿—ä½æœ‰æ•ˆçš„æ—¶å€™æˆ‘ä»¬ç§°å‘¼è¿™ä¸ªåŒ…ä¸ºSYNåŒ…ã€‚ FIN(Finish)ï¼šå¸¦æœ‰è¯¥æ ‡å¿—ç½®ä½çš„æ•°æ®åŒ…ç”¨æ¥ç»“æŸä¸€ä¸ªTCPä¼šè¯(è¿æ¥)ï¼Œä½†å¯¹åº”ç«¯å£ä»å¤„äºå¼€æ”¾çŠ¶æ€ï¼Œå‡†å¤‡æ¥æ”¶åç»­æ•°æ®ã€‚å½“FINæ ‡å¿—æœ‰æ•ˆçš„æ—¶å€™æˆ‘ä»¬ç§°å‘¼è¿™ä¸ªåŒ…ä¸ºFINåŒ…ã€‚è¿™ä¸ªæ ‡å¿—çš„æ•°æ®åŒ…ä¹Ÿç»å¸¸è¢«ç”¨äºè¿›è¡Œç«¯å£æ‰«æã€‚ Window(æ»‘åŠ¨çª—å£):2å­—èŠ‚ç”¨æ¥æ§åˆ¶å¯¹æ–¹å‘é€çš„æ•°æ®é‡ï¼Œå¯ä»¥å‘ŠçŸ¥å¯¹æ–¹ç›®å‰æœ¬èº«æœ‰çš„ç¼“å†²å™¨å®¹é‡(Receive Buffer) è¿˜å¯ä»¥æ¥æ”¶å°åŒ…ã€‚å½“ Window=0 æ—¶ï¼Œä»£è¡¨ç¼“å†²å™¨å·²ç»é¢æ»¡ï¼Œæ‰€ä»¥åº”è¯¥è¦æš‚åœä¼ è¾“æ•°æ®ã€‚ä¼ è¾“æ•°æ®å•ä½ä¸ºå­—èŠ‚ã€‚TCPè¿æ¥çš„ä¸€ç«¯æ ¹æ®è®¾ç½®çš„ç¼“å­˜ç©ºé—´å¤§å°ç¡®å®šè‡ªå·±çš„æ¥æ”¶çª—å£å¤§å°ï¼Œç„¶åé€šçŸ¥å¯¹æ–¹ä»¥ç¡®å®šå¯¹æ–¹çš„å‘é€çª—å£çš„ä¸Šé™,è¿™ä¸ªå€¼æ˜¯æœ¬æœºæœŸæœ›ä¸€æ¬¡æ¥æ”¶çš„å­—èŠ‚æ•°ã€‚ç”¨äºTCPçš„æµé‡æ§åˆ¶ï¼›åœ¨TCPçš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯éƒ½ä¼šç»´æŒä¸€ä¸ªçª—å£ï¼Œå› ä¸ºä¸€ä¸ª TCP è¿æ¥æ˜¯åŒå‘çš„ï¼Œå› æ­¤å®é™…ä¸Šä¸€ä¸ª TCP è¿æ¥ä¸€å…±æœ‰å››ä¸ªçª—å£ã€‚æ­¤å¤„æˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸ªå‘é€ç«¯çš„çª—å£å¦‚ä¸‹ã€‚å›¾ä¸­çš„æ•°å­—è¡¨ç¤º byte ä¹Ÿå°±æ˜¯å’Œä¸Šé¢ä»‹ç»çš„TCPåè®®å¤´ä¸­çš„SNæ˜¯å¯¹åº”çš„ï¼Œ3å· byte ä»¥åŠ3å·ä¹‹å‰çš„æ•°æ®è¡¨ç¤ºå·²ç»å‘é€å¹¶ä¸”æ”¶åˆ°äº†æ¥æ”¶ç«¯çš„ACKç¡®è®¤åŒ…çš„æ•°æ®ï¼›4ã€5ã€6ä¸‰ä¸ª byte è¡¨ç¤ºå½“å‰å¯ä»¥å‘é€çš„æ•°æ®åŒ…ï¼Œä¹Ÿæœ‰å¯èƒ½å·²ç»å·²ç»å‘é€äº†ä½†æ˜¯è¿˜æ²¡æœ‰æ”¶åˆ°ACKç¡®è®¤åŒ…ï¼›7å· byte åŠä¹‹åçš„æ•°æ®è¡¨ç¤ºä¸ºäº†æ§åˆ¶å‘é€é€Ÿç‡æš‚æ—¶ä¸èƒ½å‘é€çš„æ•°æ®ã€‚å…¶ä¸­4-6è¿™ä¸‰ä¸ª byte å°±ç§°å‘¼ä¸ºçª—å£å¤§å°(window size)ã€‚å½“ TCP è¿æ¥å»ºç«‹çš„æ—¶å€™ï¼ŒåŒæ–¹ä¼šé€šè¿‡ TCP å¤´ä¸­çš„çª—å£å¤§å°å­—æ®µå‘å¯¹æ–¹é€šå‘Šè‡ªå·±æ¥æ”¶ç«¯çš„çª—å£å¤§å°ï¼Œå‘é€ç«¯ä¾æ®æ¥æ”¶ç«¯é€šå‘Šçš„çª—å£å¤§å°æ¥è®¾ç½®å‘é€ç«¯çš„å‘é€çª—å£å¤§å°ï¼Œå¦å¤–åœ¨æ‹¥å¡æ§åˆ¶çš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡è°ƒæ•´å‘é€ç«¯çš„å‘é€çª—å£æ¥è°ƒæ•´å‘é€é€Ÿç‡çš„ã€‚çª—å£è¿™ä¸ªè¯çš„æ¥æºå°±æ˜¯å½“æˆ‘ä»¬ä»è¿™ä¸€ä¸ªæ•°æ®åºåˆ—ä¸­å•ç‹¬çœ‹4ã€5ã€6è¿™å‡ ä¸ª byte çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»¿ä½›æ˜¯ä»ä¸€ä¸ªâ€çª—å£â€ä¸­è§‚å¯Ÿçš„ä¸€æ ·ã€‚ Checksum(æ ¡éªŒä½):2å­—èŠ‚å‘é€ç«¯åŸºäºæ•°æ®å†…å®¹è®¡ç®—ä¸€ä¸ªæ•°å€¼ï¼Œæ¥æ”¶ç«¯è¦ä¸å‘é€ç«¯æ•°å€¼ç»“æœå®Œå…¨ä¸€æ ·ï¼Œæ‰èƒ½è¯æ˜æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚æ¥æ”¶ç«¯checksumæ ¡éªŒå¤±è´¥çš„æ—¶å€™ä¼šç›´æ¥ä¸¢æ‰è¿™ä¸ªæ•°æ®åŒ…ã€‚CheckSumæ˜¯æ ¹æ®ä¼ªå¤´+TCPå¤´+TCPæ•°æ®ä¸‰éƒ¨åˆ†è¿›è¡Œè®¡ç®—çš„ã€‚å¦å¤–å¯¹äºå¤§çš„æ•°æ®åŒ…ï¼Œchecksumå¹¶ä¸èƒ½å¯é çš„ååº”æ¯”ç‰¹é”™è¯¯ï¼Œåº”ç”¨å±‚åº”è¯¥å†æ·»åŠ è‡ªå·±çš„æ ¡éªŒæ–¹å¼ï¼› Urgent Pointer(ç´§æ€¥æŒ‡é’ˆ):2å­—èŠ‚æŒ‡å‘åé¢æ˜¯ä¼˜å…ˆæ•°æ®çš„å­—èŠ‚,æŒ‡å‡ºåœ¨æœ¬æŠ¥æ–‡æ®µä¸­çš„ç´§æ€¥æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼Œåœ¨URG=1æ—¶æœ‰æ•ˆã€‚å¦‚æœURGæ ‡å¿—æ²¡æœ‰è¢«è®¾ç½®ï¼Œç´§æ€¥åŸŸä½œä¸ºå¡«å……ã€‚åŠ å¿«å¤„ç†æ ‡ç¤ºä¸ºç´§æ€¥çš„æ•°æ®æ®µ; Options(é€‰é¡¹):TCPé¦–éƒ¨å¯ä»¥æœ‰å¤šè¾¾40å­—èŠ‚çš„å¯é€‰ä¿¡æ¯ï¼Œç”¨äºæŠŠé™„åŠ ä¿¡æ¯ä¼ é€’ç»™ç»ˆç‚¹ï¼Œæˆ–ç”¨æ¥å¯¹é½å…¶å®ƒé€‰é¡¹ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°å‘¼é“¾è·¯å±‚çš„å‘å‡ºå»çš„æ•°æ®åŒ…ä¸ºå¸§(frame)ï¼Œç§°å‘¼ç½‘ç»œå±‚å‘ç»™é“¾è·¯å±‚çš„æ•°æ®åŒ…ä¸ºåŒ…(packet)ï¼Œç§°å‘¼ä¼ è¾“å±‚å‘ç»™ç½‘ç»œå±‚çš„æ•°æ®åŒ…ä¸ºæ®µ(segment)ã€‚ä½†æ˜¯æ­£å¦‚æˆ‘ä»¬æè¿°æ‰€ç”¨ï¼Œæ®µã€åŒ…ã€å¸§ä¹Ÿç»å¸¸ç»Ÿç§°ä¸ºæ•°æ®åŒ…æˆ–è€…æ•°æ®æŠ¥æ–‡ã€‚å¯¹åº”ç”¨å±‚æ¥è¯´ TCP æ˜¯ä¸€ä¸ªåŒå‘å¯¹ç§°çš„å…¨åŒå·¥(full-duplex)åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´åº”ç”¨å±‚å¯ä»¥åŒæ—¶å‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®ã€‚è¿™å°±æ„å‘³ç€æ•°æ®æµåœ¨ä¸€ä¸ªæ–¹å‘ä¸Šçš„ä¼ è¾“æ˜¯ç‹¬ç«‹äºå¦ä¸€ä¸ªæ–¹å‘çš„ä¼ è¾“çš„ï¼Œæ¯ä¸ªæ–¹å‘ä¸Šéƒ½æœ‰ç‹¬ç«‹çš„SNã€‚ å‚è€ƒé“¾æ¥ï¼šhttp://www.imooc.com/article/17411 ä½œè€…ï¼šæ±Ÿæˆ·å·ç§‹é£http://www.jellythink.com/archives/705 ä½œè€…ï¼šæœå†»æƒ³http://www.cnblogs.com/lshs/p/6038458.html ä½œè€…ï¼šlshs]]></content>
      <categories>
        <category>Javaåæ—¶ä»£</category>
      </categories>
      <tags>
        <tag>TCP</tag>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ—¥è®°å¥½åƒæ²¡æœ‰æ ‡é¢˜çš„å§ï¼Ÿ]]></title>
    <url>%2F2017%2F10%2F03%2Fthere_is_no_title_in_diary%2F</url>
    <content type="text"><![CDATA[å›½åº†ä¼‘æ¯8å¤©ï¼Œèµ‹é—²åœ¨å®¶ï¼Œä¹Ÿåªæœ‰åœ¨è€å®¶çš„æ—¶å€™å¯ä»¥åšåˆ°æ™šä¸Šå…«ç‚¹ä¸ŠåºŠç¡è§‰ã€‚ã€‚é—²æ¥æ— äº‹ï¼Œä¸è®°å¾—ä¹‹å‰åœ¨å“ªé‡Œçœ‹åˆ°çš„hexoåšå®¢æ­å»ºã€‚æ˜¨å¤©ä¸‹åˆå°äº‹äº†ä¸€ä¸‹ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ã€‚ä¸­é€”é‡åˆ°è®¿é—®æœ¬ç«™æ€»æ˜¯è·³è½¬åˆ° https://someiscoding.com ï¼Œä½†è‡ªå·±æ˜æ˜æ²¡æœ‰è´­ä¹°åŸŸåï¼Œå¯¼è‡´æ¯æ¬¡DNSæœåŠ¡å™¨æ— æ³•è§£æåœ°å€ã€‚åæ¥ç´¢æ€§æŠŠGitHubä¸Šçš„è´¦æˆ·åä¿®æ”¹äº†ä¸‹ï¼Œé‡æ–°é…ç½®äº†ä¸‹_configæ–‡ä»¶ï¼Œç»ˆäºå¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚ç´§æ¥ç€å°±æ˜¯æ›´æ¢ä¸»é¢˜ï¼Œé€‰å–æ¯”è¾ƒç¨³å¦¥çš„nextä¸»é¢˜ï¼Œç½‘ä¸Šå…³äºé…ç½®nextçš„æ•™ç¨‹æ¯”è¾ƒå¤šï¼Œä¸Šæ‰‹è¿˜å¿«ä¸€äº›~å› ä¸ºä¸­é—´ä¸€ç›´ä½¿ç”¨ç»ˆç«¯ï¼Œç”¨çš„åˆæ˜¯macï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œç»ˆç«¯ä¸­è¿lså‘½ä»¤éƒ½æ— æ³•ä½¿ç”¨ï¼Œæ€»æ˜¯æç¤ºå‘½ä»¤æ— æ³•æ‰¾åˆ°ä»€ä¹ˆçš„ï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯æƒé™ä¸å¤Ÿï¼Œéœ€è¦å¼€å§‹ROOTæƒé™ã€‚åæ¥å‘ç°åˆ‡æ¢åˆ°bashä¸­å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œé»˜è®¤å¯åŠ¨çš„zshä¸è¡Œã€‚ç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œæœ‰çš„è¯´æ˜¯.zshrcæ–‡ä»¶ä¸­é…ç½®æœ‰é—®é¢˜ï¼Œå¯èƒ½æ˜¯PATHç¯å¢ƒå˜é‡æ²¡æœ‰åŒ…æ‹¬å„ç§bin&amp;sbinã€‚äºæ˜¯ï¼Œåœ¨ç»ˆç«¯echo $PATHå‘ç°æœ‰binå’Œsbinã€‚æŠ˜è…¾äº†ä¸¤ä¸ªå°æ—¶ï¼Œè¿˜æ˜¯è¯¯è§£ï¼Œï¼Œç½¢äº†ï¼Œç´¢æ€§å¤‡ä»½äº†.zshrcæ–‡ä»¶ï¼Œé‡æ–°å®‰è£…äº†oh-my-zshã€‚å—¯ï¼Œï¼Œå®Œç¾ï¼é«˜å…´ï¼ è®°ç¬¬ä¸€ç¯‡æµæ°´è´¦ã€‚]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>oh-my-zsh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[my first shot]]></title>
    <url>%2F2017%2F10%2F02%2Fmy_first_shot%2F</url>
    <content type="text"><![CDATA[hello world!from Shang.]]></content>
      <categories>
        <category>å‘“è¯­</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F10%2F02%2Fhello_world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <tags>
        <tag>diary</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºæˆ‘]]></title>
    <url>%2Fabout%2Findex.html</url>
    <content type="text"><![CDATA[åŠè·¯å‡ºå®¶çš„åˆçº§ç¨‹åºå‘˜å…¨é©¬PB324Finisherä¿¡æ¯æ”¶é›†çˆ±å¥½è€…è½»å¾®æ•°æ®æ´ç™–ç»ˆç”Ÿå­¦ä¹ è€…â€¦å—¯ï¼Œæˆ‘æ°¸è¿œæ˜¯äººæ°‘çš„å°å­¦ç”Ÿ~471293694@qq.com]]></content>
  </entry>
  <entry>
    <title><![CDATA[categories]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[tags]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
